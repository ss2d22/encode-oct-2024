{
  "version": 3,
  "sources": ["../../@stellar/freighter-api/build/webpack:/freighterApi/webpack/universalModuleDefinition", "../../@stellar/freighter-api/build/webpack:/freighterApi/webpack/bootstrap", "../../@stellar/freighter-api/build/webpack:/freighterApi/src/Users/piyalbasu/Stellar/lyra/@shared/constants/services.ts", "../../@stellar/freighter-api/build/webpack:/freighterApi/webpack/runtime/define property getters", "../../@stellar/freighter-api/build/webpack:/freighterApi/webpack/runtime/hasOwnProperty shorthand", "../../@stellar/freighter-api/build/webpack:/freighterApi/webpack/runtime/make namespace object", "../../@stellar/freighter-api/build/webpack:/freighterApi/src/Users/piyalbasu/Stellar/lyra/@shared/api/helpers/extensionMessaging.ts", "../../@stellar/freighter-api/build/webpack:/freighterApi/src/Users/piyalbasu/Stellar/lyra/@shared/api/external.ts", "../../@stellar/freighter-api/build/webpack:/freighterApi/src/Users/piyalbasu/Stellar/lyra/@stellar/freighter-api/src/getAddress.ts", "../../@stellar/freighter-api/build/webpack:/freighterApi/src/Users/piyalbasu/Stellar/lyra/@stellar/freighter-api/src/signTransaction.ts", "../../@stellar/freighter-api/build/webpack:/freighterApi/src/Users/piyalbasu/Stellar/lyra/@stellar/freighter-api/src/signMessage.ts", "../../@stellar/freighter-api/build/webpack:/freighterApi/src/Users/piyalbasu/Stellar/lyra/@stellar/freighter-api/src/signAuthEntry.ts", "../../@stellar/freighter-api/build/webpack:/freighterApi/src/Users/piyalbasu/Stellar/lyra/@stellar/freighter-api/src/isConnected.ts", "../../@stellar/freighter-api/build/webpack:/freighterApi/src/Users/piyalbasu/Stellar/lyra/@stellar/freighter-api/src/getNetwork.ts", "../../@stellar/freighter-api/build/webpack:/freighterApi/src/Users/piyalbasu/Stellar/lyra/@stellar/freighter-api/src/getNetworkDetails.ts", "../../@stellar/freighter-api/build/webpack:/freighterApi/src/Users/piyalbasu/Stellar/lyra/@stellar/freighter-api/src/isAllowed.ts", "../../@stellar/freighter-api/build/webpack:/freighterApi/src/Users/piyalbasu/Stellar/lyra/@stellar/freighter-api/src/setAllowed.ts", "../../@stellar/freighter-api/build/webpack:/freighterApi/src/Users/piyalbasu/Stellar/lyra/@stellar/freighter-api/src/requestAccess.ts", "../../@stellar/freighter-api/build/webpack:/freighterApi/src/Users/piyalbasu/Stellar/lyra/@stellar/freighter-api/src/watchWalletChanges.ts", "../../@stellar/freighter-api/build/webpack:/freighterApi/src/Users/piyalbasu/Stellar/lyra/@stellar/freighter-api/src/index.ts", "../../@lobstrco/signer-extension-api/build/webpack:/lobstrExtensionApi/webpack/universalModuleDefinition", "../../@lobstrco/signer-extension-api/build/webpack:/lobstrExtensionApi/webpack/bootstrap", "../../@lobstrco/signer-extension-api/build/webpack:/lobstrExtensionApi/src/Users/egorlukashev/WebstormProjects/lobstr-signer-extension/@shared/constants/services.ts", "../../@lobstrco/signer-extension-api/build/webpack:/lobstrExtensionApi/webpack/runtime/define property getters", "../../@lobstrco/signer-extension-api/build/webpack:/lobstrExtensionApi/webpack/runtime/hasOwnProperty shorthand", "../../@lobstrco/signer-extension-api/build/webpack:/lobstrExtensionApi/webpack/runtime/make namespace object", "../../@lobstrco/signer-extension-api/build/webpack:/lobstrExtensionApi/src/Users/egorlukashev/WebstormProjects/lobstr-signer-extension/@shared/api/helpers/extensionMessaging.ts", "../../@lobstrco/signer-extension-api/build/webpack:/lobstrExtensionApi/src/Users/egorlukashev/WebstormProjects/lobstr-signer-extension/@lobstrco/signer-extension-api/src/getPublicKey.ts", "../../@lobstrco/signer-extension-api/build/webpack:/lobstrExtensionApi/src/Users/egorlukashev/WebstormProjects/lobstr-signer-extension/@shared/api/external.ts", "../../@lobstrco/signer-extension-api/build/webpack:/lobstrExtensionApi/src/Users/egorlukashev/WebstormProjects/lobstr-signer-extension/@lobstrco/signer-extension-api/src/signTransaction.ts", "../../@lobstrco/signer-extension-api/build/webpack:/lobstrExtensionApi/src/Users/egorlukashev/WebstormProjects/lobstr-signer-extension/@lobstrco/signer-extension-api/src/isConnected.ts", "../../@lobstrco/signer-extension-api/build/webpack:/lobstrExtensionApi/src/Users/egorlukashev/WebstormProjects/lobstr-signer-extension/@lobstrco/signer-extension-api/src/index.ts", "browser-external:crypto", "../../tweetnacl/nacl-fast.js", "../../tweetnacl-util/nacl-util.js", "../../rxjs/node_modules/tslib/tslib.es6.mjs", "../../rxjs/src/internal/util/isFunction.ts", "../../rxjs/src/internal/util/createErrorClass.ts", "../../rxjs/src/internal/util/UnsubscriptionError.ts", "../../rxjs/src/internal/util/arrRemove.ts", "../../rxjs/src/internal/Subscription.ts", "../../rxjs/src/internal/config.ts", "../../rxjs/src/internal/scheduler/timeoutProvider.ts", "../../rxjs/src/internal/util/reportUnhandledError.ts", "../../rxjs/src/internal/util/noop.ts", "../../rxjs/src/internal/NotificationFactories.ts", "../../rxjs/src/internal/util/errorContext.ts", "../../rxjs/src/internal/Subscriber.ts", "../../rxjs/src/internal/symbol/observable.ts", "../../rxjs/src/internal/util/identity.ts", "../../rxjs/src/internal/util/pipe.ts", "../../rxjs/src/internal/Observable.ts", "../../rxjs/src/internal/util/lift.ts", "../../rxjs/src/internal/operators/OperatorSubscriber.ts", "../../rxjs/src/internal/operators/refCount.ts", "../../rxjs/src/internal/observable/ConnectableObservable.ts", "../../rxjs/src/internal/scheduler/performanceTimestampProvider.ts", "../../rxjs/src/internal/scheduler/animationFrameProvider.ts", "../../rxjs/src/internal/observable/dom/animationFrames.ts", "../../rxjs/src/internal/util/ObjectUnsubscribedError.ts", "../../rxjs/src/internal/Subject.ts", "../../rxjs/src/internal/BehaviorSubject.ts", "../../rxjs/src/internal/scheduler/dateTimestampProvider.ts", "../../rxjs/src/internal/ReplaySubject.ts", "../../rxjs/src/internal/AsyncSubject.ts", "../../rxjs/src/internal/scheduler/Action.ts", "../../rxjs/src/internal/scheduler/intervalProvider.ts", "../../rxjs/src/internal/scheduler/AsyncAction.ts", "../../rxjs/src/internal/util/Immediate.ts", "../../rxjs/src/internal/scheduler/immediateProvider.ts", "../../rxjs/src/internal/scheduler/AsapAction.ts", "../../rxjs/src/internal/Scheduler.ts", "../../rxjs/src/internal/scheduler/AsyncScheduler.ts", "../../rxjs/src/internal/scheduler/AsapScheduler.ts", "../../rxjs/src/internal/scheduler/asap.ts", "../../rxjs/src/internal/scheduler/async.ts", "../../rxjs/src/internal/scheduler/QueueAction.ts", "../../rxjs/src/internal/scheduler/QueueScheduler.ts", "../../rxjs/src/internal/scheduler/queue.ts", "../../rxjs/src/internal/scheduler/AnimationFrameAction.ts", "../../rxjs/src/internal/scheduler/AnimationFrameScheduler.ts", "../../rxjs/src/internal/scheduler/animationFrame.ts", "../../rxjs/src/internal/scheduler/VirtualTimeScheduler.ts", "../../rxjs/src/internal/observable/empty.ts", "../../rxjs/src/internal/util/isScheduler.ts", "../../rxjs/src/internal/util/args.ts", "../../rxjs/src/internal/util/isArrayLike.ts", "../../rxjs/src/internal/util/isPromise.ts", "../../rxjs/src/internal/util/isInteropObservable.ts", "../../rxjs/src/internal/util/isAsyncIterable.ts", "../../rxjs/src/internal/util/throwUnobservableError.ts", "../../rxjs/src/internal/symbol/iterator.ts", "../../rxjs/src/internal/util/isIterable.ts", "../../rxjs/src/internal/util/isReadableStreamLike.ts", "../../rxjs/src/internal/observable/innerFrom.ts", "../../rxjs/src/internal/util/executeSchedule.ts", "../../rxjs/src/internal/operators/observeOn.ts", "../../rxjs/src/internal/operators/subscribeOn.ts", "../../rxjs/src/internal/scheduled/scheduleObservable.ts", "../../rxjs/src/internal/scheduled/schedulePromise.ts", "../../rxjs/src/internal/scheduled/scheduleArray.ts", "../../rxjs/src/internal/scheduled/scheduleIterable.ts", "../../rxjs/src/internal/scheduled/scheduleAsyncIterable.ts", "../../rxjs/src/internal/scheduled/scheduleReadableStreamLike.ts", "../../rxjs/src/internal/scheduled/scheduled.ts", "../../rxjs/src/internal/observable/from.ts", "../../rxjs/src/internal/observable/of.ts", "../../rxjs/src/internal/observable/throwError.ts", "../../rxjs/src/internal/Notification.ts", "../../rxjs/src/internal/util/EmptyError.ts", "../../rxjs/src/internal/firstValueFrom.ts", "../../rxjs/src/internal/util/ArgumentOutOfRangeError.ts", "../../rxjs/src/internal/util/NotFoundError.ts", "../../rxjs/src/internal/util/SequenceError.ts", "../../rxjs/src/internal/util/isDate.ts", "../../rxjs/src/internal/operators/timeout.ts", "../../rxjs/src/internal/operators/map.ts", "../../rxjs/src/internal/util/mapOneOrManyArgs.ts", "../../rxjs/src/internal/util/argsArgArrayOrObject.ts", "../../rxjs/src/internal/observable/timer.ts", "../../rxjs/src/internal/observable/never.ts", "../../rxjs/src/internal/util/argsOrArgArray.ts", "../../rxjs/src/internal/operators/filter.ts", "../../rxjs/src/internal/operators/take.ts", "../../rxjs/src/internal/operators/distinctUntilChanged.ts", "../../rxjs/src/internal/operators/switchMap.ts", "../../rxjs/src/internal/operators/takeUntil.ts", "../../@ngneat/elf/index.esm.js", "../../@creit.tech/src/types.ts", "../../@creit.tech/src/state/store.ts", "../../@creit.tech/src/stellar-wallets-kit.ts", "../../@lit/reactive-element/src/css-tag.ts", "../../@lit/reactive-element/src/reactive-element.ts", "../../lit-html/src/lit-html.ts", "../../lit-element/src/lit-element.ts", "../../lit-html/src/directive.ts", "../../lit-html/src/directives/style-map.ts", "../../@lit/reactive-element/src/decorators/custom-element.ts", "../../@lit/reactive-element/src/decorators/property.ts", "../../@lit/reactive-element/src/decorators/state.ts", "../../@lit/reactive-element/src/decorators/query.ts", "../../@creit.tech/src/state/reactive-state.ts", "../../@creit.tech/src/components/modal/styles.ts", "../../@creit.tech/src/components/modal/stellar-wallets-modal.ts", "../../@creit.tech/src/services/account.service.ts", "../../@creit.tech/src/services/clipboard.service.ts", "../../@creit.tech/src/components/button/styles.ts", "../../@creit.tech/src/components/button/stellar-wallets-button.ts", "../../@albedo-link/intent/src/random-token-generator.js", "../../@albedo-link/intent/src/intent-interface.js", "../../@albedo-link/intent/src/intent-errors.js", "../../@albedo-link/intent/src/transport-handler.js", "../../@albedo-link/intent/src/transport-builder.js", "../../@albedo-link/intent/src/implicit-session.js", "../../@albedo-link/intent/src/implicit-session-storage.js", "../../@albedo-link/intent/src/intent-dispatcher.js", "../../@albedo-link/intent/src/web+stellar-handler.js", "../../@albedo-link/intent/src/index.js", "../../@creit.tech/src/modules/albedo.module.ts", "../../@creit.tech/src/modules/freighter.module.ts", "../../@creit.tech/src/modules/lobstr.module.ts", "../../@creit.tech/src/modules/rabet.module.ts", "../../@creit.tech/src/interfaces.ts", "../../@creit.tech/src/mobile-sdk.ts", "../../@creit.tech/src/index.ts", "../../@creit.tech/src/modules/xbull.module.ts", "../../@creit.tech/src/modules/hana.module.ts", "../../@creit.tech/src/utils.ts"],
  "sourcesContent": ["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"freighterApi\"] = factory();\n\telse\n\t\troot[\"freighterApi\"] = factory();\n})(this, () => {\nreturn ", "// The require scope\nvar __webpack_require__ = {};\n\n", "export enum SERVICE_TYPES {\n  CREATE_ACCOUNT = \"CREATE_ACCOUNT\",\n  FUND_ACCOUNT = \"FUND_ACCOUNT\",\n  ADD_ACCOUNT = \"ADD_ACCOUNT\",\n  IMPORT_ACCOUNT = \"IMPORT_ACCOUNT\",\n  IMPORT_HARDWARE_WALLET = \"IMPORT_HARDWARE_WALLET\",\n  LOAD_ACCOUNT = \"LOAD_ACCOUNT\",\n  MAKE_ACCOUNT_ACTIVE = \"MAKE_ACCOUNT_ACTIVE\",\n  UPDATE_ACCOUNT_NAME = \"UPDATE_ACCOUNT_NAME\",\n  GET_MNEMONIC_PHRASE = \"GET_MNEMONIC_PHRASE\",\n  CONFIRM_MNEMONIC_PHRASE = \"CONFIRM_MNEMONIC_PHRASE\",\n  CONFIRM_MIGRATED_MNEMONIC_PHRASE = \"CONFIRM_MIGRATED_MNEMONIC_PHRASE\",\n  RECOVER_ACCOUNT = \"RECOVER_ACCOUNT\",\n  CONFIRM_PASSWORD = \"CONFIRM_PASSWORD\",\n  REJECT_ACCESS = \"REJECT_ACCESS\",\n  GRANT_ACCESS = \"GRANT_ACCESS\",\n  SIGN_TRANSACTION = \"SIGN_TRANSACTION\",\n  SIGN_BLOB = \"SIGN_BLOB\",\n  SIGN_AUTH_ENTRY = \"SIGN_AUTH_ENTRY\",\n  HANDLE_SIGNED_HW_TRANSACTION = \"HANDLE_SIGNED_HW_TRANSACTION\",\n  REJECT_TRANSACTION = \"REJECT_TRANSACTION\",\n  SIGN_FREIGHTER_TRANSACTION = \"SIGN_FREIGHTER_TRANSACTION\",\n  SIGN_FREIGHTER_SOROBAN_TRANSACTION = \"SIGN_FREIGHTER_SOROBAN_TRANSACTION\",\n  ADD_RECENT_ADDRESS = \"ADD_RECENT_ADDRESS\",\n  LOAD_RECENT_ADDRESSES = \"LOAD_RECENT_ADDRESSES\",\n  SIGN_OUT = \"SIGN_OUT\",\n  SHOW_BACKUP_PHRASE = \"SHOW_BACKUP_PHRASE\",\n  SAVE_ALLOWLIST = \"SAVE_ALLOWLIST\",\n  SAVE_SETTINGS = \"SAVE_SETTINGS\",\n  SAVE_EXPERIMENTAL_FEATURES = \"SAVE_EXPERIMENTAL_FEATURES\",\n  LOAD_SETTINGS = \"LOAD_SETTINGS\",\n  GET_CACHED_ASSET_ICON = \"GET_CACHED_ASSET_ICON\",\n  CACHE_ASSET_ICON = \"CACHE_ASSET_ICON\",\n  GET_CACHED_ASSET_DOMAIN = \"GET_CACHED_ASSET_DOMAIN\",\n  CACHE_ASSET_DOMAIN = \"CACHE_ASSET_DOMAIN\",\n  GET_BLOCKED_ACCOUNTS = \"GET_BLOCKED_ACCOUNTS\",\n  GET_BLOCKED_DOMAINS = \"GET_BLOCKED_DOMAINS\",\n  ADD_CUSTOM_NETWORK = \"ADD_CUSTOM_NETWORK\",\n  CHANGE_NETWORK = \"CHANGE_NETWORK\",\n  REMOVE_CUSTOM_NETWORK = \"REMOVE_CUSTOM_NETWORK\",\n  EDIT_CUSTOM_NETWORK = \"EDIT_CUSTOM_NETWORK\",\n  RESET_EXP_DATA = \"RESET_EXP_DATA\",\n  ADD_TOKEN_ID = \"ADD_TOKEN_ID\",\n  GET_TOKEN_IDS = \"GET_TOKEN_IDS\",\n  REMOVE_TOKEN_ID = \"REMOVE_TOKEN_ID\",\n  GET_MIGRATABLE_ACCOUNTS = \"GET_MIGRATABLE_ACCOUNTS\",\n  GET_MIGRATED_MNEMONIC_PHRASE = \"GET_MIGRATED_MNEMONIC_PHRASE\",\n  MIGRATE_ACCOUNTS = \"MIGRATE_ACCOUNTS\",\n  ADD_ASSETS_LIST = \"ADD_ASSETS_LIST\",\n  MODIFY_ASSETS_LIST = \"MODIFY_ASSETS_LIST\",\n}\n\nexport enum EXTERNAL_SERVICE_TYPES {\n  REQUEST_ACCESS = \"REQUEST_ACCESS\",\n  REQUEST_PUBLIC_KEY = \"REQUEST_PUBLIC_KEY\",\n  SUBMIT_TRANSACTION = \"SUBMIT_TRANSACTION\",\n  SUBMIT_BLOB = \"SUBMIT_BLOB\",\n  SUBMIT_AUTH_ENTRY = \"SUBMIT_AUTH_ENTRY\",\n  REQUEST_NETWORK = \"REQUEST_NETWORK\",\n  REQUEST_NETWORK_DETAILS = \"REQUEST_NETWORK_DETAILS\",\n  REQUEST_CONNECTION_STATUS = \"REQUEST_CONNECTION_STATUS\",\n  REQUEST_ALLOWED_STATUS = \"REQUEST_ALLOWED_STATUS\",\n  SET_ALLOWED_STATUS = \"SET_ALLOWED_STATUS\",\n  REQUEST_USER_INFO = \"REQUEST_USER_INFO\",\n}\n\nexport const EXTERNAL_MSG_REQUEST = \"FREIGHTER_EXTERNAL_MSG_REQUEST\";\nexport const EXTERNAL_MSG_RESPONSE = \"FREIGHTER_EXTERNAL_MSG_RESPONSE\";\n\ndeclare const DEV_SERVER: string;\nconst _DEV_SERVER = DEV_SERVER;\nexport { _DEV_SERVER as DEV_SERVER };\n\ndeclare const DEV_EXTENSION: string;\nconst _DEV_EXTENSION = DEV_EXTENSION;\nexport { _DEV_EXTENSION as DEV_EXTENSION };\n", "// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};", "__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))", "// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};", "import browser from \"webextension-polyfill\";\nimport {\n  DEV_SERVER,\n  EXTERNAL_MSG_RESPONSE,\n  EXTERNAL_MSG_REQUEST,\n  EXTERNAL_SERVICE_TYPES,\n  SERVICE_TYPES,\n} from \"../../constants/services\";\nimport { Response } from \"../types\";\n\ninterface Msg {\n  [key: string]: any;\n  type: EXTERNAL_SERVICE_TYPES | SERVICE_TYPES;\n}\n\nexport const sendMessageToContentScript = (msg: Msg): Promise<Response> => {\n  /* \n    In the case of multiple calls coming in sequentially, we use this MESSAGE_ID to make sure we're responding to\n    the appropriate message sender. Otherwise, we can run into race conditions where we simply resolve all \n    sent messages with the first thing that comes back.\n  */\n  const MESSAGE_ID = Date.now() + Math.random();\n\n  window.postMessage(\n    { source: EXTERNAL_MSG_REQUEST, messageId: MESSAGE_ID, ...msg },\n    window.location.origin,\n  );\n  return new Promise((resolve) => {\n    let requestTimeout = 0 as any;\n\n    /* \n      In the case that Freighter is not installed at all, any messages to \n      background from freighter-api will hang forever and not respond in any way. \n      This is especially a problem for the isConnected method, because this is \n      likely to be called in a situation where Freighter isn't installed.\n      To prevent this, we add a timeout to automatically resolve in the event \n      Freighter doesn't respond in a timely fashion to this method.\n    */\n    if (\n      msg.type === EXTERNAL_SERVICE_TYPES.REQUEST_CONNECTION_STATUS ||\n      msg.type === EXTERNAL_SERVICE_TYPES.REQUEST_PUBLIC_KEY\n    ) {\n      requestTimeout = setTimeout(() => {\n        resolve({\n          isConnected: false,\n          publicKey: \"\",\n        } as Response);\n        window.removeEventListener(\"message\", messageListener);\n      }, 2000);\n    }\n\n    const messageListener = (event: { source: any; data: Response }) => {\n      // We only accept messages from ourselves\n      if (event.source !== window) return;\n      // Only respond to messages tagged as being from our content script\n      if (event?.data?.source !== EXTERNAL_MSG_RESPONSE) return;\n      // Only respond to messages that this instance of sendMessageToContentScript sent\n      if (event?.data?.messagedId !== MESSAGE_ID) return;\n\n      resolve(event.data);\n      window.removeEventListener(\"message\", messageListener);\n      clearTimeout(requestTimeout);\n    };\n    window.addEventListener(\"message\", messageListener, false);\n  });\n};\n\nexport const sendMessageToBackground = async (msg: Msg): Promise<Response> => {\n  let res;\n  if (DEV_SERVER) {\n    // treat this as an external call because we're making the call from the browser, not the popup\n    res = await sendMessageToContentScript(msg);\n  } else {\n    res = await browser.runtime.sendMessage(msg);\n  }\n\n  return res;\n};\n\nexport const FreighterApiNodeError = {\n  code: -1,\n  message: \"Node environment is not supported\",\n};\n\nexport const FreighterApiInternalError = {\n  code: -1,\n  message:\n    \"The wallet encountered an internal error. Please try again or contact the wallet if the problem persists.\",\n};\n\nexport const FreighterApiDeclinedError = {\n  code: -4,\n  message: \"The user rejected this request.\",\n};\n", "import { EXTERNAL_SERVICE_TYPES } from \"../constants/services\";\nimport { NetworkDetails } from \"../constants/stellar\";\nimport {\n  sendMessageToContentScript,\n  FreighterApiInternalError,\n} from \"./helpers/extensionMessaging\";\nimport { FreighterApiError } from \"./types\";\n\nexport const requestAccess = async (): Promise<{\n  publicKey: string;\n  error?: FreighterApiError;\n}> => {\n  let response;\n  try {\n    response = await sendMessageToContentScript({\n      type: EXTERNAL_SERVICE_TYPES.REQUEST_ACCESS,\n    });\n  } catch (e) {\n    console.error(e);\n  }\n\n  const { publicKey } = response || { publicKey: \"\" };\n\n  return { publicKey, error: response?.apiError };\n};\n\nexport const requestPublicKey = async (): Promise<{\n  publicKey: string;\n  error?: FreighterApiError;\n}> => {\n  let response;\n  try {\n    response = await sendMessageToContentScript({\n      type: EXTERNAL_SERVICE_TYPES.REQUEST_PUBLIC_KEY,\n    });\n  } catch (e) {\n    console.error(e);\n  }\n\n  return { publicKey: response?.publicKey || \"\", error: response?.apiError };\n};\n\nexport const submitTransaction = async (\n  transactionXdr: string,\n  opts?:\n    | string\n    | {\n        accountToSign?: string;\n        networkPassphrase?: string;\n      },\n  accountToSign?: string,\n): Promise<{\n  signedTransaction: string;\n  signerAddress: string;\n  error?: FreighterApiError;\n}> => {\n  let network = \"\";\n  let _accountToSign = \"\";\n  let networkPassphrase = \"\";\n\n  /* \n  As of v1.3.0, this method now accepts an object as its second param. \n  Previously, it accepted optional second and third string parameters.\n  This logic maintains backwards compatibility for older versions\n  */\n  if (typeof opts === \"object\") {\n    _accountToSign = opts.accountToSign || \"\";\n    networkPassphrase = opts.networkPassphrase || \"\";\n  } else {\n    network = opts || \"\";\n    _accountToSign = accountToSign || \"\";\n  }\n\n  let response;\n  try {\n    response = await sendMessageToContentScript({\n      transactionXdr,\n      network,\n      networkPassphrase,\n      accountToSign: _accountToSign,\n      type: EXTERNAL_SERVICE_TYPES.SUBMIT_TRANSACTION,\n    });\n  } catch (e) {\n    return {\n      signedTransaction: \"\",\n      signerAddress: \"\",\n      error: FreighterApiInternalError,\n    };\n  }\n  const { signedTransaction, signerAddress } = response;\n\n  return { signedTransaction, signerAddress, error: response?.apiError };\n};\n\nexport const submitMessage = async (\n  blob: string,\n  opts?: {\n    address?: string;\n    networkPassphrase?: string;\n  },\n): Promise<{\n  signedMessage: Buffer | null;\n  signerAddress: string;\n  error?: FreighterApiError;\n}> => {\n  let response;\n  const _opts = opts || {};\n  const accountToSign = _opts.address || \"\";\n  try {\n    response = await sendMessageToContentScript({\n      blob,\n      accountToSign,\n      type: EXTERNAL_SERVICE_TYPES.SUBMIT_BLOB,\n    });\n  } catch (e) {\n    return {\n      signedMessage: null,\n      signerAddress: \"\",\n      error: FreighterApiInternalError,\n    };\n  }\n  const { signedBlob, signerAddress } = response;\n\n  return {\n    signedMessage: signedBlob || null,\n    signerAddress,\n    error: response?.apiError,\n  };\n};\n\nexport const submitAuthEntry = async (\n  entryXdr: string,\n  opts?: {\n    address?: string;\n    networkPassphrase?: string;\n  },\n): Promise<{\n  signedAuthEntry: Buffer | null;\n  signerAddress: string;\n  error?: FreighterApiError;\n}> => {\n  const _opts = opts || {};\n  const accountToSign = _opts.address || \"\";\n  let response;\n  try {\n    response = await sendMessageToContentScript({\n      entryXdr,\n      accountToSign,\n      networkPassphrase: opts?.networkPassphrase,\n      type: EXTERNAL_SERVICE_TYPES.SUBMIT_AUTH_ENTRY,\n    });\n  } catch (e) {\n    console.error(e);\n    return {\n      signedAuthEntry: null,\n      signerAddress: \"\",\n      error: FreighterApiInternalError,\n    };\n  }\n  const { signedAuthEntry, signerAddress } = response;\n\n  return {\n    signedAuthEntry: signedAuthEntry || null,\n    signerAddress,\n    error: response?.apiError,\n  };\n};\n\nexport const requestNetwork = async (): Promise<{\n  network: string;\n  networkPassphrase: string;\n  error?: FreighterApiError;\n}> => {\n  let response;\n  try {\n    response = await sendMessageToContentScript({\n      type: EXTERNAL_SERVICE_TYPES.REQUEST_NETWORK_DETAILS,\n    });\n  } catch (e) {\n    console.error(e);\n  }\n\n  const { networkDetails } = response || {\n    networkDetails: { network: \"\", networkPassphrase: \"\" },\n  };\n\n  return {\n    network: networkDetails?.network,\n    networkPassphrase: networkDetails?.networkPassphrase,\n    error: response?.apiError,\n  };\n};\n\nexport const requestNetworkDetails = async (): Promise<{\n  network: string;\n  networkUrl: string;\n  networkPassphrase: string;\n  sorobanRpcUrl?: string;\n  error?: FreighterApiError;\n}> => {\n  let response;\n  try {\n    response = await sendMessageToContentScript({\n      type: EXTERNAL_SERVICE_TYPES.REQUEST_NETWORK_DETAILS,\n    });\n  } catch (e) {\n    console.error(e);\n  }\n\n  const { networkDetails, apiError } = response || {\n    networkDetails: {\n      network: \"\",\n      networkName: \"\",\n      networkUrl: \"\",\n      networkPassphrase: \"\",\n      sorobanRpcUrl: undefined,\n      apiError: \"\",\n    } as NetworkDetails,\n  };\n\n  const { network, networkUrl, networkPassphrase, sorobanRpcUrl } =\n    networkDetails;\n\n  return {\n    network,\n    networkUrl,\n    networkPassphrase,\n    sorobanRpcUrl,\n    error: apiError,\n  };\n};\n\nexport const requestConnectionStatus = async (): Promise<{\n  isConnected: boolean;\n}> => {\n  let response = {\n    isConnected: false,\n  };\n\n  try {\n    response = await sendMessageToContentScript({\n      type: EXTERNAL_SERVICE_TYPES.REQUEST_CONNECTION_STATUS,\n    });\n  } catch (e) {\n    console.error(e);\n  }\n\n  return { isConnected: response.isConnected };\n};\n\nexport const requestAllowedStatus = async (): Promise<{\n  isAllowed: boolean;\n  error?: FreighterApiError;\n}> => {\n  let response;\n\n  try {\n    response = await sendMessageToContentScript({\n      type: EXTERNAL_SERVICE_TYPES.REQUEST_ALLOWED_STATUS,\n    });\n  } catch (e) {\n    console.error(e);\n  }\n\n  const { isAllowed } = response || { isAllowed: false };\n\n  return { isAllowed, error: response?.apiError };\n};\n\nexport const setAllowedStatus = async (): Promise<{\n  isAllowed: boolean;\n  error?: FreighterApiError;\n}> => {\n  let response;\n\n  try {\n    response = await sendMessageToContentScript({\n      type: EXTERNAL_SERVICE_TYPES.SET_ALLOWED_STATUS,\n    });\n  } catch (e) {\n    console.error(e);\n  }\n\n  const { isAllowed } = response || {\n    isAllowed: false,\n  };\n\n  return { isAllowed, error: response?.apiError };\n};\n", "import { requestPublicKey } from \"@shared/api/external\";\nimport { FreighterApiError } from \"@shared/api/types\";\nimport { FreighterApiNodeError } from \"@shared/api/helpers/extensionMessaging\";\nimport { isBrowser } from \".\";\n\nexport const getAddress = async (): Promise<\n  { address: string } & { error?: FreighterApiError }\n> => {\n  let address = \"\";\n  if (isBrowser) {\n    const req = await requestPublicKey();\n    address = req.publicKey;\n\n    if (req.error) {\n      return { address, error: req.error };\n    }\n\n    return { address };\n  }\n\n  return { address, error: FreighterApiNodeError };\n};\n", "import { submitTransaction } from \"@shared/api/external\";\nimport { FreighterApiError } from \"@shared/api/types\";\nimport { FreighterApiNodeError } from \"@shared/api/helpers/extensionMessaging\";\nimport { isBrowser } from \".\";\n\nexport const signTransaction = async (\n  transactionXdr: string,\n  opts?: {\n    networkPassphrase?: string;\n    address?: string;\n  }\n): Promise<\n  { signedTxXdr: string; signerAddress: string } & {\n    error?: FreighterApiError;\n  }\n> => {\n  if (isBrowser) {\n    const req = await submitTransaction(transactionXdr, opts);\n\n    if (req.error) {\n      return { signedTxXdr: \"\", signerAddress: \"\", error: req.error };\n    }\n\n    return {\n      signedTxXdr: req.signedTransaction,\n      signerAddress: req.signerAddress,\n    };\n  }\n\n  return { signedTxXdr: \"\", signerAddress: \"\", error: FreighterApiNodeError };\n};\n", "import { submitMessage } from \"@shared/api/external\";\nimport { FreighterApiError } from \"@shared/api/types\";\nimport { FreighterApiNodeError } from \"@shared/api/helpers/extensionMessaging\";\nimport { isBrowser } from \".\";\n\nexport const signMessage = async (\n  message: string,\n  opts?: {\n    networkPassphrase?: string;\n    address?: string;\n  }\n): Promise<\n  { signedMessage: Buffer | null; signerAddress: string } & {\n    error?: FreighterApiError;\n  }\n> => {\n  if (isBrowser) {\n    const req = await submitMessage(message, opts);\n\n    if (req.error) {\n      return { signedMessage: null, signerAddress: \"\", error: req.error };\n    }\n\n    return {\n      signedMessage: req.signedMessage,\n      signerAddress: req.signerAddress,\n    };\n  }\n\n  return {\n    signedMessage: null,\n    signerAddress: \"\",\n    error: FreighterApiNodeError,\n  };\n};\n", "import { submitAuthEntry } from \"@shared/api/external\";\nimport { FreighterApiError } from \"@shared/api/types\";\nimport { FreighterApiNodeError } from \"@shared/api/helpers/extensionMessaging\";\nimport { isBrowser } from \".\";\n\nexport const signAuthEntry = async (\n  entryXdr: string,\n  opts?: {\n    networkPassphrase?: string;\n    address?: string;\n  }\n): Promise<\n  { signedAuthEntry: Buffer | null; signerAddress: string } & {\n    error?: FreighterApiError;\n  }\n> => {\n  if (isBrowser) {\n    const req = await submitAuthEntry(entryXdr, opts);\n\n    if (req.error) {\n      return { signedAuthEntry: null, signerAddress: \"\", error: req.error };\n    }\n\n    return {\n      signedAuthEntry: req.signedAuthEntry,\n      signerAddress: req.signerAddress,\n    };\n  }\n\n  return {\n    signedAuthEntry: null,\n    signerAddress: \"\",\n    error: FreighterApiNodeError,\n  };\n};\n", "import { requestConnectionStatus } from \"@shared/api/external\";\nimport { FreighterApiError } from \"@shared/api/types\";\nimport { FreighterApiNodeError } from \"@shared/api/helpers/extensionMessaging\";\nimport { isBrowser } from \".\";\n\nexport const isConnected = async (): Promise<\n  { isConnected: boolean } & { error?: FreighterApiError }\n> => {\n  if (isBrowser) {\n    if (window.freighter) {\n      return Promise.resolve({ isConnected: window.freighter });\n    }\n\n    return requestConnectionStatus();\n  }\n\n  return { isConnected: false, error: FreighterApiNodeError };\n};\n", "import { requestNetwork } from \"@shared/api/external\";\nimport { FreighterApiError } from \"@shared/api/types\";\nimport { FreighterApiNodeError } from \"@shared/api/helpers/extensionMessaging\";\nimport { isBrowser } from \".\";\n\nexport const getNetwork = async (): Promise<\n  { network: string; networkPassphrase: string } & {\n    error?: FreighterApiError;\n  }\n> => {\n  if (isBrowser) {\n    const req = await requestNetwork();\n\n    if (req.error) {\n      return { network: \"\", networkPassphrase: \"\", error: req.error };\n    }\n\n    return { network: req.network, networkPassphrase: req.networkPassphrase };\n  }\n\n  return { network: \"\", networkPassphrase: \"\", error: FreighterApiNodeError };\n};\n", "import { requestNetworkDetails } from \"@shared/api/external\";\nimport { FreighterApiError } from \"@shared/api/types\";\nimport { FreighterApiNodeError } from \"@shared/api/helpers/extensionMessaging\";\nimport { isBrowser } from \".\";\n\nexport const getNetworkDetails = async (): Promise<\n  {\n    network: string;\n    networkUrl: string;\n    networkPassphrase: string;\n    sorobanRpcUrl?: string;\n  } & { error?: FreighterApiError }\n> => {\n  if (isBrowser) {\n    const req = await requestNetworkDetails();\n\n    if (req.error) {\n      return {\n        network: \"\",\n        networkUrl: \"\",\n        networkPassphrase: \"\",\n        error: req.error,\n      };\n    }\n\n    return {\n      network: req.network,\n      networkUrl: req.networkUrl,\n      networkPassphrase: req.networkPassphrase,\n      sorobanRpcUrl: req.sorobanRpcUrl,\n    };\n  }\n\n  return {\n    network: \"\",\n    networkUrl: \"\",\n    networkPassphrase: \"\",\n    error: FreighterApiNodeError,\n  };\n};\n", "import { requestAllowedStatus } from \"@shared/api/external\";\nimport { FreighterApiError } from \"@shared/api/types\";\nimport { FreighterApiNodeError } from \"@shared/api/helpers/extensionMessaging\";\nimport { isBrowser } from \".\";\n\nexport const isAllowed = async (): Promise<\n  { isAllowed: boolean } & { error?: FreighterApiError }\n> => {\n  let isAllowed = false;\n  if (isBrowser) {\n    const req = await requestAllowedStatus();\n    isAllowed = req.isAllowed;\n\n    if (req.error) {\n      return { isAllowed, error: req.error };\n    }\n\n    return { isAllowed };\n  }\n\n  return { isAllowed, error: FreighterApiNodeError };\n};\n", "import { setAllowedStatus } from \"@shared/api/external\";\nimport { FreighterApiError } from \"@shared/api/types\";\nimport { FreighterApiNodeError } from \"@shared/api/helpers/extensionMessaging\";\nimport { isBrowser } from \".\";\n\nexport const setAllowed = async (): Promise<\n  { isAllowed: boolean } & { error?: FreighterApiError }\n> => {\n  let isAllowed = false;\n  if (isBrowser) {\n    const req = await setAllowedStatus();\n    isAllowed = req.isAllowed;\n\n    if (req.error) {\n      return { isAllowed, error: req.error };\n    }\n\n    return { isAllowed };\n  }\n\n  return { isAllowed, error: FreighterApiNodeError };\n};\n", "import { requestAccess as requestAccessApi } from \"@shared/api/external\";\nimport { FreighterApiError } from \"@shared/api/types\";\nimport { FreighterApiNodeError } from \"@shared/api/helpers/extensionMessaging\";\nimport { isBrowser } from \".\";\n\nexport const requestAccess = async (): Promise<\n  { address: string } & { error?: FreighterApiError }\n> => {\n  let address = \"\";\n  if (isBrowser) {\n    const req = await requestAccessApi();\n    address = req.publicKey;\n\n    if (req.error) {\n      return { address, error: req.error };\n    }\n\n    return { address };\n  }\n\n  return { address, error: FreighterApiNodeError };\n};\n", "import { requestPublicKey } from \"@shared/api/external\";\nimport { requestNetworkDetails } from \"@shared/api/external\";\nimport { FreighterApiNodeError } from \"@shared/api/helpers/extensionMessaging\";\nimport { FreighterApiError } from \"@shared/api/types\";\nimport { isBrowser } from \".\";\n\ninterface CallbackParams {\n  address: string;\n  network: string;\n  networkPassphrase: string;\n  error?: FreighterApiError;\n}\n\nexport class WatchWalletChanges {\n  timeout: number;\n  currentAddress: string;\n  currentNetwork: string;\n  currentNetworkPassphrase: string;\n  isRunning: boolean;\n\n  constructor(timeout = 3000) {\n    this.timeout = timeout;\n    this.currentAddress = \"\";\n    this.currentNetwork = \"\";\n    this.currentNetworkPassphrase = \"\";\n    this.isRunning = false;\n  }\n\n  watch(cb: (params: CallbackParams) => void): { error?: FreighterApiError } {\n    if (!isBrowser) {\n      return { error: FreighterApiNodeError };\n    }\n    this.isRunning = true;\n    this.fetchInfo(cb);\n\n    return {};\n  }\n\n  fetchInfo = async (cb: (params: CallbackParams) => void) => {\n    if (!this.isRunning) {\n      return;\n    }\n    const publicKeyReq = await requestPublicKey();\n    const networkDetailsReq = await requestNetworkDetails();\n\n    if (publicKeyReq.error || networkDetailsReq.error) {\n      cb({\n        address: \"\",\n        network: \"\",\n        networkPassphrase: \"\",\n        error: publicKeyReq.error || networkDetailsReq.error,\n      });\n    }\n\n    if (\n      this.currentAddress !== publicKeyReq.publicKey ||\n      this.currentNetwork !== networkDetailsReq.network ||\n      this.currentNetworkPassphrase !== networkDetailsReq.networkPassphrase\n    ) {\n      this.currentAddress = publicKeyReq.publicKey;\n      this.currentNetwork = networkDetailsReq.network;\n      this.currentNetworkPassphrase = networkDetailsReq.networkPassphrase;\n\n      cb({\n        address: publicKeyReq.publicKey,\n        network: networkDetailsReq.network,\n        networkPassphrase: networkDetailsReq.networkPassphrase,\n      });\n    }\n\n    setTimeout(() => this.fetchInfo(cb), this.timeout);\n  };\n\n  stop() {\n    this.isRunning = false;\n  }\n}\n", "import { getAddress } from \"./getAddress\";\nimport { signTransaction } from \"./signTransaction\";\nimport { signMessage } from \"./signMessage\";\nimport { signAuthEntry } from \"./signAuthEntry\";\nimport { isConnected } from \"./isConnected\";\nimport { getNetwork } from \"./getNetwork\";\nimport { getNetworkDetails } from \"./getNetworkDetails\";\nimport { isAllowed } from \"./isAllowed\";\nimport { setAllowed } from \"./setAllowed\";\nimport { requestAccess } from \"./requestAccess\";\nimport { WatchWalletChanges } from \"./watchWalletChanges\";\n\nexport const isBrowser = typeof window !== \"undefined\";\n\nexport {\n  getAddress,\n  signTransaction,\n  signMessage,\n  signAuthEntry,\n  isConnected,\n  getNetwork,\n  getNetworkDetails,\n  isAllowed,\n  setAllowed,\n  requestAccess,\n  WatchWalletChanges,\n};\nexport default {\n  getAddress,\n  signTransaction,\n  signMessage,\n  signAuthEntry,\n  isConnected,\n  getNetwork,\n  getNetworkDetails,\n  isAllowed,\n  setAllowed,\n  requestAccess,\n  WatchWalletChanges,\n};\n", "(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"lobstrExtensionApi\"] = factory();\n\telse\n\t\troot[\"lobstrExtensionApi\"] = factory();\n})(this, () => {\nreturn ", "// The require scope\nvar __webpack_require__ = {};\n\n", "export enum SERVICE_TYPES {\n  LOAD_STATE = \"LOAD_STATE\",\n  LOGIN = \"LOGIN\",\n  LOGOUT = \"LOGOUT\",\n  SIGN_TRANSACTION = \"SIGN_TRANSACTION\",\n  REJECT_TRANSACTION = \"REJECT_TRANSACTION\",\n  GRANT_ACCESS = \"GRANT_ACCESS\",\n  REJECT_ACCESS = \"REJECT_ACCESS\",\n}\n\nexport enum EXTERNAL_SERVICE_TYPES {\n  REQUEST_ACCESS = \"REQUEST_ACCESS\",\n  SIGN_TRANSACTION = \"SUBMIT_TRANSACTION\",\n  REQUEST_CONNECTION_STATUS = \"REQUEST_CONNECTION_STATUS\",\n}\n\nexport enum TX_STATUS {\n  pending = \"pending\",\n  signed = \"signed\",\n  rejected = \"rejected\",\n}\n\nexport const EXTERNAL_MSG_REQUEST = \"LOBSTR_EXTERNAL_MSG_REQUEST\";\nexport const EXTERNAL_MSG_RESPONSE = \"LOBSTR_EXTERNAL_MSG_RESPONSE\";\n\nexport const CONNECTION_KEY = \"LOBSTR_CONNECTION_KEY\";\n\ndeclare const DEV_SERVER: string;\nconst _DEV_SERVER = DEV_SERVER;\nexport { _DEV_SERVER as DEV_SERVER };\n\ndeclare const DEV_EXTENSION: string;\nconst _DEV_EXTENSION = DEV_EXTENSION;\nexport { _DEV_EXTENSION as DEV_EXTENSION };\n", "// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};", "__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))", "// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};", "import browser from \"webextension-polyfill\";\nimport { Response } from \"@shared/constants/types\";\nimport {\n  DEV_SERVER,\n  EXTERNAL_MSG_RESPONSE,\n  EXTERNAL_MSG_REQUEST,\n  EXTERNAL_SERVICE_TYPES,\n  SERVICE_TYPES,\n} from \"../../constants/services\";\n\ninterface Msg {\n  [key: string]: any;\n  type: EXTERNAL_SERVICE_TYPES | SERVICE_TYPES;\n}\n\nexport const sendMessageToContentScript = (msg: Msg): Promise<any> => {\n  /* \n    In the case of multiple calls coming in sequentially, we use this MESSAGE_ID to make sure we're responding to\n    the appropriate message sender. Otherwise, we can run into race conditions where we simply resolve all \n    sent messages with the first thing that comes back.\n  */\n  const MESSAGE_ID = Date.now() + Math.random();\n\n  window.postMessage(\n    { source: EXTERNAL_MSG_REQUEST, messageId: MESSAGE_ID, ...msg },\n    window.location.origin,\n  );\n  return new Promise((resolve) => {\n    let requestTimeout: number | NodeJS.Timeout = 0;\n\n    /*\n      In the case that LOBSTR is not installed at all, any messages to\n      background from @lobstrco/signer-extension-api will hang forever and not respond in any way.\n      This is especially a problem for the isConnected method, because this is\n      likely to be called in a situation where LOBSTR isn't installed.\n      To prevent this, we add a timeout to automatically resolve in the event\n      LOBSTR doesn't respond in a timely fashion to this method.\n    */\n    if (msg.type === EXTERNAL_SERVICE_TYPES.REQUEST_CONNECTION_STATUS) {\n      requestTimeout = setTimeout(() => {\n        resolve({ isConnected: false });\n        window.removeEventListener(\"message\", messageListener);\n      }, 2000);\n    }\n\n    const messageListener = (event: { source: any; data: any }) => {\n      // We only accept messages from ourselves\n      if (event.source !== window) return;\n      // Only respond to messages tagged as being from our content script\n      if (event?.data?.source !== EXTERNAL_MSG_RESPONSE) return;\n      // Only respond to messages that this instance of sendMessageToContentScript sent\n      if (event?.data?.messagedId !== MESSAGE_ID) return;\n\n      resolve(event.data);\n      window.removeEventListener(\"message\", messageListener);\n      clearTimeout(requestTimeout);\n    };\n    window.addEventListener(\"message\", messageListener, false);\n  });\n};\n\nexport const sendMessageToBackground = async (msg: Msg): Promise<Response> => {\n  let res;\n  if (DEV_SERVER) {\n    // treat this as an external call because we're making the call from the browser, not the popup\n    res = await sendMessageToContentScript(msg);\n  } else {\n    res = await browser.runtime.sendMessage(msg);\n  }\n\n  return res;\n};\n", "import { requestPublicKey } from \"@shared/api/external\";\nimport { GetPublicKeyResponse } from \"@shared/constants/types\";\nimport { CONNECTION_KEY } from \"@shared/constants/services\";\nimport { isBrowser } from \".\";\n\nconst saveConnectionKey = (connectionKey: string) => {\n  window?.sessionStorage?.setItem(CONNECTION_KEY, connectionKey);\n};\n\nexport const getPublicKey = async (): Promise<string> => {\n  if (!isBrowser) {\n    return \"\";\n  }\n\n  const { publicKey, connectionKey }: GetPublicKeyResponse =\n    await requestPublicKey();\n\n  saveConnectionKey(connectionKey);\n  return publicKey;\n};\n", "import { GetPublicKeyResponse } from \"@shared/constants/types\";\nimport { EXTERNAL_SERVICE_TYPES } from \"../constants/services\";\nimport { sendMessageToContentScript } from \"./helpers/extensionMessaging\";\n\nexport const requestPublicKey = async (): Promise<GetPublicKeyResponse> => {\n  let response = { publicKey: \"\", error: \"\", connectionKey: \"\" };\n  try {\n    response = await sendMessageToContentScript({\n      type: EXTERNAL_SERVICE_TYPES.REQUEST_ACCESS,\n    });\n  } catch (e) {\n    console.error(e);\n  }\n\n  const { publicKey, connectionKey, error } = response;\n\n  if (error) {\n    throw error;\n  }\n  return { publicKey, connectionKey };\n};\n\nexport const signTransaction = async (\n  transactionXdr: string,\n  connectionKey: string,\n): Promise<string> => {\n  let response = { signedTransaction: \"\", error: \"\" };\n  try {\n    response = await sendMessageToContentScript({\n      transactionXdr,\n      connectionKey,\n      type: EXTERNAL_SERVICE_TYPES.SIGN_TRANSACTION,\n    });\n  } catch (e) {\n    console.error(e);\n    throw e;\n  }\n  const { signedTransaction, error } = response;\n\n  if (error) {\n    throw error;\n  }\n  return signedTransaction;\n};\n\nexport const requestConnectionStatus = async (): Promise<boolean> => {\n  let response = {\n    isConnected: false,\n  };\n\n  try {\n    response = await sendMessageToContentScript({\n      type: EXTERNAL_SERVICE_TYPES.REQUEST_CONNECTION_STATUS,\n    });\n  } catch (e) {\n    console.error(e);\n  }\n\n  return response.isConnected;\n};\n", "import { signTransaction as signTransactionService } from \"@shared/api/external\";\nimport { CONNECTION_KEY } from \"@shared/constants/services\";\nimport { isBrowser } from \"./index\";\n\nconst getConnectionKey = () =>\n  window?.sessionStorage?.getItem(CONNECTION_KEY) || \"\";\n\nexport const signTransaction = async (\n  transactionXdr: string,\n): Promise<string> => {\n  if (!isBrowser) {\n    return \"\";\n  }\n\n  const connectionKey = getConnectionKey();\n\n  return await signTransactionService(transactionXdr, connectionKey);\n};\n", "import { requestConnectionStatus } from \"@shared/api/external\";\nimport { isBrowser } from \"./index\";\n\nexport const isConnected = async (): Promise<boolean> => {\n  if (!isBrowser) {\n    return false;\n  }\n\n  if (window.lobstrSignerExtension) {\n    return window.lobstrSignerExtension;\n  }\n\n  return await requestConnectionStatus();\n};\n", "import { getPublicKey } from \"./getPublicKey\";\nimport { signTransaction } from \"./signTransaction\";\nimport { isConnected } from \"./isConnected\";\n\nexport const isBrowser = typeof window !== \"undefined\";\n\nexport { getPublicKey, signTransaction, isConnected };\nexport default {\n  getPublicKey,\n  signTransaction,\n  isConnected,\n};\n", "module.exports = Object.create(new Proxy({}, {\n  get(_, key) {\n    if (\n      key !== '__esModule' &&\n      key !== '__proto__' &&\n      key !== 'constructor' &&\n      key !== 'splice'\n    ) {\n      console.warn(`Module \"crypto\" has been externalized for browser compatibility. Cannot access \"crypto.${key}\" in client code. See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)\n    }\n  }\n}))", "(function(nacl) {\n'use strict';\n\n// Ported in 2014 by Dmitry Chestnykh and Devi Mandiri.\n// Public domain.\n//\n// Implementation derived from TweetNaCl version 20140427.\n// See for details: http://tweetnacl.cr.yp.to/\n\nvar gf = function(init) {\n  var i, r = new Float64Array(16);\n  if (init) for (i = 0; i < init.length; i++) r[i] = init[i];\n  return r;\n};\n\n//  Pluggable, initialized in high-level API below.\nvar randombytes = function(/* x, n */) { throw new Error('no PRNG'); };\n\nvar _0 = new Uint8Array(16);\nvar _9 = new Uint8Array(32); _9[0] = 9;\n\nvar gf0 = gf(),\n    gf1 = gf([1]),\n    _121665 = gf([0xdb41, 1]),\n    D = gf([0x78a3, 0x1359, 0x4dca, 0x75eb, 0xd8ab, 0x4141, 0x0a4d, 0x0070, 0xe898, 0x7779, 0x4079, 0x8cc7, 0xfe73, 0x2b6f, 0x6cee, 0x5203]),\n    D2 = gf([0xf159, 0x26b2, 0x9b94, 0xebd6, 0xb156, 0x8283, 0x149a, 0x00e0, 0xd130, 0xeef3, 0x80f2, 0x198e, 0xfce7, 0x56df, 0xd9dc, 0x2406]),\n    X = gf([0xd51a, 0x8f25, 0x2d60, 0xc956, 0xa7b2, 0x9525, 0xc760, 0x692c, 0xdc5c, 0xfdd6, 0xe231, 0xc0a4, 0x53fe, 0xcd6e, 0x36d3, 0x2169]),\n    Y = gf([0x6658, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666]),\n    I = gf([0xa0b0, 0x4a0e, 0x1b27, 0xc4ee, 0xe478, 0xad2f, 0x1806, 0x2f43, 0xd7a7, 0x3dfb, 0x0099, 0x2b4d, 0xdf0b, 0x4fc1, 0x2480, 0x2b83]);\n\nfunction ts64(x, i, h, l) {\n  x[i]   = (h >> 24) & 0xff;\n  x[i+1] = (h >> 16) & 0xff;\n  x[i+2] = (h >>  8) & 0xff;\n  x[i+3] = h & 0xff;\n  x[i+4] = (l >> 24)  & 0xff;\n  x[i+5] = (l >> 16)  & 0xff;\n  x[i+6] = (l >>  8)  & 0xff;\n  x[i+7] = l & 0xff;\n}\n\nfunction vn(x, xi, y, yi, n) {\n  var i,d = 0;\n  for (i = 0; i < n; i++) d |= x[xi+i]^y[yi+i];\n  return (1 & ((d - 1) >>> 8)) - 1;\n}\n\nfunction crypto_verify_16(x, xi, y, yi) {\n  return vn(x,xi,y,yi,16);\n}\n\nfunction crypto_verify_32(x, xi, y, yi) {\n  return vn(x,xi,y,yi,32);\n}\n\nfunction core_salsa20(o, p, k, c) {\n  var j0  = c[ 0] & 0xff | (c[ 1] & 0xff)<<8 | (c[ 2] & 0xff)<<16 | (c[ 3] & 0xff)<<24,\n      j1  = k[ 0] & 0xff | (k[ 1] & 0xff)<<8 | (k[ 2] & 0xff)<<16 | (k[ 3] & 0xff)<<24,\n      j2  = k[ 4] & 0xff | (k[ 5] & 0xff)<<8 | (k[ 6] & 0xff)<<16 | (k[ 7] & 0xff)<<24,\n      j3  = k[ 8] & 0xff | (k[ 9] & 0xff)<<8 | (k[10] & 0xff)<<16 | (k[11] & 0xff)<<24,\n      j4  = k[12] & 0xff | (k[13] & 0xff)<<8 | (k[14] & 0xff)<<16 | (k[15] & 0xff)<<24,\n      j5  = c[ 4] & 0xff | (c[ 5] & 0xff)<<8 | (c[ 6] & 0xff)<<16 | (c[ 7] & 0xff)<<24,\n      j6  = p[ 0] & 0xff | (p[ 1] & 0xff)<<8 | (p[ 2] & 0xff)<<16 | (p[ 3] & 0xff)<<24,\n      j7  = p[ 4] & 0xff | (p[ 5] & 0xff)<<8 | (p[ 6] & 0xff)<<16 | (p[ 7] & 0xff)<<24,\n      j8  = p[ 8] & 0xff | (p[ 9] & 0xff)<<8 | (p[10] & 0xff)<<16 | (p[11] & 0xff)<<24,\n      j9  = p[12] & 0xff | (p[13] & 0xff)<<8 | (p[14] & 0xff)<<16 | (p[15] & 0xff)<<24,\n      j10 = c[ 8] & 0xff | (c[ 9] & 0xff)<<8 | (c[10] & 0xff)<<16 | (c[11] & 0xff)<<24,\n      j11 = k[16] & 0xff | (k[17] & 0xff)<<8 | (k[18] & 0xff)<<16 | (k[19] & 0xff)<<24,\n      j12 = k[20] & 0xff | (k[21] & 0xff)<<8 | (k[22] & 0xff)<<16 | (k[23] & 0xff)<<24,\n      j13 = k[24] & 0xff | (k[25] & 0xff)<<8 | (k[26] & 0xff)<<16 | (k[27] & 0xff)<<24,\n      j14 = k[28] & 0xff | (k[29] & 0xff)<<8 | (k[30] & 0xff)<<16 | (k[31] & 0xff)<<24,\n      j15 = c[12] & 0xff | (c[13] & 0xff)<<8 | (c[14] & 0xff)<<16 | (c[15] & 0xff)<<24;\n\n  var x0 = j0, x1 = j1, x2 = j2, x3 = j3, x4 = j4, x5 = j5, x6 = j6, x7 = j7,\n      x8 = j8, x9 = j9, x10 = j10, x11 = j11, x12 = j12, x13 = j13, x14 = j14,\n      x15 = j15, u;\n\n  for (var i = 0; i < 20; i += 2) {\n    u = x0 + x12 | 0;\n    x4 ^= u<<7 | u>>>(32-7);\n    u = x4 + x0 | 0;\n    x8 ^= u<<9 | u>>>(32-9);\n    u = x8 + x4 | 0;\n    x12 ^= u<<13 | u>>>(32-13);\n    u = x12 + x8 | 0;\n    x0 ^= u<<18 | u>>>(32-18);\n\n    u = x5 + x1 | 0;\n    x9 ^= u<<7 | u>>>(32-7);\n    u = x9 + x5 | 0;\n    x13 ^= u<<9 | u>>>(32-9);\n    u = x13 + x9 | 0;\n    x1 ^= u<<13 | u>>>(32-13);\n    u = x1 + x13 | 0;\n    x5 ^= u<<18 | u>>>(32-18);\n\n    u = x10 + x6 | 0;\n    x14 ^= u<<7 | u>>>(32-7);\n    u = x14 + x10 | 0;\n    x2 ^= u<<9 | u>>>(32-9);\n    u = x2 + x14 | 0;\n    x6 ^= u<<13 | u>>>(32-13);\n    u = x6 + x2 | 0;\n    x10 ^= u<<18 | u>>>(32-18);\n\n    u = x15 + x11 | 0;\n    x3 ^= u<<7 | u>>>(32-7);\n    u = x3 + x15 | 0;\n    x7 ^= u<<9 | u>>>(32-9);\n    u = x7 + x3 | 0;\n    x11 ^= u<<13 | u>>>(32-13);\n    u = x11 + x7 | 0;\n    x15 ^= u<<18 | u>>>(32-18);\n\n    u = x0 + x3 | 0;\n    x1 ^= u<<7 | u>>>(32-7);\n    u = x1 + x0 | 0;\n    x2 ^= u<<9 | u>>>(32-9);\n    u = x2 + x1 | 0;\n    x3 ^= u<<13 | u>>>(32-13);\n    u = x3 + x2 | 0;\n    x0 ^= u<<18 | u>>>(32-18);\n\n    u = x5 + x4 | 0;\n    x6 ^= u<<7 | u>>>(32-7);\n    u = x6 + x5 | 0;\n    x7 ^= u<<9 | u>>>(32-9);\n    u = x7 + x6 | 0;\n    x4 ^= u<<13 | u>>>(32-13);\n    u = x4 + x7 | 0;\n    x5 ^= u<<18 | u>>>(32-18);\n\n    u = x10 + x9 | 0;\n    x11 ^= u<<7 | u>>>(32-7);\n    u = x11 + x10 | 0;\n    x8 ^= u<<9 | u>>>(32-9);\n    u = x8 + x11 | 0;\n    x9 ^= u<<13 | u>>>(32-13);\n    u = x9 + x8 | 0;\n    x10 ^= u<<18 | u>>>(32-18);\n\n    u = x15 + x14 | 0;\n    x12 ^= u<<7 | u>>>(32-7);\n    u = x12 + x15 | 0;\n    x13 ^= u<<9 | u>>>(32-9);\n    u = x13 + x12 | 0;\n    x14 ^= u<<13 | u>>>(32-13);\n    u = x14 + x13 | 0;\n    x15 ^= u<<18 | u>>>(32-18);\n  }\n   x0 =  x0 +  j0 | 0;\n   x1 =  x1 +  j1 | 0;\n   x2 =  x2 +  j2 | 0;\n   x3 =  x3 +  j3 | 0;\n   x4 =  x4 +  j4 | 0;\n   x5 =  x5 +  j5 | 0;\n   x6 =  x6 +  j6 | 0;\n   x7 =  x7 +  j7 | 0;\n   x8 =  x8 +  j8 | 0;\n   x9 =  x9 +  j9 | 0;\n  x10 = x10 + j10 | 0;\n  x11 = x11 + j11 | 0;\n  x12 = x12 + j12 | 0;\n  x13 = x13 + j13 | 0;\n  x14 = x14 + j14 | 0;\n  x15 = x15 + j15 | 0;\n\n  o[ 0] = x0 >>>  0 & 0xff;\n  o[ 1] = x0 >>>  8 & 0xff;\n  o[ 2] = x0 >>> 16 & 0xff;\n  o[ 3] = x0 >>> 24 & 0xff;\n\n  o[ 4] = x1 >>>  0 & 0xff;\n  o[ 5] = x1 >>>  8 & 0xff;\n  o[ 6] = x1 >>> 16 & 0xff;\n  o[ 7] = x1 >>> 24 & 0xff;\n\n  o[ 8] = x2 >>>  0 & 0xff;\n  o[ 9] = x2 >>>  8 & 0xff;\n  o[10] = x2 >>> 16 & 0xff;\n  o[11] = x2 >>> 24 & 0xff;\n\n  o[12] = x3 >>>  0 & 0xff;\n  o[13] = x3 >>>  8 & 0xff;\n  o[14] = x3 >>> 16 & 0xff;\n  o[15] = x3 >>> 24 & 0xff;\n\n  o[16] = x4 >>>  0 & 0xff;\n  o[17] = x4 >>>  8 & 0xff;\n  o[18] = x4 >>> 16 & 0xff;\n  o[19] = x4 >>> 24 & 0xff;\n\n  o[20] = x5 >>>  0 & 0xff;\n  o[21] = x5 >>>  8 & 0xff;\n  o[22] = x5 >>> 16 & 0xff;\n  o[23] = x5 >>> 24 & 0xff;\n\n  o[24] = x6 >>>  0 & 0xff;\n  o[25] = x6 >>>  8 & 0xff;\n  o[26] = x6 >>> 16 & 0xff;\n  o[27] = x6 >>> 24 & 0xff;\n\n  o[28] = x7 >>>  0 & 0xff;\n  o[29] = x7 >>>  8 & 0xff;\n  o[30] = x7 >>> 16 & 0xff;\n  o[31] = x7 >>> 24 & 0xff;\n\n  o[32] = x8 >>>  0 & 0xff;\n  o[33] = x8 >>>  8 & 0xff;\n  o[34] = x8 >>> 16 & 0xff;\n  o[35] = x8 >>> 24 & 0xff;\n\n  o[36] = x9 >>>  0 & 0xff;\n  o[37] = x9 >>>  8 & 0xff;\n  o[38] = x9 >>> 16 & 0xff;\n  o[39] = x9 >>> 24 & 0xff;\n\n  o[40] = x10 >>>  0 & 0xff;\n  o[41] = x10 >>>  8 & 0xff;\n  o[42] = x10 >>> 16 & 0xff;\n  o[43] = x10 >>> 24 & 0xff;\n\n  o[44] = x11 >>>  0 & 0xff;\n  o[45] = x11 >>>  8 & 0xff;\n  o[46] = x11 >>> 16 & 0xff;\n  o[47] = x11 >>> 24 & 0xff;\n\n  o[48] = x12 >>>  0 & 0xff;\n  o[49] = x12 >>>  8 & 0xff;\n  o[50] = x12 >>> 16 & 0xff;\n  o[51] = x12 >>> 24 & 0xff;\n\n  o[52] = x13 >>>  0 & 0xff;\n  o[53] = x13 >>>  8 & 0xff;\n  o[54] = x13 >>> 16 & 0xff;\n  o[55] = x13 >>> 24 & 0xff;\n\n  o[56] = x14 >>>  0 & 0xff;\n  o[57] = x14 >>>  8 & 0xff;\n  o[58] = x14 >>> 16 & 0xff;\n  o[59] = x14 >>> 24 & 0xff;\n\n  o[60] = x15 >>>  0 & 0xff;\n  o[61] = x15 >>>  8 & 0xff;\n  o[62] = x15 >>> 16 & 0xff;\n  o[63] = x15 >>> 24 & 0xff;\n}\n\nfunction core_hsalsa20(o,p,k,c) {\n  var j0  = c[ 0] & 0xff | (c[ 1] & 0xff)<<8 | (c[ 2] & 0xff)<<16 | (c[ 3] & 0xff)<<24,\n      j1  = k[ 0] & 0xff | (k[ 1] & 0xff)<<8 | (k[ 2] & 0xff)<<16 | (k[ 3] & 0xff)<<24,\n      j2  = k[ 4] & 0xff | (k[ 5] & 0xff)<<8 | (k[ 6] & 0xff)<<16 | (k[ 7] & 0xff)<<24,\n      j3  = k[ 8] & 0xff | (k[ 9] & 0xff)<<8 | (k[10] & 0xff)<<16 | (k[11] & 0xff)<<24,\n      j4  = k[12] & 0xff | (k[13] & 0xff)<<8 | (k[14] & 0xff)<<16 | (k[15] & 0xff)<<24,\n      j5  = c[ 4] & 0xff | (c[ 5] & 0xff)<<8 | (c[ 6] & 0xff)<<16 | (c[ 7] & 0xff)<<24,\n      j6  = p[ 0] & 0xff | (p[ 1] & 0xff)<<8 | (p[ 2] & 0xff)<<16 | (p[ 3] & 0xff)<<24,\n      j7  = p[ 4] & 0xff | (p[ 5] & 0xff)<<8 | (p[ 6] & 0xff)<<16 | (p[ 7] & 0xff)<<24,\n      j8  = p[ 8] & 0xff | (p[ 9] & 0xff)<<8 | (p[10] & 0xff)<<16 | (p[11] & 0xff)<<24,\n      j9  = p[12] & 0xff | (p[13] & 0xff)<<8 | (p[14] & 0xff)<<16 | (p[15] & 0xff)<<24,\n      j10 = c[ 8] & 0xff | (c[ 9] & 0xff)<<8 | (c[10] & 0xff)<<16 | (c[11] & 0xff)<<24,\n      j11 = k[16] & 0xff | (k[17] & 0xff)<<8 | (k[18] & 0xff)<<16 | (k[19] & 0xff)<<24,\n      j12 = k[20] & 0xff | (k[21] & 0xff)<<8 | (k[22] & 0xff)<<16 | (k[23] & 0xff)<<24,\n      j13 = k[24] & 0xff | (k[25] & 0xff)<<8 | (k[26] & 0xff)<<16 | (k[27] & 0xff)<<24,\n      j14 = k[28] & 0xff | (k[29] & 0xff)<<8 | (k[30] & 0xff)<<16 | (k[31] & 0xff)<<24,\n      j15 = c[12] & 0xff | (c[13] & 0xff)<<8 | (c[14] & 0xff)<<16 | (c[15] & 0xff)<<24;\n\n  var x0 = j0, x1 = j1, x2 = j2, x3 = j3, x4 = j4, x5 = j5, x6 = j6, x7 = j7,\n      x8 = j8, x9 = j9, x10 = j10, x11 = j11, x12 = j12, x13 = j13, x14 = j14,\n      x15 = j15, u;\n\n  for (var i = 0; i < 20; i += 2) {\n    u = x0 + x12 | 0;\n    x4 ^= u<<7 | u>>>(32-7);\n    u = x4 + x0 | 0;\n    x8 ^= u<<9 | u>>>(32-9);\n    u = x8 + x4 | 0;\n    x12 ^= u<<13 | u>>>(32-13);\n    u = x12 + x8 | 0;\n    x0 ^= u<<18 | u>>>(32-18);\n\n    u = x5 + x1 | 0;\n    x9 ^= u<<7 | u>>>(32-7);\n    u = x9 + x5 | 0;\n    x13 ^= u<<9 | u>>>(32-9);\n    u = x13 + x9 | 0;\n    x1 ^= u<<13 | u>>>(32-13);\n    u = x1 + x13 | 0;\n    x5 ^= u<<18 | u>>>(32-18);\n\n    u = x10 + x6 | 0;\n    x14 ^= u<<7 | u>>>(32-7);\n    u = x14 + x10 | 0;\n    x2 ^= u<<9 | u>>>(32-9);\n    u = x2 + x14 | 0;\n    x6 ^= u<<13 | u>>>(32-13);\n    u = x6 + x2 | 0;\n    x10 ^= u<<18 | u>>>(32-18);\n\n    u = x15 + x11 | 0;\n    x3 ^= u<<7 | u>>>(32-7);\n    u = x3 + x15 | 0;\n    x7 ^= u<<9 | u>>>(32-9);\n    u = x7 + x3 | 0;\n    x11 ^= u<<13 | u>>>(32-13);\n    u = x11 + x7 | 0;\n    x15 ^= u<<18 | u>>>(32-18);\n\n    u = x0 + x3 | 0;\n    x1 ^= u<<7 | u>>>(32-7);\n    u = x1 + x0 | 0;\n    x2 ^= u<<9 | u>>>(32-9);\n    u = x2 + x1 | 0;\n    x3 ^= u<<13 | u>>>(32-13);\n    u = x3 + x2 | 0;\n    x0 ^= u<<18 | u>>>(32-18);\n\n    u = x5 + x4 | 0;\n    x6 ^= u<<7 | u>>>(32-7);\n    u = x6 + x5 | 0;\n    x7 ^= u<<9 | u>>>(32-9);\n    u = x7 + x6 | 0;\n    x4 ^= u<<13 | u>>>(32-13);\n    u = x4 + x7 | 0;\n    x5 ^= u<<18 | u>>>(32-18);\n\n    u = x10 + x9 | 0;\n    x11 ^= u<<7 | u>>>(32-7);\n    u = x11 + x10 | 0;\n    x8 ^= u<<9 | u>>>(32-9);\n    u = x8 + x11 | 0;\n    x9 ^= u<<13 | u>>>(32-13);\n    u = x9 + x8 | 0;\n    x10 ^= u<<18 | u>>>(32-18);\n\n    u = x15 + x14 | 0;\n    x12 ^= u<<7 | u>>>(32-7);\n    u = x12 + x15 | 0;\n    x13 ^= u<<9 | u>>>(32-9);\n    u = x13 + x12 | 0;\n    x14 ^= u<<13 | u>>>(32-13);\n    u = x14 + x13 | 0;\n    x15 ^= u<<18 | u>>>(32-18);\n  }\n\n  o[ 0] = x0 >>>  0 & 0xff;\n  o[ 1] = x0 >>>  8 & 0xff;\n  o[ 2] = x0 >>> 16 & 0xff;\n  o[ 3] = x0 >>> 24 & 0xff;\n\n  o[ 4] = x5 >>>  0 & 0xff;\n  o[ 5] = x5 >>>  8 & 0xff;\n  o[ 6] = x5 >>> 16 & 0xff;\n  o[ 7] = x5 >>> 24 & 0xff;\n\n  o[ 8] = x10 >>>  0 & 0xff;\n  o[ 9] = x10 >>>  8 & 0xff;\n  o[10] = x10 >>> 16 & 0xff;\n  o[11] = x10 >>> 24 & 0xff;\n\n  o[12] = x15 >>>  0 & 0xff;\n  o[13] = x15 >>>  8 & 0xff;\n  o[14] = x15 >>> 16 & 0xff;\n  o[15] = x15 >>> 24 & 0xff;\n\n  o[16] = x6 >>>  0 & 0xff;\n  o[17] = x6 >>>  8 & 0xff;\n  o[18] = x6 >>> 16 & 0xff;\n  o[19] = x6 >>> 24 & 0xff;\n\n  o[20] = x7 >>>  0 & 0xff;\n  o[21] = x7 >>>  8 & 0xff;\n  o[22] = x7 >>> 16 & 0xff;\n  o[23] = x7 >>> 24 & 0xff;\n\n  o[24] = x8 >>>  0 & 0xff;\n  o[25] = x8 >>>  8 & 0xff;\n  o[26] = x8 >>> 16 & 0xff;\n  o[27] = x8 >>> 24 & 0xff;\n\n  o[28] = x9 >>>  0 & 0xff;\n  o[29] = x9 >>>  8 & 0xff;\n  o[30] = x9 >>> 16 & 0xff;\n  o[31] = x9 >>> 24 & 0xff;\n}\n\nfunction crypto_core_salsa20(out,inp,k,c) {\n  core_salsa20(out,inp,k,c);\n}\n\nfunction crypto_core_hsalsa20(out,inp,k,c) {\n  core_hsalsa20(out,inp,k,c);\n}\n\nvar sigma = new Uint8Array([101, 120, 112, 97, 110, 100, 32, 51, 50, 45, 98, 121, 116, 101, 32, 107]);\n            // \"expand 32-byte k\"\n\nfunction crypto_stream_salsa20_xor(c,cpos,m,mpos,b,n,k) {\n  var z = new Uint8Array(16), x = new Uint8Array(64);\n  var u, i;\n  for (i = 0; i < 16; i++) z[i] = 0;\n  for (i = 0; i < 8; i++) z[i] = n[i];\n  while (b >= 64) {\n    crypto_core_salsa20(x,z,k,sigma);\n    for (i = 0; i < 64; i++) c[cpos+i] = m[mpos+i] ^ x[i];\n    u = 1;\n    for (i = 8; i < 16; i++) {\n      u = u + (z[i] & 0xff) | 0;\n      z[i] = u & 0xff;\n      u >>>= 8;\n    }\n    b -= 64;\n    cpos += 64;\n    mpos += 64;\n  }\n  if (b > 0) {\n    crypto_core_salsa20(x,z,k,sigma);\n    for (i = 0; i < b; i++) c[cpos+i] = m[mpos+i] ^ x[i];\n  }\n  return 0;\n}\n\nfunction crypto_stream_salsa20(c,cpos,b,n,k) {\n  var z = new Uint8Array(16), x = new Uint8Array(64);\n  var u, i;\n  for (i = 0; i < 16; i++) z[i] = 0;\n  for (i = 0; i < 8; i++) z[i] = n[i];\n  while (b >= 64) {\n    crypto_core_salsa20(x,z,k,sigma);\n    for (i = 0; i < 64; i++) c[cpos+i] = x[i];\n    u = 1;\n    for (i = 8; i < 16; i++) {\n      u = u + (z[i] & 0xff) | 0;\n      z[i] = u & 0xff;\n      u >>>= 8;\n    }\n    b -= 64;\n    cpos += 64;\n  }\n  if (b > 0) {\n    crypto_core_salsa20(x,z,k,sigma);\n    for (i = 0; i < b; i++) c[cpos+i] = x[i];\n  }\n  return 0;\n}\n\nfunction crypto_stream(c,cpos,d,n,k) {\n  var s = new Uint8Array(32);\n  crypto_core_hsalsa20(s,n,k,sigma);\n  var sn = new Uint8Array(8);\n  for (var i = 0; i < 8; i++) sn[i] = n[i+16];\n  return crypto_stream_salsa20(c,cpos,d,sn,s);\n}\n\nfunction crypto_stream_xor(c,cpos,m,mpos,d,n,k) {\n  var s = new Uint8Array(32);\n  crypto_core_hsalsa20(s,n,k,sigma);\n  var sn = new Uint8Array(8);\n  for (var i = 0; i < 8; i++) sn[i] = n[i+16];\n  return crypto_stream_salsa20_xor(c,cpos,m,mpos,d,sn,s);\n}\n\n/*\n* Port of Andrew Moon's Poly1305-donna-16. Public domain.\n* https://github.com/floodyberry/poly1305-donna\n*/\n\nvar poly1305 = function(key) {\n  this.buffer = new Uint8Array(16);\n  this.r = new Uint16Array(10);\n  this.h = new Uint16Array(10);\n  this.pad = new Uint16Array(8);\n  this.leftover = 0;\n  this.fin = 0;\n\n  var t0, t1, t2, t3, t4, t5, t6, t7;\n\n  t0 = key[ 0] & 0xff | (key[ 1] & 0xff) << 8; this.r[0] = ( t0                     ) & 0x1fff;\n  t1 = key[ 2] & 0xff | (key[ 3] & 0xff) << 8; this.r[1] = ((t0 >>> 13) | (t1 <<  3)) & 0x1fff;\n  t2 = key[ 4] & 0xff | (key[ 5] & 0xff) << 8; this.r[2] = ((t1 >>> 10) | (t2 <<  6)) & 0x1f03;\n  t3 = key[ 6] & 0xff | (key[ 7] & 0xff) << 8; this.r[3] = ((t2 >>>  7) | (t3 <<  9)) & 0x1fff;\n  t4 = key[ 8] & 0xff | (key[ 9] & 0xff) << 8; this.r[4] = ((t3 >>>  4) | (t4 << 12)) & 0x00ff;\n  this.r[5] = ((t4 >>>  1)) & 0x1ffe;\n  t5 = key[10] & 0xff | (key[11] & 0xff) << 8; this.r[6] = ((t4 >>> 14) | (t5 <<  2)) & 0x1fff;\n  t6 = key[12] & 0xff | (key[13] & 0xff) << 8; this.r[7] = ((t5 >>> 11) | (t6 <<  5)) & 0x1f81;\n  t7 = key[14] & 0xff | (key[15] & 0xff) << 8; this.r[8] = ((t6 >>>  8) | (t7 <<  8)) & 0x1fff;\n  this.r[9] = ((t7 >>>  5)) & 0x007f;\n\n  this.pad[0] = key[16] & 0xff | (key[17] & 0xff) << 8;\n  this.pad[1] = key[18] & 0xff | (key[19] & 0xff) << 8;\n  this.pad[2] = key[20] & 0xff | (key[21] & 0xff) << 8;\n  this.pad[3] = key[22] & 0xff | (key[23] & 0xff) << 8;\n  this.pad[4] = key[24] & 0xff | (key[25] & 0xff) << 8;\n  this.pad[5] = key[26] & 0xff | (key[27] & 0xff) << 8;\n  this.pad[6] = key[28] & 0xff | (key[29] & 0xff) << 8;\n  this.pad[7] = key[30] & 0xff | (key[31] & 0xff) << 8;\n};\n\npoly1305.prototype.blocks = function(m, mpos, bytes) {\n  var hibit = this.fin ? 0 : (1 << 11);\n  var t0, t1, t2, t3, t4, t5, t6, t7, c;\n  var d0, d1, d2, d3, d4, d5, d6, d7, d8, d9;\n\n  var h0 = this.h[0],\n      h1 = this.h[1],\n      h2 = this.h[2],\n      h3 = this.h[3],\n      h4 = this.h[4],\n      h5 = this.h[5],\n      h6 = this.h[6],\n      h7 = this.h[7],\n      h8 = this.h[8],\n      h9 = this.h[9];\n\n  var r0 = this.r[0],\n      r1 = this.r[1],\n      r2 = this.r[2],\n      r3 = this.r[3],\n      r4 = this.r[4],\n      r5 = this.r[5],\n      r6 = this.r[6],\n      r7 = this.r[7],\n      r8 = this.r[8],\n      r9 = this.r[9];\n\n  while (bytes >= 16) {\n    t0 = m[mpos+ 0] & 0xff | (m[mpos+ 1] & 0xff) << 8; h0 += ( t0                     ) & 0x1fff;\n    t1 = m[mpos+ 2] & 0xff | (m[mpos+ 3] & 0xff) << 8; h1 += ((t0 >>> 13) | (t1 <<  3)) & 0x1fff;\n    t2 = m[mpos+ 4] & 0xff | (m[mpos+ 5] & 0xff) << 8; h2 += ((t1 >>> 10) | (t2 <<  6)) & 0x1fff;\n    t3 = m[mpos+ 6] & 0xff | (m[mpos+ 7] & 0xff) << 8; h3 += ((t2 >>>  7) | (t3 <<  9)) & 0x1fff;\n    t4 = m[mpos+ 8] & 0xff | (m[mpos+ 9] & 0xff) << 8; h4 += ((t3 >>>  4) | (t4 << 12)) & 0x1fff;\n    h5 += ((t4 >>>  1)) & 0x1fff;\n    t5 = m[mpos+10] & 0xff | (m[mpos+11] & 0xff) << 8; h6 += ((t4 >>> 14) | (t5 <<  2)) & 0x1fff;\n    t6 = m[mpos+12] & 0xff | (m[mpos+13] & 0xff) << 8; h7 += ((t5 >>> 11) | (t6 <<  5)) & 0x1fff;\n    t7 = m[mpos+14] & 0xff | (m[mpos+15] & 0xff) << 8; h8 += ((t6 >>>  8) | (t7 <<  8)) & 0x1fff;\n    h9 += ((t7 >>> 5)) | hibit;\n\n    c = 0;\n\n    d0 = c;\n    d0 += h0 * r0;\n    d0 += h1 * (5 * r9);\n    d0 += h2 * (5 * r8);\n    d0 += h3 * (5 * r7);\n    d0 += h4 * (5 * r6);\n    c = (d0 >>> 13); d0 &= 0x1fff;\n    d0 += h5 * (5 * r5);\n    d0 += h6 * (5 * r4);\n    d0 += h7 * (5 * r3);\n    d0 += h8 * (5 * r2);\n    d0 += h9 * (5 * r1);\n    c += (d0 >>> 13); d0 &= 0x1fff;\n\n    d1 = c;\n    d1 += h0 * r1;\n    d1 += h1 * r0;\n    d1 += h2 * (5 * r9);\n    d1 += h3 * (5 * r8);\n    d1 += h4 * (5 * r7);\n    c = (d1 >>> 13); d1 &= 0x1fff;\n    d1 += h5 * (5 * r6);\n    d1 += h6 * (5 * r5);\n    d1 += h7 * (5 * r4);\n    d1 += h8 * (5 * r3);\n    d1 += h9 * (5 * r2);\n    c += (d1 >>> 13); d1 &= 0x1fff;\n\n    d2 = c;\n    d2 += h0 * r2;\n    d2 += h1 * r1;\n    d2 += h2 * r0;\n    d2 += h3 * (5 * r9);\n    d2 += h4 * (5 * r8);\n    c = (d2 >>> 13); d2 &= 0x1fff;\n    d2 += h5 * (5 * r7);\n    d2 += h6 * (5 * r6);\n    d2 += h7 * (5 * r5);\n    d2 += h8 * (5 * r4);\n    d2 += h9 * (5 * r3);\n    c += (d2 >>> 13); d2 &= 0x1fff;\n\n    d3 = c;\n    d3 += h0 * r3;\n    d3 += h1 * r2;\n    d3 += h2 * r1;\n    d3 += h3 * r0;\n    d3 += h4 * (5 * r9);\n    c = (d3 >>> 13); d3 &= 0x1fff;\n    d3 += h5 * (5 * r8);\n    d3 += h6 * (5 * r7);\n    d3 += h7 * (5 * r6);\n    d3 += h8 * (5 * r5);\n    d3 += h9 * (5 * r4);\n    c += (d3 >>> 13); d3 &= 0x1fff;\n\n    d4 = c;\n    d4 += h0 * r4;\n    d4 += h1 * r3;\n    d4 += h2 * r2;\n    d4 += h3 * r1;\n    d4 += h4 * r0;\n    c = (d4 >>> 13); d4 &= 0x1fff;\n    d4 += h5 * (5 * r9);\n    d4 += h6 * (5 * r8);\n    d4 += h7 * (5 * r7);\n    d4 += h8 * (5 * r6);\n    d4 += h9 * (5 * r5);\n    c += (d4 >>> 13); d4 &= 0x1fff;\n\n    d5 = c;\n    d5 += h0 * r5;\n    d5 += h1 * r4;\n    d5 += h2 * r3;\n    d5 += h3 * r2;\n    d5 += h4 * r1;\n    c = (d5 >>> 13); d5 &= 0x1fff;\n    d5 += h5 * r0;\n    d5 += h6 * (5 * r9);\n    d5 += h7 * (5 * r8);\n    d5 += h8 * (5 * r7);\n    d5 += h9 * (5 * r6);\n    c += (d5 >>> 13); d5 &= 0x1fff;\n\n    d6 = c;\n    d6 += h0 * r6;\n    d6 += h1 * r5;\n    d6 += h2 * r4;\n    d6 += h3 * r3;\n    d6 += h4 * r2;\n    c = (d6 >>> 13); d6 &= 0x1fff;\n    d6 += h5 * r1;\n    d6 += h6 * r0;\n    d6 += h7 * (5 * r9);\n    d6 += h8 * (5 * r8);\n    d6 += h9 * (5 * r7);\n    c += (d6 >>> 13); d6 &= 0x1fff;\n\n    d7 = c;\n    d7 += h0 * r7;\n    d7 += h1 * r6;\n    d7 += h2 * r5;\n    d7 += h3 * r4;\n    d7 += h4 * r3;\n    c = (d7 >>> 13); d7 &= 0x1fff;\n    d7 += h5 * r2;\n    d7 += h6 * r1;\n    d7 += h7 * r0;\n    d7 += h8 * (5 * r9);\n    d7 += h9 * (5 * r8);\n    c += (d7 >>> 13); d7 &= 0x1fff;\n\n    d8 = c;\n    d8 += h0 * r8;\n    d8 += h1 * r7;\n    d8 += h2 * r6;\n    d8 += h3 * r5;\n    d8 += h4 * r4;\n    c = (d8 >>> 13); d8 &= 0x1fff;\n    d8 += h5 * r3;\n    d8 += h6 * r2;\n    d8 += h7 * r1;\n    d8 += h8 * r0;\n    d8 += h9 * (5 * r9);\n    c += (d8 >>> 13); d8 &= 0x1fff;\n\n    d9 = c;\n    d9 += h0 * r9;\n    d9 += h1 * r8;\n    d9 += h2 * r7;\n    d9 += h3 * r6;\n    d9 += h4 * r5;\n    c = (d9 >>> 13); d9 &= 0x1fff;\n    d9 += h5 * r4;\n    d9 += h6 * r3;\n    d9 += h7 * r2;\n    d9 += h8 * r1;\n    d9 += h9 * r0;\n    c += (d9 >>> 13); d9 &= 0x1fff;\n\n    c = (((c << 2) + c)) | 0;\n    c = (c + d0) | 0;\n    d0 = c & 0x1fff;\n    c = (c >>> 13);\n    d1 += c;\n\n    h0 = d0;\n    h1 = d1;\n    h2 = d2;\n    h3 = d3;\n    h4 = d4;\n    h5 = d5;\n    h6 = d6;\n    h7 = d7;\n    h8 = d8;\n    h9 = d9;\n\n    mpos += 16;\n    bytes -= 16;\n  }\n  this.h[0] = h0;\n  this.h[1] = h1;\n  this.h[2] = h2;\n  this.h[3] = h3;\n  this.h[4] = h4;\n  this.h[5] = h5;\n  this.h[6] = h6;\n  this.h[7] = h7;\n  this.h[8] = h8;\n  this.h[9] = h9;\n};\n\npoly1305.prototype.finish = function(mac, macpos) {\n  var g = new Uint16Array(10);\n  var c, mask, f, i;\n\n  if (this.leftover) {\n    i = this.leftover;\n    this.buffer[i++] = 1;\n    for (; i < 16; i++) this.buffer[i] = 0;\n    this.fin = 1;\n    this.blocks(this.buffer, 0, 16);\n  }\n\n  c = this.h[1] >>> 13;\n  this.h[1] &= 0x1fff;\n  for (i = 2; i < 10; i++) {\n    this.h[i] += c;\n    c = this.h[i] >>> 13;\n    this.h[i] &= 0x1fff;\n  }\n  this.h[0] += (c * 5);\n  c = this.h[0] >>> 13;\n  this.h[0] &= 0x1fff;\n  this.h[1] += c;\n  c = this.h[1] >>> 13;\n  this.h[1] &= 0x1fff;\n  this.h[2] += c;\n\n  g[0] = this.h[0] + 5;\n  c = g[0] >>> 13;\n  g[0] &= 0x1fff;\n  for (i = 1; i < 10; i++) {\n    g[i] = this.h[i] + c;\n    c = g[i] >>> 13;\n    g[i] &= 0x1fff;\n  }\n  g[9] -= (1 << 13);\n\n  mask = (c ^ 1) - 1;\n  for (i = 0; i < 10; i++) g[i] &= mask;\n  mask = ~mask;\n  for (i = 0; i < 10; i++) this.h[i] = (this.h[i] & mask) | g[i];\n\n  this.h[0] = ((this.h[0]       ) | (this.h[1] << 13)                    ) & 0xffff;\n  this.h[1] = ((this.h[1] >>>  3) | (this.h[2] << 10)                    ) & 0xffff;\n  this.h[2] = ((this.h[2] >>>  6) | (this.h[3] <<  7)                    ) & 0xffff;\n  this.h[3] = ((this.h[3] >>>  9) | (this.h[4] <<  4)                    ) & 0xffff;\n  this.h[4] = ((this.h[4] >>> 12) | (this.h[5] <<  1) | (this.h[6] << 14)) & 0xffff;\n  this.h[5] = ((this.h[6] >>>  2) | (this.h[7] << 11)                    ) & 0xffff;\n  this.h[6] = ((this.h[7] >>>  5) | (this.h[8] <<  8)                    ) & 0xffff;\n  this.h[7] = ((this.h[8] >>>  8) | (this.h[9] <<  5)                    ) & 0xffff;\n\n  f = this.h[0] + this.pad[0];\n  this.h[0] = f & 0xffff;\n  for (i = 1; i < 8; i++) {\n    f = (((this.h[i] + this.pad[i]) | 0) + (f >>> 16)) | 0;\n    this.h[i] = f & 0xffff;\n  }\n\n  mac[macpos+ 0] = (this.h[0] >>> 0) & 0xff;\n  mac[macpos+ 1] = (this.h[0] >>> 8) & 0xff;\n  mac[macpos+ 2] = (this.h[1] >>> 0) & 0xff;\n  mac[macpos+ 3] = (this.h[1] >>> 8) & 0xff;\n  mac[macpos+ 4] = (this.h[2] >>> 0) & 0xff;\n  mac[macpos+ 5] = (this.h[2] >>> 8) & 0xff;\n  mac[macpos+ 6] = (this.h[3] >>> 0) & 0xff;\n  mac[macpos+ 7] = (this.h[3] >>> 8) & 0xff;\n  mac[macpos+ 8] = (this.h[4] >>> 0) & 0xff;\n  mac[macpos+ 9] = (this.h[4] >>> 8) & 0xff;\n  mac[macpos+10] = (this.h[5] >>> 0) & 0xff;\n  mac[macpos+11] = (this.h[5] >>> 8) & 0xff;\n  mac[macpos+12] = (this.h[6] >>> 0) & 0xff;\n  mac[macpos+13] = (this.h[6] >>> 8) & 0xff;\n  mac[macpos+14] = (this.h[7] >>> 0) & 0xff;\n  mac[macpos+15] = (this.h[7] >>> 8) & 0xff;\n};\n\npoly1305.prototype.update = function(m, mpos, bytes) {\n  var i, want;\n\n  if (this.leftover) {\n    want = (16 - this.leftover);\n    if (want > bytes)\n      want = bytes;\n    for (i = 0; i < want; i++)\n      this.buffer[this.leftover + i] = m[mpos+i];\n    bytes -= want;\n    mpos += want;\n    this.leftover += want;\n    if (this.leftover < 16)\n      return;\n    this.blocks(this.buffer, 0, 16);\n    this.leftover = 0;\n  }\n\n  if (bytes >= 16) {\n    want = bytes - (bytes % 16);\n    this.blocks(m, mpos, want);\n    mpos += want;\n    bytes -= want;\n  }\n\n  if (bytes) {\n    for (i = 0; i < bytes; i++)\n      this.buffer[this.leftover + i] = m[mpos+i];\n    this.leftover += bytes;\n  }\n};\n\nfunction crypto_onetimeauth(out, outpos, m, mpos, n, k) {\n  var s = new poly1305(k);\n  s.update(m, mpos, n);\n  s.finish(out, outpos);\n  return 0;\n}\n\nfunction crypto_onetimeauth_verify(h, hpos, m, mpos, n, k) {\n  var x = new Uint8Array(16);\n  crypto_onetimeauth(x,0,m,mpos,n,k);\n  return crypto_verify_16(h,hpos,x,0);\n}\n\nfunction crypto_secretbox(c,m,d,n,k) {\n  var i;\n  if (d < 32) return -1;\n  crypto_stream_xor(c,0,m,0,d,n,k);\n  crypto_onetimeauth(c, 16, c, 32, d - 32, c);\n  for (i = 0; i < 16; i++) c[i] = 0;\n  return 0;\n}\n\nfunction crypto_secretbox_open(m,c,d,n,k) {\n  var i;\n  var x = new Uint8Array(32);\n  if (d < 32) return -1;\n  crypto_stream(x,0,32,n,k);\n  if (crypto_onetimeauth_verify(c, 16,c, 32,d - 32,x) !== 0) return -1;\n  crypto_stream_xor(m,0,c,0,d,n,k);\n  for (i = 0; i < 32; i++) m[i] = 0;\n  return 0;\n}\n\nfunction set25519(r, a) {\n  var i;\n  for (i = 0; i < 16; i++) r[i] = a[i]|0;\n}\n\nfunction car25519(o) {\n  var i, v, c = 1;\n  for (i = 0; i < 16; i++) {\n    v = o[i] + c + 65535;\n    c = Math.floor(v / 65536);\n    o[i] = v - c * 65536;\n  }\n  o[0] += c-1 + 37 * (c-1);\n}\n\nfunction sel25519(p, q, b) {\n  var t, c = ~(b-1);\n  for (var i = 0; i < 16; i++) {\n    t = c & (p[i] ^ q[i]);\n    p[i] ^= t;\n    q[i] ^= t;\n  }\n}\n\nfunction pack25519(o, n) {\n  var i, j, b;\n  var m = gf(), t = gf();\n  for (i = 0; i < 16; i++) t[i] = n[i];\n  car25519(t);\n  car25519(t);\n  car25519(t);\n  for (j = 0; j < 2; j++) {\n    m[0] = t[0] - 0xffed;\n    for (i = 1; i < 15; i++) {\n      m[i] = t[i] - 0xffff - ((m[i-1]>>16) & 1);\n      m[i-1] &= 0xffff;\n    }\n    m[15] = t[15] - 0x7fff - ((m[14]>>16) & 1);\n    b = (m[15]>>16) & 1;\n    m[14] &= 0xffff;\n    sel25519(t, m, 1-b);\n  }\n  for (i = 0; i < 16; i++) {\n    o[2*i] = t[i] & 0xff;\n    o[2*i+1] = t[i]>>8;\n  }\n}\n\nfunction neq25519(a, b) {\n  var c = new Uint8Array(32), d = new Uint8Array(32);\n  pack25519(c, a);\n  pack25519(d, b);\n  return crypto_verify_32(c, 0, d, 0);\n}\n\nfunction par25519(a) {\n  var d = new Uint8Array(32);\n  pack25519(d, a);\n  return d[0] & 1;\n}\n\nfunction unpack25519(o, n) {\n  var i;\n  for (i = 0; i < 16; i++) o[i] = n[2*i] + (n[2*i+1] << 8);\n  o[15] &= 0x7fff;\n}\n\nfunction A(o, a, b) {\n  for (var i = 0; i < 16; i++) o[i] = a[i] + b[i];\n}\n\nfunction Z(o, a, b) {\n  for (var i = 0; i < 16; i++) o[i] = a[i] - b[i];\n}\n\nfunction M(o, a, b) {\n  var v, c,\n     t0 = 0,  t1 = 0,  t2 = 0,  t3 = 0,  t4 = 0,  t5 = 0,  t6 = 0,  t7 = 0,\n     t8 = 0,  t9 = 0, t10 = 0, t11 = 0, t12 = 0, t13 = 0, t14 = 0, t15 = 0,\n    t16 = 0, t17 = 0, t18 = 0, t19 = 0, t20 = 0, t21 = 0, t22 = 0, t23 = 0,\n    t24 = 0, t25 = 0, t26 = 0, t27 = 0, t28 = 0, t29 = 0, t30 = 0,\n    b0 = b[0],\n    b1 = b[1],\n    b2 = b[2],\n    b3 = b[3],\n    b4 = b[4],\n    b5 = b[5],\n    b6 = b[6],\n    b7 = b[7],\n    b8 = b[8],\n    b9 = b[9],\n    b10 = b[10],\n    b11 = b[11],\n    b12 = b[12],\n    b13 = b[13],\n    b14 = b[14],\n    b15 = b[15];\n\n  v = a[0];\n  t0 += v * b0;\n  t1 += v * b1;\n  t2 += v * b2;\n  t3 += v * b3;\n  t4 += v * b4;\n  t5 += v * b5;\n  t6 += v * b6;\n  t7 += v * b7;\n  t8 += v * b8;\n  t9 += v * b9;\n  t10 += v * b10;\n  t11 += v * b11;\n  t12 += v * b12;\n  t13 += v * b13;\n  t14 += v * b14;\n  t15 += v * b15;\n  v = a[1];\n  t1 += v * b0;\n  t2 += v * b1;\n  t3 += v * b2;\n  t4 += v * b3;\n  t5 += v * b4;\n  t6 += v * b5;\n  t7 += v * b6;\n  t8 += v * b7;\n  t9 += v * b8;\n  t10 += v * b9;\n  t11 += v * b10;\n  t12 += v * b11;\n  t13 += v * b12;\n  t14 += v * b13;\n  t15 += v * b14;\n  t16 += v * b15;\n  v = a[2];\n  t2 += v * b0;\n  t3 += v * b1;\n  t4 += v * b2;\n  t5 += v * b3;\n  t6 += v * b4;\n  t7 += v * b5;\n  t8 += v * b6;\n  t9 += v * b7;\n  t10 += v * b8;\n  t11 += v * b9;\n  t12 += v * b10;\n  t13 += v * b11;\n  t14 += v * b12;\n  t15 += v * b13;\n  t16 += v * b14;\n  t17 += v * b15;\n  v = a[3];\n  t3 += v * b0;\n  t4 += v * b1;\n  t5 += v * b2;\n  t6 += v * b3;\n  t7 += v * b4;\n  t8 += v * b5;\n  t9 += v * b6;\n  t10 += v * b7;\n  t11 += v * b8;\n  t12 += v * b9;\n  t13 += v * b10;\n  t14 += v * b11;\n  t15 += v * b12;\n  t16 += v * b13;\n  t17 += v * b14;\n  t18 += v * b15;\n  v = a[4];\n  t4 += v * b0;\n  t5 += v * b1;\n  t6 += v * b2;\n  t7 += v * b3;\n  t8 += v * b4;\n  t9 += v * b5;\n  t10 += v * b6;\n  t11 += v * b7;\n  t12 += v * b8;\n  t13 += v * b9;\n  t14 += v * b10;\n  t15 += v * b11;\n  t16 += v * b12;\n  t17 += v * b13;\n  t18 += v * b14;\n  t19 += v * b15;\n  v = a[5];\n  t5 += v * b0;\n  t6 += v * b1;\n  t7 += v * b2;\n  t8 += v * b3;\n  t9 += v * b4;\n  t10 += v * b5;\n  t11 += v * b6;\n  t12 += v * b7;\n  t13 += v * b8;\n  t14 += v * b9;\n  t15 += v * b10;\n  t16 += v * b11;\n  t17 += v * b12;\n  t18 += v * b13;\n  t19 += v * b14;\n  t20 += v * b15;\n  v = a[6];\n  t6 += v * b0;\n  t7 += v * b1;\n  t8 += v * b2;\n  t9 += v * b3;\n  t10 += v * b4;\n  t11 += v * b5;\n  t12 += v * b6;\n  t13 += v * b7;\n  t14 += v * b8;\n  t15 += v * b9;\n  t16 += v * b10;\n  t17 += v * b11;\n  t18 += v * b12;\n  t19 += v * b13;\n  t20 += v * b14;\n  t21 += v * b15;\n  v = a[7];\n  t7 += v * b0;\n  t8 += v * b1;\n  t9 += v * b2;\n  t10 += v * b3;\n  t11 += v * b4;\n  t12 += v * b5;\n  t13 += v * b6;\n  t14 += v * b7;\n  t15 += v * b8;\n  t16 += v * b9;\n  t17 += v * b10;\n  t18 += v * b11;\n  t19 += v * b12;\n  t20 += v * b13;\n  t21 += v * b14;\n  t22 += v * b15;\n  v = a[8];\n  t8 += v * b0;\n  t9 += v * b1;\n  t10 += v * b2;\n  t11 += v * b3;\n  t12 += v * b4;\n  t13 += v * b5;\n  t14 += v * b6;\n  t15 += v * b7;\n  t16 += v * b8;\n  t17 += v * b9;\n  t18 += v * b10;\n  t19 += v * b11;\n  t20 += v * b12;\n  t21 += v * b13;\n  t22 += v * b14;\n  t23 += v * b15;\n  v = a[9];\n  t9 += v * b0;\n  t10 += v * b1;\n  t11 += v * b2;\n  t12 += v * b3;\n  t13 += v * b4;\n  t14 += v * b5;\n  t15 += v * b6;\n  t16 += v * b7;\n  t17 += v * b8;\n  t18 += v * b9;\n  t19 += v * b10;\n  t20 += v * b11;\n  t21 += v * b12;\n  t22 += v * b13;\n  t23 += v * b14;\n  t24 += v * b15;\n  v = a[10];\n  t10 += v * b0;\n  t11 += v * b1;\n  t12 += v * b2;\n  t13 += v * b3;\n  t14 += v * b4;\n  t15 += v * b5;\n  t16 += v * b6;\n  t17 += v * b7;\n  t18 += v * b8;\n  t19 += v * b9;\n  t20 += v * b10;\n  t21 += v * b11;\n  t22 += v * b12;\n  t23 += v * b13;\n  t24 += v * b14;\n  t25 += v * b15;\n  v = a[11];\n  t11 += v * b0;\n  t12 += v * b1;\n  t13 += v * b2;\n  t14 += v * b3;\n  t15 += v * b4;\n  t16 += v * b5;\n  t17 += v * b6;\n  t18 += v * b7;\n  t19 += v * b8;\n  t20 += v * b9;\n  t21 += v * b10;\n  t22 += v * b11;\n  t23 += v * b12;\n  t24 += v * b13;\n  t25 += v * b14;\n  t26 += v * b15;\n  v = a[12];\n  t12 += v * b0;\n  t13 += v * b1;\n  t14 += v * b2;\n  t15 += v * b3;\n  t16 += v * b4;\n  t17 += v * b5;\n  t18 += v * b6;\n  t19 += v * b7;\n  t20 += v * b8;\n  t21 += v * b9;\n  t22 += v * b10;\n  t23 += v * b11;\n  t24 += v * b12;\n  t25 += v * b13;\n  t26 += v * b14;\n  t27 += v * b15;\n  v = a[13];\n  t13 += v * b0;\n  t14 += v * b1;\n  t15 += v * b2;\n  t16 += v * b3;\n  t17 += v * b4;\n  t18 += v * b5;\n  t19 += v * b6;\n  t20 += v * b7;\n  t21 += v * b8;\n  t22 += v * b9;\n  t23 += v * b10;\n  t24 += v * b11;\n  t25 += v * b12;\n  t26 += v * b13;\n  t27 += v * b14;\n  t28 += v * b15;\n  v = a[14];\n  t14 += v * b0;\n  t15 += v * b1;\n  t16 += v * b2;\n  t17 += v * b3;\n  t18 += v * b4;\n  t19 += v * b5;\n  t20 += v * b6;\n  t21 += v * b7;\n  t22 += v * b8;\n  t23 += v * b9;\n  t24 += v * b10;\n  t25 += v * b11;\n  t26 += v * b12;\n  t27 += v * b13;\n  t28 += v * b14;\n  t29 += v * b15;\n  v = a[15];\n  t15 += v * b0;\n  t16 += v * b1;\n  t17 += v * b2;\n  t18 += v * b3;\n  t19 += v * b4;\n  t20 += v * b5;\n  t21 += v * b6;\n  t22 += v * b7;\n  t23 += v * b8;\n  t24 += v * b9;\n  t25 += v * b10;\n  t26 += v * b11;\n  t27 += v * b12;\n  t28 += v * b13;\n  t29 += v * b14;\n  t30 += v * b15;\n\n  t0  += 38 * t16;\n  t1  += 38 * t17;\n  t2  += 38 * t18;\n  t3  += 38 * t19;\n  t4  += 38 * t20;\n  t5  += 38 * t21;\n  t6  += 38 * t22;\n  t7  += 38 * t23;\n  t8  += 38 * t24;\n  t9  += 38 * t25;\n  t10 += 38 * t26;\n  t11 += 38 * t27;\n  t12 += 38 * t28;\n  t13 += 38 * t29;\n  t14 += 38 * t30;\n  // t15 left as is\n\n  // first car\n  c = 1;\n  v =  t0 + c + 65535; c = Math.floor(v / 65536);  t0 = v - c * 65536;\n  v =  t1 + c + 65535; c = Math.floor(v / 65536);  t1 = v - c * 65536;\n  v =  t2 + c + 65535; c = Math.floor(v / 65536);  t2 = v - c * 65536;\n  v =  t3 + c + 65535; c = Math.floor(v / 65536);  t3 = v - c * 65536;\n  v =  t4 + c + 65535; c = Math.floor(v / 65536);  t4 = v - c * 65536;\n  v =  t5 + c + 65535; c = Math.floor(v / 65536);  t5 = v - c * 65536;\n  v =  t6 + c + 65535; c = Math.floor(v / 65536);  t6 = v - c * 65536;\n  v =  t7 + c + 65535; c = Math.floor(v / 65536);  t7 = v - c * 65536;\n  v =  t8 + c + 65535; c = Math.floor(v / 65536);  t8 = v - c * 65536;\n  v =  t9 + c + 65535; c = Math.floor(v / 65536);  t9 = v - c * 65536;\n  v = t10 + c + 65535; c = Math.floor(v / 65536); t10 = v - c * 65536;\n  v = t11 + c + 65535; c = Math.floor(v / 65536); t11 = v - c * 65536;\n  v = t12 + c + 65535; c = Math.floor(v / 65536); t12 = v - c * 65536;\n  v = t13 + c + 65535; c = Math.floor(v / 65536); t13 = v - c * 65536;\n  v = t14 + c + 65535; c = Math.floor(v / 65536); t14 = v - c * 65536;\n  v = t15 + c + 65535; c = Math.floor(v / 65536); t15 = v - c * 65536;\n  t0 += c-1 + 37 * (c-1);\n\n  // second car\n  c = 1;\n  v =  t0 + c + 65535; c = Math.floor(v / 65536);  t0 = v - c * 65536;\n  v =  t1 + c + 65535; c = Math.floor(v / 65536);  t1 = v - c * 65536;\n  v =  t2 + c + 65535; c = Math.floor(v / 65536);  t2 = v - c * 65536;\n  v =  t3 + c + 65535; c = Math.floor(v / 65536);  t3 = v - c * 65536;\n  v =  t4 + c + 65535; c = Math.floor(v / 65536);  t4 = v - c * 65536;\n  v =  t5 + c + 65535; c = Math.floor(v / 65536);  t5 = v - c * 65536;\n  v =  t6 + c + 65535; c = Math.floor(v / 65536);  t6 = v - c * 65536;\n  v =  t7 + c + 65535; c = Math.floor(v / 65536);  t7 = v - c * 65536;\n  v =  t8 + c + 65535; c = Math.floor(v / 65536);  t8 = v - c * 65536;\n  v =  t9 + c + 65535; c = Math.floor(v / 65536);  t9 = v - c * 65536;\n  v = t10 + c + 65535; c = Math.floor(v / 65536); t10 = v - c * 65536;\n  v = t11 + c + 65535; c = Math.floor(v / 65536); t11 = v - c * 65536;\n  v = t12 + c + 65535; c = Math.floor(v / 65536); t12 = v - c * 65536;\n  v = t13 + c + 65535; c = Math.floor(v / 65536); t13 = v - c * 65536;\n  v = t14 + c + 65535; c = Math.floor(v / 65536); t14 = v - c * 65536;\n  v = t15 + c + 65535; c = Math.floor(v / 65536); t15 = v - c * 65536;\n  t0 += c-1 + 37 * (c-1);\n\n  o[ 0] = t0;\n  o[ 1] = t1;\n  o[ 2] = t2;\n  o[ 3] = t3;\n  o[ 4] = t4;\n  o[ 5] = t5;\n  o[ 6] = t6;\n  o[ 7] = t7;\n  o[ 8] = t8;\n  o[ 9] = t9;\n  o[10] = t10;\n  o[11] = t11;\n  o[12] = t12;\n  o[13] = t13;\n  o[14] = t14;\n  o[15] = t15;\n}\n\nfunction S(o, a) {\n  M(o, a, a);\n}\n\nfunction inv25519(o, i) {\n  var c = gf();\n  var a;\n  for (a = 0; a < 16; a++) c[a] = i[a];\n  for (a = 253; a >= 0; a--) {\n    S(c, c);\n    if(a !== 2 && a !== 4) M(c, c, i);\n  }\n  for (a = 0; a < 16; a++) o[a] = c[a];\n}\n\nfunction pow2523(o, i) {\n  var c = gf();\n  var a;\n  for (a = 0; a < 16; a++) c[a] = i[a];\n  for (a = 250; a >= 0; a--) {\n      S(c, c);\n      if(a !== 1) M(c, c, i);\n  }\n  for (a = 0; a < 16; a++) o[a] = c[a];\n}\n\nfunction crypto_scalarmult(q, n, p) {\n  var z = new Uint8Array(32);\n  var x = new Float64Array(80), r, i;\n  var a = gf(), b = gf(), c = gf(),\n      d = gf(), e = gf(), f = gf();\n  for (i = 0; i < 31; i++) z[i] = n[i];\n  z[31]=(n[31]&127)|64;\n  z[0]&=248;\n  unpack25519(x,p);\n  for (i = 0; i < 16; i++) {\n    b[i]=x[i];\n    d[i]=a[i]=c[i]=0;\n  }\n  a[0]=d[0]=1;\n  for (i=254; i>=0; --i) {\n    r=(z[i>>>3]>>>(i&7))&1;\n    sel25519(a,b,r);\n    sel25519(c,d,r);\n    A(e,a,c);\n    Z(a,a,c);\n    A(c,b,d);\n    Z(b,b,d);\n    S(d,e);\n    S(f,a);\n    M(a,c,a);\n    M(c,b,e);\n    A(e,a,c);\n    Z(a,a,c);\n    S(b,a);\n    Z(c,d,f);\n    M(a,c,_121665);\n    A(a,a,d);\n    M(c,c,a);\n    M(a,d,f);\n    M(d,b,x);\n    S(b,e);\n    sel25519(a,b,r);\n    sel25519(c,d,r);\n  }\n  for (i = 0; i < 16; i++) {\n    x[i+16]=a[i];\n    x[i+32]=c[i];\n    x[i+48]=b[i];\n    x[i+64]=d[i];\n  }\n  var x32 = x.subarray(32);\n  var x16 = x.subarray(16);\n  inv25519(x32,x32);\n  M(x16,x16,x32);\n  pack25519(q,x16);\n  return 0;\n}\n\nfunction crypto_scalarmult_base(q, n) {\n  return crypto_scalarmult(q, n, _9);\n}\n\nfunction crypto_box_keypair(y, x) {\n  randombytes(x, 32);\n  return crypto_scalarmult_base(y, x);\n}\n\nfunction crypto_box_beforenm(k, y, x) {\n  var s = new Uint8Array(32);\n  crypto_scalarmult(s, x, y);\n  return crypto_core_hsalsa20(k, _0, s, sigma);\n}\n\nvar crypto_box_afternm = crypto_secretbox;\nvar crypto_box_open_afternm = crypto_secretbox_open;\n\nfunction crypto_box(c, m, d, n, y, x) {\n  var k = new Uint8Array(32);\n  crypto_box_beforenm(k, y, x);\n  return crypto_box_afternm(c, m, d, n, k);\n}\n\nfunction crypto_box_open(m, c, d, n, y, x) {\n  var k = new Uint8Array(32);\n  crypto_box_beforenm(k, y, x);\n  return crypto_box_open_afternm(m, c, d, n, k);\n}\n\nvar K = [\n  0x428a2f98, 0xd728ae22, 0x71374491, 0x23ef65cd,\n  0xb5c0fbcf, 0xec4d3b2f, 0xe9b5dba5, 0x8189dbbc,\n  0x3956c25b, 0xf348b538, 0x59f111f1, 0xb605d019,\n  0x923f82a4, 0xaf194f9b, 0xab1c5ed5, 0xda6d8118,\n  0xd807aa98, 0xa3030242, 0x12835b01, 0x45706fbe,\n  0x243185be, 0x4ee4b28c, 0x550c7dc3, 0xd5ffb4e2,\n  0x72be5d74, 0xf27b896f, 0x80deb1fe, 0x3b1696b1,\n  0x9bdc06a7, 0x25c71235, 0xc19bf174, 0xcf692694,\n  0xe49b69c1, 0x9ef14ad2, 0xefbe4786, 0x384f25e3,\n  0x0fc19dc6, 0x8b8cd5b5, 0x240ca1cc, 0x77ac9c65,\n  0x2de92c6f, 0x592b0275, 0x4a7484aa, 0x6ea6e483,\n  0x5cb0a9dc, 0xbd41fbd4, 0x76f988da, 0x831153b5,\n  0x983e5152, 0xee66dfab, 0xa831c66d, 0x2db43210,\n  0xb00327c8, 0x98fb213f, 0xbf597fc7, 0xbeef0ee4,\n  0xc6e00bf3, 0x3da88fc2, 0xd5a79147, 0x930aa725,\n  0x06ca6351, 0xe003826f, 0x14292967, 0x0a0e6e70,\n  0x27b70a85, 0x46d22ffc, 0x2e1b2138, 0x5c26c926,\n  0x4d2c6dfc, 0x5ac42aed, 0x53380d13, 0x9d95b3df,\n  0x650a7354, 0x8baf63de, 0x766a0abb, 0x3c77b2a8,\n  0x81c2c92e, 0x47edaee6, 0x92722c85, 0x1482353b,\n  0xa2bfe8a1, 0x4cf10364, 0xa81a664b, 0xbc423001,\n  0xc24b8b70, 0xd0f89791, 0xc76c51a3, 0x0654be30,\n  0xd192e819, 0xd6ef5218, 0xd6990624, 0x5565a910,\n  0xf40e3585, 0x5771202a, 0x106aa070, 0x32bbd1b8,\n  0x19a4c116, 0xb8d2d0c8, 0x1e376c08, 0x5141ab53,\n  0x2748774c, 0xdf8eeb99, 0x34b0bcb5, 0xe19b48a8,\n  0x391c0cb3, 0xc5c95a63, 0x4ed8aa4a, 0xe3418acb,\n  0x5b9cca4f, 0x7763e373, 0x682e6ff3, 0xd6b2b8a3,\n  0x748f82ee, 0x5defb2fc, 0x78a5636f, 0x43172f60,\n  0x84c87814, 0xa1f0ab72, 0x8cc70208, 0x1a6439ec,\n  0x90befffa, 0x23631e28, 0xa4506ceb, 0xde82bde9,\n  0xbef9a3f7, 0xb2c67915, 0xc67178f2, 0xe372532b,\n  0xca273ece, 0xea26619c, 0xd186b8c7, 0x21c0c207,\n  0xeada7dd6, 0xcde0eb1e, 0xf57d4f7f, 0xee6ed178,\n  0x06f067aa, 0x72176fba, 0x0a637dc5, 0xa2c898a6,\n  0x113f9804, 0xbef90dae, 0x1b710b35, 0x131c471b,\n  0x28db77f5, 0x23047d84, 0x32caab7b, 0x40c72493,\n  0x3c9ebe0a, 0x15c9bebc, 0x431d67c4, 0x9c100d4c,\n  0x4cc5d4be, 0xcb3e42b6, 0x597f299c, 0xfc657e2a,\n  0x5fcb6fab, 0x3ad6faec, 0x6c44198c, 0x4a475817\n];\n\nfunction crypto_hashblocks_hl(hh, hl, m, n) {\n  var wh = new Int32Array(16), wl = new Int32Array(16),\n      bh0, bh1, bh2, bh3, bh4, bh5, bh6, bh7,\n      bl0, bl1, bl2, bl3, bl4, bl5, bl6, bl7,\n      th, tl, i, j, h, l, a, b, c, d;\n\n  var ah0 = hh[0],\n      ah1 = hh[1],\n      ah2 = hh[2],\n      ah3 = hh[3],\n      ah4 = hh[4],\n      ah5 = hh[5],\n      ah6 = hh[6],\n      ah7 = hh[7],\n\n      al0 = hl[0],\n      al1 = hl[1],\n      al2 = hl[2],\n      al3 = hl[3],\n      al4 = hl[4],\n      al5 = hl[5],\n      al6 = hl[6],\n      al7 = hl[7];\n\n  var pos = 0;\n  while (n >= 128) {\n    for (i = 0; i < 16; i++) {\n      j = 8 * i + pos;\n      wh[i] = (m[j+0] << 24) | (m[j+1] << 16) | (m[j+2] << 8) | m[j+3];\n      wl[i] = (m[j+4] << 24) | (m[j+5] << 16) | (m[j+6] << 8) | m[j+7];\n    }\n    for (i = 0; i < 80; i++) {\n      bh0 = ah0;\n      bh1 = ah1;\n      bh2 = ah2;\n      bh3 = ah3;\n      bh4 = ah4;\n      bh5 = ah5;\n      bh6 = ah6;\n      bh7 = ah7;\n\n      bl0 = al0;\n      bl1 = al1;\n      bl2 = al2;\n      bl3 = al3;\n      bl4 = al4;\n      bl5 = al5;\n      bl6 = al6;\n      bl7 = al7;\n\n      // add\n      h = ah7;\n      l = al7;\n\n      a = l & 0xffff; b = l >>> 16;\n      c = h & 0xffff; d = h >>> 16;\n\n      // Sigma1\n      h = ((ah4 >>> 14) | (al4 << (32-14))) ^ ((ah4 >>> 18) | (al4 << (32-18))) ^ ((al4 >>> (41-32)) | (ah4 << (32-(41-32))));\n      l = ((al4 >>> 14) | (ah4 << (32-14))) ^ ((al4 >>> 18) | (ah4 << (32-18))) ^ ((ah4 >>> (41-32)) | (al4 << (32-(41-32))));\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      // Ch\n      h = (ah4 & ah5) ^ (~ah4 & ah6);\n      l = (al4 & al5) ^ (~al4 & al6);\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      // K\n      h = K[i*2];\n      l = K[i*2+1];\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      // w\n      h = wh[i%16];\n      l = wl[i%16];\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      b += a >>> 16;\n      c += b >>> 16;\n      d += c >>> 16;\n\n      th = c & 0xffff | d << 16;\n      tl = a & 0xffff | b << 16;\n\n      // add\n      h = th;\n      l = tl;\n\n      a = l & 0xffff; b = l >>> 16;\n      c = h & 0xffff; d = h >>> 16;\n\n      // Sigma0\n      h = ((ah0 >>> 28) | (al0 << (32-28))) ^ ((al0 >>> (34-32)) | (ah0 << (32-(34-32)))) ^ ((al0 >>> (39-32)) | (ah0 << (32-(39-32))));\n      l = ((al0 >>> 28) | (ah0 << (32-28))) ^ ((ah0 >>> (34-32)) | (al0 << (32-(34-32)))) ^ ((ah0 >>> (39-32)) | (al0 << (32-(39-32))));\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      // Maj\n      h = (ah0 & ah1) ^ (ah0 & ah2) ^ (ah1 & ah2);\n      l = (al0 & al1) ^ (al0 & al2) ^ (al1 & al2);\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      b += a >>> 16;\n      c += b >>> 16;\n      d += c >>> 16;\n\n      bh7 = (c & 0xffff) | (d << 16);\n      bl7 = (a & 0xffff) | (b << 16);\n\n      // add\n      h = bh3;\n      l = bl3;\n\n      a = l & 0xffff; b = l >>> 16;\n      c = h & 0xffff; d = h >>> 16;\n\n      h = th;\n      l = tl;\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      b += a >>> 16;\n      c += b >>> 16;\n      d += c >>> 16;\n\n      bh3 = (c & 0xffff) | (d << 16);\n      bl3 = (a & 0xffff) | (b << 16);\n\n      ah1 = bh0;\n      ah2 = bh1;\n      ah3 = bh2;\n      ah4 = bh3;\n      ah5 = bh4;\n      ah6 = bh5;\n      ah7 = bh6;\n      ah0 = bh7;\n\n      al1 = bl0;\n      al2 = bl1;\n      al3 = bl2;\n      al4 = bl3;\n      al5 = bl4;\n      al6 = bl5;\n      al7 = bl6;\n      al0 = bl7;\n\n      if (i%16 === 15) {\n        for (j = 0; j < 16; j++) {\n          // add\n          h = wh[j];\n          l = wl[j];\n\n          a = l & 0xffff; b = l >>> 16;\n          c = h & 0xffff; d = h >>> 16;\n\n          h = wh[(j+9)%16];\n          l = wl[(j+9)%16];\n\n          a += l & 0xffff; b += l >>> 16;\n          c += h & 0xffff; d += h >>> 16;\n\n          // sigma0\n          th = wh[(j+1)%16];\n          tl = wl[(j+1)%16];\n          h = ((th >>> 1) | (tl << (32-1))) ^ ((th >>> 8) | (tl << (32-8))) ^ (th >>> 7);\n          l = ((tl >>> 1) | (th << (32-1))) ^ ((tl >>> 8) | (th << (32-8))) ^ ((tl >>> 7) | (th << (32-7)));\n\n          a += l & 0xffff; b += l >>> 16;\n          c += h & 0xffff; d += h >>> 16;\n\n          // sigma1\n          th = wh[(j+14)%16];\n          tl = wl[(j+14)%16];\n          h = ((th >>> 19) | (tl << (32-19))) ^ ((tl >>> (61-32)) | (th << (32-(61-32)))) ^ (th >>> 6);\n          l = ((tl >>> 19) | (th << (32-19))) ^ ((th >>> (61-32)) | (tl << (32-(61-32)))) ^ ((tl >>> 6) | (th << (32-6)));\n\n          a += l & 0xffff; b += l >>> 16;\n          c += h & 0xffff; d += h >>> 16;\n\n          b += a >>> 16;\n          c += b >>> 16;\n          d += c >>> 16;\n\n          wh[j] = (c & 0xffff) | (d << 16);\n          wl[j] = (a & 0xffff) | (b << 16);\n        }\n      }\n    }\n\n    // add\n    h = ah0;\n    l = al0;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[0];\n    l = hl[0];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[0] = ah0 = (c & 0xffff) | (d << 16);\n    hl[0] = al0 = (a & 0xffff) | (b << 16);\n\n    h = ah1;\n    l = al1;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[1];\n    l = hl[1];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[1] = ah1 = (c & 0xffff) | (d << 16);\n    hl[1] = al1 = (a & 0xffff) | (b << 16);\n\n    h = ah2;\n    l = al2;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[2];\n    l = hl[2];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[2] = ah2 = (c & 0xffff) | (d << 16);\n    hl[2] = al2 = (a & 0xffff) | (b << 16);\n\n    h = ah3;\n    l = al3;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[3];\n    l = hl[3];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[3] = ah3 = (c & 0xffff) | (d << 16);\n    hl[3] = al3 = (a & 0xffff) | (b << 16);\n\n    h = ah4;\n    l = al4;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[4];\n    l = hl[4];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[4] = ah4 = (c & 0xffff) | (d << 16);\n    hl[4] = al4 = (a & 0xffff) | (b << 16);\n\n    h = ah5;\n    l = al5;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[5];\n    l = hl[5];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[5] = ah5 = (c & 0xffff) | (d << 16);\n    hl[5] = al5 = (a & 0xffff) | (b << 16);\n\n    h = ah6;\n    l = al6;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[6];\n    l = hl[6];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[6] = ah6 = (c & 0xffff) | (d << 16);\n    hl[6] = al6 = (a & 0xffff) | (b << 16);\n\n    h = ah7;\n    l = al7;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[7];\n    l = hl[7];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[7] = ah7 = (c & 0xffff) | (d << 16);\n    hl[7] = al7 = (a & 0xffff) | (b << 16);\n\n    pos += 128;\n    n -= 128;\n  }\n\n  return n;\n}\n\nfunction crypto_hash(out, m, n) {\n  var hh = new Int32Array(8),\n      hl = new Int32Array(8),\n      x = new Uint8Array(256),\n      i, b = n;\n\n  hh[0] = 0x6a09e667;\n  hh[1] = 0xbb67ae85;\n  hh[2] = 0x3c6ef372;\n  hh[3] = 0xa54ff53a;\n  hh[4] = 0x510e527f;\n  hh[5] = 0x9b05688c;\n  hh[6] = 0x1f83d9ab;\n  hh[7] = 0x5be0cd19;\n\n  hl[0] = 0xf3bcc908;\n  hl[1] = 0x84caa73b;\n  hl[2] = 0xfe94f82b;\n  hl[3] = 0x5f1d36f1;\n  hl[4] = 0xade682d1;\n  hl[5] = 0x2b3e6c1f;\n  hl[6] = 0xfb41bd6b;\n  hl[7] = 0x137e2179;\n\n  crypto_hashblocks_hl(hh, hl, m, n);\n  n %= 128;\n\n  for (i = 0; i < n; i++) x[i] = m[b-n+i];\n  x[n] = 128;\n\n  n = 256-128*(n<112?1:0);\n  x[n-9] = 0;\n  ts64(x, n-8,  (b / 0x20000000) | 0, b << 3);\n  crypto_hashblocks_hl(hh, hl, x, n);\n\n  for (i = 0; i < 8; i++) ts64(out, 8*i, hh[i], hl[i]);\n\n  return 0;\n}\n\nfunction add(p, q) {\n  var a = gf(), b = gf(), c = gf(),\n      d = gf(), e = gf(), f = gf(),\n      g = gf(), h = gf(), t = gf();\n\n  Z(a, p[1], p[0]);\n  Z(t, q[1], q[0]);\n  M(a, a, t);\n  A(b, p[0], p[1]);\n  A(t, q[0], q[1]);\n  M(b, b, t);\n  M(c, p[3], q[3]);\n  M(c, c, D2);\n  M(d, p[2], q[2]);\n  A(d, d, d);\n  Z(e, b, a);\n  Z(f, d, c);\n  A(g, d, c);\n  A(h, b, a);\n\n  M(p[0], e, f);\n  M(p[1], h, g);\n  M(p[2], g, f);\n  M(p[3], e, h);\n}\n\nfunction cswap(p, q, b) {\n  var i;\n  for (i = 0; i < 4; i++) {\n    sel25519(p[i], q[i], b);\n  }\n}\n\nfunction pack(r, p) {\n  var tx = gf(), ty = gf(), zi = gf();\n  inv25519(zi, p[2]);\n  M(tx, p[0], zi);\n  M(ty, p[1], zi);\n  pack25519(r, ty);\n  r[31] ^= par25519(tx) << 7;\n}\n\nfunction scalarmult(p, q, s) {\n  var b, i;\n  set25519(p[0], gf0);\n  set25519(p[1], gf1);\n  set25519(p[2], gf1);\n  set25519(p[3], gf0);\n  for (i = 255; i >= 0; --i) {\n    b = (s[(i/8)|0] >> (i&7)) & 1;\n    cswap(p, q, b);\n    add(q, p);\n    add(p, p);\n    cswap(p, q, b);\n  }\n}\n\nfunction scalarbase(p, s) {\n  var q = [gf(), gf(), gf(), gf()];\n  set25519(q[0], X);\n  set25519(q[1], Y);\n  set25519(q[2], gf1);\n  M(q[3], X, Y);\n  scalarmult(p, q, s);\n}\n\nfunction crypto_sign_keypair(pk, sk, seeded) {\n  var d = new Uint8Array(64);\n  var p = [gf(), gf(), gf(), gf()];\n  var i;\n\n  if (!seeded) randombytes(sk, 32);\n  crypto_hash(d, sk, 32);\n  d[0] &= 248;\n  d[31] &= 127;\n  d[31] |= 64;\n\n  scalarbase(p, d);\n  pack(pk, p);\n\n  for (i = 0; i < 32; i++) sk[i+32] = pk[i];\n  return 0;\n}\n\nvar L = new Float64Array([0xed, 0xd3, 0xf5, 0x5c, 0x1a, 0x63, 0x12, 0x58, 0xd6, 0x9c, 0xf7, 0xa2, 0xde, 0xf9, 0xde, 0x14, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x10]);\n\nfunction modL(r, x) {\n  var carry, i, j, k;\n  for (i = 63; i >= 32; --i) {\n    carry = 0;\n    for (j = i - 32, k = i - 12; j < k; ++j) {\n      x[j] += carry - 16 * x[i] * L[j - (i - 32)];\n      carry = Math.floor((x[j] + 128) / 256);\n      x[j] -= carry * 256;\n    }\n    x[j] += carry;\n    x[i] = 0;\n  }\n  carry = 0;\n  for (j = 0; j < 32; j++) {\n    x[j] += carry - (x[31] >> 4) * L[j];\n    carry = x[j] >> 8;\n    x[j] &= 255;\n  }\n  for (j = 0; j < 32; j++) x[j] -= carry * L[j];\n  for (i = 0; i < 32; i++) {\n    x[i+1] += x[i] >> 8;\n    r[i] = x[i] & 255;\n  }\n}\n\nfunction reduce(r) {\n  var x = new Float64Array(64), i;\n  for (i = 0; i < 64; i++) x[i] = r[i];\n  for (i = 0; i < 64; i++) r[i] = 0;\n  modL(r, x);\n}\n\n// Note: difference from C - smlen returned, not passed as argument.\nfunction crypto_sign(sm, m, n, sk) {\n  var d = new Uint8Array(64), h = new Uint8Array(64), r = new Uint8Array(64);\n  var i, j, x = new Float64Array(64);\n  var p = [gf(), gf(), gf(), gf()];\n\n  crypto_hash(d, sk, 32);\n  d[0] &= 248;\n  d[31] &= 127;\n  d[31] |= 64;\n\n  var smlen = n + 64;\n  for (i = 0; i < n; i++) sm[64 + i] = m[i];\n  for (i = 0; i < 32; i++) sm[32 + i] = d[32 + i];\n\n  crypto_hash(r, sm.subarray(32), n+32);\n  reduce(r);\n  scalarbase(p, r);\n  pack(sm, p);\n\n  for (i = 32; i < 64; i++) sm[i] = sk[i];\n  crypto_hash(h, sm, n + 64);\n  reduce(h);\n\n  for (i = 0; i < 64; i++) x[i] = 0;\n  for (i = 0; i < 32; i++) x[i] = r[i];\n  for (i = 0; i < 32; i++) {\n    for (j = 0; j < 32; j++) {\n      x[i+j] += h[i] * d[j];\n    }\n  }\n\n  modL(sm.subarray(32), x);\n  return smlen;\n}\n\nfunction unpackneg(r, p) {\n  var t = gf(), chk = gf(), num = gf(),\n      den = gf(), den2 = gf(), den4 = gf(),\n      den6 = gf();\n\n  set25519(r[2], gf1);\n  unpack25519(r[1], p);\n  S(num, r[1]);\n  M(den, num, D);\n  Z(num, num, r[2]);\n  A(den, r[2], den);\n\n  S(den2, den);\n  S(den4, den2);\n  M(den6, den4, den2);\n  M(t, den6, num);\n  M(t, t, den);\n\n  pow2523(t, t);\n  M(t, t, num);\n  M(t, t, den);\n  M(t, t, den);\n  M(r[0], t, den);\n\n  S(chk, r[0]);\n  M(chk, chk, den);\n  if (neq25519(chk, num)) M(r[0], r[0], I);\n\n  S(chk, r[0]);\n  M(chk, chk, den);\n  if (neq25519(chk, num)) return -1;\n\n  if (par25519(r[0]) === (p[31]>>7)) Z(r[0], gf0, r[0]);\n\n  M(r[3], r[0], r[1]);\n  return 0;\n}\n\nfunction crypto_sign_open(m, sm, n, pk) {\n  var i;\n  var t = new Uint8Array(32), h = new Uint8Array(64);\n  var p = [gf(), gf(), gf(), gf()],\n      q = [gf(), gf(), gf(), gf()];\n\n  if (n < 64) return -1;\n\n  if (unpackneg(q, pk)) return -1;\n\n  for (i = 0; i < n; i++) m[i] = sm[i];\n  for (i = 0; i < 32; i++) m[i+32] = pk[i];\n  crypto_hash(h, m, n);\n  reduce(h);\n  scalarmult(p, q, h);\n\n  scalarbase(q, sm.subarray(32));\n  add(p, q);\n  pack(t, p);\n\n  n -= 64;\n  if (crypto_verify_32(sm, 0, t, 0)) {\n    for (i = 0; i < n; i++) m[i] = 0;\n    return -1;\n  }\n\n  for (i = 0; i < n; i++) m[i] = sm[i + 64];\n  return n;\n}\n\nvar crypto_secretbox_KEYBYTES = 32,\n    crypto_secretbox_NONCEBYTES = 24,\n    crypto_secretbox_ZEROBYTES = 32,\n    crypto_secretbox_BOXZEROBYTES = 16,\n    crypto_scalarmult_BYTES = 32,\n    crypto_scalarmult_SCALARBYTES = 32,\n    crypto_box_PUBLICKEYBYTES = 32,\n    crypto_box_SECRETKEYBYTES = 32,\n    crypto_box_BEFORENMBYTES = 32,\n    crypto_box_NONCEBYTES = crypto_secretbox_NONCEBYTES,\n    crypto_box_ZEROBYTES = crypto_secretbox_ZEROBYTES,\n    crypto_box_BOXZEROBYTES = crypto_secretbox_BOXZEROBYTES,\n    crypto_sign_BYTES = 64,\n    crypto_sign_PUBLICKEYBYTES = 32,\n    crypto_sign_SECRETKEYBYTES = 64,\n    crypto_sign_SEEDBYTES = 32,\n    crypto_hash_BYTES = 64;\n\nnacl.lowlevel = {\n  crypto_core_hsalsa20: crypto_core_hsalsa20,\n  crypto_stream_xor: crypto_stream_xor,\n  crypto_stream: crypto_stream,\n  crypto_stream_salsa20_xor: crypto_stream_salsa20_xor,\n  crypto_stream_salsa20: crypto_stream_salsa20,\n  crypto_onetimeauth: crypto_onetimeauth,\n  crypto_onetimeauth_verify: crypto_onetimeauth_verify,\n  crypto_verify_16: crypto_verify_16,\n  crypto_verify_32: crypto_verify_32,\n  crypto_secretbox: crypto_secretbox,\n  crypto_secretbox_open: crypto_secretbox_open,\n  crypto_scalarmult: crypto_scalarmult,\n  crypto_scalarmult_base: crypto_scalarmult_base,\n  crypto_box_beforenm: crypto_box_beforenm,\n  crypto_box_afternm: crypto_box_afternm,\n  crypto_box: crypto_box,\n  crypto_box_open: crypto_box_open,\n  crypto_box_keypair: crypto_box_keypair,\n  crypto_hash: crypto_hash,\n  crypto_sign: crypto_sign,\n  crypto_sign_keypair: crypto_sign_keypair,\n  crypto_sign_open: crypto_sign_open,\n\n  crypto_secretbox_KEYBYTES: crypto_secretbox_KEYBYTES,\n  crypto_secretbox_NONCEBYTES: crypto_secretbox_NONCEBYTES,\n  crypto_secretbox_ZEROBYTES: crypto_secretbox_ZEROBYTES,\n  crypto_secretbox_BOXZEROBYTES: crypto_secretbox_BOXZEROBYTES,\n  crypto_scalarmult_BYTES: crypto_scalarmult_BYTES,\n  crypto_scalarmult_SCALARBYTES: crypto_scalarmult_SCALARBYTES,\n  crypto_box_PUBLICKEYBYTES: crypto_box_PUBLICKEYBYTES,\n  crypto_box_SECRETKEYBYTES: crypto_box_SECRETKEYBYTES,\n  crypto_box_BEFORENMBYTES: crypto_box_BEFORENMBYTES,\n  crypto_box_NONCEBYTES: crypto_box_NONCEBYTES,\n  crypto_box_ZEROBYTES: crypto_box_ZEROBYTES,\n  crypto_box_BOXZEROBYTES: crypto_box_BOXZEROBYTES,\n  crypto_sign_BYTES: crypto_sign_BYTES,\n  crypto_sign_PUBLICKEYBYTES: crypto_sign_PUBLICKEYBYTES,\n  crypto_sign_SECRETKEYBYTES: crypto_sign_SECRETKEYBYTES,\n  crypto_sign_SEEDBYTES: crypto_sign_SEEDBYTES,\n  crypto_hash_BYTES: crypto_hash_BYTES,\n\n  gf: gf,\n  D: D,\n  L: L,\n  pack25519: pack25519,\n  unpack25519: unpack25519,\n  M: M,\n  A: A,\n  S: S,\n  Z: Z,\n  pow2523: pow2523,\n  add: add,\n  set25519: set25519,\n  modL: modL,\n  scalarmult: scalarmult,\n  scalarbase: scalarbase,\n};\n\n/* High-level API */\n\nfunction checkLengths(k, n) {\n  if (k.length !== crypto_secretbox_KEYBYTES) throw new Error('bad key size');\n  if (n.length !== crypto_secretbox_NONCEBYTES) throw new Error('bad nonce size');\n}\n\nfunction checkBoxLengths(pk, sk) {\n  if (pk.length !== crypto_box_PUBLICKEYBYTES) throw new Error('bad public key size');\n  if (sk.length !== crypto_box_SECRETKEYBYTES) throw new Error('bad secret key size');\n}\n\nfunction checkArrayTypes() {\n  for (var i = 0; i < arguments.length; i++) {\n    if (!(arguments[i] instanceof Uint8Array))\n      throw new TypeError('unexpected type, use Uint8Array');\n  }\n}\n\nfunction cleanup(arr) {\n  for (var i = 0; i < arr.length; i++) arr[i] = 0;\n}\n\nnacl.randomBytes = function(n) {\n  var b = new Uint8Array(n);\n  randombytes(b, n);\n  return b;\n};\n\nnacl.secretbox = function(msg, nonce, key) {\n  checkArrayTypes(msg, nonce, key);\n  checkLengths(key, nonce);\n  var m = new Uint8Array(crypto_secretbox_ZEROBYTES + msg.length);\n  var c = new Uint8Array(m.length);\n  for (var i = 0; i < msg.length; i++) m[i+crypto_secretbox_ZEROBYTES] = msg[i];\n  crypto_secretbox(c, m, m.length, nonce, key);\n  return c.subarray(crypto_secretbox_BOXZEROBYTES);\n};\n\nnacl.secretbox.open = function(box, nonce, key) {\n  checkArrayTypes(box, nonce, key);\n  checkLengths(key, nonce);\n  var c = new Uint8Array(crypto_secretbox_BOXZEROBYTES + box.length);\n  var m = new Uint8Array(c.length);\n  for (var i = 0; i < box.length; i++) c[i+crypto_secretbox_BOXZEROBYTES] = box[i];\n  if (c.length < 32) return null;\n  if (crypto_secretbox_open(m, c, c.length, nonce, key) !== 0) return null;\n  return m.subarray(crypto_secretbox_ZEROBYTES);\n};\n\nnacl.secretbox.keyLength = crypto_secretbox_KEYBYTES;\nnacl.secretbox.nonceLength = crypto_secretbox_NONCEBYTES;\nnacl.secretbox.overheadLength = crypto_secretbox_BOXZEROBYTES;\n\nnacl.scalarMult = function(n, p) {\n  checkArrayTypes(n, p);\n  if (n.length !== crypto_scalarmult_SCALARBYTES) throw new Error('bad n size');\n  if (p.length !== crypto_scalarmult_BYTES) throw new Error('bad p size');\n  var q = new Uint8Array(crypto_scalarmult_BYTES);\n  crypto_scalarmult(q, n, p);\n  return q;\n};\n\nnacl.scalarMult.base = function(n) {\n  checkArrayTypes(n);\n  if (n.length !== crypto_scalarmult_SCALARBYTES) throw new Error('bad n size');\n  var q = new Uint8Array(crypto_scalarmult_BYTES);\n  crypto_scalarmult_base(q, n);\n  return q;\n};\n\nnacl.scalarMult.scalarLength = crypto_scalarmult_SCALARBYTES;\nnacl.scalarMult.groupElementLength = crypto_scalarmult_BYTES;\n\nnacl.box = function(msg, nonce, publicKey, secretKey) {\n  var k = nacl.box.before(publicKey, secretKey);\n  return nacl.secretbox(msg, nonce, k);\n};\n\nnacl.box.before = function(publicKey, secretKey) {\n  checkArrayTypes(publicKey, secretKey);\n  checkBoxLengths(publicKey, secretKey);\n  var k = new Uint8Array(crypto_box_BEFORENMBYTES);\n  crypto_box_beforenm(k, publicKey, secretKey);\n  return k;\n};\n\nnacl.box.after = nacl.secretbox;\n\nnacl.box.open = function(msg, nonce, publicKey, secretKey) {\n  var k = nacl.box.before(publicKey, secretKey);\n  return nacl.secretbox.open(msg, nonce, k);\n};\n\nnacl.box.open.after = nacl.secretbox.open;\n\nnacl.box.keyPair = function() {\n  var pk = new Uint8Array(crypto_box_PUBLICKEYBYTES);\n  var sk = new Uint8Array(crypto_box_SECRETKEYBYTES);\n  crypto_box_keypair(pk, sk);\n  return {publicKey: pk, secretKey: sk};\n};\n\nnacl.box.keyPair.fromSecretKey = function(secretKey) {\n  checkArrayTypes(secretKey);\n  if (secretKey.length !== crypto_box_SECRETKEYBYTES)\n    throw new Error('bad secret key size');\n  var pk = new Uint8Array(crypto_box_PUBLICKEYBYTES);\n  crypto_scalarmult_base(pk, secretKey);\n  return {publicKey: pk, secretKey: new Uint8Array(secretKey)};\n};\n\nnacl.box.publicKeyLength = crypto_box_PUBLICKEYBYTES;\nnacl.box.secretKeyLength = crypto_box_SECRETKEYBYTES;\nnacl.box.sharedKeyLength = crypto_box_BEFORENMBYTES;\nnacl.box.nonceLength = crypto_box_NONCEBYTES;\nnacl.box.overheadLength = nacl.secretbox.overheadLength;\n\nnacl.sign = function(msg, secretKey) {\n  checkArrayTypes(msg, secretKey);\n  if (secretKey.length !== crypto_sign_SECRETKEYBYTES)\n    throw new Error('bad secret key size');\n  var signedMsg = new Uint8Array(crypto_sign_BYTES+msg.length);\n  crypto_sign(signedMsg, msg, msg.length, secretKey);\n  return signedMsg;\n};\n\nnacl.sign.open = function(signedMsg, publicKey) {\n  checkArrayTypes(signedMsg, publicKey);\n  if (publicKey.length !== crypto_sign_PUBLICKEYBYTES)\n    throw new Error('bad public key size');\n  var tmp = new Uint8Array(signedMsg.length);\n  var mlen = crypto_sign_open(tmp, signedMsg, signedMsg.length, publicKey);\n  if (mlen < 0) return null;\n  var m = new Uint8Array(mlen);\n  for (var i = 0; i < m.length; i++) m[i] = tmp[i];\n  return m;\n};\n\nnacl.sign.detached = function(msg, secretKey) {\n  var signedMsg = nacl.sign(msg, secretKey);\n  var sig = new Uint8Array(crypto_sign_BYTES);\n  for (var i = 0; i < sig.length; i++) sig[i] = signedMsg[i];\n  return sig;\n};\n\nnacl.sign.detached.verify = function(msg, sig, publicKey) {\n  checkArrayTypes(msg, sig, publicKey);\n  if (sig.length !== crypto_sign_BYTES)\n    throw new Error('bad signature size');\n  if (publicKey.length !== crypto_sign_PUBLICKEYBYTES)\n    throw new Error('bad public key size');\n  var sm = new Uint8Array(crypto_sign_BYTES + msg.length);\n  var m = new Uint8Array(crypto_sign_BYTES + msg.length);\n  var i;\n  for (i = 0; i < crypto_sign_BYTES; i++) sm[i] = sig[i];\n  for (i = 0; i < msg.length; i++) sm[i+crypto_sign_BYTES] = msg[i];\n  return (crypto_sign_open(m, sm, sm.length, publicKey) >= 0);\n};\n\nnacl.sign.keyPair = function() {\n  var pk = new Uint8Array(crypto_sign_PUBLICKEYBYTES);\n  var sk = new Uint8Array(crypto_sign_SECRETKEYBYTES);\n  crypto_sign_keypair(pk, sk);\n  return {publicKey: pk, secretKey: sk};\n};\n\nnacl.sign.keyPair.fromSecretKey = function(secretKey) {\n  checkArrayTypes(secretKey);\n  if (secretKey.length !== crypto_sign_SECRETKEYBYTES)\n    throw new Error('bad secret key size');\n  var pk = new Uint8Array(crypto_sign_PUBLICKEYBYTES);\n  for (var i = 0; i < pk.length; i++) pk[i] = secretKey[32+i];\n  return {publicKey: pk, secretKey: new Uint8Array(secretKey)};\n};\n\nnacl.sign.keyPair.fromSeed = function(seed) {\n  checkArrayTypes(seed);\n  if (seed.length !== crypto_sign_SEEDBYTES)\n    throw new Error('bad seed size');\n  var pk = new Uint8Array(crypto_sign_PUBLICKEYBYTES);\n  var sk = new Uint8Array(crypto_sign_SECRETKEYBYTES);\n  for (var i = 0; i < 32; i++) sk[i] = seed[i];\n  crypto_sign_keypair(pk, sk, true);\n  return {publicKey: pk, secretKey: sk};\n};\n\nnacl.sign.publicKeyLength = crypto_sign_PUBLICKEYBYTES;\nnacl.sign.secretKeyLength = crypto_sign_SECRETKEYBYTES;\nnacl.sign.seedLength = crypto_sign_SEEDBYTES;\nnacl.sign.signatureLength = crypto_sign_BYTES;\n\nnacl.hash = function(msg) {\n  checkArrayTypes(msg);\n  var h = new Uint8Array(crypto_hash_BYTES);\n  crypto_hash(h, msg, msg.length);\n  return h;\n};\n\nnacl.hash.hashLength = crypto_hash_BYTES;\n\nnacl.verify = function(x, y) {\n  checkArrayTypes(x, y);\n  // Zero length arguments are considered not equal.\n  if (x.length === 0 || y.length === 0) return false;\n  if (x.length !== y.length) return false;\n  return (vn(x, 0, y, 0, x.length) === 0) ? true : false;\n};\n\nnacl.setPRNG = function(fn) {\n  randombytes = fn;\n};\n\n(function() {\n  // Initialize PRNG if environment provides CSPRNG.\n  // If not, methods calling randombytes will throw.\n  var crypto = typeof self !== 'undefined' ? (self.crypto || self.msCrypto) : null;\n  if (crypto && crypto.getRandomValues) {\n    // Browsers.\n    var QUOTA = 65536;\n    nacl.setPRNG(function(x, n) {\n      var i, v = new Uint8Array(n);\n      for (i = 0; i < n; i += QUOTA) {\n        crypto.getRandomValues(v.subarray(i, i + Math.min(n - i, QUOTA)));\n      }\n      for (i = 0; i < n; i++) x[i] = v[i];\n      cleanup(v);\n    });\n  } else if (typeof require !== 'undefined') {\n    // Node.js.\n    crypto = require('crypto');\n    if (crypto && crypto.randomBytes) {\n      nacl.setPRNG(function(x, n) {\n        var i, v = crypto.randomBytes(n);\n        for (i = 0; i < n; i++) x[i] = v[i];\n        cleanup(v);\n      });\n    }\n  }\n})();\n\n})(typeof module !== 'undefined' && module.exports ? module.exports : (self.nacl = self.nacl || {}));\n", "// Written in 2014-2016 by Dmitry Chestnykh and Devi Mandiri.\n// Public domain.\n(function(root, f) {\n  'use strict';\n  if (typeof module !== 'undefined' && module.exports) module.exports = f();\n  else if (root.nacl) root.nacl.util = f();\n  else {\n    root.nacl = {};\n    root.nacl.util = f();\n  }\n}(this, function() {\n  'use strict';\n\n  var util = {};\n\n  function validateBase64(s) {\n    if (!(/^(?:[A-Za-z0-9+\\/]{2}[A-Za-z0-9+\\/]{2})*(?:[A-Za-z0-9+\\/]{2}==|[A-Za-z0-9+\\/]{3}=)?$/.test(s))) {\n      throw new TypeError('invalid encoding');\n    }\n  }\n\n  util.decodeUTF8 = function(s) {\n    if (typeof s !== 'string') throw new TypeError('expected string');\n    var i, d = unescape(encodeURIComponent(s)), b = new Uint8Array(d.length);\n    for (i = 0; i < d.length; i++) b[i] = d.charCodeAt(i);\n    return b;\n  };\n\n  util.encodeUTF8 = function(arr) {\n    var i, s = [];\n    for (i = 0; i < arr.length; i++) s.push(String.fromCharCode(arr[i]));\n    return decodeURIComponent(escape(s.join('')));\n  };\n\n  if (typeof atob === 'undefined') {\n    // Node.js\n\n    if (typeof Buffer.from !== 'undefined') {\n       // Node v6 and later\n      util.encodeBase64 = function (arr) { // v6 and later\n          return Buffer.from(arr).toString('base64');\n      };\n\n      util.decodeBase64 = function (s) {\n        validateBase64(s);\n        return new Uint8Array(Array.prototype.slice.call(Buffer.from(s, 'base64'), 0));\n      };\n\n    } else {\n      // Node earlier than v6\n      util.encodeBase64 = function (arr) { // v6 and later\n        return (new Buffer(arr)).toString('base64');\n      };\n\n      util.decodeBase64 = function(s) {\n        validateBase64(s);\n        return new Uint8Array(Array.prototype.slice.call(new Buffer(s, 'base64'), 0));\n      };\n    }\n\n  } else {\n    // Browsers\n\n    util.encodeBase64 = function(arr) {\n      var i, s = [], len = arr.length;\n      for (i = 0; i < len; i++) s.push(String.fromCharCode(arr[i]));\n      return btoa(s.join(''));\n    };\n\n    util.decodeBase64 = function(s) {\n      validateBase64(s);\n      var i, d = atob(s), b = new Uint8Array(d.length);\n      for (i = 0; i < d.length; i++) b[i] = d.charCodeAt(i);\n      return b;\n    };\n\n  }\n\n  return util;\n\n}));\n", "/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n  return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\n  function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose, inner;\n    if (async) {\n      if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n      dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n      if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n      dispose = value[Symbol.dispose];\n      if (async) inner = dispose;\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  var r, s = 0;\n  function next() {\n    while (r = env.stack.pop()) {\n      try {\n        if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\n        if (r.dispose) {\n          var result = r.dispose.call(r.value);\n          if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n        }\n        else s |= 1;\n      }\n      catch (e) {\n        fail(e);\n      }\n    }\n    if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport function __rewriteRelativeImportExtension(path, preserveJsx) {\n  if (typeof path === \"string\" && /^\\.\\.?\\//.test(path)) {\n      return path.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i, function (m, tsx, d, ext, cm) {\n          return tsx ? preserveJsx ? \".jsx\" : \".js\" : d && (!ext || !cm) ? m : (d + ext + \".\" + cm.toLowerCase() + \"js\");\n      });\n  }\n  return path;\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __esDecorate,\n  __runInitializers,\n  __propKey,\n  __setFunctionName,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n  __rewriteRelativeImportExtension,\n};\n", "/**\n * Returns true if the object is a function.\n * @param value The value to check\n */\nexport function isFunction(value: any): value is (...args: any[]) => any {\n  return typeof value === 'function';\n}\n", "/**\n * Used to create Error subclasses until the community moves away from ES5.\n *\n * This is because compiling from TypeScript down to ES5 has issues with subclassing Errors\n * as well as other built-in types: https://github.com/Microsoft/TypeScript/issues/12123\n *\n * @param createImpl A factory function to create the actual constructor implementation. The returned\n * function should be a named function that calls `_super` internally.\n */\nexport function createErrorClass<T>(createImpl: (_super: any) => any): T {\n  const _super = (instance: any) => {\n    Error.call(instance);\n    instance.stack = new Error().stack;\n  };\n\n  const ctorFunc = createImpl(_super);\n  ctorFunc.prototype = Object.create(Error.prototype);\n  ctorFunc.prototype.constructor = ctorFunc;\n  return ctorFunc;\n}\n", "import { createErrorClass } from './createErrorClass';\n\nexport interface UnsubscriptionError extends Error {\n  readonly errors: any[];\n}\n\nexport interface UnsubscriptionErrorCtor {\n  /**\n   * @deprecated Internal implementation detail. Do not construct error instances.\n   * Cannot be tagged as internal: https://github.com/ReactiveX/rxjs/issues/6269\n   */\n  new (errors: any[]): UnsubscriptionError;\n}\n\n/**\n * An error thrown when one or more errors have occurred during the\n * `unsubscribe` of a {@link Subscription}.\n */\nexport const UnsubscriptionError: UnsubscriptionErrorCtor = createErrorClass(\n  (_super) =>\n    function UnsubscriptionErrorImpl(this: any, errors: (Error | string)[]) {\n      _super(this);\n      this.message = errors\n        ? `${errors.length} errors occurred during unsubscription:\n${errors.map((err, i) => `${i + 1}) ${err.toString()}`).join('\\n  ')}`\n        : '';\n      this.name = 'UnsubscriptionError';\n      this.errors = errors;\n    }\n);\n", "/**\n * Removes an item from an array, mutating it.\n * @param arr The array to remove the item from\n * @param item The item to remove\n */\nexport function arrRemove<T>(arr: T[] | undefined | null, item: T) {\n  if (arr) {\n    const index = arr.indexOf(item);\n    0 <= index && arr.splice(index, 1);\n  }\n}\n", "import { isFunction } from './util/isFunction';\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\nimport { SubscriptionLike, TeardownLogic, Unsubscribable } from './types';\nimport { arrRemove } from './util/arrRemove';\n\n/**\n * Represents a disposable resource, such as the execution of an Observable. A\n * Subscription has one important method, `unsubscribe`, that takes no argument\n * and just disposes the resource held by the subscription.\n *\n * Additionally, subscriptions may be grouped together through the `add()`\n * method, which will attach a child Subscription to the current Subscription.\n * When a Subscription is unsubscribed, all its children (and its grandchildren)\n * will be unsubscribed as well.\n *\n * @class Subscription\n */\nexport class Subscription implements SubscriptionLike {\n  /** @nocollapse */\n  public static EMPTY = (() => {\n    const empty = new Subscription();\n    empty.closed = true;\n    return empty;\n  })();\n\n  /**\n   * A flag to indicate whether this Subscription has already been unsubscribed.\n   */\n  public closed = false;\n\n  private _parentage: Subscription[] | Subscription | null = null;\n\n  /**\n   * The list of registered finalizers to execute upon unsubscription. Adding and removing from this\n   * list occurs in the {@link #add} and {@link #remove} methods.\n   */\n  private _finalizers: Exclude<TeardownLogic, void>[] | null = null;\n\n  /**\n   * @param initialTeardown A function executed first as part of the finalization\n   * process that is kicked off when {@link #unsubscribe} is called.\n   */\n  constructor(private initialTeardown?: () => void) {}\n\n  /**\n   * Disposes the resources held by the subscription. May, for instance, cancel\n   * an ongoing Observable execution or cancel any other type of work that\n   * started when the Subscription was created.\n   * @return {void}\n   */\n  unsubscribe(): void {\n    let errors: any[] | undefined;\n\n    if (!this.closed) {\n      this.closed = true;\n\n      // Remove this from it's parents.\n      const { _parentage } = this;\n      if (_parentage) {\n        this._parentage = null;\n        if (Array.isArray(_parentage)) {\n          for (const parent of _parentage) {\n            parent.remove(this);\n          }\n        } else {\n          _parentage.remove(this);\n        }\n      }\n\n      const { initialTeardown: initialFinalizer } = this;\n      if (isFunction(initialFinalizer)) {\n        try {\n          initialFinalizer();\n        } catch (e) {\n          errors = e instanceof UnsubscriptionError ? e.errors : [e];\n        }\n      }\n\n      const { _finalizers } = this;\n      if (_finalizers) {\n        this._finalizers = null;\n        for (const finalizer of _finalizers) {\n          try {\n            execFinalizer(finalizer);\n          } catch (err) {\n            errors = errors ?? [];\n            if (err instanceof UnsubscriptionError) {\n              errors = [...errors, ...err.errors];\n            } else {\n              errors.push(err);\n            }\n          }\n        }\n      }\n\n      if (errors) {\n        throw new UnsubscriptionError(errors);\n      }\n    }\n  }\n\n  /**\n   * Adds a finalizer to this subscription, so that finalization will be unsubscribed/called\n   * when this subscription is unsubscribed. If this subscription is already {@link #closed},\n   * because it has already been unsubscribed, then whatever finalizer is passed to it\n   * will automatically be executed (unless the finalizer itself is also a closed subscription).\n   *\n   * Closed Subscriptions cannot be added as finalizers to any subscription. Adding a closed\n   * subscription to a any subscription will result in no operation. (A noop).\n   *\n   * Adding a subscription to itself, or adding `null` or `undefined` will not perform any\n   * operation at all. (A noop).\n   *\n   * `Subscription` instances that are added to this instance will automatically remove themselves\n   * if they are unsubscribed. Functions and {@link Unsubscribable} objects that you wish to remove\n   * will need to be removed manually with {@link #remove}\n   *\n   * @param teardown The finalization logic to add to this subscription.\n   */\n  add(teardown: TeardownLogic): void {\n    // Only add the finalizer if it's not undefined\n    // and don't add a subscription to itself.\n    if (teardown && teardown !== this) {\n      if (this.closed) {\n        // If this subscription is already closed,\n        // execute whatever finalizer is handed to it automatically.\n        execFinalizer(teardown);\n      } else {\n        if (teardown instanceof Subscription) {\n          // We don't add closed subscriptions, and we don't add the same subscription\n          // twice. Subscription unsubscribe is idempotent.\n          if (teardown.closed || teardown._hasParent(this)) {\n            return;\n          }\n          teardown._addParent(this);\n        }\n        (this._finalizers = this._finalizers ?? []).push(teardown);\n      }\n    }\n  }\n\n  /**\n   * Checks to see if a this subscription already has a particular parent.\n   * This will signal that this subscription has already been added to the parent in question.\n   * @param parent the parent to check for\n   */\n  private _hasParent(parent: Subscription) {\n    const { _parentage } = this;\n    return _parentage === parent || (Array.isArray(_parentage) && _parentage.includes(parent));\n  }\n\n  /**\n   * Adds a parent to this subscription so it can be removed from the parent if it\n   * unsubscribes on it's own.\n   *\n   * NOTE: THIS ASSUMES THAT {@link _hasParent} HAS ALREADY BEEN CHECKED.\n   * @param parent The parent subscription to add\n   */\n  private _addParent(parent: Subscription) {\n    const { _parentage } = this;\n    this._parentage = Array.isArray(_parentage) ? (_parentage.push(parent), _parentage) : _parentage ? [_parentage, parent] : parent;\n  }\n\n  /**\n   * Called on a child when it is removed via {@link #remove}.\n   * @param parent The parent to remove\n   */\n  private _removeParent(parent: Subscription) {\n    const { _parentage } = this;\n    if (_parentage === parent) {\n      this._parentage = null;\n    } else if (Array.isArray(_parentage)) {\n      arrRemove(_parentage, parent);\n    }\n  }\n\n  /**\n   * Removes a finalizer from this subscription that was previously added with the {@link #add} method.\n   *\n   * Note that `Subscription` instances, when unsubscribed, will automatically remove themselves\n   * from every other `Subscription` they have been added to. This means that using the `remove` method\n   * is not a common thing and should be used thoughtfully.\n   *\n   * If you add the same finalizer instance of a function or an unsubscribable object to a `Subscription` instance\n   * more than once, you will need to call `remove` the same number of times to remove all instances.\n   *\n   * All finalizer instances are removed to free up memory upon unsubscription.\n   *\n   * @param teardown The finalizer to remove from this subscription\n   */\n  remove(teardown: Exclude<TeardownLogic, void>): void {\n    const { _finalizers } = this;\n    _finalizers && arrRemove(_finalizers, teardown);\n\n    if (teardown instanceof Subscription) {\n      teardown._removeParent(this);\n    }\n  }\n}\n\nexport const EMPTY_SUBSCRIPTION = Subscription.EMPTY;\n\nexport function isSubscription(value: any): value is Subscription {\n  return (\n    value instanceof Subscription ||\n    (value && 'closed' in value && isFunction(value.remove) && isFunction(value.add) && isFunction(value.unsubscribe))\n  );\n}\n\nfunction execFinalizer(finalizer: Unsubscribable | (() => void)) {\n  if (isFunction(finalizer)) {\n    finalizer();\n  } else {\n    finalizer.unsubscribe();\n  }\n}\n", "import { Subscriber } from './Subscriber';\nimport { ObservableNotification } from './types';\n\n/**\n * The {@link GlobalConfig} object for RxJS. It is used to configure things\n * like how to react on unhandled errors.\n */\nexport const config: GlobalConfig = {\n  onUnhandledError: null,\n  onStoppedNotification: null,\n  Promise: undefined,\n  useDeprecatedSynchronousErrorHandling: false,\n  useDeprecatedNextContext: false,\n};\n\n/**\n * The global configuration object for RxJS, used to configure things\n * like how to react on unhandled errors. Accessible via {@link config}\n * object.\n */\nexport interface GlobalConfig {\n  /**\n   * A registration point for unhandled errors from RxJS. These are errors that\n   * cannot were not handled by consuming code in the usual subscription path. For\n   * example, if you have this configured, and you subscribe to an observable without\n   * providing an error handler, errors from that subscription will end up here. This\n   * will _always_ be called asynchronously on another job in the runtime. This is because\n   * we do not want errors thrown in this user-configured handler to interfere with the\n   * behavior of the library.\n   */\n  onUnhandledError: ((err: any) => void) | null;\n\n  /**\n   * A registration point for notifications that cannot be sent to subscribers because they\n   * have completed, errored or have been explicitly unsubscribed. By default, next, complete\n   * and error notifications sent to stopped subscribers are noops. However, sometimes callers\n   * might want a different behavior. For example, with sources that attempt to report errors\n   * to stopped subscribers, a caller can configure RxJS to throw an unhandled error instead.\n   * This will _always_ be called asynchronously on another job in the runtime. This is because\n   * we do not want errors thrown in this user-configured handler to interfere with the\n   * behavior of the library.\n   */\n  onStoppedNotification: ((notification: ObservableNotification<any>, subscriber: Subscriber<any>) => void) | null;\n\n  /**\n   * The promise constructor used by default for {@link Observable#toPromise toPromise} and {@link Observable#forEach forEach}\n   * methods.\n   *\n   * @deprecated As of version 8, RxJS will no longer support this sort of injection of a\n   * Promise constructor. If you need a Promise implementation other than native promises,\n   * please polyfill/patch Promise as you see appropriate. Will be removed in v8.\n   */\n  Promise?: PromiseConstructorLike;\n\n  /**\n   * If true, turns on synchronous error rethrowing, which is a deprecated behavior\n   * in v6 and higher. This behavior enables bad patterns like wrapping a subscribe\n   * call in a try/catch block. It also enables producer interference, a nasty bug\n   * where a multicast can be broken for all observers by a downstream consumer with\n   * an unhandled error. DO NOT USE THIS FLAG UNLESS IT'S NEEDED TO BUY TIME\n   * FOR MIGRATION REASONS.\n   *\n   * @deprecated As of version 8, RxJS will no longer support synchronous throwing\n   * of unhandled errors. All errors will be thrown on a separate call stack to prevent bad\n   * behaviors described above. Will be removed in v8.\n   */\n  useDeprecatedSynchronousErrorHandling: boolean;\n\n  /**\n   * If true, enables an as-of-yet undocumented feature from v5: The ability to access\n   * `unsubscribe()` via `this` context in `next` functions created in observers passed\n   * to `subscribe`.\n   *\n   * This is being removed because the performance was severely problematic, and it could also cause\n   * issues when types other than POJOs are passed to subscribe as subscribers, as they will likely have\n   * their `this` context overwritten.\n   *\n   * @deprecated As of version 8, RxJS will no longer support altering the\n   * context of next functions provided as part of an observer to Subscribe. Instead,\n   * you will have access to a subscription or a signal or token that will allow you to do things like\n   * unsubscribe and test closed status. Will be removed in v8.\n   */\n  useDeprecatedNextContext: boolean;\n}\n", "import type { TimerHandle } from './timerHandle';\ntype SetTimeoutFunction = (handler: () => void, timeout?: number, ...args: any[]) => TimerHandle;\ntype ClearTimeoutFunction = (handle: TimerHandle) => void;\n\ninterface TimeoutProvider {\n  setTimeout: SetTimeoutFunction;\n  clearTimeout: ClearTimeoutFunction;\n  delegate:\n    | {\n        setTimeout: SetTimeoutFunction;\n        clearTimeout: ClearTimeoutFunction;\n      }\n    | undefined;\n}\n\nexport const timeoutProvider: TimeoutProvider = {\n  // When accessing the delegate, use the variable rather than `this` so that\n  // the functions can be called without being bound to the provider.\n  setTimeout(handler: () => void, timeout?: number, ...args) {\n    const { delegate } = timeoutProvider;\n    if (delegate?.setTimeout) {\n      return delegate.setTimeout(handler, timeout, ...args);\n    }\n    return setTimeout(handler, timeout, ...args);\n  },\n  clearTimeout(handle) {\n    const { delegate } = timeoutProvider;\n    return (delegate?.clearTimeout || clearTimeout)(handle as any);\n  },\n  delegate: undefined,\n};\n", "import { config } from '../config';\nimport { timeoutProvider } from '../scheduler/timeoutProvider';\n\n/**\n * Handles an error on another job either with the user-configured {@link onUnhandledError},\n * or by throwing it on that new job so it can be picked up by `window.onerror`, `process.on('error')`, etc.\n *\n * This should be called whenever there is an error that is out-of-band with the subscription\n * or when an error hits a terminal boundary of the subscription and no error handler was provided.\n *\n * @param err the error to report\n */\nexport function reportUnhandledError(err: any) {\n  timeoutProvider.setTimeout(() => {\n    const { onUnhandledError } = config;\n    if (onUnhandledError) {\n      // Execute the user-configured error handler.\n      onUnhandledError(err);\n    } else {\n      // Throw so it is picked up by the runtime's uncaught error mechanism.\n      throw err;\n    }\n  });\n}\n", "/* tslint:disable:no-empty */\nexport function noop() { }\n", "import { CompleteNotification, NextNotification, ErrorNotification } from './types';\n\n/**\n * A completion object optimized for memory use and created to be the\n * same \"shape\" as other notifications in v8.\n * @internal\n */\nexport const COMPLETE_NOTIFICATION = (() => createNotification('C', undefined, undefined) as CompleteNotification)();\n\n/**\n * Internal use only. Creates an optimized error notification that is the same \"shape\"\n * as other notifications.\n * @internal\n */\nexport function errorNotification(error: any): ErrorNotification {\n  return createNotification('E', undefined, error) as any;\n}\n\n/**\n * Internal use only. Creates an optimized next notification that is the same \"shape\"\n * as other notifications.\n * @internal\n */\nexport function nextNotification<T>(value: T) {\n  return createNotification('N', value, undefined) as NextNotification<T>;\n}\n\n/**\n * Ensures that all notifications created internally have the same \"shape\" in v8.\n *\n * TODO: This is only exported to support a crazy legacy test in `groupBy`.\n * @internal\n */\nexport function createNotification(kind: 'N' | 'E' | 'C', value: any, error: any) {\n  return {\n    kind,\n    value,\n    error,\n  };\n}\n", "import { config } from '../config';\n\nlet context: { errorThrown: boolean; error: any } | null = null;\n\n/**\n * Handles dealing with errors for super-gross mode. Creates a context, in which\n * any synchronously thrown errors will be passed to {@link captureError}. Which\n * will record the error such that it will be rethrown after the call back is complete.\n * TODO: Remove in v8\n * @param cb An immediately executed function.\n */\nexport function errorContext(cb: () => void) {\n  if (config.useDeprecatedSynchronousErrorHandling) {\n    const isRoot = !context;\n    if (isRoot) {\n      context = { errorThrown: false, error: null };\n    }\n    cb();\n    if (isRoot) {\n      const { errorThrown, error } = context!;\n      context = null;\n      if (errorThrown) {\n        throw error;\n      }\n    }\n  } else {\n    // This is the general non-deprecated path for everyone that\n    // isn't crazy enough to use super-gross mode (useDeprecatedSynchronousErrorHandling)\n    cb();\n  }\n}\n\n/**\n * Captures errors only in super-gross mode.\n * @param err the error to capture\n */\nexport function captureError(err: any) {\n  if (config.useDeprecatedSynchronousErrorHandling && context) {\n    context.errorThrown = true;\n    context.error = err;\n  }\n}\n", "import { isFunction } from './util/isFunction';\nimport { Observer, ObservableNotification } from './types';\nimport { isSubscription, Subscription } from './Subscription';\nimport { config } from './config';\nimport { reportUnhandledError } from './util/reportUnhandledError';\nimport { noop } from './util/noop';\nimport { nextNotification, errorNotification, COMPLETE_NOTIFICATION } from './NotificationFactories';\nimport { timeoutProvider } from './scheduler/timeoutProvider';\nimport { captureError } from './util/errorContext';\n\n/**\n * Implements the {@link Observer} interface and extends the\n * {@link Subscription} class. While the {@link Observer} is the public API for\n * consuming the values of an {@link Observable}, all Observers get converted to\n * a Subscriber, in order to provide Subscription-like capabilities such as\n * `unsubscribe`. Subscriber is a common type in RxJS, and crucial for\n * implementing operators, but it is rarely used as a public API.\n *\n * @class Subscriber<T>\n */\nexport class Subscriber<T> extends Subscription implements Observer<T> {\n  /**\n   * A static factory for a Subscriber, given a (potentially partial) definition\n   * of an Observer.\n   * @param next The `next` callback of an Observer.\n   * @param error The `error` callback of an\n   * Observer.\n   * @param complete The `complete` callback of an\n   * Observer.\n   * @return A Subscriber wrapping the (partially defined)\n   * Observer represented by the given arguments.\n   * @nocollapse\n   * @deprecated Do not use. Will be removed in v8. There is no replacement for this\n   * method, and there is no reason to be creating instances of `Subscriber` directly.\n   * If you have a specific use case, please file an issue.\n   */\n  static create<T>(next?: (x?: T) => void, error?: (e?: any) => void, complete?: () => void): Subscriber<T> {\n    return new SafeSubscriber(next, error, complete);\n  }\n\n  /** @deprecated Internal implementation detail, do not use directly. Will be made internal in v8. */\n  protected isStopped: boolean = false;\n  /** @deprecated Internal implementation detail, do not use directly. Will be made internal in v8. */\n  protected destination: Subscriber<any> | Observer<any>; // this `any` is the escape hatch to erase extra type param (e.g. R)\n\n  /**\n   * @deprecated Internal implementation detail, do not use directly. Will be made internal in v8.\n   * There is no reason to directly create an instance of Subscriber. This type is exported for typings reasons.\n   */\n  constructor(destination?: Subscriber<any> | Observer<any>) {\n    super();\n    if (destination) {\n      this.destination = destination;\n      // Automatically chain subscriptions together here.\n      // if destination is a Subscription, then it is a Subscriber.\n      if (isSubscription(destination)) {\n        destination.add(this);\n      }\n    } else {\n      this.destination = EMPTY_OBSERVER;\n    }\n  }\n\n  /**\n   * The {@link Observer} callback to receive notifications of type `next` from\n   * the Observable, with a value. The Observable may call this method 0 or more\n   * times.\n   * @param {T} [value] The `next` value.\n   * @return {void}\n   */\n  next(value?: T): void {\n    if (this.isStopped) {\n      handleStoppedNotification(nextNotification(value), this);\n    } else {\n      this._next(value!);\n    }\n  }\n\n  /**\n   * The {@link Observer} callback to receive notifications of type `error` from\n   * the Observable, with an attached `Error`. Notifies the Observer that\n   * the Observable has experienced an error condition.\n   * @param {any} [err] The `error` exception.\n   * @return {void}\n   */\n  error(err?: any): void {\n    if (this.isStopped) {\n      handleStoppedNotification(errorNotification(err), this);\n    } else {\n      this.isStopped = true;\n      this._error(err);\n    }\n  }\n\n  /**\n   * The {@link Observer} callback to receive a valueless notification of type\n   * `complete` from the Observable. Notifies the Observer that the Observable\n   * has finished sending push-based notifications.\n   * @return {void}\n   */\n  complete(): void {\n    if (this.isStopped) {\n      handleStoppedNotification(COMPLETE_NOTIFICATION, this);\n    } else {\n      this.isStopped = true;\n      this._complete();\n    }\n  }\n\n  unsubscribe(): void {\n    if (!this.closed) {\n      this.isStopped = true;\n      super.unsubscribe();\n      this.destination = null!;\n    }\n  }\n\n  protected _next(value: T): void {\n    this.destination.next(value);\n  }\n\n  protected _error(err: any): void {\n    try {\n      this.destination.error(err);\n    } finally {\n      this.unsubscribe();\n    }\n  }\n\n  protected _complete(): void {\n    try {\n      this.destination.complete();\n    } finally {\n      this.unsubscribe();\n    }\n  }\n}\n\n/**\n * This bind is captured here because we want to be able to have\n * compatibility with monoid libraries that tend to use a method named\n * `bind`. In particular, a library called Monio requires this.\n */\nconst _bind = Function.prototype.bind;\n\nfunction bind<Fn extends (...args: any[]) => any>(fn: Fn, thisArg: any): Fn {\n  return _bind.call(fn, thisArg);\n}\n\n/**\n * Internal optimization only, DO NOT EXPOSE.\n * @internal\n */\nclass ConsumerObserver<T> implements Observer<T> {\n  constructor(private partialObserver: Partial<Observer<T>>) {}\n\n  next(value: T): void {\n    const { partialObserver } = this;\n    if (partialObserver.next) {\n      try {\n        partialObserver.next(value);\n      } catch (error) {\n        handleUnhandledError(error);\n      }\n    }\n  }\n\n  error(err: any): void {\n    const { partialObserver } = this;\n    if (partialObserver.error) {\n      try {\n        partialObserver.error(err);\n      } catch (error) {\n        handleUnhandledError(error);\n      }\n    } else {\n      handleUnhandledError(err);\n    }\n  }\n\n  complete(): void {\n    const { partialObserver } = this;\n    if (partialObserver.complete) {\n      try {\n        partialObserver.complete();\n      } catch (error) {\n        handleUnhandledError(error);\n      }\n    }\n  }\n}\n\nexport class SafeSubscriber<T> extends Subscriber<T> {\n  constructor(\n    observerOrNext?: Partial<Observer<T>> | ((value: T) => void) | null,\n    error?: ((e?: any) => void) | null,\n    complete?: (() => void) | null\n  ) {\n    super();\n\n    let partialObserver: Partial<Observer<T>>;\n    if (isFunction(observerOrNext) || !observerOrNext) {\n      // The first argument is a function, not an observer. The next\n      // two arguments *could* be observers, or they could be empty.\n      partialObserver = {\n        next: (observerOrNext ?? undefined) as (((value: T) => void) | undefined),\n        error: error ?? undefined,\n        complete: complete ?? undefined,\n      };\n    } else {\n      // The first argument is a partial observer.\n      let context: any;\n      if (this && config.useDeprecatedNextContext) {\n        // This is a deprecated path that made `this.unsubscribe()` available in\n        // next handler functions passed to subscribe. This only exists behind a flag\n        // now, as it is *very* slow.\n        context = Object.create(observerOrNext);\n        context.unsubscribe = () => this.unsubscribe();\n        partialObserver = {\n          next: observerOrNext.next && bind(observerOrNext.next, context),\n          error: observerOrNext.error && bind(observerOrNext.error, context),\n          complete: observerOrNext.complete && bind(observerOrNext.complete, context),\n        };\n      } else {\n        // The \"normal\" path. Just use the partial observer directly.\n        partialObserver = observerOrNext;\n      }\n    }\n\n    // Wrap the partial observer to ensure it's a full observer, and\n    // make sure proper error handling is accounted for.\n    this.destination = new ConsumerObserver(partialObserver);\n  }\n}\n\nfunction handleUnhandledError(error: any) {\n  if (config.useDeprecatedSynchronousErrorHandling) {\n    captureError(error);\n  } else {\n    // Ideal path, we report this as an unhandled error,\n    // which is thrown on a new call stack.\n    reportUnhandledError(error);\n  }\n}\n\n/**\n * An error handler used when no error handler was supplied\n * to the SafeSubscriber -- meaning no error handler was supplied\n * do the `subscribe` call on our observable.\n * @param err The error to handle\n */\nfunction defaultErrorHandler(err: any) {\n  throw err;\n}\n\n/**\n * A handler for notifications that cannot be sent to a stopped subscriber.\n * @param notification The notification being sent\n * @param subscriber The stopped subscriber\n */\nfunction handleStoppedNotification(notification: ObservableNotification<any>, subscriber: Subscriber<any>) {\n  const { onStoppedNotification } = config;\n  onStoppedNotification && timeoutProvider.setTimeout(() => onStoppedNotification(notification, subscriber));\n}\n\n/**\n * The observer used as a stub for subscriptions where the user did not\n * pass any arguments to `subscribe`. Comes with the default error handling\n * behavior.\n */\nexport const EMPTY_OBSERVER: Readonly<Observer<any>> & { closed: true } = {\n  closed: true,\n  next: noop,\n  error: defaultErrorHandler,\n  complete: noop,\n};\n", "/**\n * Symbol.observable or a string \"@@observable\". Used for interop\n *\n * @deprecated We will no longer be exporting this symbol in upcoming versions of RxJS.\n * Instead polyfill and use Symbol.observable directly *or* use https://www.npmjs.com/package/symbol-observable\n */\nexport const observable: string | symbol = (() => (typeof Symbol === 'function' && Symbol.observable) || '@@observable')();\n", "/**\n * This function takes one parameter and just returns it. Simply put,\n * this is like `<T>(x: T): T => x`.\n *\n * ## Examples\n *\n * This is useful in some cases when using things like `mergeMap`\n *\n * ```ts\n * import { interval, take, map, range, mergeMap, identity } from 'rxjs';\n *\n * const source$ = interval(1000).pipe(take(5));\n *\n * const result$ = source$.pipe(\n *   map(i => range(i)),\n *   mergeMap(identity) // same as mergeMap(x => x)\n * );\n *\n * result$.subscribe({\n *   next: console.log\n * });\n * ```\n *\n * Or when you want to selectively apply an operator\n *\n * ```ts\n * import { interval, take, identity } from 'rxjs';\n *\n * const shouldLimit = () => Math.random() < 0.5;\n *\n * const source$ = interval(1000);\n *\n * const result$ = source$.pipe(shouldLimit() ? take(5) : identity);\n *\n * result$.subscribe({\n *   next: console.log\n * });\n * ```\n *\n * @param x Any value that is returned by this function\n * @returns The value passed as the first parameter to this function\n */\nexport function identity<T>(x: T): T {\n  return x;\n}\n", "import { identity } from './identity';\nimport { UnaryFunction } from '../types';\n\nexport function pipe(): typeof identity;\nexport function pipe<T, A>(fn1: UnaryFunction<T, A>): UnaryFunction<T, A>;\nexport function pipe<T, A, B>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>): UnaryFunction<T, B>;\nexport function pipe<T, A, B, C>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>, fn3: UnaryFunction<B, C>): UnaryFunction<T, C>;\nexport function pipe<T, A, B, C, D>(\n  fn1: UnaryFunction<T, A>,\n  fn2: UnaryFunction<A, B>,\n  fn3: UnaryFunction<B, C>,\n  fn4: UnaryFunction<C, D>\n): UnaryFunction<T, D>;\nexport function pipe<T, A, B, C, D, E>(\n  fn1: UnaryFunction<T, A>,\n  fn2: UnaryFunction<A, B>,\n  fn3: UnaryFunction<B, C>,\n  fn4: UnaryFunction<C, D>,\n  fn5: UnaryFunction<D, E>\n): UnaryFunction<T, E>;\nexport function pipe<T, A, B, C, D, E, F>(\n  fn1: UnaryFunction<T, A>,\n  fn2: UnaryFunction<A, B>,\n  fn3: UnaryFunction<B, C>,\n  fn4: UnaryFunction<C, D>,\n  fn5: UnaryFunction<D, E>,\n  fn6: UnaryFunction<E, F>\n): UnaryFunction<T, F>;\nexport function pipe<T, A, B, C, D, E, F, G>(\n  fn1: UnaryFunction<T, A>,\n  fn2: UnaryFunction<A, B>,\n  fn3: UnaryFunction<B, C>,\n  fn4: UnaryFunction<C, D>,\n  fn5: UnaryFunction<D, E>,\n  fn6: UnaryFunction<E, F>,\n  fn7: UnaryFunction<F, G>\n): UnaryFunction<T, G>;\nexport function pipe<T, A, B, C, D, E, F, G, H>(\n  fn1: UnaryFunction<T, A>,\n  fn2: UnaryFunction<A, B>,\n  fn3: UnaryFunction<B, C>,\n  fn4: UnaryFunction<C, D>,\n  fn5: UnaryFunction<D, E>,\n  fn6: UnaryFunction<E, F>,\n  fn7: UnaryFunction<F, G>,\n  fn8: UnaryFunction<G, H>\n): UnaryFunction<T, H>;\nexport function pipe<T, A, B, C, D, E, F, G, H, I>(\n  fn1: UnaryFunction<T, A>,\n  fn2: UnaryFunction<A, B>,\n  fn3: UnaryFunction<B, C>,\n  fn4: UnaryFunction<C, D>,\n  fn5: UnaryFunction<D, E>,\n  fn6: UnaryFunction<E, F>,\n  fn7: UnaryFunction<F, G>,\n  fn8: UnaryFunction<G, H>,\n  fn9: UnaryFunction<H, I>\n): UnaryFunction<T, I>;\nexport function pipe<T, A, B, C, D, E, F, G, H, I>(\n  fn1: UnaryFunction<T, A>,\n  fn2: UnaryFunction<A, B>,\n  fn3: UnaryFunction<B, C>,\n  fn4: UnaryFunction<C, D>,\n  fn5: UnaryFunction<D, E>,\n  fn6: UnaryFunction<E, F>,\n  fn7: UnaryFunction<F, G>,\n  fn8: UnaryFunction<G, H>,\n  fn9: UnaryFunction<H, I>,\n  ...fns: UnaryFunction<any, any>[]\n): UnaryFunction<T, unknown>;\n\n/**\n * pipe() can be called on one or more functions, each of which can take one argument (\"UnaryFunction\")\n * and uses it to return a value.\n * It returns a function that takes one argument, passes it to the first UnaryFunction, and then\n * passes the result to the next one, passes that result to the next one, and so on.  \n */\nexport function pipe(...fns: Array<UnaryFunction<any, any>>): UnaryFunction<any, any> {\n  return pipeFromArray(fns);\n}\n\n/** @internal */\nexport function pipeFromArray<T, R>(fns: Array<UnaryFunction<T, R>>): UnaryFunction<T, R> {\n  if (fns.length === 0) {\n    return identity as UnaryFunction<any, any>;\n  }\n\n  if (fns.length === 1) {\n    return fns[0];\n  }\n\n  return function piped(input: T): R {\n    return fns.reduce((prev: any, fn: UnaryFunction<T, R>) => fn(prev), input as any);\n  };\n}\n", "import { Operator } from './Operator';\nimport { SafeSubscriber, Subscriber } from './Subscriber';\nimport { isSubscription, Subscription } from './Subscription';\nimport { TeardownLogic, OperatorFunction, Subscribable, Observer } from './types';\nimport { observable as Symbol_observable } from './symbol/observable';\nimport { pipeFromArray } from './util/pipe';\nimport { config } from './config';\nimport { isFunction } from './util/isFunction';\nimport { errorContext } from './util/errorContext';\n\n/**\n * A representation of any set of values over any amount of time. This is the most basic building block\n * of RxJS.\n *\n * @class Observable<T>\n */\nexport class Observable<T> implements Subscribable<T> {\n  /**\n   * @deprecated Internal implementation detail, do not use directly. Will be made internal in v8.\n   */\n  source: Observable<any> | undefined;\n\n  /**\n   * @deprecated Internal implementation detail, do not use directly. Will be made internal in v8.\n   */\n  operator: Operator<any, T> | undefined;\n\n  /**\n   * @constructor\n   * @param {Function} subscribe the function that is called when the Observable is\n   * initially subscribed to. This function is given a Subscriber, to which new values\n   * can be `next`ed, or an `error` method can be called to raise an error, or\n   * `complete` can be called to notify of a successful completion.\n   */\n  constructor(subscribe?: (this: Observable<T>, subscriber: Subscriber<T>) => TeardownLogic) {\n    if (subscribe) {\n      this._subscribe = subscribe;\n    }\n  }\n\n  // HACK: Since TypeScript inherits static properties too, we have to\n  // fight against TypeScript here so Subject can have a different static create signature\n  /**\n   * Creates a new Observable by calling the Observable constructor\n   * @owner Observable\n   * @method create\n   * @param {Function} subscribe? the subscriber function to be passed to the Observable constructor\n   * @return {Observable} a new observable\n   * @nocollapse\n   * @deprecated Use `new Observable()` instead. Will be removed in v8.\n   */\n  static create: (...args: any[]) => any = <T>(subscribe?: (subscriber: Subscriber<T>) => TeardownLogic) => {\n    return new Observable<T>(subscribe);\n  };\n\n  /**\n   * Creates a new Observable, with this Observable instance as the source, and the passed\n   * operator defined as the new observable's operator.\n   * @method lift\n   * @param operator the operator defining the operation to take on the observable\n   * @return a new observable with the Operator applied\n   * @deprecated Internal implementation detail, do not use directly. Will be made internal in v8.\n   * If you have implemented an operator using `lift`, it is recommended that you create an\n   * operator by simply returning `new Observable()` directly. See \"Creating new operators from\n   * scratch\" section here: https://rxjs.dev/guide/operators\n   */\n  lift<R>(operator?: Operator<T, R>): Observable<R> {\n    const observable = new Observable<R>();\n    observable.source = this;\n    observable.operator = operator;\n    return observable;\n  }\n\n  subscribe(observerOrNext?: Partial<Observer<T>> | ((value: T) => void)): Subscription;\n  /** @deprecated Instead of passing separate callback arguments, use an observer argument. Signatures taking separate callback arguments will be removed in v8. Details: https://rxjs.dev/deprecations/subscribe-arguments */\n  subscribe(next?: ((value: T) => void) | null, error?: ((error: any) => void) | null, complete?: (() => void) | null): Subscription;\n  /**\n   * Invokes an execution of an Observable and registers Observer handlers for notifications it will emit.\n   *\n   * <span class=\"informal\">Use it when you have all these Observables, but still nothing is happening.</span>\n   *\n   * `subscribe` is not a regular operator, but a method that calls Observable's internal `subscribe` function. It\n   * might be for example a function that you passed to Observable's constructor, but most of the time it is\n   * a library implementation, which defines what will be emitted by an Observable, and when it be will emitted. This means\n   * that calling `subscribe` is actually the moment when Observable starts its work, not when it is created, as it is often\n   * the thought.\n   *\n   * Apart from starting the execution of an Observable, this method allows you to listen for values\n   * that an Observable emits, as well as for when it completes or errors. You can achieve this in two\n   * of the following ways.\n   *\n   * The first way is creating an object that implements {@link Observer} interface. It should have methods\n   * defined by that interface, but note that it should be just a regular JavaScript object, which you can create\n   * yourself in any way you want (ES6 class, classic function constructor, object literal etc.). In particular, do\n   * not attempt to use any RxJS implementation details to create Observers - you don't need them. Remember also\n   * that your object does not have to implement all methods. If you find yourself creating a method that doesn't\n   * do anything, you can simply omit it. Note however, if the `error` method is not provided and an error happens,\n   * it will be thrown asynchronously. Errors thrown asynchronously cannot be caught using `try`/`catch`. Instead,\n   * use the {@link onUnhandledError} configuration option or use a runtime handler (like `window.onerror` or\n   * `process.on('error)`) to be notified of unhandled errors. Because of this, it's recommended that you provide\n   * an `error` method to avoid missing thrown errors.\n   *\n   * The second way is to give up on Observer object altogether and simply provide callback functions in place of its methods.\n   * This means you can provide three functions as arguments to `subscribe`, where the first function is equivalent\n   * of a `next` method, the second of an `error` method and the third of a `complete` method. Just as in case of an Observer,\n   * if you do not need to listen for something, you can omit a function by passing `undefined` or `null`,\n   * since `subscribe` recognizes these functions by where they were placed in function call. When it comes\n   * to the `error` function, as with an Observer, if not provided, errors emitted by an Observable will be thrown asynchronously.\n   *\n   * You can, however, subscribe with no parameters at all. This may be the case where you're not interested in terminal events\n   * and you also handled emissions internally by using operators (e.g. using `tap`).\n   *\n   * Whichever style of calling `subscribe` you use, in both cases it returns a Subscription object.\n   * This object allows you to call `unsubscribe` on it, which in turn will stop the work that an Observable does and will clean\n   * up all resources that an Observable used. Note that cancelling a subscription will not call `complete` callback\n   * provided to `subscribe` function, which is reserved for a regular completion signal that comes from an Observable.\n   *\n   * Remember that callbacks provided to `subscribe` are not guaranteed to be called asynchronously.\n   * It is an Observable itself that decides when these functions will be called. For example {@link of}\n   * by default emits all its values synchronously. Always check documentation for how given Observable\n   * will behave when subscribed and if its default behavior can be modified with a `scheduler`.\n   *\n   * #### Examples\n   *\n   * Subscribe with an {@link guide/observer Observer}\n   *\n   * ```ts\n   * import { of } from 'rxjs';\n   *\n   * const sumObserver = {\n   *   sum: 0,\n   *   next(value) {\n   *     console.log('Adding: ' + value);\n   *     this.sum = this.sum + value;\n   *   },\n   *   error() {\n   *     // We actually could just remove this method,\n   *     // since we do not really care about errors right now.\n   *   },\n   *   complete() {\n   *     console.log('Sum equals: ' + this.sum);\n   *   }\n   * };\n   *\n   * of(1, 2, 3) // Synchronously emits 1, 2, 3 and then completes.\n   *   .subscribe(sumObserver);\n   *\n   * // Logs:\n   * // 'Adding: 1'\n   * // 'Adding: 2'\n   * // 'Adding: 3'\n   * // 'Sum equals: 6'\n   * ```\n   *\n   * Subscribe with functions ({@link deprecations/subscribe-arguments deprecated})\n   *\n   * ```ts\n   * import { of } from 'rxjs'\n   *\n   * let sum = 0;\n   *\n   * of(1, 2, 3).subscribe(\n   *   value => {\n   *     console.log('Adding: ' + value);\n   *     sum = sum + value;\n   *   },\n   *   undefined,\n   *   () => console.log('Sum equals: ' + sum)\n   * );\n   *\n   * // Logs:\n   * // 'Adding: 1'\n   * // 'Adding: 2'\n   * // 'Adding: 3'\n   * // 'Sum equals: 6'\n   * ```\n   *\n   * Cancel a subscription\n   *\n   * ```ts\n   * import { interval } from 'rxjs';\n   *\n   * const subscription = interval(1000).subscribe({\n   *   next(num) {\n   *     console.log(num)\n   *   },\n   *   complete() {\n   *     // Will not be called, even when cancelling subscription.\n   *     console.log('completed!');\n   *   }\n   * });\n   *\n   * setTimeout(() => {\n   *   subscription.unsubscribe();\n   *   console.log('unsubscribed!');\n   * }, 2500);\n   *\n   * // Logs:\n   * // 0 after 1s\n   * // 1 after 2s\n   * // 'unsubscribed!' after 2.5s\n   * ```\n   *\n   * @param {Observer|Function} observerOrNext (optional) Either an observer with methods to be called,\n   * or the first of three possible handlers, which is the handler for each value emitted from the subscribed\n   * Observable.\n   * @param {Function} error (optional) A handler for a terminal event resulting from an error. If no error handler is provided,\n   * the error will be thrown asynchronously as unhandled.\n   * @param {Function} complete (optional) A handler for a terminal event resulting from successful completion.\n   * @return {Subscription} a subscription reference to the registered handlers\n   * @method subscribe\n   */\n  subscribe(\n    observerOrNext?: Partial<Observer<T>> | ((value: T) => void) | null,\n    error?: ((error: any) => void) | null,\n    complete?: (() => void) | null\n  ): Subscription {\n    const subscriber = isSubscriber(observerOrNext) ? observerOrNext : new SafeSubscriber(observerOrNext, error, complete);\n\n    errorContext(() => {\n      const { operator, source } = this;\n      subscriber.add(\n        operator\n          ? // We're dealing with a subscription in the\n            // operator chain to one of our lifted operators.\n            operator.call(subscriber, source)\n          : source\n          ? // If `source` has a value, but `operator` does not, something that\n            // had intimate knowledge of our API, like our `Subject`, must have\n            // set it. We're going to just call `_subscribe` directly.\n            this._subscribe(subscriber)\n          : // In all other cases, we're likely wrapping a user-provided initializer\n            // function, so we need to catch errors and handle them appropriately.\n            this._trySubscribe(subscriber)\n      );\n    });\n\n    return subscriber;\n  }\n\n  /** @internal */\n  protected _trySubscribe(sink: Subscriber<T>): TeardownLogic {\n    try {\n      return this._subscribe(sink);\n    } catch (err) {\n      // We don't need to return anything in this case,\n      // because it's just going to try to `add()` to a subscription\n      // above.\n      sink.error(err);\n    }\n  }\n\n  /**\n   * Used as a NON-CANCELLABLE means of subscribing to an observable, for use with\n   * APIs that expect promises, like `async/await`. You cannot unsubscribe from this.\n   *\n   * **WARNING**: Only use this with observables you *know* will complete. If the source\n   * observable does not complete, you will end up with a promise that is hung up, and\n   * potentially all of the state of an async function hanging out in memory. To avoid\n   * this situation, look into adding something like {@link timeout}, {@link take},\n   * {@link takeWhile}, or {@link takeUntil} amongst others.\n   *\n   * #### Example\n   *\n   * ```ts\n   * import { interval, take } from 'rxjs';\n   *\n   * const source$ = interval(1000).pipe(take(4));\n   *\n   * async function getTotal() {\n   *   let total = 0;\n   *\n   *   await source$.forEach(value => {\n   *     total += value;\n   *     console.log('observable -> ' + value);\n   *   });\n   *\n   *   return total;\n   * }\n   *\n   * getTotal().then(\n   *   total => console.log('Total: ' + total)\n   * );\n   *\n   * // Expected:\n   * // 'observable -> 0'\n   * // 'observable -> 1'\n   * // 'observable -> 2'\n   * // 'observable -> 3'\n   * // 'Total: 6'\n   * ```\n   *\n   * @param next a handler for each value emitted by the observable\n   * @return a promise that either resolves on observable completion or\n   *  rejects with the handled error\n   */\n  forEach(next: (value: T) => void): Promise<void>;\n\n  /**\n   * @param next a handler for each value emitted by the observable\n   * @param promiseCtor a constructor function used to instantiate the Promise\n   * @return a promise that either resolves on observable completion or\n   *  rejects with the handled error\n   * @deprecated Passing a Promise constructor will no longer be available\n   * in upcoming versions of RxJS. This is because it adds weight to the library, for very\n   * little benefit. If you need this functionality, it is recommended that you either\n   * polyfill Promise, or you create an adapter to convert the returned native promise\n   * to whatever promise implementation you wanted. Will be removed in v8.\n   */\n  forEach(next: (value: T) => void, promiseCtor: PromiseConstructorLike): Promise<void>;\n\n  forEach(next: (value: T) => void, promiseCtor?: PromiseConstructorLike): Promise<void> {\n    promiseCtor = getPromiseCtor(promiseCtor);\n\n    return new promiseCtor<void>((resolve, reject) => {\n      const subscriber = new SafeSubscriber<T>({\n        next: (value) => {\n          try {\n            next(value);\n          } catch (err) {\n            reject(err);\n            subscriber.unsubscribe();\n          }\n        },\n        error: reject,\n        complete: resolve,\n      });\n      this.subscribe(subscriber);\n    }) as Promise<void>;\n  }\n\n  /** @internal */\n  protected _subscribe(subscriber: Subscriber<any>): TeardownLogic {\n    return this.source?.subscribe(subscriber);\n  }\n\n  /**\n   * An interop point defined by the es7-observable spec https://github.com/zenparsing/es-observable\n   * @method Symbol.observable\n   * @return {Observable} this instance of the observable\n   */\n  [Symbol_observable]() {\n    return this;\n  }\n\n  /* tslint:disable:max-line-length */\n  pipe(): Observable<T>;\n  pipe<A>(op1: OperatorFunction<T, A>): Observable<A>;\n  pipe<A, B>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>): Observable<B>;\n  pipe<A, B, C>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>, op3: OperatorFunction<B, C>): Observable<C>;\n  pipe<A, B, C, D>(\n    op1: OperatorFunction<T, A>,\n    op2: OperatorFunction<A, B>,\n    op3: OperatorFunction<B, C>,\n    op4: OperatorFunction<C, D>\n  ): Observable<D>;\n  pipe<A, B, C, D, E>(\n    op1: OperatorFunction<T, A>,\n    op2: OperatorFunction<A, B>,\n    op3: OperatorFunction<B, C>,\n    op4: OperatorFunction<C, D>,\n    op5: OperatorFunction<D, E>\n  ): Observable<E>;\n  pipe<A, B, C, D, E, F>(\n    op1: OperatorFunction<T, A>,\n    op2: OperatorFunction<A, B>,\n    op3: OperatorFunction<B, C>,\n    op4: OperatorFunction<C, D>,\n    op5: OperatorFunction<D, E>,\n    op6: OperatorFunction<E, F>\n  ): Observable<F>;\n  pipe<A, B, C, D, E, F, G>(\n    op1: OperatorFunction<T, A>,\n    op2: OperatorFunction<A, B>,\n    op3: OperatorFunction<B, C>,\n    op4: OperatorFunction<C, D>,\n    op5: OperatorFunction<D, E>,\n    op6: OperatorFunction<E, F>,\n    op7: OperatorFunction<F, G>\n  ): Observable<G>;\n  pipe<A, B, C, D, E, F, G, H>(\n    op1: OperatorFunction<T, A>,\n    op2: OperatorFunction<A, B>,\n    op3: OperatorFunction<B, C>,\n    op4: OperatorFunction<C, D>,\n    op5: OperatorFunction<D, E>,\n    op6: OperatorFunction<E, F>,\n    op7: OperatorFunction<F, G>,\n    op8: OperatorFunction<G, H>\n  ): Observable<H>;\n  pipe<A, B, C, D, E, F, G, H, I>(\n    op1: OperatorFunction<T, A>,\n    op2: OperatorFunction<A, B>,\n    op3: OperatorFunction<B, C>,\n    op4: OperatorFunction<C, D>,\n    op5: OperatorFunction<D, E>,\n    op6: OperatorFunction<E, F>,\n    op7: OperatorFunction<F, G>,\n    op8: OperatorFunction<G, H>,\n    op9: OperatorFunction<H, I>\n  ): Observable<I>;\n  pipe<A, B, C, D, E, F, G, H, I>(\n    op1: OperatorFunction<T, A>,\n    op2: OperatorFunction<A, B>,\n    op3: OperatorFunction<B, C>,\n    op4: OperatorFunction<C, D>,\n    op5: OperatorFunction<D, E>,\n    op6: OperatorFunction<E, F>,\n    op7: OperatorFunction<F, G>,\n    op8: OperatorFunction<G, H>,\n    op9: OperatorFunction<H, I>,\n    ...operations: OperatorFunction<any, any>[]\n  ): Observable<unknown>;\n  /* tslint:enable:max-line-length */\n\n  /**\n   * Used to stitch together functional operators into a chain.\n   * @method pipe\n   * @return {Observable} the Observable result of all of the operators having\n   * been called in the order they were passed in.\n   *\n   * ## Example\n   *\n   * ```ts\n   * import { interval, filter, map, scan } from 'rxjs';\n   *\n   * interval(1000)\n   *   .pipe(\n   *     filter(x => x % 2 === 0),\n   *     map(x => x + x),\n   *     scan((acc, x) => acc + x)\n   *   )\n   *   .subscribe(x => console.log(x));\n   * ```\n   */\n  pipe(...operations: OperatorFunction<any, any>[]): Observable<any> {\n    return pipeFromArray(operations)(this);\n  }\n\n  /* tslint:disable:max-line-length */\n  /** @deprecated Replaced with {@link firstValueFrom} and {@link lastValueFrom}. Will be removed in v8. Details: https://rxjs.dev/deprecations/to-promise */\n  toPromise(): Promise<T | undefined>;\n  /** @deprecated Replaced with {@link firstValueFrom} and {@link lastValueFrom}. Will be removed in v8. Details: https://rxjs.dev/deprecations/to-promise */\n  toPromise(PromiseCtor: typeof Promise): Promise<T | undefined>;\n  /** @deprecated Replaced with {@link firstValueFrom} and {@link lastValueFrom}. Will be removed in v8. Details: https://rxjs.dev/deprecations/to-promise */\n  toPromise(PromiseCtor: PromiseConstructorLike): Promise<T | undefined>;\n  /* tslint:enable:max-line-length */\n\n  /**\n   * Subscribe to this Observable and get a Promise resolving on\n   * `complete` with the last emission (if any).\n   *\n   * **WARNING**: Only use this with observables you *know* will complete. If the source\n   * observable does not complete, you will end up with a promise that is hung up, and\n   * potentially all of the state of an async function hanging out in memory. To avoid\n   * this situation, look into adding something like {@link timeout}, {@link take},\n   * {@link takeWhile}, or {@link takeUntil} amongst others.\n   *\n   * @method toPromise\n   * @param [promiseCtor] a constructor function used to instantiate\n   * the Promise\n   * @return A Promise that resolves with the last value emit, or\n   * rejects on an error. If there were no emissions, Promise\n   * resolves with undefined.\n   * @deprecated Replaced with {@link firstValueFrom} and {@link lastValueFrom}. Will be removed in v8. Details: https://rxjs.dev/deprecations/to-promise\n   */\n  toPromise(promiseCtor?: PromiseConstructorLike): Promise<T | undefined> {\n    promiseCtor = getPromiseCtor(promiseCtor);\n\n    return new promiseCtor((resolve, reject) => {\n      let value: T | undefined;\n      this.subscribe(\n        (x: T) => (value = x),\n        (err: any) => reject(err),\n        () => resolve(value)\n      );\n    }) as Promise<T | undefined>;\n  }\n}\n\n/**\n * Decides between a passed promise constructor from consuming code,\n * A default configured promise constructor, and the native promise\n * constructor and returns it. If nothing can be found, it will throw\n * an error.\n * @param promiseCtor The optional promise constructor to passed by consuming code\n */\nfunction getPromiseCtor(promiseCtor: PromiseConstructorLike | undefined) {\n  return promiseCtor ?? config.Promise ?? Promise;\n}\n\nfunction isObserver<T>(value: any): value is Observer<T> {\n  return value && isFunction(value.next) && isFunction(value.error) && isFunction(value.complete);\n}\n\nfunction isSubscriber<T>(value: any): value is Subscriber<T> {\n  return (value && value instanceof Subscriber) || (isObserver(value) && isSubscription(value));\n}\n", "import { Observable } from '../Observable';\nimport { Subscriber } from '../Subscriber';\nimport { OperatorFunction } from '../types';\nimport { isFunction } from './isFunction';\n\n/**\n * Used to determine if an object is an Observable with a lift function.\n */\nexport function hasLift(source: any): source is { lift: InstanceType<typeof Observable>['lift'] } {\n  return isFunction(source?.lift);\n}\n\n/**\n * Creates an `OperatorFunction`. Used to define operators throughout the library in a concise way.\n * @param init The logic to connect the liftedSource to the subscriber at the moment of subscription.\n */\nexport function operate<T, R>(\n  init: (liftedSource: Observable<T>, subscriber: Subscriber<R>) => (() => void) | void\n): OperatorFunction<T, R> {\n  return (source: Observable<T>) => {\n    if (hasLift(source)) {\n      return source.lift(function (this: Subscriber<R>, liftedSource: Observable<T>) {\n        try {\n          return init(liftedSource, this);\n        } catch (err) {\n          this.error(err);\n        }\n      });\n    }\n    throw new TypeError('Unable to lift unknown Observable type');\n  };\n}\n", "import { Subscriber } from '../Subscriber';\n\n/**\n * Creates an instance of an `OperatorSubscriber`.\n * @param destination The downstream subscriber.\n * @param onNext Handles next values, only called if this subscriber is not stopped or closed. Any\n * error that occurs in this function is caught and sent to the `error` method of this subscriber.\n * @param onError Handles errors from the subscription, any errors that occur in this handler are caught\n * and send to the `destination` error handler.\n * @param onComplete Handles completion notification from the subscription. Any errors that occur in\n * this handler are sent to the `destination` error handler.\n * @param onFinalize Additional teardown logic here. This will only be called on teardown if the\n * subscriber itself is not already closed. This is called after all other teardown logic is executed.\n */\nexport function createOperatorSubscriber<T>(\n  destination: Subscriber<any>,\n  onNext?: (value: T) => void,\n  onComplete?: () => void,\n  onError?: (err: any) => void,\n  onFinalize?: () => void\n): Subscriber<T> {\n  return new OperatorSubscriber(destination, onNext, onComplete, onError, onFinalize);\n}\n\n/**\n * A generic helper for allowing operators to be created with a Subscriber and\n * use closures to capture necessary state from the operator function itself.\n */\nexport class OperatorSubscriber<T> extends Subscriber<T> {\n  /**\n   * Creates an instance of an `OperatorSubscriber`.\n   * @param destination The downstream subscriber.\n   * @param onNext Handles next values, only called if this subscriber is not stopped or closed. Any\n   * error that occurs in this function is caught and sent to the `error` method of this subscriber.\n   * @param onError Handles errors from the subscription, any errors that occur in this handler are caught\n   * and send to the `destination` error handler.\n   * @param onComplete Handles completion notification from the subscription. Any errors that occur in\n   * this handler are sent to the `destination` error handler.\n   * @param onFinalize Additional finalization logic here. This will only be called on finalization if the\n   * subscriber itself is not already closed. This is called after all other finalization logic is executed.\n   * @param shouldUnsubscribe An optional check to see if an unsubscribe call should truly unsubscribe.\n   * NOTE: This currently **ONLY** exists to support the strange behavior of {@link groupBy}, where unsubscription\n   * to the resulting observable does not actually disconnect from the source if there are active subscriptions\n   * to any grouped observable. (DO NOT EXPOSE OR USE EXTERNALLY!!!)\n   */\n  constructor(\n    destination: Subscriber<any>,\n    onNext?: (value: T) => void,\n    onComplete?: () => void,\n    onError?: (err: any) => void,\n    private onFinalize?: () => void,\n    private shouldUnsubscribe?: () => boolean\n  ) {\n    // It's important - for performance reasons - that all of this class's\n    // members are initialized and that they are always initialized in the same\n    // order. This will ensure that all OperatorSubscriber instances have the\n    // same hidden class in V8. This, in turn, will help keep the number of\n    // hidden classes involved in property accesses within the base class as\n    // low as possible. If the number of hidden classes involved exceeds four,\n    // the property accesses will become megamorphic and performance penalties\n    // will be incurred - i.e. inline caches won't be used.\n    //\n    // The reasons for ensuring all instances have the same hidden class are\n    // further discussed in this blog post from Benedikt Meurer:\n    // https://benediktmeurer.de/2018/03/23/impact-of-polymorphism-on-component-based-frameworks-like-react/\n    super(destination);\n    this._next = onNext\n      ? function (this: OperatorSubscriber<T>, value: T) {\n          try {\n            onNext(value);\n          } catch (err) {\n            destination.error(err);\n          }\n        }\n      : super._next;\n    this._error = onError\n      ? function (this: OperatorSubscriber<T>, err: any) {\n          try {\n            onError(err);\n          } catch (err) {\n            // Send any errors that occur down stream.\n            destination.error(err);\n          } finally {\n            // Ensure finalization.\n            this.unsubscribe();\n          }\n        }\n      : super._error;\n    this._complete = onComplete\n      ? function (this: OperatorSubscriber<T>) {\n          try {\n            onComplete();\n          } catch (err) {\n            // Send any errors that occur down stream.\n            destination.error(err);\n          } finally {\n            // Ensure finalization.\n            this.unsubscribe();\n          }\n        }\n      : super._complete;\n  }\n\n  unsubscribe() {\n    if (!this.shouldUnsubscribe || this.shouldUnsubscribe()) {\n      const { closed } = this;\n      super.unsubscribe();\n      // Execute additional teardown if we have any and we didn't already do so.\n      !closed && this.onFinalize?.();\n    }\n  }\n}\n", "import { ConnectableObservable } from '../observable/ConnectableObservable';\nimport { Subscription } from '../Subscription';\nimport { MonoTypeOperatorFunction } from '../types';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\n\n/**\n * Make a {@link ConnectableObservable} behave like a ordinary observable and automates the way\n * you can connect to it.\n *\n * Internally it counts the subscriptions to the observable and subscribes (only once) to the source if\n * the number of subscriptions is larger than 0. If the number of subscriptions is smaller than 1, it\n * unsubscribes from the source. This way you can make sure that everything before the *published*\n * refCount has only a single subscription independently of the number of subscribers to the target\n * observable.\n *\n * Note that using the {@link share} operator is exactly the same as using the `multicast(() => new Subject())` operator\n * (making the observable hot) and the *refCount* operator in a sequence.\n *\n * ![](refCount.png)\n *\n * ## Example\n *\n * In the following example there are two intervals turned into connectable observables\n * by using the *publish* operator. The first one uses the *refCount* operator, the\n * second one does not use it. You will notice that a connectable observable does nothing\n * until you call its connect function.\n *\n * ```ts\n * import { interval, tap, publish, refCount } from 'rxjs';\n *\n * // Turn the interval observable into a ConnectableObservable (hot)\n * const refCountInterval = interval(400).pipe(\n *   tap(num => console.log(`refCount ${ num }`)),\n *   publish(),\n *   refCount()\n * );\n *\n * const publishedInterval = interval(400).pipe(\n *   tap(num => console.log(`publish ${ num }`)),\n *   publish()\n * );\n *\n * refCountInterval.subscribe();\n * refCountInterval.subscribe();\n * // 'refCount 0' -----> 'refCount 1' -----> etc\n * // All subscriptions will receive the same value and the tap (and\n * // every other operator) before the `publish` operator will be executed\n * // only once per event independently of the number of subscriptions.\n *\n * publishedInterval.subscribe();\n * // Nothing happens until you call .connect() on the observable.\n * ```\n *\n * @return A function that returns an Observable that automates the connection\n * to ConnectableObservable.\n * @see {@link ConnectableObservable}\n * @see {@link share}\n * @see {@link publish}\n * @deprecated Replaced with the {@link share} operator. How `share` is used\n * will depend on the connectable observable you created just prior to the\n * `refCount` operator.\n * Details: https://rxjs.dev/deprecations/multicasting\n */\nexport function refCount<T>(): MonoTypeOperatorFunction<T> {\n  return operate((source, subscriber) => {\n    let connection: Subscription | null = null;\n\n    (source as any)._refCount++;\n\n    const refCounter = createOperatorSubscriber(subscriber, undefined, undefined, undefined, () => {\n      if (!source || (source as any)._refCount <= 0 || 0 < --(source as any)._refCount) {\n        connection = null;\n        return;\n      }\n\n      ///\n      // Compare the local RefCountSubscriber's connection Subscription to the\n      // connection Subscription on the shared ConnectableObservable. In cases\n      // where the ConnectableObservable source synchronously emits values, and\n      // the RefCountSubscriber's downstream Observers synchronously unsubscribe,\n      // execution continues to here before the RefCountOperator has a chance to\n      // supply the RefCountSubscriber with the shared connection Subscription.\n      // For example:\n      // ```\n      // range(0, 10).pipe(\n      //   publish(),\n      //   refCount(),\n      //   take(5),\n      // )\n      // .subscribe();\n      // ```\n      // In order to account for this case, RefCountSubscriber should only dispose\n      // the ConnectableObservable's shared connection Subscription if the\n      // connection Subscription exists, *and* either:\n      //   a. RefCountSubscriber doesn't have a reference to the shared connection\n      //      Subscription yet, or,\n      //   b. RefCountSubscriber's connection Subscription reference is identical\n      //      to the shared connection Subscription\n      ///\n\n      const sharedConnection = (source as any)._connection;\n      const conn = connection;\n      connection = null;\n\n      if (sharedConnection && (!conn || sharedConnection === conn)) {\n        sharedConnection.unsubscribe();\n      }\n\n      subscriber.unsubscribe();\n    });\n\n    source.subscribe(refCounter);\n\n    if (!refCounter.closed) {\n      connection = (source as ConnectableObservable<T>).connect();\n    }\n  });\n}\n", "import { Subject } from '../Subject';\nimport { Observable } from '../Observable';\nimport { Subscriber } from '../Subscriber';\nimport { Subscription } from '../Subscription';\nimport { refCount as higherOrderRefCount } from '../operators/refCount';\nimport { createOperatorSubscriber } from '../operators/OperatorSubscriber';\nimport { hasLift } from '../util/lift';\n\n/**\n * @class ConnectableObservable<T>\n * @deprecated Will be removed in v8. Use {@link connectable} to create a connectable observable.\n * If you are using the `refCount` method of `ConnectableObservable`, use the {@link share} operator\n * instead.\n * Details: https://rxjs.dev/deprecations/multicasting\n */\nexport class ConnectableObservable<T> extends Observable<T> {\n  protected _subject: Subject<T> | null = null;\n  protected _refCount: number = 0;\n  protected _connection: Subscription | null = null;\n\n  /**\n   * @param source The source observable\n   * @param subjectFactory The factory that creates the subject used internally.\n   * @deprecated Will be removed in v8. Use {@link connectable} to create a connectable observable.\n   * `new ConnectableObservable(source, factory)` is equivalent to\n   * `connectable(source, { connector: factory })`.\n   * When the `refCount()` method is needed, the {@link share} operator should be used instead:\n   * `new ConnectableObservable(source, factory).refCount()` is equivalent to\n   * `source.pipe(share({ connector: factory }))`.\n   * Details: https://rxjs.dev/deprecations/multicasting\n   */\n  constructor(public source: Observable<T>, protected subjectFactory: () => Subject<T>) {\n    super();\n    // If we have lift, monkey patch that here. This is done so custom observable\n    // types will compose through multicast. Otherwise the resulting observable would\n    // simply be an instance of `ConnectableObservable`.\n    if (hasLift(source)) {\n      this.lift = source.lift;\n    }\n  }\n\n  /** @internal */\n  protected _subscribe(subscriber: Subscriber<T>) {\n    return this.getSubject().subscribe(subscriber);\n  }\n\n  protected getSubject(): Subject<T> {\n    const subject = this._subject;\n    if (!subject || subject.isStopped) {\n      this._subject = this.subjectFactory();\n    }\n    return this._subject!;\n  }\n\n  protected _teardown() {\n    this._refCount = 0;\n    const { _connection } = this;\n    this._subject = this._connection = null;\n    _connection?.unsubscribe();\n  }\n\n  /**\n   * @deprecated {@link ConnectableObservable} will be removed in v8. Use {@link connectable} instead.\n   * Details: https://rxjs.dev/deprecations/multicasting\n   */\n  connect(): Subscription {\n    let connection = this._connection;\n    if (!connection) {\n      connection = this._connection = new Subscription();\n      const subject = this.getSubject();\n      connection.add(\n        this.source.subscribe(\n          createOperatorSubscriber(\n            subject as any,\n            undefined,\n            () => {\n              this._teardown();\n              subject.complete();\n            },\n            (err) => {\n              this._teardown();\n              subject.error(err);\n            },\n            () => this._teardown()\n          )\n        )\n      );\n\n      if (connection.closed) {\n        this._connection = null;\n        connection = Subscription.EMPTY;\n      }\n    }\n    return connection;\n  }\n\n  /**\n   * @deprecated {@link ConnectableObservable} will be removed in v8. Use the {@link share} operator instead.\n   * Details: https://rxjs.dev/deprecations/multicasting\n   */\n  refCount(): Observable<T> {\n    return higherOrderRefCount()(this) as Observable<T>;\n  }\n}\n", "import { TimestampProvider } from '../types';\n\ninterface PerformanceTimestampProvider extends TimestampProvider {\n  delegate: TimestampProvider | undefined;\n}\n\nexport const performanceTimestampProvider: PerformanceTimestampProvider = {\n  now() {\n    // Use the variable rather than `this` so that the function can be called\n    // without being bound to the provider.\n    return (performanceTimestampProvider.delegate || performance).now();\n  },\n  delegate: undefined,\n};\n", "import { Subscription } from '../Subscription';\n\ninterface AnimationFrameProvider {\n  schedule(callback: FrameRequestCallback): Subscription;\n  requestAnimationFrame: typeof requestAnimationFrame;\n  cancelAnimationFrame: typeof cancelAnimationFrame;\n  delegate:\n    | {\n        requestAnimationFrame: typeof requestAnimationFrame;\n        cancelAnimationFrame: typeof cancelAnimationFrame;\n      }\n    | undefined;\n}\n\nexport const animationFrameProvider: AnimationFrameProvider = {\n  // When accessing the delegate, use the variable rather than `this` so that\n  // the functions can be called without being bound to the provider.\n  schedule(callback) {\n    let request = requestAnimationFrame;\n    let cancel: typeof cancelAnimationFrame | undefined = cancelAnimationFrame;\n    const { delegate } = animationFrameProvider;\n    if (delegate) {\n      request = delegate.requestAnimationFrame;\n      cancel = delegate.cancelAnimationFrame;\n    }\n    const handle = request((timestamp) => {\n      // Clear the cancel function. The request has been fulfilled, so\n      // attempting to cancel the request upon unsubscription would be\n      // pointless.\n      cancel = undefined;\n      callback(timestamp);\n    });\n    return new Subscription(() => cancel?.(handle));\n  },\n  requestAnimationFrame(...args) {\n    const { delegate } = animationFrameProvider;\n    return (delegate?.requestAnimationFrame || requestAnimationFrame)(...args);\n  },\n  cancelAnimationFrame(...args) {\n    const { delegate } = animationFrameProvider;\n    return (delegate?.cancelAnimationFrame || cancelAnimationFrame)(...args);\n  },\n  delegate: undefined,\n};\n", "import { Observable } from '../../Observable';\nimport { TimestampProvider } from '../../types';\nimport { performanceTimestampProvider } from '../../scheduler/performanceTimestampProvider';\nimport { animationFrameProvider } from '../../scheduler/animationFrameProvider';\n\n/**\n * An observable of animation frames\n *\n * Emits the amount of time elapsed since subscription and the timestamp on each animation frame.\n * Defaults to milliseconds provided to the requestAnimationFrame's callback. Does not end on its own.\n *\n * Every subscription will start a separate animation loop. Since animation frames are always scheduled\n * by the browser to occur directly before a repaint, scheduling more than one animation frame synchronously\n * should not be much different or have more overhead than looping over an array of events during\n * a single animation frame. However, if for some reason the developer would like to ensure the\n * execution of animation-related handlers are all executed during the same task by the engine,\n * the `share` operator can be used.\n *\n * This is useful for setting up animations with RxJS.\n *\n * ## Examples\n *\n * Tweening a div to move it on the screen\n *\n * ```ts\n * import { animationFrames, map, takeWhile, endWith } from 'rxjs';\n *\n * function tween(start: number, end: number, duration: number) {\n *   const diff = end - start;\n *   return animationFrames().pipe(\n *     // Figure out what percentage of time has passed\n *     map(({ elapsed }) => elapsed / duration),\n *     // Take the vector while less than 100%\n *     takeWhile(v => v < 1),\n *     // Finish with 100%\n *     endWith(1),\n *     // Calculate the distance traveled between start and end\n *     map(v => v * diff + start)\n *   );\n * }\n *\n * // Setup a div for us to move around\n * const div = document.createElement('div');\n * document.body.appendChild(div);\n * div.style.position = 'absolute';\n * div.style.width = '40px';\n * div.style.height = '40px';\n * div.style.backgroundColor = 'lime';\n * div.style.transform = 'translate3d(10px, 0, 0)';\n *\n * tween(10, 200, 4000).subscribe(x => {\n *   div.style.transform = `translate3d(${ x }px, 0, 0)`;\n * });\n * ```\n *\n * Providing a custom timestamp provider\n *\n * ```ts\n * import { animationFrames, TimestampProvider } from 'rxjs';\n *\n * // A custom timestamp provider\n * let now = 0;\n * const customTSProvider: TimestampProvider = {\n *   now() { return now++; }\n * };\n *\n * const source$ = animationFrames(customTSProvider);\n *\n * // Log increasing numbers 0...1...2... on every animation frame.\n * source$.subscribe(({ elapsed }) => console.log(elapsed));\n * ```\n *\n * @param timestampProvider An object with a `now` method that provides a numeric timestamp\n */\nexport function animationFrames(timestampProvider?: TimestampProvider) {\n  return timestampProvider ? animationFramesFactory(timestampProvider) : DEFAULT_ANIMATION_FRAMES;\n}\n\n/**\n * Does the work of creating the observable for `animationFrames`.\n * @param timestampProvider The timestamp provider to use to create the observable\n */\nfunction animationFramesFactory(timestampProvider?: TimestampProvider) {\n  return new Observable<{ timestamp: number; elapsed: number }>((subscriber) => {\n    // If no timestamp provider is specified, use performance.now() - as it\n    // will return timestamps 'compatible' with those passed to the run\n    // callback and won't be affected by NTP adjustments, etc.\n    const provider = timestampProvider || performanceTimestampProvider;\n\n    // Capture the start time upon subscription, as the run callback can remain\n    // queued for a considerable period of time and the elapsed time should\n    // represent the time elapsed since subscription - not the time since the\n    // first rendered animation frame.\n    const start = provider.now();\n\n    let id = 0;\n    const run = () => {\n      if (!subscriber.closed) {\n        id = animationFrameProvider.requestAnimationFrame((timestamp: DOMHighResTimeStamp | number) => {\n          id = 0;\n          // Use the provider's timestamp to calculate the elapsed time. Note that\n          // this means - if the caller hasn't passed a provider - that\n          // performance.now() will be used instead of the timestamp that was\n          // passed to the run callback. The reason for this is that the timestamp\n          // passed to the callback can be earlier than the start time, as it\n          // represents the time at which the browser decided it would render any\n          // queued frames - and that time can be earlier the captured start time.\n          const now = provider.now();\n          subscriber.next({\n            timestamp: timestampProvider ? now : timestamp,\n            elapsed: now - start,\n          });\n          run();\n        });\n      }\n    };\n\n    run();\n\n    return () => {\n      if (id) {\n        animationFrameProvider.cancelAnimationFrame(id);\n      }\n    };\n  });\n}\n\n/**\n * In the common case, where the timestamp provided by the rAF API is used,\n * we use this shared observable to reduce overhead.\n */\nconst DEFAULT_ANIMATION_FRAMES = animationFramesFactory();\n", "import { createErrorClass } from './createErrorClass';\n\nexport interface ObjectUnsubscribedError extends Error {}\n\nexport interface ObjectUnsubscribedErrorCtor {\n  /**\n   * @deprecated Internal implementation detail. Do not construct error instances.\n   * Cannot be tagged as internal: https://github.com/ReactiveX/rxjs/issues/6269\n   */\n  new (): ObjectUnsubscribedError;\n}\n\n/**\n * An error thrown when an action is invalid because the object has been\n * unsubscribed.\n *\n * @see {@link Subject}\n * @see {@link BehaviorSubject}\n *\n * @class ObjectUnsubscribedError\n */\nexport const ObjectUnsubscribedError: ObjectUnsubscribedErrorCtor = createErrorClass(\n  (_super) =>\n    function ObjectUnsubscribedErrorImpl(this: any) {\n      _super(this);\n      this.name = 'ObjectUnsubscribedError';\n      this.message = 'object unsubscribed';\n    }\n);\n", "import { Operator } from './Operator';\nimport { Observable } from './Observable';\nimport { Subscriber } from './Subscriber';\nimport { Subscription, EMPTY_SUBSCRIPTION } from './Subscription';\nimport { Observer, SubscriptionLike, TeardownLogic } from './types';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nimport { arrRemove } from './util/arrRemove';\nimport { errorContext } from './util/errorContext';\n\n/**\n * A Subject is a special type of Observable that allows values to be\n * multicasted to many Observers. Subjects are like EventEmitters.\n *\n * Every Subject is an Observable and an Observer. You can subscribe to a\n * Subject, and you can call next to feed values as well as error and complete.\n */\nexport class Subject<T> extends Observable<T> implements SubscriptionLike {\n  closed = false;\n\n  private currentObservers: Observer<T>[] | null = null;\n\n  /** @deprecated Internal implementation detail, do not use directly. Will be made internal in v8. */\n  observers: Observer<T>[] = [];\n  /** @deprecated Internal implementation detail, do not use directly. Will be made internal in v8. */\n  isStopped = false;\n  /** @deprecated Internal implementation detail, do not use directly. Will be made internal in v8. */\n  hasError = false;\n  /** @deprecated Internal implementation detail, do not use directly. Will be made internal in v8. */\n  thrownError: any = null;\n\n  /**\n   * Creates a \"subject\" by basically gluing an observer to an observable.\n   *\n   * @nocollapse\n   * @deprecated Recommended you do not use. Will be removed at some point in the future. Plans for replacement still under discussion.\n   */\n  static create: (...args: any[]) => any = <T>(destination: Observer<T>, source: Observable<T>): AnonymousSubject<T> => {\n    return new AnonymousSubject<T>(destination, source);\n  };\n\n  constructor() {\n    // NOTE: This must be here to obscure Observable's constructor.\n    super();\n  }\n\n  /** @deprecated Internal implementation detail, do not use directly. Will be made internal in v8. */\n  lift<R>(operator: Operator<T, R>): Observable<R> {\n    const subject = new AnonymousSubject(this, this);\n    subject.operator = operator as any;\n    return subject as any;\n  }\n\n  /** @internal */\n  protected _throwIfClosed() {\n    if (this.closed) {\n      throw new ObjectUnsubscribedError();\n    }\n  }\n\n  next(value: T) {\n    errorContext(() => {\n      this._throwIfClosed();\n      if (!this.isStopped) {\n        if (!this.currentObservers) {\n          this.currentObservers = Array.from(this.observers);\n        }\n        for (const observer of this.currentObservers) {\n          observer.next(value);\n        }\n      }\n    });\n  }\n\n  error(err: any) {\n    errorContext(() => {\n      this._throwIfClosed();\n      if (!this.isStopped) {\n        this.hasError = this.isStopped = true;\n        this.thrownError = err;\n        const { observers } = this;\n        while (observers.length) {\n          observers.shift()!.error(err);\n        }\n      }\n    });\n  }\n\n  complete() {\n    errorContext(() => {\n      this._throwIfClosed();\n      if (!this.isStopped) {\n        this.isStopped = true;\n        const { observers } = this;\n        while (observers.length) {\n          observers.shift()!.complete();\n        }\n      }\n    });\n  }\n\n  unsubscribe() {\n    this.isStopped = this.closed = true;\n    this.observers = this.currentObservers = null!;\n  }\n\n  get observed() {\n    return this.observers?.length > 0;\n  }\n\n  /** @internal */\n  protected _trySubscribe(subscriber: Subscriber<T>): TeardownLogic {\n    this._throwIfClosed();\n    return super._trySubscribe(subscriber);\n  }\n\n  /** @internal */\n  protected _subscribe(subscriber: Subscriber<T>): Subscription {\n    this._throwIfClosed();\n    this._checkFinalizedStatuses(subscriber);\n    return this._innerSubscribe(subscriber);\n  }\n\n  /** @internal */\n  protected _innerSubscribe(subscriber: Subscriber<any>) {\n    const { hasError, isStopped, observers } = this;\n    if (hasError || isStopped) {\n      return EMPTY_SUBSCRIPTION;\n    }\n    this.currentObservers = null;\n    observers.push(subscriber);\n    return new Subscription(() => {\n      this.currentObservers = null;\n      arrRemove(observers, subscriber);\n    });\n  }\n\n  /** @internal */\n  protected _checkFinalizedStatuses(subscriber: Subscriber<any>) {\n    const { hasError, thrownError, isStopped } = this;\n    if (hasError) {\n      subscriber.error(thrownError);\n    } else if (isStopped) {\n      subscriber.complete();\n    }\n  }\n\n  /**\n   * Creates a new Observable with this Subject as the source. You can do this\n   * to create custom Observer-side logic of the Subject and conceal it from\n   * code that uses the Observable.\n   * @return {Observable} Observable that the Subject casts to\n   */\n  asObservable(): Observable<T> {\n    const observable: any = new Observable<T>();\n    observable.source = this;\n    return observable;\n  }\n}\n\n/**\n * @class AnonymousSubject<T>\n */\nexport class AnonymousSubject<T> extends Subject<T> {\n  constructor(\n    /** @deprecated Internal implementation detail, do not use directly. Will be made internal in v8. */\n    public destination?: Observer<T>,\n    source?: Observable<T>\n  ) {\n    super();\n    this.source = source;\n  }\n\n  next(value: T) {\n    this.destination?.next?.(value);\n  }\n\n  error(err: any) {\n    this.destination?.error?.(err);\n  }\n\n  complete() {\n    this.destination?.complete?.();\n  }\n\n  /** @internal */\n  protected _subscribe(subscriber: Subscriber<T>): Subscription {\n    return this.source?.subscribe(subscriber) ?? EMPTY_SUBSCRIPTION;\n  }\n}\n", "import { Subject } from './Subject';\nimport { Subscriber } from './Subscriber';\nimport { Subscription } from './Subscription';\n\n/**\n * A variant of Subject that requires an initial value and emits its current\n * value whenever it is subscribed to.\n *\n * @class BehaviorSubject<T>\n */\nexport class BehaviorSubject<T> extends Subject<T> {\n  constructor(private _value: T) {\n    super();\n  }\n\n  get value(): T {\n    return this.getValue();\n  }\n\n  /** @internal */\n  protected _subscribe(subscriber: Subscriber<T>): Subscription {\n    const subscription = super._subscribe(subscriber);\n    !subscription.closed && subscriber.next(this._value);\n    return subscription;\n  }\n\n  getValue(): T {\n    const { hasError, thrownError, _value } = this;\n    if (hasError) {\n      throw thrownError;\n    }\n    this._throwIfClosed();\n    return _value;\n  }\n\n  next(value: T): void {\n    super.next((this._value = value));\n  }\n}\n", "import { TimestampProvider } from '../types';\n\ninterface DateTimestampProvider extends TimestampProvider {\n  delegate: TimestampProvider | undefined;\n}\n\nexport const dateTimestampProvider: DateTimestampProvider = {\n  now() {\n    // Use the variable rather than `this` so that the function can be called\n    // without being bound to the provider.\n    return (dateTimestampProvider.delegate || Date).now();\n  },\n  delegate: undefined,\n};\n", "import { Subject } from './Subject';\nimport { TimestampProvider } from './types';\nimport { Subscriber } from './Subscriber';\nimport { Subscription } from './Subscription';\nimport { dateTimestampProvider } from './scheduler/dateTimestampProvider';\n\n/**\n * A variant of {@link Subject} that \"replays\" old values to new subscribers by emitting them when they first subscribe.\n *\n * `ReplaySubject` has an internal buffer that will store a specified number of values that it has observed. Like `Subject`,\n * `ReplaySubject` \"observes\" values by having them passed to its `next` method. When it observes a value, it will store that\n * value for a time determined by the configuration of the `ReplaySubject`, as passed to its constructor.\n *\n * When a new subscriber subscribes to the `ReplaySubject` instance, it will synchronously emit all values in its buffer in\n * a First-In-First-Out (FIFO) manner. The `ReplaySubject` will also complete, if it has observed completion; and it will\n * error if it has observed an error.\n *\n * There are two main configuration items to be concerned with:\n *\n * 1. `bufferSize` - This will determine how many items are stored in the buffer, defaults to infinite.\n * 2. `windowTime` - The amount of time to hold a value in the buffer before removing it from the buffer.\n *\n * Both configurations may exist simultaneously. So if you would like to buffer a maximum of 3 values, as long as the values\n * are less than 2 seconds old, you could do so with a `new ReplaySubject(3, 2000)`.\n *\n * ### Differences with BehaviorSubject\n *\n * `BehaviorSubject` is similar to `new ReplaySubject(1)`, with a couple of exceptions:\n *\n * 1. `BehaviorSubject` comes \"primed\" with a single value upon construction.\n * 2. `ReplaySubject` will replay values, even after observing an error, where `BehaviorSubject` will not.\n *\n * @see {@link Subject}\n * @see {@link BehaviorSubject}\n * @see {@link shareReplay}\n */\nexport class ReplaySubject<T> extends Subject<T> {\n  private _buffer: (T | number)[] = [];\n  private _infiniteTimeWindow = true;\n\n  /**\n   * @param bufferSize The size of the buffer to replay on subscription\n   * @param windowTime The amount of time the buffered items will stay buffered\n   * @param timestampProvider An object with a `now()` method that provides the current timestamp. This is used to\n   * calculate the amount of time something has been buffered.\n   */\n  constructor(\n    private _bufferSize = Infinity,\n    private _windowTime = Infinity,\n    private _timestampProvider: TimestampProvider = dateTimestampProvider\n  ) {\n    super();\n    this._infiniteTimeWindow = _windowTime === Infinity;\n    this._bufferSize = Math.max(1, _bufferSize);\n    this._windowTime = Math.max(1, _windowTime);\n  }\n\n  next(value: T): void {\n    const { isStopped, _buffer, _infiniteTimeWindow, _timestampProvider, _windowTime } = this;\n    if (!isStopped) {\n      _buffer.push(value);\n      !_infiniteTimeWindow && _buffer.push(_timestampProvider.now() + _windowTime);\n    }\n    this._trimBuffer();\n    super.next(value);\n  }\n\n  /** @internal */\n  protected _subscribe(subscriber: Subscriber<T>): Subscription {\n    this._throwIfClosed();\n    this._trimBuffer();\n\n    const subscription = this._innerSubscribe(subscriber);\n\n    const { _infiniteTimeWindow, _buffer } = this;\n    // We use a copy here, so reentrant code does not mutate our array while we're\n    // emitting it to a new subscriber.\n    const copy = _buffer.slice();\n    for (let i = 0; i < copy.length && !subscriber.closed; i += _infiniteTimeWindow ? 1 : 2) {\n      subscriber.next(copy[i] as T);\n    }\n\n    this._checkFinalizedStatuses(subscriber);\n\n    return subscription;\n  }\n\n  private _trimBuffer() {\n    const { _bufferSize, _timestampProvider, _buffer, _infiniteTimeWindow } = this;\n    // If we don't have an infinite buffer size, and we're over the length,\n    // use splice to truncate the old buffer values off. Note that we have to\n    // double the size for instances where we're not using an infinite time window\n    // because we're storing the values and the timestamps in the same array.\n    const adjustedBufferSize = (_infiniteTimeWindow ? 1 : 2) * _bufferSize;\n    _bufferSize < Infinity && adjustedBufferSize < _buffer.length && _buffer.splice(0, _buffer.length - adjustedBufferSize);\n\n    // Now, if we're not in an infinite time window, remove all values where the time is\n    // older than what is allowed.\n    if (!_infiniteTimeWindow) {\n      const now = _timestampProvider.now();\n      let last = 0;\n      // Search the array for the first timestamp that isn't expired and\n      // truncate the buffer up to that point.\n      for (let i = 1; i < _buffer.length && (_buffer[i] as number) <= now; i += 2) {\n        last = i;\n      }\n      last && _buffer.splice(0, last + 1);\n    }\n  }\n}\n", "import { Subject } from './Subject';\nimport { Subscriber } from './Subscriber';\n\n/**\n * A variant of Subject that only emits a value when it completes. It will emit\n * its latest value to all its observers on completion.\n *\n * @class AsyncSubject<T>\n */\nexport class AsyncSubject<T> extends Subject<T> {\n  private _value: T | null = null;\n  private _hasValue = false;\n  private _isComplete = false;\n\n  /** @internal */\n  protected _checkFinalizedStatuses(subscriber: Subscriber<T>) {\n    const { hasError, _hasValue, _value, thrownError, isStopped, _isComplete } = this;\n    if (hasError) {\n      subscriber.error(thrownError);\n    } else if (isStopped || _isComplete) {\n      _hasValue && subscriber.next(_value!);\n      subscriber.complete();\n    }\n  }\n\n  next(value: T): void {\n    if (!this.isStopped) {\n      this._value = value;\n      this._hasValue = true;\n    }\n  }\n\n  complete(): void {\n    const { _hasValue, _value, _isComplete } = this;\n    if (!_isComplete) {\n      this._isComplete = true;\n      _hasValue && super.next(_value!);\n      super.complete();\n    }\n  }\n}\n", "import { Scheduler } from '../Scheduler';\nimport { Subscription } from '../Subscription';\nimport { SchedulerAction } from '../types';\n\n/**\n * A unit of work to be executed in a `scheduler`. An action is typically\n * created from within a {@link SchedulerLike} and an RxJS user does not need to concern\n * themselves about creating and manipulating an Action.\n *\n * ```ts\n * class Action<T> extends Subscription {\n *   new (scheduler: Scheduler, work: (state?: T) => void);\n *   schedule(state?: T, delay: number = 0): Subscription;\n * }\n * ```\n *\n * @class Action<T>\n */\nexport class Action<T> extends Subscription {\n  constructor(scheduler: Scheduler, work: (this: SchedulerAction<T>, state?: T) => void) {\n    super();\n  }\n  /**\n   * Schedules this action on its parent {@link SchedulerLike} for execution. May be passed\n   * some context object, `state`. May happen at some point in the future,\n   * according to the `delay` parameter, if specified.\n   * @param {T} [state] Some contextual data that the `work` function uses when\n   * called by the Scheduler.\n   * @param {number} [delay] Time to wait before executing the work, where the\n   * time unit is implicit and defined by the Scheduler.\n   * @return {void}\n   */\n  public schedule(state?: T, delay: number = 0): Subscription {\n    return this;\n  }\n}\n", "import type { TimerHandle } from './timerHandle';\ntype SetIntervalFunction = (handler: () => void, timeout?: number, ...args: any[]) => TimerHandle;\ntype ClearIntervalFunction = (handle: TimerHandle) => void;\n\ninterface IntervalProvider {\n  setInterval: SetIntervalFunction;\n  clearInterval: ClearIntervalFunction;\n  delegate:\n    | {\n        setInterval: SetIntervalFunction;\n        clearInterval: ClearIntervalFunction;\n      }\n    | undefined;\n}\n\nexport const intervalProvider: IntervalProvider = {\n  // When accessing the delegate, use the variable rather than `this` so that\n  // the functions can be called without being bound to the provider.\n  setInterval(handler: () => void, timeout?: number, ...args) {\n    const { delegate } = intervalProvider;\n    if (delegate?.setInterval) {\n      return delegate.setInterval(handler, timeout, ...args);\n    }\n    return setInterval(handler, timeout, ...args);\n  },\n  clearInterval(handle) {\n    const { delegate } = intervalProvider;\n    return (delegate?.clearInterval || clearInterval)(handle as any);\n  },\n  delegate: undefined,\n};\n", "import { Action } from './Action';\nimport { SchedulerAction } from '../types';\nimport { Subscription } from '../Subscription';\nimport { AsyncScheduler } from './AsyncScheduler';\nimport { intervalProvider } from './intervalProvider';\nimport { arrRemove } from '../util/arrRemove';\nimport { TimerHandle } from './timerHandle';\n\nexport class AsyncAction<T> extends Action<T> {\n  public id: TimerHandle | undefined;\n  public state?: T;\n  // @ts-ignore: Property has no initializer and is not definitely assigned\n  public delay: number;\n  protected pending: boolean = false;\n\n  constructor(protected scheduler: AsyncScheduler, protected work: (this: SchedulerAction<T>, state?: T) => void) {\n    super(scheduler, work);\n  }\n\n  public schedule(state?: T, delay: number = 0): Subscription {\n    if (this.closed) {\n      return this;\n    }\n\n    // Always replace the current state with the new state.\n    this.state = state;\n\n    const id = this.id;\n    const scheduler = this.scheduler;\n\n    //\n    // Important implementation note:\n    //\n    // Actions only execute once by default, unless rescheduled from within the\n    // scheduled callback. This allows us to implement single and repeat\n    // actions via the same code path, without adding API surface area, as well\n    // as mimic traditional recursion but across asynchronous boundaries.\n    //\n    // However, JS runtimes and timers distinguish between intervals achieved by\n    // serial `setTimeout` calls vs. a single `setInterval` call. An interval of\n    // serial `setTimeout` calls can be individually delayed, which delays\n    // scheduling the next `setTimeout`, and so on. `setInterval` attempts to\n    // guarantee the interval callback will be invoked more precisely to the\n    // interval period, regardless of load.\n    //\n    // Therefore, we use `setInterval` to schedule single and repeat actions.\n    // If the action reschedules itself with the same delay, the interval is not\n    // canceled. If the action doesn't reschedule, or reschedules with a\n    // different delay, the interval will be canceled after scheduled callback\n    // execution.\n    //\n    if (id != null) {\n      this.id = this.recycleAsyncId(scheduler, id, delay);\n    }\n\n    // Set the pending flag indicating that this action has been scheduled, or\n    // has recursively rescheduled itself.\n    this.pending = true;\n\n    this.delay = delay;\n    // If this action has already an async Id, don't request a new one.\n    this.id = this.id ?? this.requestAsyncId(scheduler, this.id, delay);\n\n    return this;\n  }\n\n  protected requestAsyncId(scheduler: AsyncScheduler, _id?: TimerHandle, delay: number = 0): TimerHandle {\n    return intervalProvider.setInterval(scheduler.flush.bind(scheduler, this), delay);\n  }\n\n  protected recycleAsyncId(_scheduler: AsyncScheduler, id?: TimerHandle, delay: number | null = 0): TimerHandle | undefined {\n    // If this action is rescheduled with the same delay time, don't clear the interval id.\n    if (delay != null && this.delay === delay && this.pending === false) {\n      return id;\n    }\n    // Otherwise, if the action's delay time is different from the current delay,\n    // or the action has been rescheduled before it's executed, clear the interval id\n    if (id != null) {\n      intervalProvider.clearInterval(id);\n    }\n\n    return undefined;\n  }\n\n  /**\n   * Immediately executes this action and the `work` it contains.\n   * @return {any}\n   */\n  public execute(state: T, delay: number): any {\n    if (this.closed) {\n      return new Error('executing a cancelled action');\n    }\n\n    this.pending = false;\n    const error = this._execute(state, delay);\n    if (error) {\n      return error;\n    } else if (this.pending === false && this.id != null) {\n      // Dequeue if the action didn't reschedule itself. Don't call\n      // unsubscribe(), because the action could reschedule later.\n      // For example:\n      // ```\n      // scheduler.schedule(function doWork(counter) {\n      //   /* ... I'm a busy worker bee ... */\n      //   var originalAction = this;\n      //   /* wait 100ms before rescheduling the action */\n      //   setTimeout(function () {\n      //     originalAction.schedule(counter + 1);\n      //   }, 100);\n      // }, 1000);\n      // ```\n      this.id = this.recycleAsyncId(this.scheduler, this.id, null);\n    }\n  }\n\n  protected _execute(state: T, _delay: number): any {\n    let errored: boolean = false;\n    let errorValue: any;\n    try {\n      this.work(state);\n    } catch (e) {\n      errored = true;\n      // HACK: Since code elsewhere is relying on the \"truthiness\" of the\n      // return here, we can't have it return \"\" or 0 or false.\n      // TODO: Clean this up when we refactor schedulers mid-version-8 or so.\n      errorValue = e ? e : new Error('Scheduled action threw falsy error');\n    }\n    if (errored) {\n      this.unsubscribe();\n      return errorValue;\n    }\n  }\n\n  unsubscribe() {\n    if (!this.closed) {\n      const { id, scheduler } = this;\n      const { actions } = scheduler;\n\n      this.work = this.state = this.scheduler = null!;\n      this.pending = false;\n\n      arrRemove(actions, this);\n      if (id != null) {\n        this.id = this.recycleAsyncId(scheduler, id, null);\n      }\n\n      this.delay = null!;\n      super.unsubscribe();\n    }\n  }\n}\n", "let nextHandle = 1;\n// The promise needs to be created lazily otherwise it won't be patched by Zones\nlet resolved: Promise<any>;\nconst activeHandles: { [key: number]: any } = {};\n\n/**\n * Finds the handle in the list of active handles, and removes it.\n * Returns `true` if found, `false` otherwise. Used both to clear\n * Immediate scheduled tasks, and to identify if a task should be scheduled.\n */\nfunction findAndClearHandle(handle: number): boolean {\n  if (handle in activeHandles) {\n    delete activeHandles[handle];\n    return true;\n  }\n  return false;\n}\n\n/**\n * Helper functions to schedule and unschedule microtasks.\n */\nexport const Immediate = {\n  setImmediate(cb: () => void): number {\n    const handle = nextHandle++;\n    activeHandles[handle] = true;\n    if (!resolved) {\n      resolved = Promise.resolve();\n    }\n    resolved.then(() => findAndClearHandle(handle) && cb());\n    return handle;\n  },\n\n  clearImmediate(handle: number): void {\n    findAndClearHandle(handle);\n  },\n};\n\n/**\n * Used for internal testing purposes only. Do not export from library.\n */\nexport const TestTools = {\n  pending() {\n    return Object.keys(activeHandles).length;\n  }\n};\n", "import { Immediate } from '../util/Immediate';\nimport type { TimerHandle } from './timerHandle';\nconst { setImmediate, clearImmediate } = Immediate;\n\ntype SetImmediateFunction = (handler: () => void, ...args: any[]) => TimerHandle;\ntype ClearImmediateFunction = (handle: TimerHandle) => void;\n\ninterface ImmediateProvider {\n  setImmediate: SetImmediateFunction;\n  clearImmediate: ClearImmediateFunction;\n  delegate:\n    | {\n        setImmediate: SetImmediateFunction;\n        clearImmediate: ClearImmediateFunction;\n      }\n    | undefined;\n}\n\nexport const immediateProvider: ImmediateProvider = {\n  // When accessing the delegate, use the variable rather than `this` so that\n  // the functions can be called without being bound to the provider.\n  setImmediate(...args) {\n    const { delegate } = immediateProvider;\n    return (delegate?.setImmediate || setImmediate)(...args);\n  },\n  clearImmediate(handle) {\n    const { delegate } = immediateProvider;\n    return (delegate?.clearImmediate || clearImmediate)(handle as any);\n  },\n  delegate: undefined,\n};\n", "import { AsyncAction } from './AsyncAction';\nimport { AsapScheduler } from './AsapScheduler';\nimport { SchedulerAction } from '../types';\nimport { immediateProvider } from './immediateProvider';\nimport { TimerHandle } from './timerHandle';\n\nexport class AsapAction<T> extends AsyncAction<T> {\n  constructor(protected scheduler: AsapScheduler, protected work: (this: SchedulerAction<T>, state?: T) => void) {\n    super(scheduler, work);\n  }\n\n  protected requestAsyncId(scheduler: AsapScheduler, id?: TimerHandle, delay: number = 0): TimerHandle {\n    // If delay is greater than 0, request as an async action.\n    if (delay !== null && delay > 0) {\n      return super.requestAsyncId(scheduler, id, delay);\n    }\n    // Push the action to the end of the scheduler queue.\n    scheduler.actions.push(this);\n    // If a microtask has already been scheduled, don't schedule another\n    // one. If a microtask hasn't been scheduled yet, schedule one now. Return\n    // the current scheduled microtask id.\n    return scheduler._scheduled || (scheduler._scheduled = immediateProvider.setImmediate(scheduler.flush.bind(scheduler, undefined)));\n  }\n\n  protected recycleAsyncId(scheduler: AsapScheduler, id?: TimerHandle, delay: number = 0): TimerHandle | undefined {\n    // If delay exists and is greater than 0, or if the delay is null (the\n    // action wasn't rescheduled) but was originally scheduled as an async\n    // action, then recycle as an async action.\n    if (delay != null ? delay > 0 : this.delay > 0) {\n      return super.recycleAsyncId(scheduler, id, delay);\n    }\n    // If the scheduler queue has no remaining actions with the same async id,\n    // cancel the requested microtask and set the scheduled flag to undefined\n    // so the next AsapAction will request its own.\n    const { actions } = scheduler;\n    if (id != null && actions[actions.length - 1]?.id !== id) {\n      immediateProvider.clearImmediate(id);\n      if (scheduler._scheduled === id) {\n        scheduler._scheduled = undefined;\n      }\n    }\n    // Return undefined so the action knows to request a new async id if it's rescheduled.\n    return undefined;\n  }\n}\n", "import { Action } from './scheduler/Action';\nimport { Subscription } from './Subscription';\nimport { SchedulerLike, SchedulerAction } from './types';\nimport { dateTimestampProvider } from './scheduler/dateTimestampProvider';\n\n/**\n * An execution context and a data structure to order tasks and schedule their\n * execution. Provides a notion of (potentially virtual) time, through the\n * `now()` getter method.\n *\n * Each unit of work in a Scheduler is called an `Action`.\n *\n * ```ts\n * class Scheduler {\n *   now(): number;\n *   schedule(work, delay?, state?): Subscription;\n * }\n * ```\n *\n * @class Scheduler\n * @deprecated Scheduler is an internal implementation detail of RxJS, and\n * should not be used directly. Rather, create your own class and implement\n * {@link SchedulerLike}. Will be made internal in v8.\n */\nexport class Scheduler implements SchedulerLike {\n  public static now: () => number = dateTimestampProvider.now;\n\n  constructor(private schedulerActionCtor: typeof Action, now: () => number = Scheduler.now) {\n    this.now = now;\n  }\n\n  /**\n   * A getter method that returns a number representing the current time\n   * (at the time this function was called) according to the scheduler's own\n   * internal clock.\n   * @return {number} A number that represents the current time. May or may not\n   * have a relation to wall-clock time. May or may not refer to a time unit\n   * (e.g. milliseconds).\n   */\n  public now: () => number;\n\n  /**\n   * Schedules a function, `work`, for execution. May happen at some point in\n   * the future, according to the `delay` parameter, if specified. May be passed\n   * some context object, `state`, which will be passed to the `work` function.\n   *\n   * The given arguments will be processed an stored as an Action object in a\n   * queue of actions.\n   *\n   * @param {function(state: ?T): ?Subscription} work A function representing a\n   * task, or some unit of work to be executed by the Scheduler.\n   * @param {number} [delay] Time to wait before executing the work, where the\n   * time unit is implicit and defined by the Scheduler itself.\n   * @param {T} [state] Some contextual data that the `work` function uses when\n   * called by the Scheduler.\n   * @return {Subscription} A subscription in order to be able to unsubscribe\n   * the scheduled work.\n   */\n  public schedule<T>(work: (this: SchedulerAction<T>, state?: T) => void, delay: number = 0, state?: T): Subscription {\n    return new this.schedulerActionCtor<T>(this, work).schedule(state, delay);\n  }\n}\n", "import { Scheduler } from '../Scheduler';\nimport { Action } from './Action';\nimport { AsyncAction } from './AsyncAction';\nimport { TimerHandle } from './timerHandle';\n\nexport class AsyncScheduler extends Scheduler {\n  public actions: Array<AsyncAction<any>> = [];\n  /**\n   * A flag to indicate whether the Scheduler is currently executing a batch of\n   * queued actions.\n   * @type {boolean}\n   * @internal\n   */\n  public _active: boolean = false;\n  /**\n   * An internal ID used to track the latest asynchronous task such as those\n   * coming from `setTimeout`, `setInterval`, `requestAnimationFrame`, and\n   * others.\n   * @type {any}\n   * @internal\n   */\n  public _scheduled: TimerHandle | undefined;\n\n  constructor(SchedulerAction: typeof Action, now: () => number = Scheduler.now) {\n    super(SchedulerAction, now);\n  }\n\n  public flush(action: AsyncAction<any>): void {\n    const { actions } = this;\n\n    if (this._active) {\n      actions.push(action);\n      return;\n    }\n\n    let error: any;\n    this._active = true;\n\n    do {\n      if ((error = action.execute(action.state, action.delay))) {\n        break;\n      }\n    } while ((action = actions.shift()!)); // exhaust the scheduler queue\n\n    this._active = false;\n\n    if (error) {\n      while ((action = actions.shift()!)) {\n        action.unsubscribe();\n      }\n      throw error;\n    }\n  }\n}\n", "import { AsyncAction } from './AsyncAction';\nimport { AsyncScheduler } from './AsyncScheduler';\n\nexport class AsapScheduler extends AsyncScheduler {\n  public flush(action?: AsyncAction<any>): void {\n    this._active = true;\n    // The async id that effects a call to flush is stored in _scheduled.\n    // Before executing an action, it's necessary to check the action's async\n    // id to determine whether it's supposed to be executed in the current\n    // flush.\n    // Previous implementations of this method used a count to determine this,\n    // but that was unsound, as actions that are unsubscribed - i.e. cancelled -\n    // are removed from the actions array and that can shift actions that are\n    // scheduled to be executed in a subsequent flush into positions at which\n    // they are executed within the current flush.\n    const flushId = this._scheduled;\n    this._scheduled = undefined;\n\n    const { actions } = this;\n    let error: any;\n    action = action || actions.shift()!;\n\n    do {\n      if ((error = action.execute(action.state, action.delay))) {\n        break;\n      }\n    } while ((action = actions[0]) && action.id === flushId && actions.shift());\n\n    this._active = false;\n\n    if (error) {\n      while ((action = actions[0]) && action.id === flushId && actions.shift()) {\n        action.unsubscribe();\n      }\n      throw error;\n    }\n  }\n}\n", "import { AsapAction } from './AsapAction';\nimport { AsapScheduler } from './AsapScheduler';\n\n/**\n *\n * Asap Scheduler\n *\n * <span class=\"informal\">Perform task as fast as it can be performed asynchronously</span>\n *\n * `asap` scheduler behaves the same as {@link asyncScheduler} scheduler when you use it to delay task\n * in time. If however you set delay to `0`, `asap` will wait for current synchronously executing\n * code to end and then it will try to execute given task as fast as possible.\n *\n * `asap` scheduler will do its best to minimize time between end of currently executing code\n * and start of scheduled task. This makes it best candidate for performing so called \"deferring\".\n * Traditionally this was achieved by calling `setTimeout(deferredTask, 0)`, but that technique involves\n * some (although minimal) unwanted delay.\n *\n * Note that using `asap` scheduler does not necessarily mean that your task will be first to process\n * after currently executing code. In particular, if some task was also scheduled with `asap` before,\n * that task will execute first. That being said, if you need to schedule task asynchronously, but\n * as soon as possible, `asap` scheduler is your best bet.\n *\n * ## Example\n * Compare async and asap scheduler<\n * ```ts\n * import { asapScheduler, asyncScheduler } from 'rxjs';\n *\n * asyncScheduler.schedule(() => console.log('async')); // scheduling 'async' first...\n * asapScheduler.schedule(() => console.log('asap'));\n *\n * // Logs:\n * // \"asap\"\n * // \"async\"\n * // ... but 'asap' goes first!\n * ```\n */\n\nexport const asapScheduler = new AsapScheduler(AsapAction);\n\n/**\n * @deprecated Renamed to {@link asapScheduler}. Will be removed in v8.\n */\nexport const asap = asapScheduler;\n", "import { AsyncAction } from './AsyncAction';\nimport { AsyncScheduler } from './AsyncScheduler';\n\n/**\n *\n * Async Scheduler\n *\n * <span class=\"informal\">Schedule task as if you used setTimeout(task, duration)</span>\n *\n * `async` scheduler schedules tasks asynchronously, by putting them on the JavaScript\n * event loop queue. It is best used to delay tasks in time or to schedule tasks repeating\n * in intervals.\n *\n * If you just want to \"defer\" task, that is to perform it right after currently\n * executing synchronous code ends (commonly achieved by `setTimeout(deferredTask, 0)`),\n * better choice will be the {@link asapScheduler} scheduler.\n *\n * ## Examples\n * Use async scheduler to delay task\n * ```ts\n * import { asyncScheduler } from 'rxjs';\n *\n * const task = () => console.log('it works!');\n *\n * asyncScheduler.schedule(task, 2000);\n *\n * // After 2 seconds logs:\n * // \"it works!\"\n * ```\n *\n * Use async scheduler to repeat task in intervals\n * ```ts\n * import { asyncScheduler } from 'rxjs';\n *\n * function task(state) {\n *   console.log(state);\n *   this.schedule(state + 1, 1000); // `this` references currently executing Action,\n *                                   // which we reschedule with new state and delay\n * }\n *\n * asyncScheduler.schedule(task, 3000, 0);\n *\n * // Logs:\n * // 0 after 3s\n * // 1 after 4s\n * // 2 after 5s\n * // 3 after 6s\n * ```\n */\n\nexport const asyncScheduler = new AsyncScheduler(AsyncAction);\n\n/**\n * @deprecated Renamed to {@link asyncScheduler}. Will be removed in v8.\n */\nexport const async = asyncScheduler;\n", "import { AsyncAction } from './AsyncAction';\nimport { Subscription } from '../Subscription';\nimport { QueueScheduler } from './QueueScheduler';\nimport { SchedulerAction } from '../types';\nimport { TimerHandle } from './timerHandle';\n\nexport class QueueAction<T> extends AsyncAction<T> {\n  constructor(protected scheduler: QueueScheduler, protected work: (this: SchedulerAction<T>, state?: T) => void) {\n    super(scheduler, work);\n  }\n\n  public schedule(state?: T, delay: number = 0): Subscription {\n    if (delay > 0) {\n      return super.schedule(state, delay);\n    }\n    this.delay = delay;\n    this.state = state;\n    this.scheduler.flush(this);\n    return this;\n  }\n\n  public execute(state: T, delay: number): any {\n    return delay > 0 || this.closed ? super.execute(state, delay) : this._execute(state, delay);\n  }\n\n  protected requestAsyncId(scheduler: QueueScheduler, id?: TimerHandle, delay: number = 0): TimerHandle {\n    // If delay exists and is greater than 0, or if the delay is null (the\n    // action wasn't rescheduled) but was originally scheduled as an async\n    // action, then recycle as an async action.\n\n    if ((delay != null && delay > 0) || (delay == null && this.delay > 0)) {\n      return super.requestAsyncId(scheduler, id, delay);\n    }\n\n    // Otherwise flush the scheduler starting with this action.\n    scheduler.flush(this);\n\n    // HACK: In the past, this was returning `void`. However, `void` isn't a valid\n    // `TimerHandle`, and generally the return value here isn't really used. So the\n    // compromise is to return `0` which is both \"falsy\" and a valid `TimerHandle`,\n    // as opposed to refactoring every other instanceo of `requestAsyncId`.\n    return 0;\n  }\n}\n", "import { AsyncScheduler } from './AsyncScheduler';\n\nexport class QueueScheduler extends AsyncScheduler {\n}\n", "import { QueueAction } from './QueueAction';\nimport { QueueScheduler } from './QueueScheduler';\n\n/**\n *\n * Queue Scheduler\n *\n * <span class=\"informal\">Put every next task on a queue, instead of executing it immediately</span>\n *\n * `queue` scheduler, when used with delay, behaves the same as {@link asyncScheduler} scheduler.\n *\n * When used without delay, it schedules given task synchronously - executes it right when\n * it is scheduled. However when called recursively, that is when inside the scheduled task,\n * another task is scheduled with queue scheduler, instead of executing immediately as well,\n * that task will be put on a queue and wait for current one to finish.\n *\n * This means that when you execute task with `queue` scheduler, you are sure it will end\n * before any other task scheduled with that scheduler will start.\n *\n * ## Examples\n * Schedule recursively first, then do something\n * ```ts\n * import { queueScheduler } from 'rxjs';\n *\n * queueScheduler.schedule(() => {\n *   queueScheduler.schedule(() => console.log('second')); // will not happen now, but will be put on a queue\n *\n *   console.log('first');\n * });\n *\n * // Logs:\n * // \"first\"\n * // \"second\"\n * ```\n *\n * Reschedule itself recursively\n * ```ts\n * import { queueScheduler } from 'rxjs';\n *\n * queueScheduler.schedule(function(state) {\n *   if (state !== 0) {\n *     console.log('before', state);\n *     this.schedule(state - 1); // `this` references currently executing Action,\n *                               // which we reschedule with new state\n *     console.log('after', state);\n *   }\n * }, 0, 3);\n *\n * // In scheduler that runs recursively, you would expect:\n * // \"before\", 3\n * // \"before\", 2\n * // \"before\", 1\n * // \"after\", 1\n * // \"after\", 2\n * // \"after\", 3\n *\n * // But with queue it logs:\n * // \"before\", 3\n * // \"after\", 3\n * // \"before\", 2\n * // \"after\", 2\n * // \"before\", 1\n * // \"after\", 1\n * ```\n */\n\nexport const queueScheduler = new QueueScheduler(QueueAction);\n\n/**\n * @deprecated Renamed to {@link queueScheduler}. Will be removed in v8.\n */\nexport const queue = queueScheduler;\n", "import { AsyncAction } from './AsyncAction';\nimport { AnimationFrameScheduler } from './AnimationFrameScheduler';\nimport { SchedulerAction } from '../types';\nimport { animationFrameProvider } from './animationFrameProvider';\nimport { TimerHandle } from './timerHandle';\n\nexport class AnimationFrameAction<T> extends AsyncAction<T> {\n  constructor(protected scheduler: AnimationFrameScheduler, protected work: (this: SchedulerAction<T>, state?: T) => void) {\n    super(scheduler, work);\n  }\n\n  protected requestAsyncId(scheduler: AnimationFrameScheduler, id?: TimerHandle, delay: number = 0): TimerHandle {\n    // If delay is greater than 0, request as an async action.\n    if (delay !== null && delay > 0) {\n      return super.requestAsyncId(scheduler, id, delay);\n    }\n    // Push the action to the end of the scheduler queue.\n    scheduler.actions.push(this);\n    // If an animation frame has already been requested, don't request another\n    // one. If an animation frame hasn't been requested yet, request one. Return\n    // the current animation frame request id.\n    return scheduler._scheduled || (scheduler._scheduled = animationFrameProvider.requestAnimationFrame(() => scheduler.flush(undefined)));\n  }\n\n  protected recycleAsyncId(scheduler: AnimationFrameScheduler, id?: TimerHandle, delay: number = 0): TimerHandle | undefined {\n    // If delay exists and is greater than 0, or if the delay is null (the\n    // action wasn't rescheduled) but was originally scheduled as an async\n    // action, then recycle as an async action.\n    if (delay != null ? delay > 0 : this.delay > 0) {\n      return super.recycleAsyncId(scheduler, id, delay);\n    }\n    // If the scheduler queue has no remaining actions with the same async id,\n    // cancel the requested animation frame and set the scheduled flag to\n    // undefined so the next AnimationFrameAction will request its own.\n    const { actions } = scheduler;\n    if (id != null && actions[actions.length - 1]?.id !== id) {\n      animationFrameProvider.cancelAnimationFrame(id as number);\n      scheduler._scheduled = undefined;\n    }\n    // Return undefined so the action knows to request a new async id if it's rescheduled.\n    return undefined;\n  }\n}\n", "import { AsyncAction } from './AsyncAction';\nimport { AsyncScheduler } from './AsyncScheduler';\n\nexport class AnimationFrameScheduler extends AsyncScheduler {\n  public flush(action?: AsyncAction<any>): void {\n    this._active = true;\n    // The async id that effects a call to flush is stored in _scheduled.\n    // Before executing an action, it's necessary to check the action's async\n    // id to determine whether it's supposed to be executed in the current\n    // flush.\n    // Previous implementations of this method used a count to determine this,\n    // but that was unsound, as actions that are unsubscribed - i.e. cancelled -\n    // are removed from the actions array and that can shift actions that are\n    // scheduled to be executed in a subsequent flush into positions at which\n    // they are executed within the current flush.\n    const flushId = this._scheduled;\n    this._scheduled = undefined;\n\n    const { actions } = this;\n    let error: any;\n    action = action || actions.shift()!;\n\n    do {\n      if ((error = action.execute(action.state, action.delay))) {\n        break;\n      }\n    } while ((action = actions[0]) && action.id === flushId && actions.shift());\n\n    this._active = false;\n\n    if (error) {\n      while ((action = actions[0]) && action.id === flushId && actions.shift()) {\n        action.unsubscribe();\n      }\n      throw error;\n    }\n  }\n}\n", "import { AnimationFrameAction } from './AnimationFrameAction';\nimport { AnimationFrameScheduler } from './AnimationFrameScheduler';\n\n/**\n *\n * Animation Frame Scheduler\n *\n * <span class=\"informal\">Perform task when `window.requestAnimationFrame` would fire</span>\n *\n * When `animationFrame` scheduler is used with delay, it will fall back to {@link asyncScheduler} scheduler\n * behaviour.\n *\n * Without delay, `animationFrame` scheduler can be used to create smooth browser animations.\n * It makes sure scheduled task will happen just before next browser content repaint,\n * thus performing animations as efficiently as possible.\n *\n * ## Example\n * Schedule div height animation\n * ```ts\n * // html: <div style=\"background: #0ff;\"></div>\n * import { animationFrameScheduler } from 'rxjs';\n *\n * const div = document.querySelector('div');\n *\n * animationFrameScheduler.schedule(function(height) {\n *   div.style.height = height + \"px\";\n *\n *   this.schedule(height + 1);  // `this` references currently executing Action,\n *                               // which we reschedule with new state\n * }, 0, 0);\n *\n * // You will see a div element growing in height\n * ```\n */\n\nexport const animationFrameScheduler = new AnimationFrameScheduler(AnimationFrameAction);\n\n/**\n * @deprecated Renamed to {@link animationFrameScheduler}. Will be removed in v8.\n */\nexport const animationFrame = animationFrameScheduler;\n", "import { AsyncAction } from './AsyncAction';\nimport { Subscription } from '../Subscription';\nimport { AsyncScheduler } from './AsyncScheduler';\nimport { SchedulerAction } from '../types';\nimport { TimerHandle } from './timerHandle';\n\nexport class VirtualTimeScheduler extends AsyncScheduler {\n  /** @deprecated Not used in VirtualTimeScheduler directly. Will be removed in v8. */\n  static frameTimeFactor = 10;\n\n  /**\n   * The current frame for the state of the virtual scheduler instance. The difference\n   * between two \"frames\" is synonymous with the passage of \"virtual time units\". So if\n   * you record `scheduler.frame` to be `1`, then later, observe `scheduler.frame` to be at `11`,\n   * that means `10` virtual time units have passed.\n   */\n  public frame: number = 0;\n\n  /**\n   * Used internally to examine the current virtual action index being processed.\n   * @deprecated Internal implementation detail, do not use directly. Will be made internal in v8.\n   */\n  public index: number = -1;\n\n  /**\n   * This creates an instance of a `VirtualTimeScheduler`. Experts only. The signature of\n   * this constructor is likely to change in the long run.\n   *\n   * @param schedulerActionCtor The type of Action to initialize when initializing actions during scheduling.\n   * @param maxFrames The maximum number of frames to process before stopping. Used to prevent endless flush cycles.\n   */\n  constructor(schedulerActionCtor: typeof AsyncAction = VirtualAction as any, public maxFrames: number = Infinity) {\n    super(schedulerActionCtor, () => this.frame);\n  }\n\n  /**\n   * Prompt the Scheduler to execute all of its queued actions, therefore\n   * clearing its queue.\n   * @return {void}\n   */\n  public flush(): void {\n    const { actions, maxFrames } = this;\n    let error: any;\n    let action: AsyncAction<any> | undefined;\n\n    while ((action = actions[0]) && action.delay <= maxFrames) {\n      actions.shift();\n      this.frame = action.delay;\n\n      if ((error = action.execute(action.state, action.delay))) {\n        break;\n      }\n    }\n\n    if (error) {\n      while ((action = actions.shift())) {\n        action.unsubscribe();\n      }\n      throw error;\n    }\n  }\n}\n\nexport class VirtualAction<T> extends AsyncAction<T> {\n  protected active: boolean = true;\n\n  constructor(\n    protected scheduler: VirtualTimeScheduler,\n    protected work: (this: SchedulerAction<T>, state?: T) => void,\n    protected index: number = (scheduler.index += 1)\n  ) {\n    super(scheduler, work);\n    this.index = scheduler.index = index;\n  }\n\n  public schedule(state?: T, delay: number = 0): Subscription {\n    if (Number.isFinite(delay)) {\n      if (!this.id) {\n        return super.schedule(state, delay);\n      }\n      this.active = false;\n      // If an action is rescheduled, we save allocations by mutating its state,\n      // pushing it to the end of the scheduler queue, and recycling the action.\n      // But since the VirtualTimeScheduler is used for testing, VirtualActions\n      // must be immutable so they can be inspected later.\n      const action = new VirtualAction(this.scheduler, this.work);\n      this.add(action);\n      return action.schedule(state, delay);\n    } else {\n      // If someone schedules something with Infinity, it'll never happen. So we\n      // don't even schedule it.\n      return Subscription.EMPTY;\n    }\n  }\n\n  protected requestAsyncId(scheduler: VirtualTimeScheduler, id?: any, delay: number = 0): TimerHandle {\n    this.delay = scheduler.frame + delay;\n    const { actions } = scheduler;\n    actions.push(this);\n    (actions as Array<VirtualAction<T>>).sort(VirtualAction.sortActions);\n    return 1;\n  }\n\n  protected recycleAsyncId(scheduler: VirtualTimeScheduler, id?: any, delay: number = 0): TimerHandle | undefined {\n    return undefined;\n  }\n\n  protected _execute(state: T, delay: number): any {\n    if (this.active === true) {\n      return super._execute(state, delay);\n    }\n  }\n\n  private static sortActions<T>(a: VirtualAction<T>, b: VirtualAction<T>) {\n    if (a.delay === b.delay) {\n      if (a.index === b.index) {\n        return 0;\n      } else if (a.index > b.index) {\n        return 1;\n      } else {\n        return -1;\n      }\n    } else if (a.delay > b.delay) {\n      return 1;\n    } else {\n      return -1;\n    }\n  }\n}\n", "import { Observable } from '../Observable';\nimport { SchedulerLike } from '../types';\n\n/**\n * A simple Observable that emits no items to the Observer and immediately\n * emits a complete notification.\n *\n * <span class=\"informal\">Just emits 'complete', and nothing else.</span>\n *\n * ![](empty.png)\n *\n * A simple Observable that only emits the complete notification. It can be used\n * for composing with other Observables, such as in a {@link mergeMap}.\n *\n * ## Examples\n *\n * Log complete notification\n *\n * ```ts\n * import { EMPTY } from 'rxjs';\n *\n * EMPTY.subscribe({\n *   next: () => console.log('Next'),\n *   complete: () => console.log('Complete!')\n * });\n *\n * // Outputs\n * // Complete!\n * ```\n *\n * Emit the number 7, then complete\n *\n * ```ts\n * import { EMPTY, startWith } from 'rxjs';\n *\n * const result = EMPTY.pipe(startWith(7));\n * result.subscribe(x => console.log(x));\n *\n * // Outputs\n * // 7\n * ```\n *\n * Map and flatten only odd numbers to the sequence `'a'`, `'b'`, `'c'`\n *\n * ```ts\n * import { interval, mergeMap, of, EMPTY } from 'rxjs';\n *\n * const interval$ = interval(1000);\n * const result = interval$.pipe(\n *   mergeMap(x => x % 2 === 1 ? of('a', 'b', 'c') : EMPTY),\n * );\n * result.subscribe(x => console.log(x));\n *\n * // Results in the following to the console:\n * // x is equal to the count on the interval, e.g. (0, 1, 2, 3, ...)\n * // x will occur every 1000ms\n * // if x % 2 is equal to 1, print a, b, c (each on its own)\n * // if x % 2 is not equal to 1, nothing will be output\n * ```\n *\n * @see {@link Observable}\n * @see {@link NEVER}\n * @see {@link of}\n * @see {@link throwError}\n */\nexport const EMPTY = new Observable<never>((subscriber) => subscriber.complete());\n\n/**\n * @param scheduler A {@link SchedulerLike} to use for scheduling\n * the emission of the complete notification.\n * @deprecated Replaced with the {@link EMPTY} constant or {@link scheduled} (e.g. `scheduled([], scheduler)`). Will be removed in v8.\n */\nexport function empty(scheduler?: SchedulerLike) {\n  return scheduler ? emptyScheduled(scheduler) : EMPTY;\n}\n\nfunction emptyScheduled(scheduler: SchedulerLike) {\n  return new Observable<never>((subscriber) => scheduler.schedule(() => subscriber.complete()));\n}\n", "import { SchedulerLike } from '../types';\nimport { isFunction } from './isFunction';\n\nexport function isScheduler(value: any): value is SchedulerLike {\n  return value && isFunction(value.schedule);\n}\n", "import { SchedulerLike } from '../types';\nimport { isFunction } from './isFunction';\nimport { isScheduler } from './isScheduler';\n\nfunction last<T>(arr: T[]): T | undefined {\n  return arr[arr.length - 1];\n}\n\nexport function popResultSelector(args: any[]): ((...args: unknown[]) => unknown) | undefined {\n  return isFunction(last(args)) ? args.pop() : undefined;\n}\n\nexport function popScheduler(args: any[]): SchedulerLike | undefined {\n  return isScheduler(last(args)) ? args.pop() : undefined;\n}\n\nexport function popNumber(args: any[], defaultValue: number): number {\n  return typeof last(args) === 'number' ? args.pop()! : defaultValue;\n}\n", "export const isArrayLike = (<T>(x: any): x is ArrayLike<T> => x && typeof x.length === 'number' && typeof x !== 'function');", "import { isFunction } from \"./isFunction\";\n\n/**\n * Tests to see if the object is \"thennable\".\n * @param value the object to test\n */\nexport function isPromise(value: any): value is PromiseLike<any> {\n  return isFunction(value?.then);\n}\n", "import { InteropObservable } from '../types';\nimport { observable as Symbol_observable } from '../symbol/observable';\nimport { isFunction } from './isFunction';\n\n/** Identifies an input as being Observable (but not necessary an Rx Observable) */\nexport function isInteropObservable(input: any): input is InteropObservable<any> {\n  return isFunction(input[Symbol_observable]);\n}\n", "import { isFunction } from './isFunction';\n\nexport function isAsyncIterable<T>(obj: any): obj is AsyncIterable<T> {\n  return Symbol.asyncIterator && isFunction(obj?.[Symbol.asyncIterator]);\n}\n", "/**\n * Creates the TypeError to throw if an invalid object is passed to `from` or `scheduled`.\n * @param input The object that was passed.\n */\nexport function createInvalidObservableTypeError(input: any) {\n  // TODO: We should create error codes that can be looked up, so this can be less verbose.\n  return new TypeError(\n    `You provided ${\n      input !== null && typeof input === 'object' ? 'an invalid object' : `'${input}'`\n    } where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`\n  );\n}\n", "export function getSymbolIterator(): symbol {\n  if (typeof Symbol !== 'function' || !Symbol.iterator) {\n    return '@@iterator' as any;\n  }\n\n  return Symbol.iterator;\n}\n\nexport const iterator = getSymbolIterator();\n", "import { iterator as Symbol_iterator } from '../symbol/iterator';\nimport { isFunction } from './isFunction';\n\n/** Identifies an input as being an Iterable */\nexport function isIterable(input: any): input is Iterable<any> {\n  return isFunction(input?.[Symbol_iterator]);\n}\n", "import { ReadableStreamLike } from '../types';\nimport { isFunction } from './isFunction';\n\nexport async function* readableStreamLikeToAsyncGenerator<T>(readableStream: ReadableStreamLike<T>): AsyncGenerator<T> {\n  const reader = readableStream.getReader();\n  try {\n    while (true) {\n      const { value, done } = await reader.read();\n      if (done) {\n        return;\n      }\n      yield value!;\n    }\n  } finally {\n    reader.releaseLock();\n  }\n}\n\nexport function isReadableStreamLike<T>(obj: any): obj is ReadableStreamLike<T> {\n  // We don't want to use instanceof checks because they would return\n  // false for instances from another Realm, like an <iframe>.\n  return isFunction(obj?.getReader);\n}\n", "import { isArrayLike } from '../util/isArrayLike';\nimport { isPromise } from '../util/isPromise';\nimport { Observable } from '../Observable';\nimport { ObservableInput, ObservedValueOf, ReadableStreamLike } from '../types';\nimport { isInteropObservable } from '../util/isInteropObservable';\nimport { isAsyncIterable } from '../util/isAsyncIterable';\nimport { createInvalidObservableTypeError } from '../util/throwUnobservableError';\nimport { isIterable } from '../util/isIterable';\nimport { isReadableStreamLike, readableStreamLikeToAsyncGenerator } from '../util/isReadableStreamLike';\nimport { Subscriber } from '../Subscriber';\nimport { isFunction } from '../util/isFunction';\nimport { reportUnhandledError } from '../util/reportUnhandledError';\nimport { observable as Symbol_observable } from '../symbol/observable';\n\nexport function innerFrom<O extends ObservableInput<any>>(input: O): Observable<ObservedValueOf<O>>;\nexport function innerFrom<T>(input: ObservableInput<T>): Observable<T> {\n  if (input instanceof Observable) {\n    return input;\n  }\n  if (input != null) {\n    if (isInteropObservable(input)) {\n      return fromInteropObservable(input);\n    }\n    if (isArrayLike(input)) {\n      return fromArrayLike(input);\n    }\n    if (isPromise(input)) {\n      return fromPromise(input);\n    }\n    if (isAsyncIterable(input)) {\n      return fromAsyncIterable(input);\n    }\n    if (isIterable(input)) {\n      return fromIterable(input);\n    }\n    if (isReadableStreamLike(input)) {\n      return fromReadableStreamLike(input);\n    }\n  }\n\n  throw createInvalidObservableTypeError(input);\n}\n\n/**\n * Creates an RxJS Observable from an object that implements `Symbol.observable`.\n * @param obj An object that properly implements `Symbol.observable`.\n */\nexport function fromInteropObservable<T>(obj: any) {\n  return new Observable((subscriber: Subscriber<T>) => {\n    const obs = obj[Symbol_observable]();\n    if (isFunction(obs.subscribe)) {\n      return obs.subscribe(subscriber);\n    }\n    // Should be caught by observable subscribe function error handling.\n    throw new TypeError('Provided object does not correctly implement Symbol.observable');\n  });\n}\n\n/**\n * Synchronously emits the values of an array like and completes.\n * This is exported because there are creation functions and operators that need to\n * make direct use of the same logic, and there's no reason to make them run through\n * `from` conditionals because we *know* they're dealing with an array.\n * @param array The array to emit values from\n */\nexport function fromArrayLike<T>(array: ArrayLike<T>) {\n  return new Observable((subscriber: Subscriber<T>) => {\n    // Loop over the array and emit each value. Note two things here:\n    // 1. We're making sure that the subscriber is not closed on each loop.\n    //    This is so we don't continue looping over a very large array after\n    //    something like a `take`, `takeWhile`, or other synchronous unsubscription\n    //    has already unsubscribed.\n    // 2. In this form, reentrant code can alter that array we're looping over.\n    //    This is a known issue, but considered an edge case. The alternative would\n    //    be to copy the array before executing the loop, but this has\n    //    performance implications.\n    for (let i = 0; i < array.length && !subscriber.closed; i++) {\n      subscriber.next(array[i]);\n    }\n    subscriber.complete();\n  });\n}\n\nexport function fromPromise<T>(promise: PromiseLike<T>) {\n  return new Observable((subscriber: Subscriber<T>) => {\n    promise\n      .then(\n        (value) => {\n          if (!subscriber.closed) {\n            subscriber.next(value);\n            subscriber.complete();\n          }\n        },\n        (err: any) => subscriber.error(err)\n      )\n      .then(null, reportUnhandledError);\n  });\n}\n\nexport function fromIterable<T>(iterable: Iterable<T>) {\n  return new Observable((subscriber: Subscriber<T>) => {\n    for (const value of iterable) {\n      subscriber.next(value);\n      if (subscriber.closed) {\n        return;\n      }\n    }\n    subscriber.complete();\n  });\n}\n\nexport function fromAsyncIterable<T>(asyncIterable: AsyncIterable<T>) {\n  return new Observable((subscriber: Subscriber<T>) => {\n    process(asyncIterable, subscriber).catch((err) => subscriber.error(err));\n  });\n}\n\nexport function fromReadableStreamLike<T>(readableStream: ReadableStreamLike<T>) {\n  return fromAsyncIterable(readableStreamLikeToAsyncGenerator(readableStream));\n}\n\nasync function process<T>(asyncIterable: AsyncIterable<T>, subscriber: Subscriber<T>) {\n  for await (const value of asyncIterable) {\n    subscriber.next(value);\n    // A side-effect may have closed our subscriber,\n    // check before the next iteration.\n    if (subscriber.closed) {\n      return;\n    }\n  }\n  subscriber.complete();\n}\n", "import { Subscription } from '../Subscription';\nimport { SchedulerAction, SchedulerLike } from '../types';\n\nexport function executeSchedule(\n  parentSubscription: Subscription,\n  scheduler: SchedulerLike,\n  work: () => void,\n  delay: number,\n  repeat: true\n): void;\nexport function executeSchedule(\n  parentSubscription: Subscription,\n  scheduler: SchedulerLike,\n  work: () => void,\n  delay?: number,\n  repeat?: false\n): Subscription;\n\nexport function executeSchedule(\n  parentSubscription: Subscription,\n  scheduler: SchedulerLike,\n  work: () => void,\n  delay = 0,\n  repeat = false\n): Subscription | void {\n  const scheduleSubscription = scheduler.schedule(function (this: SchedulerAction<any>) {\n    work();\n    if (repeat) {\n      parentSubscription.add(this.schedule(null, delay));\n    } else {\n      this.unsubscribe();\n    }\n  }, delay);\n\n  parentSubscription.add(scheduleSubscription);\n\n  if (!repeat) {\n    // Because user-land scheduler implementations are unlikely to properly reuse\n    // Actions for repeat scheduling, we can't trust that the returned subscription\n    // will control repeat subscription scenarios. So we're trying to avoid using them\n    // incorrectly within this library.\n    return scheduleSubscription;\n  }\n}\n", "/** @prettier */\nimport { MonoTypeOperatorFunction, SchedulerLike } from '../types';\nimport { executeSchedule } from '../util/executeSchedule';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\n\n/**\n * Re-emits all notifications from source Observable with specified scheduler.\n *\n * <span class=\"informal\">Ensure a specific scheduler is used, from outside of an Observable.</span>\n *\n * `observeOn` is an operator that accepts a scheduler as a first parameter, which will be used to reschedule\n * notifications emitted by the source Observable. It might be useful, if you do not have control over\n * internal scheduler of a given Observable, but want to control when its values are emitted nevertheless.\n *\n * Returned Observable emits the same notifications (nexted values, complete and error events) as the source Observable,\n * but rescheduled with provided scheduler. Note that this doesn't mean that source Observables internal\n * scheduler will be replaced in any way. Original scheduler still will be used, but when the source Observable emits\n * notification, it will be immediately scheduled again - this time with scheduler passed to `observeOn`.\n * An anti-pattern would be calling `observeOn` on Observable that emits lots of values synchronously, to split\n * that emissions into asynchronous chunks. For this to happen, scheduler would have to be passed into the source\n * Observable directly (usually into the operator that creates it). `observeOn` simply delays notifications a\n * little bit more, to ensure that they are emitted at expected moments.\n *\n * As a matter of fact, `observeOn` accepts second parameter, which specifies in milliseconds with what delay notifications\n * will be emitted. The main difference between {@link delay} operator and `observeOn` is that `observeOn`\n * will delay all notifications - including error notifications - while `delay` will pass through error\n * from source Observable immediately when it is emitted. In general it is highly recommended to use `delay` operator\n * for any kind of delaying of values in the stream, while using `observeOn` to specify which scheduler should be used\n * for notification emissions in general.\n *\n * ## Example\n *\n * Ensure values in subscribe are called just before browser repaint\n *\n * ```ts\n * import { interval, observeOn, animationFrameScheduler } from 'rxjs';\n *\n * const someDiv = document.createElement('div');\n * someDiv.style.cssText = 'width: 200px;background: #09c';\n * document.body.appendChild(someDiv);\n * const intervals = interval(10);      // Intervals are scheduled\n *                                      // with async scheduler by default...\n * intervals.pipe(\n *   observeOn(animationFrameScheduler) // ...but we will observe on animationFrame\n * )                                    // scheduler to ensure smooth animation.\n * .subscribe(val => {\n *   someDiv.style.height = val + 'px';\n * });\n * ```\n *\n * @see {@link delay}\n *\n * @param scheduler Scheduler that will be used to reschedule notifications from source Observable.\n * @param delay Number of milliseconds that states with what delay every notification should be rescheduled.\n * @return A function that returns an Observable that emits the same\n * notifications as the source Observable, but with provided scheduler.\n */\nexport function observeOn<T>(scheduler: SchedulerLike, delay = 0): MonoTypeOperatorFunction<T> {\n  return operate((source, subscriber) => {\n    source.subscribe(\n      createOperatorSubscriber(\n        subscriber,\n        (value) => executeSchedule(subscriber, scheduler, () => subscriber.next(value), delay),\n        () => executeSchedule(subscriber, scheduler, () => subscriber.complete(), delay),\n        (err) => executeSchedule(subscriber, scheduler, () => subscriber.error(err), delay)\n      )\n    );\n  });\n}\n", "import { MonoTypeOperatorFunction, SchedulerLike } from '../types';\nimport { operate } from '../util/lift';\n\n/**\n * Asynchronously subscribes Observers to this Observable on the specified {@link SchedulerLike}.\n *\n * With `subscribeOn` you can decide what type of scheduler a specific Observable will be using when it is subscribed to.\n *\n * Schedulers control the speed and order of emissions to observers from an Observable stream.\n *\n * ![](subscribeOn.png)\n *\n * ## Example\n *\n * Given the following code:\n *\n * ```ts\n * import { of, merge } from 'rxjs';\n *\n * const a = of(1, 2, 3);\n * const b = of(4, 5, 6);\n *\n * merge(a, b).subscribe(console.log);\n *\n * // Outputs\n * // 1\n * // 2\n * // 3\n * // 4\n * // 5\n * // 6\n * ```\n *\n * Both Observable `a` and `b` will emit their values directly and synchronously once they are subscribed to.\n *\n * If we instead use the `subscribeOn` operator declaring that we want to use the {@link asyncScheduler} for values emitted by Observable `a`:\n *\n * ```ts\n * import { of, subscribeOn, asyncScheduler, merge } from 'rxjs';\n *\n * const a = of(1, 2, 3).pipe(subscribeOn(asyncScheduler));\n * const b = of(4, 5, 6);\n *\n * merge(a, b).subscribe(console.log);\n *\n * // Outputs\n * // 4\n * // 5\n * // 6\n * // 1\n * // 2\n * // 3\n * ```\n *\n * The reason for this is that Observable `b` emits its values directly and synchronously like before\n * but the emissions from `a` are scheduled on the event loop because we are now using the {@link asyncScheduler} for that specific Observable.\n *\n * @param scheduler The {@link SchedulerLike} to perform subscription actions on.\n * @param delay A delay to pass to the scheduler to delay subscriptions\n * @return A function that returns an Observable modified so that its\n * subscriptions happen on the specified {@link SchedulerLike}.\n */\nexport function subscribeOn<T>(scheduler: SchedulerLike, delay: number = 0): MonoTypeOperatorFunction<T> {\n  return operate((source, subscriber) => {\n    subscriber.add(scheduler.schedule(() => source.subscribe(subscriber), delay));\n  });\n}\n", "import { innerFrom } from '../observable/innerFrom';\nimport { observeOn } from '../operators/observeOn';\nimport { subscribeOn } from '../operators/subscribeOn';\nimport { InteropObservable, SchedulerLike } from '../types';\n\nexport function scheduleObservable<T>(input: InteropObservable<T>, scheduler: SchedulerLike) {\n  return innerFrom(input).pipe(subscribeOn(scheduler), observeOn(scheduler));\n}\n", "import { innerFrom } from '../observable/innerFrom';\nimport { observeOn } from '../operators/observeOn';\nimport { subscribeOn } from '../operators/subscribeOn';\nimport { SchedulerLike } from '../types';\n\nexport function schedulePromise<T>(input: PromiseLike<T>, scheduler: SchedulerLike) {\n  return innerFrom(input).pipe(subscribeOn(scheduler), observeOn(scheduler));\n}\n", "import { Observable } from '../Observable';\nimport { SchedulerLike } from '../types';\n\nexport function scheduleArray<T>(input: ArrayLike<T>, scheduler: SchedulerLike) {\n  return new Observable<T>((subscriber) => {\n    // The current array index.\n    let i = 0;\n    // Start iterating over the array like on a schedule.\n    return scheduler.schedule(function () {\n      if (i === input.length) {\n        // If we have hit the end of the array like in the\n        // previous job, we can complete.\n        subscriber.complete();\n      } else {\n        // Otherwise let's next the value at the current index,\n        // then increment our index.\n        subscriber.next(input[i++]);\n        // If the last emission didn't cause us to close the subscriber\n        // (via take or some side effect), reschedule the job and we'll\n        // make another pass.\n        if (!subscriber.closed) {\n          this.schedule();\n        }\n      }\n    });\n  });\n}\n", "import { Observable } from '../Observable';\nimport { SchedulerLike } from '../types';\nimport { iterator as Symbol_iterator } from '../symbol/iterator';\nimport { isFunction } from '../util/isFunction';\nimport { executeSchedule } from '../util/executeSchedule';\n\n/**\n * Used in {@link scheduled} to create an observable from an Iterable.\n * @param input The iterable to create an observable from\n * @param scheduler The scheduler to use\n */\nexport function scheduleIterable<T>(input: Iterable<T>, scheduler: SchedulerLike) {\n  return new Observable<T>((subscriber) => {\n    let iterator: Iterator<T, T>;\n\n    // Schedule the initial creation of the iterator from\n    // the iterable. This is so the code in the iterable is\n    // not called until the scheduled job fires.\n    executeSchedule(subscriber, scheduler, () => {\n      // Create the iterator.\n      iterator = (input as any)[Symbol_iterator]();\n\n      executeSchedule(\n        subscriber,\n        scheduler,\n        () => {\n          let value: T;\n          let done: boolean | undefined;\n          try {\n            // Pull the value out of the iterator\n            ({ value, done } = iterator.next());\n          } catch (err) {\n            // We got an error while pulling from the iterator\n            subscriber.error(err);\n            return;\n          }\n\n          if (done) {\n            // If it is \"done\" we just complete. This mimics the\n            // behavior of JavaScript's `for..of` consumption of\n            // iterables, which will not emit the value from an iterator\n            // result of `{ done: true: value: 'here' }`.\n            subscriber.complete();\n          } else {\n            // The iterable is not done, emit the value.\n            subscriber.next(value);\n          }\n        },\n        0,\n        true\n      );\n    });\n\n    // During finalization, if we see this iterator has a `return` method,\n    // then we know it is a Generator, and not just an Iterator. So we call\n    // the `return()` function. This will ensure that any `finally { }` blocks\n    // inside of the generator we can hit will be hit properly.\n    return () => isFunction(iterator?.return) && iterator.return();\n  });\n}\n", "import { SchedulerLike } from '../types';\nimport { Observable } from '../Observable';\nimport { executeSchedule } from '../util/executeSchedule';\n\nexport function scheduleAsyncIterable<T>(input: AsyncIterable<T>, scheduler: SchedulerLike) {\n  if (!input) {\n    throw new Error('Iterable cannot be null');\n  }\n  return new Observable<T>((subscriber) => {\n    executeSchedule(subscriber, scheduler, () => {\n      const iterator = input[Symbol.asyncIterator]();\n      executeSchedule(\n        subscriber,\n        scheduler,\n        () => {\n          iterator.next().then((result) => {\n            if (result.done) {\n              // This will remove the subscriptions from\n              // the parent subscription.\n              subscriber.complete();\n            } else {\n              subscriber.next(result.value);\n            }\n          });\n        },\n        0,\n        true\n      );\n    });\n  });\n}\n", "import { SchedulerLike, ReadableStreamLike } from '../types';\nimport { Observable } from '../Observable';\nimport { scheduleAsyncIterable } from './scheduleAsyncIterable';\nimport { readableStreamLikeToAsyncGenerator } from '../util/isReadableStreamLike';\n\nexport function scheduleReadableStreamLike<T>(input: ReadableStreamLike<T>, scheduler: SchedulerLike): Observable<T> {\n  return scheduleAsyncIterable(readableStreamLikeToAsyncGenerator(input), scheduler);\n}\n", "import { scheduleObservable } from './scheduleObservable';\nimport { schedulePromise } from './schedulePromise';\nimport { scheduleArray } from './scheduleArray';\nimport { scheduleIterable } from './scheduleIterable';\nimport { scheduleAsyncIterable } from './scheduleAsyncIterable';\nimport { isInteropObservable } from '../util/isInteropObservable';\nimport { isPromise } from '../util/isPromise';\nimport { isArrayLike } from '../util/isArrayLike';\nimport { isIterable } from '../util/isIterable';\nimport { ObservableInput, SchedulerLike } from '../types';\nimport { Observable } from '../Observable';\nimport { isAsyncIterable } from '../util/isAsyncIterable';\nimport { createInvalidObservableTypeError } from '../util/throwUnobservableError';\nimport { isReadableStreamLike } from '../util/isReadableStreamLike';\nimport { scheduleReadableStreamLike } from './scheduleReadableStreamLike';\n\n/**\n * Converts from a common {@link ObservableInput} type to an observable where subscription and emissions\n * are scheduled on the provided scheduler.\n *\n * @see {@link from}\n * @see {@link of}\n *\n * @param input The observable, array, promise, iterable, etc you would like to schedule\n * @param scheduler The scheduler to use to schedule the subscription and emissions from\n * the returned observable.\n */\nexport function scheduled<T>(input: ObservableInput<T>, scheduler: SchedulerLike): Observable<T> {\n  if (input != null) {\n    if (isInteropObservable(input)) {\n      return scheduleObservable(input, scheduler);\n    }\n    if (isArrayLike(input)) {\n      return scheduleArray(input, scheduler);\n    }\n    if (isPromise(input)) {\n      return schedulePromise(input, scheduler);\n    }\n    if (isAsyncIterable(input)) {\n      return scheduleAsyncIterable(input, scheduler);\n    }\n    if (isIterable(input)) {\n      return scheduleIterable(input, scheduler);\n    }\n    if (isReadableStreamLike(input)) {\n      return scheduleReadableStreamLike(input, scheduler);\n    }\n  }\n  throw createInvalidObservableTypeError(input);\n}\n", "import { Observable } from '../Observable';\nimport { ObservableInput, SchedulerLike, ObservedValueOf } from '../types';\nimport { scheduled } from '../scheduled/scheduled';\nimport { innerFrom } from './innerFrom';\n\nexport function from<O extends ObservableInput<any>>(input: O): Observable<ObservedValueOf<O>>;\n/** @deprecated The `scheduler` parameter will be removed in v8. Use `scheduled`. Details: https://rxjs.dev/deprecations/scheduler-argument */\nexport function from<O extends ObservableInput<any>>(input: O, scheduler: SchedulerLike | undefined): Observable<ObservedValueOf<O>>;\n\n/**\n * Creates an Observable from an Array, an array-like object, a Promise, an iterable object, or an Observable-like object.\n *\n * <span class=\"informal\">Converts almost anything to an Observable.</span>\n *\n * ![](from.png)\n *\n * `from` converts various other objects and data types into Observables. It also converts a Promise, an array-like, or an\n * <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols#iterable\" target=\"_blank\">iterable</a>\n * object into an Observable that emits the items in that promise, array, or iterable. A String, in this context, is treated\n * as an array of characters. Observable-like objects (contains a function named with the ES2015 Symbol for Observable) can also be\n * converted through this operator.\n *\n * ## Examples\n *\n * Converts an array to an Observable\n *\n * ```ts\n * import { from } from 'rxjs';\n *\n * const array = [10, 20, 30];\n * const result = from(array);\n *\n * result.subscribe(x => console.log(x));\n *\n * // Logs:\n * // 10\n * // 20\n * // 30\n * ```\n *\n * Convert an infinite iterable (from a generator) to an Observable\n *\n * ```ts\n * import { from, take } from 'rxjs';\n *\n * function* generateDoubles(seed) {\n *    let i = seed;\n *    while (true) {\n *      yield i;\n *      i = 2 * i; // double it\n *    }\n * }\n *\n * const iterator = generateDoubles(3);\n * const result = from(iterator).pipe(take(10));\n *\n * result.subscribe(x => console.log(x));\n *\n * // Logs:\n * // 3\n * // 6\n * // 12\n * // 24\n * // 48\n * // 96\n * // 192\n * // 384\n * // 768\n * // 1536\n * ```\n *\n * With `asyncScheduler`\n *\n * ```ts\n * import { from, asyncScheduler } from 'rxjs';\n *\n * console.log('start');\n *\n * const array = [10, 20, 30];\n * const result = from(array, asyncScheduler);\n *\n * result.subscribe(x => console.log(x));\n *\n * console.log('end');\n *\n * // Logs:\n * // 'start'\n * // 'end'\n * // 10\n * // 20\n * // 30\n * ```\n *\n * @see {@link fromEvent}\n * @see {@link fromEventPattern}\n *\n * @param {ObservableInput<T>} A subscription object, a Promise, an Observable-like,\n * an Array, an iterable, or an array-like object to be converted.\n * @param {SchedulerLike} An optional {@link SchedulerLike} on which to schedule the emission of values.\n * @return {Observable<T>}\n */\nexport function from<T>(input: ObservableInput<T>, scheduler?: SchedulerLike): Observable<T> {\n  return scheduler ? scheduled(input, scheduler) : innerFrom(input);\n}\n", "import { SchedulerLike, ValueFromArray } from '../types';\nimport { Observable } from '../Observable';\nimport { popScheduler } from '../util/args';\nimport { from } from './from';\n\n// Devs are more likely to pass null or undefined than they are a scheduler\n// without accompanying values. To make things easier for (naughty) devs who\n// use the `strictNullChecks: false` TypeScript compiler option, these\n// overloads with explicit null and undefined values are included.\n\nexport function of(value: null): Observable<null>;\nexport function of(value: undefined): Observable<undefined>;\n\n/** @deprecated The `scheduler` parameter will be removed in v8. Use `scheduled`. Details: https://rxjs.dev/deprecations/scheduler-argument */\nexport function of(scheduler: SchedulerLike): Observable<never>;\n/** @deprecated The `scheduler` parameter will be removed in v8. Use `scheduled`. Details: https://rxjs.dev/deprecations/scheduler-argument */\nexport function of<A extends readonly unknown[]>(...valuesAndScheduler: [...A, SchedulerLike]): Observable<ValueFromArray<A>>;\n\nexport function of(): Observable<never>;\n/** @deprecated Do not specify explicit type parameters. Signatures with type parameters that cannot be inferred will be removed in v8. */\nexport function of<T>(): Observable<T>;\nexport function of<T>(value: T): Observable<T>;\nexport function of<A extends readonly unknown[]>(...values: A): Observable<ValueFromArray<A>>;\n\n/**\n * Converts the arguments to an observable sequence.\n *\n * <span class=\"informal\">Each argument becomes a `next` notification.</span>\n *\n * ![](of.png)\n *\n * Unlike {@link from}, it does not do any flattening and emits each argument in whole\n * as a separate `next` notification.\n *\n * ## Examples\n *\n * Emit the values `10, 20, 30`\n *\n * ```ts\n * import { of } from 'rxjs';\n *\n * of(10, 20, 30)\n *   .subscribe({\n *     next: value => console.log('next:', value),\n *     error: err => console.log('error:', err),\n *     complete: () => console.log('the end'),\n *   });\n *\n * // Outputs\n * // next: 10\n * // next: 20\n * // next: 30\n * // the end\n * ```\n *\n * Emit the array `[1, 2, 3]`\n *\n * ```ts\n * import { of } from 'rxjs';\n *\n * of([1, 2, 3])\n *   .subscribe({\n *     next: value => console.log('next:', value),\n *     error: err => console.log('error:', err),\n *     complete: () => console.log('the end'),\n *   });\n *\n * // Outputs\n * // next: [1, 2, 3]\n * // the end\n * ```\n *\n * @see {@link from}\n * @see {@link range}\n *\n * @param {...T} values A comma separated list of arguments you want to be emitted\n * @return {Observable} An Observable that emits the arguments\n * described above and then completes.\n */\nexport function of<T>(...args: Array<T | SchedulerLike>): Observable<T> {\n  const scheduler = popScheduler(args);\n  return from(args as T[], scheduler);\n}\n", "import { Observable } from '../Observable';\nimport { Subscriber } from '../Subscriber';\nimport { SchedulerLike } from '../types';\nimport { isFunction } from '../util/isFunction';\n\n/**\n * Creates an observable that will create an error instance and push it to the consumer as an error\n * immediately upon subscription.\n *\n * <span class=\"informal\">Just errors and does nothing else</span>\n *\n * ![](throw.png)\n *\n * This creation function is useful for creating an observable that will create an error and error every\n * time it is subscribed to. Generally, inside of most operators when you might want to return an errored\n * observable, this is unnecessary. In most cases, such as in the inner return of {@link concatMap},\n * {@link mergeMap}, {@link defer}, and many others, you can simply throw the error, and RxJS will pick\n * that up and notify the consumer of the error.\n *\n * ## Example\n *\n * Create a simple observable that will create a new error with a timestamp and log it\n * and the message every time you subscribe to it\n *\n * ```ts\n * import { throwError } from 'rxjs';\n *\n * let errorCount = 0;\n *\n * const errorWithTimestamp$ = throwError(() => {\n *   const error: any = new Error(`This is error number ${ ++errorCount }`);\n *   error.timestamp = Date.now();\n *   return error;\n * });\n *\n * errorWithTimestamp$.subscribe({\n *   error: err => console.log(err.timestamp, err.message)\n * });\n *\n * errorWithTimestamp$.subscribe({\n *   error: err => console.log(err.timestamp, err.message)\n * });\n *\n * // Logs the timestamp and a new error message for each subscription\n * ```\n *\n * ### Unnecessary usage\n *\n * Using `throwError` inside of an operator or creation function\n * with a callback, is usually not necessary\n *\n * ```ts\n * import { of, concatMap, timer, throwError } from 'rxjs';\n *\n * const delays$ = of(1000, 2000, Infinity, 3000);\n *\n * delays$.pipe(\n *   concatMap(ms => {\n *     if (ms < 10000) {\n *       return timer(ms);\n *     } else {\n *       // This is probably overkill.\n *       return throwError(() => new Error(`Invalid time ${ ms }`));\n *     }\n *   })\n * )\n * .subscribe({\n *   next: console.log,\n *   error: console.error\n * });\n * ```\n *\n * You can just throw the error instead\n *\n * ```ts\n * import { of, concatMap, timer } from 'rxjs';\n *\n * const delays$ = of(1000, 2000, Infinity, 3000);\n *\n * delays$.pipe(\n *   concatMap(ms => {\n *     if (ms < 10000) {\n *       return timer(ms);\n *     } else {\n *       // Cleaner and easier to read for most folks.\n *       throw new Error(`Invalid time ${ ms }`);\n *     }\n *   })\n * )\n * .subscribe({\n *   next: console.log,\n *   error: console.error\n * });\n * ```\n *\n * @param errorFactory A factory function that will create the error instance that is pushed.\n */\nexport function throwError(errorFactory: () => any): Observable<never>;\n\n/**\n * Returns an observable that will error with the specified error immediately upon subscription.\n *\n * @param error The error instance to emit\n * @deprecated Support for passing an error value will be removed in v8. Instead, pass a factory function to `throwError(() => new Error('test'))`. This is\n * because it will create the error at the moment it should be created and capture a more appropriate stack trace. If\n * for some reason you need to create the error ahead of time, you can still do that: `const err = new Error('test'); throwError(() => err);`.\n */\nexport function throwError(error: any): Observable<never>;\n\n/**\n * Notifies the consumer of an error using a given scheduler by scheduling it at delay `0` upon subscription.\n *\n * @param errorOrErrorFactory An error instance or error factory\n * @param scheduler A scheduler to use to schedule the error notification\n * @deprecated The `scheduler` parameter will be removed in v8.\n * Use `throwError` in combination with {@link observeOn}: `throwError(() => new Error('test')).pipe(observeOn(scheduler));`.\n * Details: https://rxjs.dev/deprecations/scheduler-argument\n */\nexport function throwError(errorOrErrorFactory: any, scheduler: SchedulerLike): Observable<never>;\n\nexport function throwError(errorOrErrorFactory: any, scheduler?: SchedulerLike): Observable<never> {\n  const errorFactory = isFunction(errorOrErrorFactory) ? errorOrErrorFactory : () => errorOrErrorFactory;\n  const init = (subscriber: Subscriber<never>) => subscriber.error(errorFactory());\n  return new Observable(scheduler ? (subscriber) => scheduler.schedule(init as any, 0, subscriber) : init);\n}\n", "import { PartialObserver, ObservableNotification, CompleteNotification, NextNotification, ErrorNotification } from './types';\nimport { Observable } from './Observable';\nimport { EMPTY } from './observable/empty';\nimport { of } from './observable/of';\nimport { throwError } from './observable/throwError';\nimport { isFunction } from './util/isFunction';\n\n// TODO: When this enum is removed, replace it with a type alias. See #4556.\n/**\n * @deprecated Use a string literal instead. `NotificationKind` will be replaced with a type alias in v8.\n * It will not be replaced with a const enum as those are not compatible with isolated modules.\n */\nexport enum NotificationKind {\n  NEXT = 'N',\n  ERROR = 'E',\n  COMPLETE = 'C',\n}\n\n/**\n * Represents a push-based event or value that an {@link Observable} can emit.\n * This class is particularly useful for operators that manage notifications,\n * like {@link materialize}, {@link dematerialize}, {@link observeOn}, and\n * others. Besides wrapping the actual delivered value, it also annotates it\n * with metadata of, for instance, what type of push message it is (`next`,\n * `error`, or `complete`).\n *\n * @see {@link materialize}\n * @see {@link dematerialize}\n * @see {@link observeOn}\n * @deprecated It is NOT recommended to create instances of `Notification` directly.\n * Rather, try to create POJOs matching the signature outlined in {@link ObservableNotification}.\n * For example: `{ kind: 'N', value: 1 }`, `{ kind: 'E', error: new Error('bad') }`, or `{ kind: 'C' }`.\n * Will be removed in v8.\n */\nexport class Notification<T> {\n  /**\n   * A value signifying that the notification will \"next\" if observed. In truth,\n   * This is really synonymous with just checking `kind === \"N\"`.\n   * @deprecated Will be removed in v8. Instead, just check to see if the value of `kind` is `\"N\"`.\n   */\n  readonly hasValue: boolean;\n\n  /**\n   * Creates a \"Next\" notification object.\n   * @param kind Always `'N'`\n   * @param value The value to notify with if observed.\n   * @deprecated Internal implementation detail. Use {@link Notification#createNext createNext} instead.\n   */\n  constructor(kind: 'N', value?: T);\n  /**\n   * Creates an \"Error\" notification object.\n   * @param kind Always `'E'`\n   * @param value Always `undefined`\n   * @param error The error to notify with if observed.\n   * @deprecated Internal implementation detail. Use {@link Notification#createError createError} instead.\n   */\n  constructor(kind: 'E', value: undefined, error: any);\n  /**\n   * Creates a \"completion\" notification object.\n   * @param kind Always `'C'`\n   * @deprecated Internal implementation detail. Use {@link Notification#createComplete createComplete} instead.\n   */\n  constructor(kind: 'C');\n  constructor(public readonly kind: 'N' | 'E' | 'C', public readonly value?: T, public readonly error?: any) {\n    this.hasValue = kind === 'N';\n  }\n\n  /**\n   * Executes the appropriate handler on a passed `observer` given the `kind` of notification.\n   * If the handler is missing it will do nothing. Even if the notification is an error, if\n   * there is no error handler on the observer, an error will not be thrown, it will noop.\n   * @param observer The observer to notify.\n   */\n  observe(observer: PartialObserver<T>): void {\n    return observeNotification(this as ObservableNotification<T>, observer);\n  }\n\n  /**\n   * Executes a notification on the appropriate handler from a list provided.\n   * If a handler is missing for the kind of notification, nothing is called\n   * and no error is thrown, it will be a noop.\n   * @param next A next handler\n   * @param error An error handler\n   * @param complete A complete handler\n   * @deprecated Replaced with {@link Notification#observe observe}. Will be removed in v8.\n   */\n  do(next: (value: T) => void, error: (err: any) => void, complete: () => void): void;\n  /**\n   * Executes a notification on the appropriate handler from a list provided.\n   * If a handler is missing for the kind of notification, nothing is called\n   * and no error is thrown, it will be a noop.\n   * @param next A next handler\n   * @param error An error handler\n   * @deprecated Replaced with {@link Notification#observe observe}. Will be removed in v8.\n   */\n  do(next: (value: T) => void, error: (err: any) => void): void;\n  /**\n   * Executes the next handler if the Notification is of `kind` `\"N\"`. Otherwise\n   * this will not error, and it will be a noop.\n   * @param next The next handler\n   * @deprecated Replaced with {@link Notification#observe observe}. Will be removed in v8.\n   */\n  do(next: (value: T) => void): void;\n  do(nextHandler: (value: T) => void, errorHandler?: (err: any) => void, completeHandler?: () => void): void {\n    const { kind, value, error } = this;\n    return kind === 'N' ? nextHandler?.(value!) : kind === 'E' ? errorHandler?.(error) : completeHandler?.();\n  }\n\n  /**\n   * Executes a notification on the appropriate handler from a list provided.\n   * If a handler is missing for the kind of notification, nothing is called\n   * and no error is thrown, it will be a noop.\n   * @param next A next handler\n   * @param error An error handler\n   * @param complete A complete handler\n   * @deprecated Replaced with {@link Notification#observe observe}. Will be removed in v8.\n   */\n  accept(next: (value: T) => void, error: (err: any) => void, complete: () => void): void;\n  /**\n   * Executes a notification on the appropriate handler from a list provided.\n   * If a handler is missing for the kind of notification, nothing is called\n   * and no error is thrown, it will be a noop.\n   * @param next A next handler\n   * @param error An error handler\n   * @deprecated Replaced with {@link Notification#observe observe}. Will be removed in v8.\n   */\n  accept(next: (value: T) => void, error: (err: any) => void): void;\n  /**\n   * Executes the next handler if the Notification is of `kind` `\"N\"`. Otherwise\n   * this will not error, and it will be a noop.\n   * @param next The next handler\n   * @deprecated Replaced with {@link Notification#observe observe}. Will be removed in v8.\n   */\n  accept(next: (value: T) => void): void;\n\n  /**\n   * Executes the appropriate handler on a passed `observer` given the `kind` of notification.\n   * If the handler is missing it will do nothing. Even if the notification is an error, if\n   * there is no error handler on the observer, an error will not be thrown, it will noop.\n   * @param observer The observer to notify.\n   * @deprecated Replaced with {@link Notification#observe observe}. Will be removed in v8.\n   */\n  accept(observer: PartialObserver<T>): void;\n  accept(nextOrObserver: PartialObserver<T> | ((value: T) => void), error?: (err: any) => void, complete?: () => void) {\n    return isFunction((nextOrObserver as any)?.next)\n      ? this.observe(nextOrObserver as PartialObserver<T>)\n      : this.do(nextOrObserver as (value: T) => void, error as any, complete as any);\n  }\n\n  /**\n   * Returns a simple Observable that just delivers the notification represented\n   * by this Notification instance.\n   *\n   * @deprecated Will be removed in v8. To convert a `Notification` to an {@link Observable},\n   * use {@link of} and {@link dematerialize}: `of(notification).pipe(dematerialize())`.\n   */\n  toObservable(): Observable<T> {\n    const { kind, value, error } = this;\n    // Select the observable to return by `kind`\n    const result =\n      kind === 'N'\n        ? // Next kind. Return an observable of that value.\n          of(value!)\n        : //\n        kind === 'E'\n        ? // Error kind. Return an observable that emits the error.\n          throwError(() => error)\n        : //\n        kind === 'C'\n        ? // Completion kind. Kind is \"C\", return an observable that just completes.\n          EMPTY\n        : // Unknown kind, return falsy, so we error below.\n          0;\n    if (!result) {\n      // TODO: consider removing this check. The only way to cause this would be to\n      // use the Notification constructor directly in a way that is not type-safe.\n      // and direct use of the Notification constructor is deprecated.\n      throw new TypeError(`Unexpected notification kind ${kind}`);\n    }\n    return result;\n  }\n\n  private static completeNotification = new Notification('C') as Notification<never> & CompleteNotification;\n  /**\n   * A shortcut to create a Notification instance of the type `next` from a\n   * given value.\n   * @param {T} value The `next` value.\n   * @return {Notification<T>} The \"next\" Notification representing the\n   * argument.\n   * @nocollapse\n   * @deprecated It is NOT recommended to create instances of `Notification` directly.\n   * Rather, try to create POJOs matching the signature outlined in {@link ObservableNotification}.\n   * For example: `{ kind: 'N', value: 1 }`, `{ kind: 'E', error: new Error('bad') }`, or `{ kind: 'C' }`.\n   * Will be removed in v8.\n   */\n  static createNext<T>(value: T) {\n    return new Notification('N', value) as Notification<T> & NextNotification<T>;\n  }\n\n  /**\n   * A shortcut to create a Notification instance of the type `error` from a\n   * given error.\n   * @param {any} [err] The `error` error.\n   * @return {Notification<T>} The \"error\" Notification representing the\n   * argument.\n   * @nocollapse\n   * @deprecated It is NOT recommended to create instances of `Notification` directly.\n   * Rather, try to create POJOs matching the signature outlined in {@link ObservableNotification}.\n   * For example: `{ kind: 'N', value: 1 }`, `{ kind: 'E', error: new Error('bad') }`, or `{ kind: 'C' }`.\n   * Will be removed in v8.\n   */\n  static createError(err?: any) {\n    return new Notification('E', undefined, err) as Notification<never> & ErrorNotification;\n  }\n\n  /**\n   * A shortcut to create a Notification instance of the type `complete`.\n   * @return {Notification<any>} The valueless \"complete\" Notification.\n   * @nocollapse\n   * @deprecated It is NOT recommended to create instances of `Notification` directly.\n   * Rather, try to create POJOs matching the signature outlined in {@link ObservableNotification}.\n   * For example: `{ kind: 'N', value: 1 }`, `{ kind: 'E', error: new Error('bad') }`, or `{ kind: 'C' }`.\n   * Will be removed in v8.\n   */\n  static createComplete(): Notification<never> & CompleteNotification {\n    return Notification.completeNotification;\n  }\n}\n\n/**\n * Executes the appropriate handler on a passed `observer` given the `kind` of notification.\n * If the handler is missing it will do nothing. Even if the notification is an error, if\n * there is no error handler on the observer, an error will not be thrown, it will noop.\n * @param notification The notification object to observe.\n * @param observer The observer to notify.\n */\nexport function observeNotification<T>(notification: ObservableNotification<T>, observer: PartialObserver<T>) {\n  const { kind, value, error } = notification as any;\n  if (typeof kind !== 'string') {\n    throw new TypeError('Invalid notification, missing \"kind\"');\n  }\n  kind === 'N' ? observer.next?.(value!) : kind === 'E' ? observer.error?.(error) : observer.complete?.();\n}\n", "import { createErrorClass } from './createErrorClass';\n\nexport interface EmptyError extends Error {}\n\nexport interface EmptyErrorCtor {\n  /**\n   * @deprecated Internal implementation detail. Do not construct error instances.\n   * Cannot be tagged as internal: https://github.com/ReactiveX/rxjs/issues/6269\n   */\n  new (): EmptyError;\n}\n\n/**\n * An error thrown when an Observable or a sequence was queried but has no\n * elements.\n *\n * @see {@link first}\n * @see {@link last}\n * @see {@link single}\n * @see {@link firstValueFrom}\n * @see {@link lastValueFrom}\n *\n * @class EmptyError\n */\nexport const EmptyError: EmptyErrorCtor = createErrorClass((_super) => function EmptyErrorImpl(this: any) {\n  _super(this);\n  this.name = 'EmptyError';\n  this.message = 'no elements in sequence';\n});\n", "import { Observable } from './Observable';\nimport { EmptyError } from './util/EmptyError';\nimport { SafeSubscriber } from './Subscriber';\n\nexport interface FirstValueFromConfig<T> {\n  defaultValue: T;\n}\n\nexport function firstValueFrom<T, D>(source: Observable<T>, config: FirstValueFromConfig<D>): Promise<T | D>;\nexport function firstValueFrom<T>(source: Observable<T>): Promise<T>;\n\n/**\n * Converts an observable to a promise by subscribing to the observable,\n * and returning a promise that will resolve as soon as the first value\n * arrives from the observable. The subscription will then be closed.\n *\n * If the observable stream completes before any values were emitted, the\n * returned promise will reject with {@link EmptyError} or will resolve\n * with the default value if a default was specified.\n *\n * If the observable stream emits an error, the returned promise will reject\n * with that error.\n *\n * **WARNING**: Only use this with observables you *know* will emit at least one value,\n * *OR* complete. If the source observable does not emit one value or complete, you will\n * end up with a promise that is hung up, and potentially all of the state of an\n * async function hanging out in memory. To avoid this situation, look into adding\n * something like {@link timeout}, {@link take}, {@link takeWhile}, or {@link takeUntil}\n * amongst others.\n *\n * ## Example\n *\n * Wait for the first value from a stream and emit it from a promise in\n * an async function\n *\n * ```ts\n * import { interval, firstValueFrom } from 'rxjs';\n *\n * async function execute() {\n *   const source$ = interval(2000);\n *   const firstNumber = await firstValueFrom(source$);\n *   console.log(`The first number is ${ firstNumber }`);\n * }\n *\n * execute();\n *\n * // Expected output:\n * // 'The first number is 0'\n * ```\n *\n * @see {@link lastValueFrom}\n *\n * @param source the observable to convert to a promise\n * @param config a configuration object to define the `defaultValue` to use if the source completes without emitting a value\n */\nexport function firstValueFrom<T, D>(source: Observable<T>, config?: FirstValueFromConfig<D>): Promise<T | D> {\n  const hasConfig = typeof config === 'object';\n  return new Promise<T | D>((resolve, reject) => {\n    const subscriber = new SafeSubscriber<T>({\n      next: (value) => {\n        resolve(value);\n        subscriber.unsubscribe();\n      },\n      error: reject,\n      complete: () => {\n        if (hasConfig) {\n          resolve(config!.defaultValue);\n        } else {\n          reject(new EmptyError());\n        }\n      },\n    });\n    source.subscribe(subscriber);\n  });\n}\n", "import { createErrorClass } from './createErrorClass';\n\nexport interface ArgumentOutOfRangeError extends Error {}\n\nexport interface ArgumentOutOfRangeErrorCtor {\n  /**\n   * @deprecated Internal implementation detail. Do not construct error instances.\n   * Cannot be tagged as internal: https://github.com/ReactiveX/rxjs/issues/6269\n   */\n  new (): ArgumentOutOfRangeError;\n}\n\n/**\n * An error thrown when an element was queried at a certain index of an\n * Observable, but no such index or position exists in that sequence.\n *\n * @see {@link elementAt}\n * @see {@link take}\n * @see {@link takeLast}\n *\n * @class ArgumentOutOfRangeError\n */\nexport const ArgumentOutOfRangeError: ArgumentOutOfRangeErrorCtor = createErrorClass(\n  (_super) =>\n    function ArgumentOutOfRangeErrorImpl(this: any) {\n      _super(this);\n      this.name = 'ArgumentOutOfRangeError';\n      this.message = 'argument out of range';\n    }\n);\n", "import { createErrorClass } from './createErrorClass';\n\nexport interface NotFoundError extends Error {}\n\nexport interface NotFoundErrorCtor {\n  /**\n   * @deprecated Internal implementation detail. Do not construct error instances.\n   * Cannot be tagged as internal: https://github.com/ReactiveX/rxjs/issues/6269\n   */\n  new (message: string): NotFoundError;\n}\n\n/**\n * An error thrown when a value or values are missing from an\n * observable sequence.\n *\n * @see {@link operators/single}\n *\n * @class NotFoundError\n */\nexport const NotFoundError: NotFoundErrorCtor = createErrorClass(\n  (_super) =>\n    function NotFoundErrorImpl(this: any, message: string) {\n      _super(this);\n      this.name = 'NotFoundError';\n      this.message = message;\n    }\n);\n", "import { createErrorClass } from './createErrorClass';\n\nexport interface SequenceError extends Error {}\n\nexport interface SequenceErrorCtor {\n  /**\n   * @deprecated Internal implementation detail. Do not construct error instances.\n   * Cannot be tagged as internal: https://github.com/ReactiveX/rxjs/issues/6269\n   */\n  new (message: string): SequenceError;\n}\n\n/**\n * An error thrown when something is wrong with the sequence of\n * values arriving on the observable.\n *\n * @see {@link operators/single}\n *\n * @class SequenceError\n */\nexport const SequenceError: SequenceErrorCtor = createErrorClass(\n  (_super) =>\n    function SequenceErrorImpl(this: any, message: string) {\n      _super(this);\n      this.name = 'SequenceError';\n      this.message = message;\n    }\n);\n", "/**\n * Checks to see if a value is not only a `Date` object,\n * but a *valid* `Date` object that can be converted to a\n * number. For example, `new Date('blah')` is indeed an\n * `instanceof Date`, however it cannot be converted to a\n * number.\n */\nexport function isValidDate(value: any): value is Date {\n  return value instanceof Date && !isNaN(value as any);\n}\n", "import { asyncScheduler } from '../scheduler/async';\nimport { MonoTypeOperatorFunction, SchedulerLike, OperatorFunction, ObservableInput, ObservedValueOf } from '../types';\nimport { isValidDate } from '../util/isDate';\nimport { Subscription } from '../Subscription';\nimport { operate } from '../util/lift';\nimport { Observable } from '../Observable';\nimport { innerFrom } from '../observable/innerFrom';\nimport { createErrorClass } from '../util/createErrorClass';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nimport { executeSchedule } from '../util/executeSchedule';\n\nexport interface TimeoutConfig<T, O extends ObservableInput<unknown> = ObservableInput<T>, M = unknown> {\n  /**\n   * The time allowed between values from the source before timeout is triggered.\n   */\n  each?: number;\n\n  /**\n   * The relative time as a `number` in milliseconds, or a specific time as a `Date` object,\n   * by which the first value must arrive from the source before timeout is triggered.\n   */\n  first?: number | Date;\n\n  /**\n   * The scheduler to use with time-related operations within this operator. Defaults to {@link asyncScheduler}\n   */\n  scheduler?: SchedulerLike;\n\n  /**\n   * A factory used to create observable to switch to when timeout occurs. Provides\n   * a {@link TimeoutInfo} about the source observable's emissions and what delay or\n   * exact time triggered the timeout.\n   */\n  with?: (info: TimeoutInfo<T, M>) => O;\n\n  /**\n   * Optional additional metadata you can provide to code that handles\n   * the timeout, will be provided through the {@link TimeoutError}.\n   * This can be used to help identify the source of a timeout or pass along\n   * other information related to the timeout.\n   */\n  meta?: M;\n}\n\nexport interface TimeoutInfo<T, M = unknown> {\n  /** Optional metadata that was provided to the timeout configuration. */\n  readonly meta: M;\n  /** The number of messages seen before the timeout */\n  readonly seen: number;\n  /** The last message seen */\n  readonly lastValue: T | null;\n}\n\n/**\n * An error emitted when a timeout occurs.\n */\nexport interface TimeoutError<T = unknown, M = unknown> extends Error {\n  /**\n   * The information provided to the error by the timeout\n   * operation that created the error. Will be `null` if\n   * used directly in non-RxJS code with an empty constructor.\n   * (Note that using this constructor directly is not recommended,\n   * you should create your own errors)\n   */\n  info: TimeoutInfo<T, M> | null;\n}\n\nexport interface TimeoutErrorCtor {\n  /**\n   * @deprecated Internal implementation detail. Do not construct error instances.\n   * Cannot be tagged as internal: https://github.com/ReactiveX/rxjs/issues/6269\n   */\n  new <T = unknown, M = unknown>(info?: TimeoutInfo<T, M>): TimeoutError<T, M>;\n}\n\n/**\n * An error thrown by the {@link timeout} operator.\n *\n * Provided so users can use as a type and do quality comparisons.\n * We recommend you do not subclass this or create instances of this class directly.\n * If you have need of a error representing a timeout, you should\n * create your own error class and use that.\n *\n * @see {@link timeout}\n *\n * @class TimeoutError\n */\nexport const TimeoutError: TimeoutErrorCtor = createErrorClass(\n  (_super) =>\n    function TimeoutErrorImpl(this: any, info: TimeoutInfo<any> | null = null) {\n      _super(this);\n      this.message = 'Timeout has occurred';\n      this.name = 'TimeoutError';\n      this.info = info;\n    }\n);\n\n/**\n * If `with` is provided, this will return an observable that will switch to a different observable if the source\n * does not push values within the specified time parameters.\n *\n * <span class=\"informal\">The most flexible option for creating a timeout behavior.</span>\n *\n * The first thing to know about the configuration is if you do not provide a `with` property to the configuration,\n * when timeout conditions are met, this operator will emit a {@link TimeoutError}. Otherwise, it will use the factory\n * function provided by `with`, and switch your subscription to the result of that. Timeout conditions are provided by\n * the settings in `first` and `each`.\n *\n * The `first` property can be either a `Date` for a specific time, a `number` for a time period relative to the\n * point of subscription, or it can be skipped. This property is to check timeout conditions for the arrival of\n * the first value from the source _only_. The timings of all subsequent values  from the source will be checked\n * against the time period provided by `each`, if it was provided.\n *\n * The `each` property can be either a `number` or skipped. If a value for `each` is provided, it represents the amount of\n * time the resulting observable will wait between the arrival of values from the source before timing out. Note that if\n * `first` is _not_ provided, the value from `each` will be used to check timeout conditions for the arrival of the first\n * value and all subsequent values. If `first` _is_ provided, `each` will only be use to check all values after the first.\n *\n * ## Examples\n *\n * Emit a custom error if there is too much time between values\n *\n * ```ts\n * import { interval, timeout, throwError } from 'rxjs';\n *\n * class CustomTimeoutError extends Error {\n *   constructor() {\n *     super('It was too slow');\n *     this.name = 'CustomTimeoutError';\n *   }\n * }\n *\n * const slow$ = interval(900);\n *\n * slow$.pipe(\n *   timeout({\n *     each: 1000,\n *     with: () => throwError(() => new CustomTimeoutError())\n *   })\n * )\n * .subscribe({\n *   error: console.error\n * });\n * ```\n *\n * Switch to a faster observable if your source is slow.\n *\n * ```ts\n * import { interval, timeout } from 'rxjs';\n *\n * const slow$ = interval(900);\n * const fast$ = interval(500);\n *\n * slow$.pipe(\n *   timeout({\n *     each: 1000,\n *     with: () => fast$,\n *   })\n * )\n * .subscribe(console.log);\n * ```\n * @param config The configuration for the timeout.\n */\nexport function timeout<T, O extends ObservableInput<unknown>, M = unknown>(\n  config: TimeoutConfig<T, O, M> & { with: (info: TimeoutInfo<T, M>) => O }\n): OperatorFunction<T, T | ObservedValueOf<O>>;\n\n/**\n * Returns an observable that will error or switch to a different observable if the source does not push values\n * within the specified time parameters.\n *\n * <span class=\"informal\">The most flexible option for creating a timeout behavior.</span>\n *\n * The first thing to know about the configuration is if you do not provide a `with` property to the configuration,\n * when timeout conditions are met, this operator will emit a {@link TimeoutError}. Otherwise, it will use the factory\n * function provided by `with`, and switch your subscription to the result of that. Timeout conditions are provided by\n * the settings in `first` and `each`.\n *\n * The `first` property can be either a `Date` for a specific time, a `number` for a time period relative to the\n * point of subscription, or it can be skipped. This property is to check timeout conditions for the arrival of\n * the first value from the source _only_. The timings of all subsequent values  from the source will be checked\n * against the time period provided by `each`, if it was provided.\n *\n * The `each` property can be either a `number` or skipped. If a value for `each` is provided, it represents the amount of\n * time the resulting observable will wait between the arrival of values from the source before timing out. Note that if\n * `first` is _not_ provided, the value from `each` will be used to check timeout conditions for the arrival of the first\n * value and all subsequent values. If `first` _is_ provided, `each` will only be use to check all values after the first.\n *\n * ### Handling TimeoutErrors\n *\n * If no `with` property was provided, subscriptions to the resulting observable may emit an error of {@link TimeoutError}.\n * The timeout error provides useful information you can examine when you're handling the error. The most common way to handle\n * the error would be with {@link catchError}, although you could use {@link tap} or just the error handler in your `subscribe` call\n * directly, if your error handling is only a side effect (such as notifying the user, or logging).\n *\n * In this case, you would check the error for `instanceof TimeoutError` to validate that the error was indeed from `timeout`, and\n * not from some other source. If it's not from `timeout`, you should probably rethrow it if you're in a `catchError`.\n *\n * ## Examples\n *\n * Emit a {@link TimeoutError} if the first value, and _only_ the first value, does not arrive within 5 seconds\n *\n * ```ts\n * import { interval, timeout } from 'rxjs';\n *\n * // A random interval that lasts between 0 and 10 seconds per tick\n * const source$ = interval(Math.round(Math.random() * 10_000));\n *\n * source$.pipe(\n *   timeout({ first: 5_000 })\n * )\n * .subscribe({\n *   next: console.log,\n *   error: console.error\n * });\n * ```\n *\n * Emit a {@link TimeoutError} if the source waits longer than 5 seconds between any two values or the first value\n * and subscription.\n *\n * ```ts\n * import { timer, timeout, expand } from 'rxjs';\n *\n * const getRandomTime = () => Math.round(Math.random() * 10_000);\n *\n * // An observable that waits a random amount of time between each delivered value\n * const source$ = timer(getRandomTime())\n *   .pipe(expand(() => timer(getRandomTime())));\n *\n * source$\n *   .pipe(timeout({ each: 5_000 }))\n *   .subscribe({\n *     next: console.log,\n *     error: console.error\n *   });\n * ```\n *\n * Emit a {@link TimeoutError} if the source does not emit before 7 seconds, _or_ if the source waits longer than\n * 5 seconds between any two values after the first.\n *\n * ```ts\n * import { timer, timeout, expand } from 'rxjs';\n *\n * const getRandomTime = () => Math.round(Math.random() * 10_000);\n *\n * // An observable that waits a random amount of time between each delivered value\n * const source$ = timer(getRandomTime())\n *   .pipe(expand(() => timer(getRandomTime())));\n *\n * source$\n *   .pipe(timeout({ first: 7_000, each: 5_000 }))\n *   .subscribe({\n *     next: console.log,\n *     error: console.error\n *   });\n * ```\n */\nexport function timeout<T, M = unknown>(config: Omit<TimeoutConfig<T, any, M>, 'with'>): OperatorFunction<T, T>;\n\n/**\n * Returns an observable that will error if the source does not push its first value before the specified time passed as a `Date`.\n * This is functionally the same as `timeout({ first: someDate })`.\n *\n * <span class=\"informal\">Errors if the first value doesn't show up before the given date and time</span>\n *\n * ![](timeout.png)\n *\n * @param first The date to at which the resulting observable will timeout if the source observable\n * does not emit at least one value.\n * @param scheduler The scheduler to use. Defaults to {@link asyncScheduler}.\n */\nexport function timeout<T>(first: Date, scheduler?: SchedulerLike): MonoTypeOperatorFunction<T>;\n\n/**\n * Returns an observable that will error if the source does not push a value within the specified time in milliseconds.\n * This is functionally the same as `timeout({ each: milliseconds })`.\n *\n * <span class=\"informal\">Errors if it waits too long between any value</span>\n *\n * ![](timeout.png)\n *\n * @param each The time allowed between each pushed value from the source before the resulting observable\n * will timeout.\n * @param scheduler The scheduler to use. Defaults to {@link asyncScheduler}.\n */\nexport function timeout<T>(each: number, scheduler?: SchedulerLike): MonoTypeOperatorFunction<T>;\n\n/**\n *\n * Errors if Observable does not emit a value in given time span.\n *\n * <span class=\"informal\">Timeouts on Observable that doesn't emit values fast enough.</span>\n *\n * ![](timeout.png)\n *\n * @see {@link timeoutWith}\n *\n * @return A function that returns an Observable that mirrors behaviour of the\n * source Observable, unless timeout happens when it throws an error.\n */\nexport function timeout<T, O extends ObservableInput<any>, M>(\n  config: number | Date | TimeoutConfig<T, O, M>,\n  schedulerArg?: SchedulerLike\n): OperatorFunction<T, T | ObservedValueOf<O>> {\n  // Intentionally terse code.\n  // If the first argument is a valid `Date`, then we use it as the `first` config.\n  // Otherwise, if the first argument is a `number`, then we use it as the `each` config.\n  // Otherwise, it can be assumed the first argument is the configuration object itself, and\n  // we destructure that into what we're going to use, setting important defaults as we do.\n  // NOTE: The default for `scheduler` will be the `scheduler` argument if it exists, or\n  // it will default to the `asyncScheduler`.\n  const {\n    first,\n    each,\n    with: _with = timeoutErrorFactory,\n    scheduler = schedulerArg ?? asyncScheduler,\n    meta = null!,\n  } = (isValidDate(config) ? { first: config } : typeof config === 'number' ? { each: config } : config) as TimeoutConfig<T, O, M>;\n\n  if (first == null && each == null) {\n    // Ensure timeout was provided at runtime.\n    throw new TypeError('No timeout provided.');\n  }\n\n  return operate((source, subscriber) => {\n    // This subscription encapsulates our subscription to the\n    // source for this operator. We're capturing it separately,\n    // because if there is a `with` observable to fail over to,\n    // we want to unsubscribe from our original subscription, and\n    // hand of the subscription to that one.\n    let originalSourceSubscription: Subscription;\n    // The subscription for our timeout timer. This changes\n    // every time we get a new value.\n    let timerSubscription: Subscription;\n    // A bit of state we pass to our with and error factories to\n    // tell what the last value we saw was.\n    let lastValue: T | null = null;\n    // A bit of state we pass to the with and error factories to\n    // tell how many values we have seen so far.\n    let seen = 0;\n    const startTimer = (delay: number) => {\n      timerSubscription = executeSchedule(\n        subscriber,\n        scheduler,\n        () => {\n          try {\n            originalSourceSubscription.unsubscribe();\n            innerFrom(\n              _with!({\n                meta,\n                lastValue,\n                seen,\n              })\n            ).subscribe(subscriber);\n          } catch (err) {\n            subscriber.error(err);\n          }\n        },\n        delay\n      );\n    };\n\n    originalSourceSubscription = source.subscribe(\n      createOperatorSubscriber(\n        subscriber,\n        (value: T) => {\n          // clear the timer so we can emit and start another one.\n          timerSubscription?.unsubscribe();\n          seen++;\n          // Emit\n          subscriber.next((lastValue = value));\n          // null | undefined are both < 0. Thanks, JavaScript.\n          each! > 0 && startTimer(each!);\n        },\n        undefined,\n        undefined,\n        () => {\n          if (!timerSubscription?.closed) {\n            timerSubscription?.unsubscribe();\n          }\n          // Be sure not to hold the last value in memory after unsubscription\n          // it could be quite large.\n          lastValue = null;\n        }\n      )\n    );\n\n    // Intentionally terse code.\n    // If we've `seen` a value, that means the \"first\" clause was met already, if it existed.\n    //   it also means that a timer was already started for \"each\" (in the next handler above).\n    // If `first` was provided, and it's a number, then use it.\n    // If `first` was provided and it's not a number, it's a Date, and we get the difference between it and \"now\".\n    // If `first` was not provided at all, then our first timer will be the value from `each`.\n    !seen && startTimer(first != null ? (typeof first === 'number' ? first : +first - scheduler!.now()) : each!);\n  });\n}\n\n/**\n * The default function to use to emit an error when timeout occurs and a `with` function\n * is not specified.\n * @param info The information about the timeout to pass along to the error\n */\nfunction timeoutErrorFactory(info: TimeoutInfo<any>): Observable<never> {\n  throw new TimeoutError(info);\n}\n", "import { OperatorFunction } from '../types';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\n\nexport function map<T, R>(project: (value: T, index: number) => R): OperatorFunction<T, R>;\n/** @deprecated Use a closure instead of a `thisArg`. Signatures accepting a `thisArg` will be removed in v8. */\nexport function map<T, R, A>(project: (this: A, value: T, index: number) => R, thisArg: A): OperatorFunction<T, R>;\n\n/**\n * Applies a given `project` function to each value emitted by the source\n * Observable, and emits the resulting values as an Observable.\n *\n * <span class=\"informal\">Like [Array.prototype.map()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map),\n * it passes each source value through a transformation function to get\n * corresponding output values.</span>\n *\n * ![](map.png)\n *\n * Similar to the well known `Array.prototype.map` function, this operator\n * applies a projection to each value and emits that projection in the output\n * Observable.\n *\n * ## Example\n *\n * Map every click to the `clientX` position of that click\n *\n * ```ts\n * import { fromEvent, map } from 'rxjs';\n *\n * const clicks = fromEvent<PointerEvent>(document, 'click');\n * const positions = clicks.pipe(map(ev => ev.clientX));\n *\n * positions.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link mapTo}\n * @see {@link pluck}\n *\n * @param {function(value: T, index: number): R} project The function to apply\n * to each `value` emitted by the source Observable. The `index` parameter is\n * the number `i` for the i-th emission that has happened since the\n * subscription, starting from the number `0`.\n * @param {any} [thisArg] An optional argument to define what `this` is in the\n * `project` function.\n * @return A function that returns an Observable that emits the values from the\n * source Observable transformed by the given `project` function.\n */\nexport function map<T, R>(project: (value: T, index: number) => R, thisArg?: any): OperatorFunction<T, R> {\n  return operate((source, subscriber) => {\n    // The index of the value from the source. Used with projection.\n    let index = 0;\n    // Subscribe to the source, all errors and completions are sent along\n    // to the consumer.\n    source.subscribe(\n      createOperatorSubscriber(subscriber, (value: T) => {\n        // Call the projection function with the appropriate this context,\n        // and send the resulting value to the consumer.\n        subscriber.next(project.call(thisArg, value, index++));\n      })\n    );\n  });\n}\n", "import { OperatorFunction } from \"../types\";\nimport { map } from \"../operators/map\";\n\nconst { isArray } = Array;\n\nfunction callOrApply<T, R>(fn: ((...values: T[]) => R), args: T|T[]): R {\n    return isArray(args) ? fn(...args) : fn(args);\n}\n\n/**\n * Used in several -- mostly deprecated -- situations where we need to \n * apply a list of arguments or a single argument to a result selector.\n */\nexport function mapOneOrManyArgs<T, R>(fn: ((...values: T[]) => R)): OperatorFunction<T|T[], R> {\n    return map(args => callOrApply(fn, args))\n}", "const { isArray } = Array;\nconst { getPrototypeOf, prototype: objectProto, keys: getKeys } = Object;\n\n/**\n * Used in functions where either a list of arguments, a single array of arguments, or a\n * dictionary of arguments can be returned. Returns an object with an `args` property with\n * the arguments in an array, if it is a dictionary, it will also return the `keys` in another\n * property.\n */\nexport function argsArgArrayOrObject<T, O extends Record<string, T>>(args: T[] | [O] | [T[]]): { args: T[]; keys: string[] | null } {\n  if (args.length === 1) {\n    const first = args[0];\n    if (isArray(first)) {\n      return { args: first, keys: null };\n    }\n    if (isPOJO(first)) {\n      const keys = getKeys(first);\n      return {\n        args: keys.map((key) => first[key]),\n        keys,\n      };\n    }\n  }\n\n  return { args: args as T[], keys: null };\n}\n\nfunction isPOJO(obj: any): obj is object {\n  return obj && typeof obj === 'object' && getPrototypeOf(obj) === objectProto;\n}\n", "import { Observable } from '../Observable';\nimport { SchedulerLike } from '../types';\nimport { async as asyncScheduler } from '../scheduler/async';\nimport { isScheduler } from '../util/isScheduler';\nimport { isValidDate } from '../util/isDate';\n\n/**\n * Creates an observable that will wait for a specified time period, or exact date, before\n * emitting the number 0.\n *\n * <span class=\"informal\">Used to emit a notification after a delay.</span>\n *\n * This observable is useful for creating delays in code, or racing against other values\n * for ad-hoc timeouts.\n *\n * The `delay` is specified by default in milliseconds, however providing a custom scheduler could\n * create a different behavior.\n *\n * ## Examples\n *\n * Wait 3 seconds and start another observable\n *\n * You might want to use `timer` to delay subscription to an\n * observable by a set amount of time. Here we use a timer with\n * {@link concatMapTo} or {@link concatMap} in order to wait\n * a few seconds and start a subscription to a source.\n *\n * ```ts\n * import { of, timer, concatMap } from 'rxjs';\n *\n * // This could be any observable\n * const source = of(1, 2, 3);\n *\n * timer(3000)\n *   .pipe(concatMap(() => source))\n *   .subscribe(console.log);\n * ```\n *\n * Take all values until the start of the next minute\n *\n * Using a `Date` as the trigger for the first emission, you can\n * do things like wait until midnight to fire an event, or in this case,\n * wait until a new minute starts (chosen so the example wouldn't take\n * too long to run) in order to stop watching a stream. Leveraging\n * {@link takeUntil}.\n *\n * ```ts\n * import { interval, takeUntil, timer } from 'rxjs';\n *\n * // Build a Date object that marks the\n * // next minute.\n * const currentDate = new Date();\n * const startOfNextMinute = new Date(\n *   currentDate.getFullYear(),\n *   currentDate.getMonth(),\n *   currentDate.getDate(),\n *   currentDate.getHours(),\n *   currentDate.getMinutes() + 1\n * );\n *\n * // This could be any observable stream\n * const source = interval(1000);\n *\n * const result = source.pipe(\n *   takeUntil(timer(startOfNextMinute))\n * );\n *\n * result.subscribe(console.log);\n * ```\n *\n * ### Known Limitations\n *\n * - The {@link asyncScheduler} uses `setTimeout` which has limitations for how far in the future it can be scheduled.\n *\n * - If a `scheduler` is provided that returns a timestamp other than an epoch from `now()`, and\n * a `Date` object is passed to the `dueTime` argument, the calculation for when the first emission\n * should occur will be incorrect. In this case, it would be best to do your own calculations\n * ahead of time, and pass a `number` in as the `dueTime`.\n *\n * @param due If a `number`, the amount of time in milliseconds to wait before emitting.\n * If a `Date`, the exact time at which to emit.\n * @param scheduler The scheduler to use to schedule the delay. Defaults to {@link asyncScheduler}.\n */\nexport function timer(due: number | Date, scheduler?: SchedulerLike): Observable<0>;\n\n/**\n * Creates an observable that starts an interval after a specified delay, emitting incrementing numbers -- starting at `0` --\n * on each interval after words.\n *\n * The `delay` and `intervalDuration` are specified by default in milliseconds, however providing a custom scheduler could\n * create a different behavior.\n *\n * ## Example\n *\n * ### Start an interval that starts right away\n *\n * Since {@link interval} waits for the passed delay before starting,\n * sometimes that's not ideal. You may want to start an interval immediately.\n * `timer` works well for this. Here we have both side-by-side so you can\n * see them in comparison.\n *\n * Note that this observable will never complete.\n *\n * ```ts\n * import { timer, interval } from 'rxjs';\n *\n * timer(0, 1000).subscribe(n => console.log('timer', n));\n * interval(1000).subscribe(n => console.log('interval', n));\n * ```\n *\n * ### Known Limitations\n *\n * - The {@link asyncScheduler} uses `setTimeout` which has limitations for how far in the future it can be scheduled.\n *\n * - If a `scheduler` is provided that returns a timestamp other than an epoch from `now()`, and\n * a `Date` object is passed to the `dueTime` argument, the calculation for when the first emission\n * should occur will be incorrect. In this case, it would be best to do your own calculations\n * ahead of time, and pass a `number` in as the `startDue`.\n * @param startDue If a `number`, is the time to wait before starting the interval.\n * If a `Date`, is the exact time at which to start the interval.\n * @param intervalDuration The delay between each value emitted in the interval. Passing a\n * negative number here will result in immediate completion after the first value is emitted, as though\n * no `intervalDuration` was passed at all.\n * @param scheduler The scheduler to use to schedule the delay. Defaults to {@link asyncScheduler}.\n */\nexport function timer(startDue: number | Date, intervalDuration: number, scheduler?: SchedulerLike): Observable<number>;\n\n/**\n * @deprecated The signature allowing `undefined` to be passed for `intervalDuration` will be removed in v8. Use the `timer(dueTime, scheduler?)` signature instead.\n */\nexport function timer(dueTime: number | Date, unused: undefined, scheduler?: SchedulerLike): Observable<0>;\n\nexport function timer(\n  dueTime: number | Date = 0,\n  intervalOrScheduler?: number | SchedulerLike,\n  scheduler: SchedulerLike = asyncScheduler\n): Observable<number> {\n  // Since negative intervalDuration is treated as though no\n  // interval was specified at all, we start with a negative number.\n  let intervalDuration = -1;\n\n  if (intervalOrScheduler != null) {\n    // If we have a second argument, and it's a scheduler,\n    // override the scheduler we had defaulted. Otherwise,\n    // it must be an interval.\n    if (isScheduler(intervalOrScheduler)) {\n      scheduler = intervalOrScheduler;\n    } else {\n      // Note that this *could* be negative, in which case\n      // it's like not passing an intervalDuration at all.\n      intervalDuration = intervalOrScheduler;\n    }\n  }\n\n  return new Observable((subscriber) => {\n    // If a valid date is passed, calculate how long to wait before\n    // executing the first value... otherwise, if it's a number just schedule\n    // that many milliseconds (or scheduler-specified unit size) in the future.\n    let due = isValidDate(dueTime) ? +dueTime - scheduler!.now() : dueTime;\n\n    if (due < 0) {\n      // Ensure we don't schedule in the future.\n      due = 0;\n    }\n\n    // The incrementing value we emit.\n    let n = 0;\n\n    // Start the timer.\n    return scheduler.schedule(function () {\n      if (!subscriber.closed) {\n        // Emit the next value and increment.\n        subscriber.next(n++);\n\n        if (0 <= intervalDuration) {\n          // If we have a interval after the initial timer,\n          // reschedule with the period.\n          this.schedule(undefined, intervalDuration);\n        } else {\n          // We didn't have an interval. So just complete.\n          subscriber.complete();\n        }\n      }\n    }, due);\n  });\n}\n", "import { Observable } from '../Observable';\nimport { noop } from '../util/noop';\n\n/**\n * An Observable that emits no items to the Observer and never completes.\n *\n * ![](never.png)\n *\n * A simple Observable that emits neither values nor errors nor the completion\n * notification. It can be used for testing purposes or for composing with other\n * Observables. Please note that by never emitting a complete notification, this\n * Observable keeps the subscription from being disposed automatically.\n * Subscriptions need to be manually disposed.\n *\n * ##  Example\n *\n * Emit the number 7, then never emit anything else (not even complete)\n *\n * ```ts\n * import { NEVER, startWith } from 'rxjs';\n *\n * const info = () => console.log('Will not be called');\n *\n * const result = NEVER.pipe(startWith(7));\n * result.subscribe({\n *   next: x => console.log(x),\n *   error: info,\n *   complete: info\n * });\n * ```\n *\n * @see {@link Observable}\n * @see {@link EMPTY}\n * @see {@link of}\n * @see {@link throwError}\n */\nexport const NEVER = new Observable<never>(noop);\n\n/**\n * @deprecated Replaced with the {@link NEVER} constant. Will be removed in v8.\n */\nexport function never() {\n  return NEVER;\n}\n", "const { isArray } = Array;\n\n/**\n * Used in operators and functions that accept either a list of arguments, or an array of arguments\n * as a single argument.\n */\nexport function argsOrArgArray<T>(args: (T | T[])[]): T[] {\n  return args.length === 1 && isArray(args[0]) ? args[0] : (args as T[]);\n}\n", "import { OperatorFunction, MonoTypeOperatorFunction, TruthyTypesOf } from '../types';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\n\n/** @deprecated Use a closure instead of a `thisArg`. Signatures accepting a `thisArg` will be removed in v8. */\nexport function filter<T, S extends T, A>(predicate: (this: A, value: T, index: number) => value is S, thisArg: A): OperatorFunction<T, S>;\nexport function filter<T, S extends T>(predicate: (value: T, index: number) => value is S): OperatorFunction<T, S>;\nexport function filter<T>(predicate: BooleanConstructor): OperatorFunction<T, TruthyTypesOf<T>>;\n/** @deprecated Use a closure instead of a `thisArg`. Signatures accepting a `thisArg` will be removed in v8. */\nexport function filter<T, A>(predicate: (this: A, value: T, index: number) => boolean, thisArg: A): MonoTypeOperatorFunction<T>;\nexport function filter<T>(predicate: (value: T, index: number) => boolean): MonoTypeOperatorFunction<T>;\n\n/**\n * Filter items emitted by the source Observable by only emitting those that\n * satisfy a specified predicate.\n *\n * <span class=\"informal\">Like\n * [Array.prototype.filter()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter),\n * it only emits a value from the source if it passes a criterion function.</span>\n *\n * ![](filter.png)\n *\n * Similar to the well-known `Array.prototype.filter` method, this operator\n * takes values from the source Observable, passes them through a `predicate`\n * function and only emits those values that yielded `true`.\n *\n * ## Example\n *\n * Emit only click events whose target was a DIV element\n *\n * ```ts\n * import { fromEvent, filter } from 'rxjs';\n *\n * const div = document.createElement('div');\n * div.style.cssText = 'width: 200px; height: 200px; background: #09c;';\n * document.body.appendChild(div);\n *\n * const clicks = fromEvent(document, 'click');\n * const clicksOnDivs = clicks.pipe(filter(ev => (<HTMLElement>ev.target).tagName === 'DIV'));\n * clicksOnDivs.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link distinct}\n * @see {@link distinctUntilChanged}\n * @see {@link distinctUntilKeyChanged}\n * @see {@link ignoreElements}\n * @see {@link partition}\n * @see {@link skip}\n *\n * @param predicate A function that\n * evaluates each value emitted by the source Observable. If it returns `true`,\n * the value is emitted, if `false` the value is not passed to the output\n * Observable. The `index` parameter is the number `i` for the i-th source\n * emission that has happened since the subscription, starting from the number\n * `0`.\n * @param thisArg An optional argument to determine the value of `this`\n * in the `predicate` function.\n * @return A function that returns an Observable that emits items from the\n * source Observable that satisfy the specified `predicate`.\n */\nexport function filter<T>(predicate: (value: T, index: number) => boolean, thisArg?: any): MonoTypeOperatorFunction<T> {\n  return operate((source, subscriber) => {\n    // An index passed to our predicate function on each call.\n    let index = 0;\n\n    // Subscribe to the source, all errors and completions are\n    // forwarded to the consumer.\n    source.subscribe(\n      // Call the predicate with the appropriate `this` context,\n      // if the predicate returns `true`, then send the value\n      // to the consumer.\n      createOperatorSubscriber(subscriber, (value) => predicate.call(thisArg, value, index++) && subscriber.next(value))\n    );\n  });\n}\n", "import { MonoTypeOperatorFunction } from '../types';\nimport { EMPTY } from '../observable/empty';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\n\n/**\n * Emits only the first `count` values emitted by the source Observable.\n *\n * <span class=\"informal\">Takes the first `count` values from the source, then\n * completes.</span>\n *\n * ![](take.png)\n *\n * `take` returns an Observable that emits only the first `count` values emitted\n * by the source Observable. If the source emits fewer than `count` values then\n * all of its values are emitted. After that, it completes, regardless if the\n * source completes.\n *\n * ## Example\n *\n * Take the first 5 seconds of an infinite 1-second interval Observable\n *\n * ```ts\n * import { interval, take } from 'rxjs';\n *\n * const intervalCount = interval(1000);\n * const takeFive = intervalCount.pipe(take(5));\n * takeFive.subscribe(x => console.log(x));\n *\n * // Logs:\n * // 0\n * // 1\n * // 2\n * // 3\n * // 4\n * ```\n *\n * @see {@link takeLast}\n * @see {@link takeUntil}\n * @see {@link takeWhile}\n * @see {@link skip}\n *\n * @param count The maximum number of `next` values to emit.\n * @return A function that returns an Observable that emits only the first\n * `count` values emitted by the source Observable, or all of the values from\n * the source if the source emits fewer than `count` values.\n */\nexport function take<T>(count: number): MonoTypeOperatorFunction<T> {\n  return count <= 0\n    ? // If we are taking no values, that's empty.\n      () => EMPTY\n    : operate((source, subscriber) => {\n        let seen = 0;\n        source.subscribe(\n          createOperatorSubscriber(subscriber, (value) => {\n            // Increment the number of values we have seen,\n            // then check it against the allowed count to see\n            // if we are still letting values through.\n            if (++seen <= count) {\n              subscriber.next(value);\n              // If we have met or passed our allowed count,\n              // we need to complete. We have to do <= here,\n              // because re-entrant code will increment `seen` twice.\n              if (count <= seen) {\n                subscriber.complete();\n              }\n            }\n          })\n        );\n      });\n}\n", "import { MonoTypeOperatorFunction } from '../types';\nimport { identity } from '../util/identity';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\n\nexport function distinctUntilChanged<T>(comparator?: (previous: T, current: T) => boolean): MonoTypeOperatorFunction<T>;\nexport function distinctUntilChanged<T, K>(\n  comparator: (previous: K, current: K) => boolean,\n  keySelector: (value: T) => K\n): MonoTypeOperatorFunction<T>;\n\n/**\n * Returns a result {@link Observable} that emits all values pushed by the source observable if they\n * are distinct in comparison to the last value the result observable emitted.\n *\n * When provided without parameters or with the first parameter (`{@link distinctUntilChanged#comparator comparator}`),\n * it behaves like this:\n *\n * 1. It will always emit the first value from the source.\n * 2. For all subsequent values pushed by the source, they will be compared to the previously emitted values\n *    using the provided `comparator` or an `===` equality check.\n * 3. If the value pushed by the source is determined to be unequal by this check, that value is emitted and\n *    becomes the new \"previously emitted value\" internally.\n *\n * When the second parameter (`{@link distinctUntilChanged#keySelector keySelector}`) is provided, the behavior\n * changes:\n *\n * 1. It will always emit the first value from the source.\n * 2. The `keySelector` will be run against all values, including the first value.\n * 3. For all values after the first, the selected key will be compared against the key selected from\n *    the previously emitted value using the `comparator`.\n * 4. If the keys are determined to be unequal by this check, the value (not the key), is emitted\n *    and the selected key from that value is saved for future comparisons against other keys.\n *\n * ## Examples\n *\n * A very basic example with no `{@link distinctUntilChanged#comparator comparator}`. Note that `1` is emitted more than once,\n * because it's distinct in comparison to the _previously emitted_ value,\n * not in comparison to _all other emitted values_.\n *\n * ```ts\n * import { of, distinctUntilChanged } from 'rxjs';\n *\n * of(1, 1, 1, 2, 2, 2, 1, 1, 3, 3)\n *   .pipe(distinctUntilChanged())\n *   .subscribe(console.log);\n * // Logs: 1, 2, 1, 3\n * ```\n *\n * With a `{@link distinctUntilChanged#comparator comparator}`, you can do custom comparisons. Let's say\n * you only want to emit a value when all of its components have\n * changed:\n *\n * ```ts\n * import { of, distinctUntilChanged } from 'rxjs';\n *\n * const totallyDifferentBuilds$ = of(\n *   { engineVersion: '1.1.0', transmissionVersion: '1.2.0' },\n *   { engineVersion: '1.1.0', transmissionVersion: '1.4.0' },\n *   { engineVersion: '1.3.0', transmissionVersion: '1.4.0' },\n *   { engineVersion: '1.3.0', transmissionVersion: '1.5.0' },\n *   { engineVersion: '2.0.0', transmissionVersion: '1.5.0' }\n * ).pipe(\n *   distinctUntilChanged((prev, curr) => {\n *     return (\n *       prev.engineVersion === curr.engineVersion ||\n *       prev.transmissionVersion === curr.transmissionVersion\n *     );\n *   })\n * );\n *\n * totallyDifferentBuilds$.subscribe(console.log);\n *\n * // Logs:\n * // { engineVersion: '1.1.0', transmissionVersion: '1.2.0' }\n * // { engineVersion: '1.3.0', transmissionVersion: '1.4.0' }\n * // { engineVersion: '2.0.0', transmissionVersion: '1.5.0' }\n * ```\n *\n * You can also provide a custom `{@link distinctUntilChanged#comparator comparator}` to check that emitted\n * changes are only in one direction. Let's say you only want to get\n * the next record temperature:\n *\n * ```ts\n * import { of, distinctUntilChanged } from 'rxjs';\n *\n * const temps$ = of(30, 31, 20, 34, 33, 29, 35, 20);\n *\n * const recordHighs$ = temps$.pipe(\n *   distinctUntilChanged((prevHigh, temp) => {\n *     // If the current temp is less than\n *     // or the same as the previous record,\n *     // the record hasn't changed.\n *     return temp <= prevHigh;\n *   })\n * );\n *\n * recordHighs$.subscribe(console.log);\n * // Logs: 30, 31, 34, 35\n * ```\n *\n * Selecting update events only when the `updatedBy` field shows\n * the account changed hands.\n *\n * ```ts\n * import { of, distinctUntilChanged } from 'rxjs';\n *\n * // A stream of updates to a given account\n * const accountUpdates$ = of(\n *   { updatedBy: 'blesh', data: [] },\n *   { updatedBy: 'blesh', data: [] },\n *   { updatedBy: 'ncjamieson', data: [] },\n *   { updatedBy: 'ncjamieson', data: [] },\n *   { updatedBy: 'blesh', data: [] }\n * );\n *\n * // We only want the events where it changed hands\n * const changedHands$ = accountUpdates$.pipe(\n *   distinctUntilChanged(undefined, update => update.updatedBy)\n * );\n *\n * changedHands$.subscribe(console.log);\n * // Logs:\n * // { updatedBy: 'blesh', data: Array[0] }\n * // { updatedBy: 'ncjamieson', data: Array[0] }\n * // { updatedBy: 'blesh', data: Array[0] }\n * ```\n *\n * @see {@link distinct}\n * @see {@link distinctUntilKeyChanged}\n *\n * @param comparator A function used to compare the previous and current keys for\n * equality. Defaults to a `===` check.\n * @param keySelector Used to select a key value to be passed to the `comparator`.\n *\n * @return A function that returns an Observable that emits items from the\n * source Observable with distinct values.\n */\nexport function distinctUntilChanged<T, K>(\n  comparator?: (previous: K, current: K) => boolean,\n  keySelector: (value: T) => K = identity as (value: T) => K\n): MonoTypeOperatorFunction<T> {\n  // We've been allowing `null` do be passed as the `compare`, so we can't do\n  // a default value for the parameter, because that will only work\n  // for `undefined`.\n  comparator = comparator ?? defaultCompare;\n\n  return operate((source, subscriber) => {\n    // The previous key, used to compare against keys selected\n    // from new arrivals to determine \"distinctiveness\".\n    let previousKey: K;\n    // Whether or not this is the first value we've gotten.\n    let first = true;\n\n    source.subscribe(\n      createOperatorSubscriber(subscriber, (value) => {\n        // We always call the key selector.\n        const currentKey = keySelector(value);\n\n        // If it's the first value, we always emit it.\n        // Otherwise, we compare this key to the previous key, and\n        // if the comparer returns false, we emit.\n        if (first || !comparator!(previousKey, currentKey)) {\n          // Update our state *before* we emit the value\n          // as emission can be the source of re-entrant code\n          // in functional libraries like this. We only really\n          // need to do this if it's the first value, or if the\n          // key we're tracking in previous needs to change.\n          first = false;\n          previousKey = currentKey;\n\n          // Emit the value!\n          subscriber.next(value);\n        }\n      })\n    );\n  });\n}\n\nfunction defaultCompare(a: any, b: any) {\n  return a === b;\n}\n", "import { Subscriber } from '../Subscriber';\nimport { ObservableInput, OperatorFunction, ObservedValueOf } from '../types';\nimport { innerFrom } from '../observable/innerFrom';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\n\n/* tslint:disable:max-line-length */\nexport function switchMap<T, O extends ObservableInput<any>>(\n  project: (value: T, index: number) => O\n): OperatorFunction<T, ObservedValueOf<O>>;\n/** @deprecated The `resultSelector` parameter will be removed in v8. Use an inner `map` instead. Details: https://rxjs.dev/deprecations/resultSelector */\nexport function switchMap<T, O extends ObservableInput<any>>(\n  project: (value: T, index: number) => O,\n  resultSelector: undefined\n): OperatorFunction<T, ObservedValueOf<O>>;\n/** @deprecated The `resultSelector` parameter will be removed in v8. Use an inner `map` instead. Details: https://rxjs.dev/deprecations/resultSelector */\nexport function switchMap<T, R, O extends ObservableInput<any>>(\n  project: (value: T, index: number) => O,\n  resultSelector: (outerValue: T, innerValue: ObservedValueOf<O>, outerIndex: number, innerIndex: number) => R\n): OperatorFunction<T, R>;\n/* tslint:enable:max-line-length */\n\n/**\n * Projects each source value to an Observable which is merged in the output\n * Observable, emitting values only from the most recently projected Observable.\n *\n * <span class=\"informal\">Maps each value to an Observable, then flattens all of\n * these inner Observables using {@link switchAll}.</span>\n *\n * ![](switchMap.png)\n *\n * Returns an Observable that emits items based on applying a function that you\n * supply to each item emitted by the source Observable, where that function\n * returns an (so-called \"inner\") Observable. Each time it observes one of these\n * inner Observables, the output Observable begins emitting the items emitted by\n * that inner Observable. When a new inner Observable is emitted, `switchMap`\n * stops emitting items from the earlier-emitted inner Observable and begins\n * emitting items from the new one. It continues to behave like this for\n * subsequent inner Observables.\n *\n * ## Example\n *\n * Generate new Observable according to source Observable values\n *\n * ```ts\n * import { of, switchMap } from 'rxjs';\n *\n * const switched = of(1, 2, 3).pipe(switchMap(x => of(x, x ** 2, x ** 3)));\n * switched.subscribe(x => console.log(x));\n * // outputs\n * // 1\n * // 1\n * // 1\n * // 2\n * // 4\n * // 8\n * // 3\n * // 9\n * // 27\n * ```\n *\n * Restart an interval Observable on every click event\n *\n * ```ts\n * import { fromEvent, switchMap, interval } from 'rxjs';\n *\n * const clicks = fromEvent(document, 'click');\n * const result = clicks.pipe(switchMap(() => interval(1000)));\n * result.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link concatMap}\n * @see {@link exhaustMap}\n * @see {@link mergeMap}\n * @see {@link switchAll}\n * @see {@link switchMapTo}\n *\n * @param {function(value: T, index: number): ObservableInput} project A function\n * that, when applied to an item emitted by the source Observable, returns an\n * Observable.\n * @return A function that returns an Observable that emits the result of\n * applying the projection function (and the optional deprecated\n * `resultSelector`) to each item emitted by the source Observable and taking\n * only the values from the most recently projected inner Observable.\n */\nexport function switchMap<T, R, O extends ObservableInput<any>>(\n  project: (value: T, index: number) => O,\n  resultSelector?: (outerValue: T, innerValue: ObservedValueOf<O>, outerIndex: number, innerIndex: number) => R\n): OperatorFunction<T, ObservedValueOf<O> | R> {\n  return operate((source, subscriber) => {\n    let innerSubscriber: Subscriber<ObservedValueOf<O>> | null = null;\n    let index = 0;\n    // Whether or not the source subscription has completed\n    let isComplete = false;\n\n    // We only complete the result if the source is complete AND we don't have an active inner subscription.\n    // This is called both when the source completes and when the inners complete.\n    const checkComplete = () => isComplete && !innerSubscriber && subscriber.complete();\n\n    source.subscribe(\n      createOperatorSubscriber(\n        subscriber,\n        (value) => {\n          // Cancel the previous inner subscription if there was one\n          innerSubscriber?.unsubscribe();\n          let innerIndex = 0;\n          const outerIndex = index++;\n          // Start the next inner subscription\n          innerFrom(project(value, outerIndex)).subscribe(\n            (innerSubscriber = createOperatorSubscriber(\n              subscriber,\n              // When we get a new inner value, next it through. Note that this is\n              // handling the deprecate result selector here. This is because with this architecture\n              // it ends up being smaller than using the map operator.\n              (innerValue) => subscriber.next(resultSelector ? resultSelector(value, innerValue, outerIndex, innerIndex++) : innerValue),\n              () => {\n                // The inner has completed. Null out the inner subscriber to\n                // free up memory and to signal that we have no inner subscription\n                // currently.\n                innerSubscriber = null!;\n                checkComplete();\n              }\n            ))\n          );\n        },\n        () => {\n          isComplete = true;\n          checkComplete();\n        }\n      )\n    );\n  });\n}\n", "import { MonoTypeOperatorFunction, ObservableInput } from '../types';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nimport { innerFrom } from '../observable/innerFrom';\nimport { noop } from '../util/noop';\n\n/**\n * Emits the values emitted by the source Observable until a `notifier`\n * Observable emits a value.\n *\n * <span class=\"informal\">Lets values pass until a second Observable,\n * `notifier`, emits a value. Then, it completes.</span>\n *\n * ![](takeUntil.png)\n *\n * `takeUntil` subscribes and begins mirroring the source Observable. It also\n * monitors a second Observable, `notifier` that you provide. If the `notifier`\n * emits a value, the output Observable stops mirroring the source Observable\n * and completes. If the `notifier` doesn't emit any value and completes\n * then `takeUntil` will pass all values.\n *\n * ## Example\n *\n * Tick every second until the first click happens\n *\n * ```ts\n * import { interval, fromEvent, takeUntil } from 'rxjs';\n *\n * const source = interval(1000);\n * const clicks = fromEvent(document, 'click');\n * const result = source.pipe(takeUntil(clicks));\n * result.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link take}\n * @see {@link takeLast}\n * @see {@link takeWhile}\n * @see {@link skip}\n *\n * @param {Observable} notifier The Observable whose first emitted value will\n * cause the output Observable of `takeUntil` to stop emitting values from the\n * source Observable.\n * @return A function that returns an Observable that emits the values from the\n * source Observable until `notifier` emits its first value.\n */\nexport function takeUntil<T>(notifier: ObservableInput<any>): MonoTypeOperatorFunction<T> {\n  return operate((source, subscriber) => {\n    innerFrom(notifier).subscribe(createOperatorSubscriber(subscriber, () => subscriber.complete(), noop));\n    !subscriber.closed && source.subscribe(subscriber);\n  });\n}\n", "import { BehaviorSubject, isObservable, firstValueFrom, Subject, Observable, pipe, asapScheduler } from 'rxjs';\nimport { filter, take, map, distinctUntilChanged, debounceTime } from 'rxjs/operators';\n\nfunction createState(...propsFactories) {\n  const result = {\n    config: {},\n    state: {}\n  };\n  for (const {\n    config,\n    props\n  } of propsFactories) {\n    Object.assign(result.config, config);\n    Object.assign(result.state, props);\n  }\n  return result;\n}\n\nlet asyncBatchesInProgress = 0;\nconst batchInProgress = new BehaviorSubject(false);\nconst batchDone$ = batchInProgress.asObservable().pipe(filter(inProgress => !inProgress), take(1));\nfunction emitOnce(cb) {\n  if (!batchInProgress.getValue()) {\n    batchInProgress.next(true);\n    const value = cb();\n    if (asyncBatchesInProgress === 0) {\n      batchInProgress.next(false);\n    }\n    return value;\n  }\n  return cb();\n}\nasync function emitOnceAsync(cb) {\n  asyncBatchesInProgress++;\n  if (!batchInProgress.getValue()) {\n    batchInProgress.next(true);\n  }\n  const callbackReturnValue = cb();\n  const value = await (isObservable(callbackReturnValue) ? firstValueFrom(callbackReturnValue) : callbackReturnValue);\n  if (--asyncBatchesInProgress === 0) {\n    batchInProgress.next(false);\n  }\n  return value;\n}\n\n// this is internal object that's not exported to public API\nconst elfHooksRegistry = {};\nclass ElfHooks {\n  registerPreStoreUpdate(fn) {\n    elfHooksRegistry.preStoreUpdate = fn;\n  }\n  registerPreStateInit(fn) {\n    elfHooksRegistry.preStateInit = fn;\n  }\n}\nconst elfHooks = new ElfHooks();\n\nconst registry = new Map();\nconst registryActions = new Subject();\nconst registry$ = registryActions.asObservable();\n\n// @internal\nfunction addStore(store) {\n  registry.set(store.name, store);\n  registryActions.next({\n    type: 'add',\n    store\n  });\n}\n\n// @internal\nfunction removeStore(store) {\n  registry.delete(store.name);\n  registryActions.next({\n    type: 'remove',\n    store\n  });\n}\nfunction getStore(name) {\n  return registry.get(name);\n}\nfunction getRegistry() {\n  return registry;\n}\nfunction getStoresSnapshot() {\n  const stores = {};\n  registry.forEach((store, key) => {\n    stores[key] = store.getValue();\n  });\n  return stores;\n}\n\nlet events = [];\n\n/**\n *\n * @private function don't use\n *\n */\nfunction _setEvent(e) {\n  events.push(e);\n}\nfunction emitEvents(source) {\n  if (events.length) {\n    events.forEach(e => source.next(e));\n  }\n  events = [];\n}\n\nclass Store extends BehaviorSubject {\n  constructor(storeDef) {\n    super(storeDef.state);\n    this.storeDef = storeDef;\n    this.initialState = void 0;\n    this.state = void 0;\n    this.batchInProgress = false;\n    this.events = new Subject();\n    this.context = {\n      config: this.getConfig(),\n      setEvent: action => {\n        _setEvent(action);\n      }\n    };\n    this.events$ = this.events.asObservable();\n    this.state = this.getInitialState(storeDef.state);\n    this.initialState = this.getValue();\n    addStore(this);\n  }\n  get name() {\n    return this.storeDef.name;\n  }\n  getInitialState(state) {\n    if (elfHooksRegistry.preStateInit) {\n      return elfHooksRegistry.preStateInit(state, this.name);\n    }\n    return state;\n  }\n  getConfig() {\n    return this.storeDef.config;\n  }\n  query(selector) {\n    return selector(this.getValue());\n  }\n  update(...reducers) {\n    const currentState = this.getValue();\n    let nextState = reducers.reduce((value, reducer) => {\n      value = reducer(value, this.context);\n      return value;\n    }, currentState);\n    if (elfHooksRegistry.preStoreUpdate) {\n      nextState = elfHooksRegistry.preStoreUpdate(currentState, nextState, this.name);\n    }\n    if (nextState !== currentState) {\n      this.state = nextState;\n      if (batchInProgress.getValue()) {\n        if (!this.batchInProgress) {\n          this.batchInProgress = true;\n          batchDone$.subscribe(() => {\n            super.next(this.state);\n            emitEvents(this.events);\n            this.batchInProgress = false;\n          });\n        }\n      } else {\n        super.next(this.state);\n        emitEvents(this.events);\n      }\n    }\n  }\n  getValue() {\n    return this.state;\n  }\n  reset() {\n    this.update(() => this.initialState);\n  }\n  combine(observables) {\n    let hasChange = true;\n    const buffer = {};\n    return new Observable(observer => {\n      for (const [key, query] of Object.entries(observables)) {\n        observer.add(query.subscribe(value => {\n          buffer[key] = value;\n          hasChange = true;\n        }));\n      }\n      return this.subscribe({\n        next() {\n          if (hasChange) {\n            observer.next({\n              ...buffer\n            });\n            hasChange = false;\n          }\n        },\n        error(e) {\n          observer.error(e);\n        },\n        complete() {\n          observer.complete();\n        }\n      });\n    });\n  }\n  destroy() {\n    removeStore(this);\n    this.reset();\n  }\n  next(value) {\n    this.update(() => value);\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  error() {}\n\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  complete() {}\n}\n\nfunction createStore(storeConfig, ...propsFactories) {\n  const {\n    state,\n    config\n  } = createState(...propsFactories);\n  const {\n    name\n  } = storeConfig;\n  return new Store({\n    name,\n    state,\n    config\n  });\n}\n\nfunction coerceArray(value) {\n  return Array.isArray(value) ? value : [value];\n}\nfunction isFunction(value) {\n  return typeof value === 'function';\n}\nfunction isUndefined(value) {\n  return value === undefined;\n}\nfunction isString(value) {\n  return typeof value === 'string';\n}\nfunction capitalize(key) {\n  return key.charAt(0).toUpperCase() + key.slice(1);\n}\nfunction isObject(item) {\n  return typeof item === 'object' && !Array.isArray(item) && item !== null;\n}\nfunction deepFreeze(o) {\n  Object.freeze(o);\n  const oIsFunction = typeof o === 'function';\n  const hasOwnProp = Object.prototype.hasOwnProperty;\n  Object.getOwnPropertyNames(o).forEach(function (prop) {\n    if (hasOwnProp.call(o, prop) && (oIsFunction ? prop !== 'caller' && prop !== 'callee' && prop !== 'arguments' : true) && o[prop] !== null && (typeof o[prop] === 'object' || typeof o[prop] === 'function') && !Object.isFrozen(o[prop])) {\n      deepFreeze(o[prop]);\n    }\n  });\n  return o;\n}\n\n/**\n *\n * Update a root property of the state\n *\n * @example\n *\n * store.update(setProp('foo', 'bar'))\n *\n * @example\n *\n * store.update(setProp('count', count => count + 1))\n *\n */\nfunction setProp(key, value) {\n  return function (state) {\n    return {\n      ...state,\n      [key]: isFunction(value) ? value(state[key]) : value\n    };\n  };\n}\n\n/**\n *\n * Update a root property of the state\n *\n * @example\n *\n * store.update(setProps({ count: 1, bar: 'baz'}))\n *\n * @example\n *\n * store.update(setProps(state => ({\n *   count: 1,\n *   nested: {\n *     ...state.nested,\n *     foo: 'bar'\n *   }\n * })))\n *\n */\nfunction setProps(props) {\n  return function (state) {\n    return {\n      ...state,\n      ...(isFunction(props) ? props(state) : props)\n    };\n  };\n}\n\nfunction select(mapFn) {\n  return pipe(map(mapFn), distinctUntilChanged());\n}\nfunction head() {\n  return map(arr => arr[0]);\n}\nfunction distinctUntilArrayItemChanged() {\n  return distinctUntilChanged((prevCollection, currentCollection) => {\n    if (prevCollection === currentCollection) {\n      return true;\n    }\n    if (prevCollection.length !== currentCollection.length) {\n      return false;\n    }\n    const isOneOfItemReferenceChanged = currentCollection.some((item, i) => {\n      return prevCollection[i] !== item;\n    });\n\n    // return false means there is a change and we want to call next()\n    return !isOneOfItemReferenceChanged;\n  });\n}\nconst asap = () => debounceTime(0, asapScheduler);\nfunction filterNil() {\n  return filter(value => value !== null && value !== undefined);\n}\n\nfunction propsFactory(key, {\n  initialValue: propsFactoryInitialValue,\n  config\n}) {\n  let initialValue = propsFactoryInitialValue;\n  const normalizedKey = capitalize(key);\n  return {\n    [`with${normalizedKey}`](value = initialValue) {\n      return {\n        props: {\n          [key]: value\n        },\n        config\n      };\n    },\n    [`set${normalizedKey}InitialValue`](value) {\n      initialValue = value;\n    },\n    [`set${normalizedKey}`](value) {\n      return function (state) {\n        const newVal = isFunction(value) ? value(state) : value;\n        if (newVal === state[key]) {\n          return state;\n        }\n        return {\n          ...state,\n          [key]: newVal\n        };\n      };\n    },\n    [`update${normalizedKey}`](value) {\n      return function (state) {\n        const newVal = isFunction(value) ? value(state) : value;\n        if (newVal === state[key]) {\n          return state;\n        }\n        return {\n          ...state,\n          [key]: isObject(newVal) ? {\n            ...state[key],\n            ...newVal\n          } : newVal\n        };\n      };\n    },\n    [`reset${normalizedKey}`]() {\n      return function (state) {\n        return {\n          ...state,\n          [key]: initialValue\n        };\n      };\n    },\n    [`select${normalizedKey}`]() {\n      return select(state => state[key]);\n    },\n    [`get${normalizedKey}`](state) {\n      return state[key];\n    }\n  };\n}\n\nfunction propsArrayFactory(key, options) {\n  const normalizedKey = capitalize(key);\n  const base = propsFactory(key, options);\n  return {\n    ...base,\n    [`add${normalizedKey}`](items) {\n      return function (state) {\n        return {\n          ...state,\n          [key]: arrayAdd(state[key], items)\n        };\n      };\n    },\n    [`remove${normalizedKey}`](items) {\n      return function (state) {\n        return {\n          ...state,\n          [key]: arrayRemove(state[key], items)\n        };\n      };\n    },\n    [`toggle${normalizedKey}`](items) {\n      return function (state) {\n        return {\n          ...state,\n          [key]: arrayToggle(state[key], items)\n        };\n      };\n    },\n    [`update${normalizedKey}`](predicateOrIds, obj) {\n      return function (state) {\n        return {\n          ...state,\n          [key]: arrayUpdate(state[key], predicateOrIds, obj)\n        };\n      };\n    },\n    [`in${normalizedKey}`](item) {\n      return state => inArray(state[key], item);\n    }\n  };\n}\nfunction arrayAdd(arr, items) {\n  return [...arr, ...coerceArray(items)];\n}\nfunction arrayRemove(arr, items) {\n  const toArray = coerceArray(items);\n  return arr.filter(current => !toArray.includes(current));\n}\nfunction arrayToggle(arr, items) {\n  const toArray = coerceArray(items);\n  const result = [...arr];\n  toArray.forEach(item => {\n    const i = result.indexOf(item);\n    i > -1 ? result.splice(i, 1) : result.push(item);\n  });\n  return result;\n}\nfunction inArray(arr, item) {\n  return arr.includes(item);\n}\nfunction arrayUpdate(arr, item, newItem) {\n  return arr.map(current => {\n    return current === item ? newItem : current;\n  });\n}\n\nfunction withProps(props) {\n  return {\n    props,\n    config: undefined\n  };\n}\n\nlet __DEV__ = true;\nfunction enableElfProdMode() {\n  __DEV__ = false;\n}\n\n// @internal\nfunction isDev() {\n  return __DEV__;\n}\n\nexport { Store, _setEvent, asap, capitalize, coerceArray, createState, createStore, deepFreeze, distinctUntilArrayItemChanged, elfHooks, emitOnce, emitOnceAsync, enableElfProdMode, filterNil, getRegistry, getStore, getStoresSnapshot, head, isDev, isFunction, isObject, isString, isUndefined, propsArrayFactory, propsFactory, registry$, select, setProp, setProps, withProps };\n", "export interface IModalTheme {\n  bgColor: string;\n  textColor: string;\n  solidTextColor: string;\n  headerButtonColor: string;\n  dividerColor: string;\n  helpBgColor: string;\n  notAvailableTextColor: string;\n  notAvailableBgColor: string;\n  notAvailableBorderColor: string;\n}\n\n/**\n * @deprecated - This type is deprecated, use `IModalTheme` instead\n */\nexport type ITheme = IModalTheme;\n\nexport interface IButtonTheme {\n  bgColor: string;\n  textColor: string;\n  solidTextColor: string;\n  dividerColor: string;\n  buttonPadding: string;\n  buttonBorderRadius: string;\n}\n\nexport enum WalletNetwork {\n  PUBLIC = 'Public Global Stellar Network ; September 2015',\n  TESTNET = 'Test SDF Network ; September 2015',\n  FUTURENET = 'Test SDF Future Network ; October 2022',\n  SANDBOX = 'Local Sandbox Stellar Network ; September 2022',\n  STANDALONE = 'Standalone Network ; February 2017',\n}\n\nexport enum ModuleType {\n  HW_WALLET = 'HW_WALLET',\n  HOT_WALLET = 'HOT_WALLET',\n  BRIDGE_WALLET = 'BRIDGE_WALLET',\n  AIR_GAPED_WALLET = 'AIR_GAPED_WALLET',\n}\n\nexport interface ISupportedWallet {\n  id: string;\n  name: string;\n  type: string;\n  isAvailable: boolean;\n  icon: string;\n  url: string;\n}\n\n/**\n * The Kit Actions are the methods the kit use to interact with the Wallet/Service\n */\nexport interface KitActions {\n  /**\n   * Function used to request the public key from the active account or\n   * specific path on a wallet.\n   *\n   * @param params\n   * @param params.path - The path to tell the wallet which position to ask. This is commonly used in hardware wallets.\n   *\n   * @return Promise<{ address: string }>\n   */\n  getAddress(params?: { path?: string }): Promise<{ address: string }>;\n\n  /**\n   * A function to request a wallet to sign a built transaction in its XDR mode\n   *\n   * @param xdr - A Transaction or a FeeBumpTransaction\n   * @param opts - Options compatible with https://github.com/stellar/stellar-protocol/blob/master/ecosystem/sep-0043.md#signtransaction\n   * @param opts.networkPassphrase - The Stellar network to use when signing\n   * @param opts.address - The public key of the account that should be used to sign\n   * @param opts.path - This options is added for special cases like Hardware wallets\n   *\n   * @return Promise<{ signedTxXdr: string; signerAddress: string }>\n   */\n  signTransaction(\n    xdr: string,\n    opts?: {\n      networkPassphrase?: string;\n      address?: string;\n      path?: string;\n      submit?: boolean;\n      submitUrl?: string;\n    }\n  ): Promise<{ signedTxXdr: string; signerAddress?: string }>;\n\n  /**\n   * A function to request a wallet to sign an AuthEntry XDR.\n   *\n   * @param authEntry - An XDR string version of `HashIdPreimageSorobanAuthorization`\n   * @param opts - Options compatible with https://github.com/stellar/stellar-protocol/blob/master/ecosystem/sep-0043.md#signauthentry\n   * @param opts.networkPassphrase - The Stellar network to use when signing\n   * @param opts.address - The public key of the account that should be used to sign\n   * @param opts.path - This options is added for special cases like Hardware wallets\n   *\n   * @return - Promise<{ signedAuthEntry: string; signerAddress: string }>\n   */\n  signAuthEntry(\n    authEntry: string,\n    opts?: {\n      networkPassphrase?: string;\n      address?: string;\n      path?: string;\n    }\n  ): Promise<{ signedAuthEntry: string; signerAddress?: string }>;\n\n  /**\n   * A function to request a wallet to sign an AuthEntry XDR.\n   *\n   * @param message - An arbitrary string rather than a transaction or auth entry\n   * @param opts - Options compatible with https://github.com/stellar/stellar-protocol/blob/master/ecosystem/sep-0043.md#signmessage\n   * @param opts.networkPassphrase - The Stellar network to use when signing\n   * @param opts.address - The public key of the account that should be used to sign\n   * @param opts.path - This options is added for special cases like Hardware wallets\n   *\n   * @return - Promise<{ signedMessage: string; signerAddress: string }>\n   */\n  signMessage(\n    message: string,\n    opts?: {\n      networkPassphrase?: string;\n      address?: string;\n      path?: string;\n    }\n  ): Promise<{ signedMessage: string; signerAddress?: string }>;\n\n  /**\n   * A function to request the current selected network in the wallet. This comes\n   * handy when you are dealing with a wallet that doesn't allow you to specify which network to use (For example Lobstr and Rabet)\n   *\n   * @return - Promise<{ network: string; networkPassphrase: string }>\n   */\n  getNetwork(): Promise<{ network: string; networkPassphrase: string }>;\n\n  /**\n   * This method should be included if your wallet have some sort of async connection, for example WalletConnect\n   * Once this method is called, the module should clear all connections\n   */\n  disconnect?(): Promise<void>;\n}\n\n/**\n * A module is a \"plugin\" we can use within the kit so is able to handle a\n * specific type of wallet/service. There are some modules that are already\n * in the kit but any wallet developer can create their own plugins\n */\nexport interface ModuleInterface extends KitActions {\n  /**\n   * The Module type is used for filtering purposes, define the correct one in\n   * your module so we display it accordingly\n   */\n  moduleType: ModuleType;\n\n  /**\n   * This ID of the module, you should expose this ID as a constant variable\n   * so developers can use it to show/filter this module if they need to.\n   */\n  productId: string;\n\n  /**\n   * This is the name the kit will show in the builtin Modal.\n   */\n  productName: string;\n\n  /**\n   * This is the URL where users can either download, buy and just know how to\n   * get the product.\n   */\n  productUrl: string;\n\n  /**\n   * This icon will be displayed in the builtin Modal along with the product name.\n   */\n  productIcon: string;\n\n  /**\n   * This function should return true is the wallet is installed and/or available.\n   * If for example this wallet/service doesn't need to be installed to be used,\n   * return `true`.\n   *\n   * Important:\n   * Your wallet/library needs to be able to answer this function in less than 500ms.\n   * Otherwise, the kit will show it as unavailable\n   *\n   */\n  isAvailable(): Promise<boolean>;\n}\n", "import { createStore, select, setProp, withProps } from '@ngneat/elf';\nimport { Observable } from 'rxjs';\nimport { ISupportedWallet, IModalTheme, WalletNetwork, IButtonTheme } from '../types';\n\nexport interface StateProps {\n  allowedWallets: ISupportedWallet[];\n\n  horizonUrl?: string;\n\n  selectedNetwork?: WalletNetwork;\n  selectedModuleId?: string;\n\n  modalTheme?: IModalTheme;\n  buttonTheme?: IButtonTheme;\n\n  activeAddress?: string;\n}\n\nexport const store = createStore(\n  { name: 'state' },\n  withProps<StateProps>({\n    allowedWallets: [],\n  })\n);\n\nexport const allowedWallets$: Observable<ISupportedWallet[]> = store.pipe(\n  select((state: StateProps) => state.allowedWallets)\n);\n\nexport const modalTheme$: Observable<IModalTheme | undefined> = store.pipe(\n  select((state: StateProps) => state.modalTheme)\n);\n\nexport const buttonTheme$: Observable<IButtonTheme | undefined> = store.pipe(\n  select((state: StateProps) => state.buttonTheme)\n);\n\nexport const activeAddress$: Observable<string | undefined> = store.pipe(\n  select((state: StateProps) => state.activeAddress)\n);\n\nexport const horizonUrl$: Observable<string | undefined> = store.pipe(select((state: StateProps) => state.horizonUrl));\n\nexport function setSelectedModuleId(moduleId: Required<StateProps['selectedModuleId']>): void {\n  store.update(setProp('selectedModuleId', moduleId));\n}\n\nexport function setNetwork(network: WalletNetwork): void {\n  if (!Object.values(WalletNetwork).includes(network)) {\n    throw new Error(`Wallet network \"${network}\" is not supported`);\n  }\n\n  store.update(setProp('selectedNetwork', network));\n}\n\nexport function setModalTheme(theme: IModalTheme): void {\n  store.update(setProp('modalTheme', theme));\n}\n\nexport function seButtonTheme(theme: IButtonTheme): void {\n  store.update(setProp('buttonTheme', theme));\n}\n\nexport function setAllowedWallets(data: ISupportedWallet[]) {\n  store.update(setProp('allowedWallets', data));\n}\n\nexport function setAddress(address: string): void {\n  store.update(setProp('activeAddress', address));\n}\n\nexport function removeAddress(): void {\n  store.update(setProp('activeAddress', undefined));\n}\n\nexport function setHorizonUrl(url: string): void {\n  store.update(setProp('horizonUrl', url));\n}\n", "import { StellarWalletsButton } from './components/button/stellar-wallets-button';\nimport { StellarWalletsModal } from './components/modal/stellar-wallets-modal';\nimport {\n  removeAddress,\n  seButtonTheme,\n  setAddress,\n  setAllowedWallets,\n  setHorizonUrl,\n  setModalTheme,\n  setNetwork,\n  setSelectedModuleId,\n  store,\n} from './state/store';\nimport { IButtonTheme, ISupportedWallet, IModalTheme, KitActions, ModuleInterface, WalletNetwork } from './types';\n\nexport interface StellarWalletsKitParams {\n  selectedWalletId: string;\n  network: WalletNetwork;\n  modules: ModuleInterface[];\n  /**\n   * @deprecated - This parameter will be removed in a future release, use `modalTheme` instead\n   */\n  theme?: IModalTheme;\n  modalTheme?: IModalTheme;\n  buttonTheme?: IButtonTheme;\n}\n\nexport class StellarWalletsKit implements KitActions {\n  private buttonElement?: StellarWalletsButton;\n  private modalElement?: StellarWalletsModal;\n  private readonly modules: ModuleInterface[];\n\n  private get selectedModule(): ModuleInterface {\n    const target: ModuleInterface | undefined = this.modules.find(\n      (mod: ModuleInterface): boolean => mod.productId === store.getValue().selectedModuleId\n    );\n\n    if (!target) {\n      throw { code: -3, message: 'Please set the wallet first' };\n    }\n\n    return target;\n  }\n\n  constructor(params: StellarWalletsKitParams) {\n    this.modules = params.modules;\n    this.setWallet(params.selectedWalletId);\n    setNetwork(params.network);\n\n    const modalTheme: IModalTheme | undefined = params.theme || params.modalTheme;\n    if (modalTheme) {\n      setModalTheme(modalTheme);\n    }\n\n    if (params.buttonTheme) {\n      seButtonTheme(params.buttonTheme);\n    }\n\n    this.getSupportedWallets().then((value: ISupportedWallet[]): void => {\n      setAllowedWallets(value);\n    });\n  }\n\n  /**\n   * This method will return an array with all wallets supported by this kit but will let you know those the user have already installed/has access to\n   * There are wallets that are by default available since they either don't need to be installed or have a fallback\n   */\n  public async getSupportedWallets(): Promise<ISupportedWallet[]> {\n    return Promise.all(\n      this.modules.map(async (mod: ModuleInterface): Promise<ISupportedWallet> => {\n        const timer: Promise<false> = new Promise(r => setTimeout(() => r(false), 500));\n        return {\n          id: mod.productId,\n          name: mod.productName,\n          type: mod.moduleType,\n          icon: mod.productIcon,\n          isAvailable: await Promise.race([timer, mod.isAvailable()]),\n          url: mod.productUrl,\n        };\n      })\n    );\n  }\n\n  public setWallet(id: string): void {\n    const target: ModuleInterface | undefined = this.modules.find(\n      (mod: ModuleInterface): boolean => mod.productId === id\n    );\n\n    if (!target) {\n      throw new Error(`Wallet id \"${id}\" is not supported`);\n    }\n\n    setSelectedModuleId(target.productId);\n  }\n\n  public async getAddress(params?: { path?: string }): Promise<{ address: string }> {\n    const { address } = await this.selectedModule.getAddress(params);\n    setAddress(address);\n    return { address };\n  }\n\n  public async signTransaction(\n    xdr: string,\n    opts?: {\n      networkPassphrase?: string;\n      address?: string;\n      path?: string;\n      submit?: boolean;\n      submitUrl?: string;\n    }\n  ): Promise<{ signedTxXdr: string; signerAddress?: string }> {\n    return this.selectedModule.signTransaction(xdr, {\n      ...opts,\n      networkPassphrase: opts?.networkPassphrase || store.getValue().selectedNetwork,\n    });\n  }\n\n  public async signAuthEntry(\n    authEntry: string,\n    opts?: {\n      networkPassphrase?: string;\n      address?: string;\n      path?: string;\n    }\n  ): Promise<{ signedAuthEntry: string; signerAddress?: string }> {\n    return this.selectedModule.signAuthEntry(authEntry, {\n      ...opts,\n      networkPassphrase: opts?.networkPassphrase || store.getValue().selectedNetwork,\n    });\n  }\n\n  public async signMessage(\n    message: string,\n    opts?: {\n      networkPassphrase?: string;\n      address?: string;\n      path?: string;\n    }\n  ): Promise<{ signedMessage: string; signerAddress?: string }> {\n    return this.selectedModule.signMessage(message, {\n      ...opts,\n      networkPassphrase: opts?.networkPassphrase || store.getValue().selectedNetwork,\n    });\n  }\n\n  async getNetwork(): Promise<{ network: string; networkPassphrase: string }> {\n    return this.selectedModule.getNetwork();\n  }\n\n  async disconnect(): Promise<void> {\n    removeAddress();\n  }\n\n  // ---- Button methods\n  public isButtonCreated(): boolean {\n    return !!this.buttonElement;\n  }\n\n  public async createButton(params: {\n    container: HTMLElement;\n    onConnect: (response: { address: string }) => void;\n    onDisconnect: () => void;\n    horizonUrl?: string;\n    buttonText?: string;\n  }): Promise<void> {\n    if (this.buttonElement) {\n      throw new Error(`Stellar Wallets Kit button is already created`);\n    }\n\n    this.buttonElement = document.createElement('stellar-wallets-button') as StellarWalletsButton;\n\n    if (params.buttonText) {\n      this.buttonElement.setAttribute('buttonText', params.buttonText);\n    }\n\n    if (params.horizonUrl) {\n      setHorizonUrl(params.horizonUrl);\n    }\n\n    params.container.appendChild(this.buttonElement);\n\n    this.buttonElement.addEventListener(\n      'button-clicked',\n      () => {\n        this.openModal({\n          onWalletSelected: option => {\n            setSelectedModuleId(option.id);\n            this.getAddress().then((r: { address: string }) => params.onConnect(r));\n          },\n        });\n      },\n      false\n    );\n\n    this.buttonElement.addEventListener(\n      'disconnect-wallet',\n      () => {\n        params.onDisconnect();\n\n        if (this.selectedModule.disconnect) {\n          this.selectedModule.disconnect();\n        }\n      },\n      false\n    );\n  }\n\n  /**\n   * Removes the button elements from the HTML and from the kit's instance.\n   *\n   * @param params.skipDisconnect - Set this to `true` if you want to prevent that we disconnect (for example, disconnecting WalletConnect or removing the address)\n   */\n  public async removeButton(params?: { skipDisconnect?: boolean }): Promise<void> {\n    if (!this.buttonElement) {\n      throw new Error(`Stellar Wallets Kit button hasn't been created yet`);\n    }\n\n    if (params?.skipDisconnect !== true) {\n      this.buttonElement.disconnect();\n    }\n\n    this.buttonElement.remove();\n    delete this.buttonElement;\n  }\n  // ---- END Button methods\n\n  // ---- Modal methods\n  public async openModal(params: {\n    onWalletSelected: (option: ISupportedWallet) => void;\n    onClosed?: (err: Error) => void;\n    modalTitle?: string;\n    notAvailableText?: string;\n  }): Promise<void> {\n    if (this.modalElement && !this.buttonElement) {\n      throw new Error(`Stellar Wallets Kit modal is already open`);\n    } else {\n      this.modalElement = document.createElement('stellar-wallets-modal') as StellarWalletsModal;\n    }\n\n    this.modalElement.setAttribute('showModal', '');\n\n    if (params.modalTitle) {\n      this.modalElement.setAttribute('modalTitle', params.modalTitle);\n    }\n\n    if (params.notAvailableText) {\n      this.modalElement.setAttribute('notAvailableText', params.notAvailableText);\n    }\n\n    document.body.appendChild(this.modalElement);\n\n    const listener = (event: CustomEvent) => {\n      params.onWalletSelected(event.detail);\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      this.modalElement.removeEventListener('wallet-selected', listener, false);\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      document.body.removeChild(this.modalElement);\n      this.modalElement = undefined;\n    };\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    this.modalElement.addEventListener('wallet-selected', listener, false);\n\n    const errorListener = (event: CustomEvent) => {\n      if (params.onClosed) {\n        params.onClosed(event.detail);\n      }\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      this.modalElement.removeEventListener('wallet-selected', listener, false);\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      this.modalElement.removeEventListener('modal-closed', errorListener, false);\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      document.body.removeChild(this.modalElement);\n      this.modalElement = undefined;\n    };\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    this.modalElement.addEventListener('modal-closed', errorListener, false);\n  }\n  // ---- END Modal methods\n}\n", "/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n\nconst NODE_MODE = false;\n\n// Allows minifiers to rename references to globalThis\nconst global = globalThis;\n\n/**\n * Whether the current browser supports `adoptedStyleSheets`.\n */\nexport const supportsAdoptingStyleSheets: boolean =\n  global.ShadowRoot &&\n  (global.ShadyCSS === undefined || global.ShadyCSS.nativeShadow) &&\n  'adoptedStyleSheets' in Document.prototype &&\n  'replace' in CSSStyleSheet.prototype;\n\n/**\n * A CSSResult or native CSSStyleSheet.\n *\n * In browsers that support constructible CSS style sheets, CSSStyleSheet\n * object can be used for styling along side CSSResult from the `css`\n * template tag.\n */\nexport type CSSResultOrNative = CSSResult | CSSStyleSheet;\n\nexport type CSSResultArray = Array<CSSResultOrNative | CSSResultArray>;\n\n/**\n * A single CSSResult, CSSStyleSheet, or an array or nested arrays of those.\n */\nexport type CSSResultGroup = CSSResultOrNative | CSSResultArray;\n\nconst constructionToken = Symbol();\n\nconst cssTagCache = new WeakMap<TemplateStringsArray, CSSStyleSheet>();\n\n/**\n * A container for a string of CSS text, that may be used to create a CSSStyleSheet.\n *\n * CSSResult is the return value of `css`-tagged template literals and\n * `unsafeCSS()`. In order to ensure that CSSResults are only created via the\n * `css` tag and `unsafeCSS()`, CSSResult cannot be constructed directly.\n */\nexport class CSSResult {\n  // This property needs to remain unminified.\n  ['_$cssResult$'] = true;\n  readonly cssText: string;\n  private _styleSheet?: CSSStyleSheet;\n  private _strings: TemplateStringsArray | undefined;\n\n  private constructor(\n    cssText: string,\n    strings: TemplateStringsArray | undefined,\n    safeToken: symbol\n  ) {\n    if (safeToken !== constructionToken) {\n      throw new Error(\n        'CSSResult is not constructable. Use `unsafeCSS` or `css` instead.'\n      );\n    }\n    this.cssText = cssText;\n    this._strings = strings;\n  }\n\n  // This is a getter so that it's lazy. In practice, this means stylesheets\n  // are not created until the first element instance is made.\n  get styleSheet(): CSSStyleSheet | undefined {\n    // If `supportsAdoptingStyleSheets` is true then we assume CSSStyleSheet is\n    // constructable.\n    let styleSheet = this._styleSheet;\n    const strings = this._strings;\n    if (supportsAdoptingStyleSheets && styleSheet === undefined) {\n      const cacheable = strings !== undefined && strings.length === 1;\n      if (cacheable) {\n        styleSheet = cssTagCache.get(strings);\n      }\n      if (styleSheet === undefined) {\n        (this._styleSheet = styleSheet = new CSSStyleSheet()).replaceSync(\n          this.cssText\n        );\n        if (cacheable) {\n          cssTagCache.set(strings, styleSheet);\n        }\n      }\n    }\n    return styleSheet;\n  }\n\n  toString(): string {\n    return this.cssText;\n  }\n}\n\ntype ConstructableCSSResult = CSSResult & {\n  new (\n    cssText: string,\n    strings: TemplateStringsArray | undefined,\n    safeToken: symbol\n  ): CSSResult;\n};\n\nconst textFromCSSResult = (value: CSSResultGroup | number) => {\n  // This property needs to remain unminified.\n  if ((value as CSSResult)['_$cssResult$'] === true) {\n    return (value as CSSResult).cssText;\n  } else if (typeof value === 'number') {\n    return value;\n  } else {\n    throw new Error(\n      `Value passed to 'css' function must be a 'css' function result: ` +\n        `${value}. Use 'unsafeCSS' to pass non-literal values, but take care ` +\n        `to ensure page security.`\n    );\n  }\n};\n\n/**\n * Wrap a value for interpolation in a {@linkcode css} tagged template literal.\n *\n * This is unsafe because untrusted CSS text can be used to phone home\n * or exfiltrate data to an attacker controlled site. Take care to only use\n * this with trusted input.\n */\nexport const unsafeCSS = (value: unknown) =>\n  new (CSSResult as ConstructableCSSResult)(\n    typeof value === 'string' ? value : String(value),\n    undefined,\n    constructionToken\n  );\n\n/**\n * A template literal tag which can be used with LitElement's\n * {@linkcode LitElement.styles} property to set element styles.\n *\n * For security reasons, only literal string values and number may be used in\n * embedded expressions. To incorporate non-literal values {@linkcode unsafeCSS}\n * may be used inside an expression.\n */\nexport const css = (\n  strings: TemplateStringsArray,\n  ...values: (CSSResultGroup | number)[]\n): CSSResult => {\n  const cssText =\n    strings.length === 1\n      ? strings[0]\n      : values.reduce(\n          (acc, v, idx) => acc + textFromCSSResult(v) + strings[idx + 1],\n          strings[0]\n        );\n  return new (CSSResult as ConstructableCSSResult)(\n    cssText,\n    strings,\n    constructionToken\n  );\n};\n\n/**\n * Applies the given styles to a `shadowRoot`. When Shadow DOM is\n * available but `adoptedStyleSheets` is not, styles are appended to the\n * `shadowRoot` to [mimic spec behavior](https://wicg.github.io/construct-stylesheets/#using-constructed-stylesheets).\n * Note, when shimming is used, any styles that are subsequently placed into\n * the shadowRoot should be placed *before* any shimmed adopted styles. This\n * will match spec behavior that gives adopted sheets precedence over styles in\n * shadowRoot.\n */\nexport const adoptStyles = (\n  renderRoot: ShadowRoot,\n  styles: Array<CSSResultOrNative>\n) => {\n  if (supportsAdoptingStyleSheets) {\n    (renderRoot as ShadowRoot).adoptedStyleSheets = styles.map((s) =>\n      s instanceof CSSStyleSheet ? s : s.styleSheet!\n    );\n  } else {\n    for (const s of styles) {\n      const style = document.createElement('style');\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      const nonce = (global as any)['litNonce'];\n      if (nonce !== undefined) {\n        style.setAttribute('nonce', nonce);\n      }\n      style.textContent = (s as CSSResult).cssText;\n      renderRoot.appendChild(style);\n    }\n  }\n};\n\nconst cssResultFromStyleSheet = (sheet: CSSStyleSheet) => {\n  let cssText = '';\n  for (const rule of sheet.cssRules) {\n    cssText += rule.cssText;\n  }\n  return unsafeCSS(cssText);\n};\n\nexport const getCompatibleStyle =\n  supportsAdoptingStyleSheets ||\n  (NODE_MODE && global.CSSStyleSheet === undefined)\n    ? (s: CSSResultOrNative) => s\n    : (s: CSSResultOrNative) =>\n        s instanceof CSSStyleSheet ? cssResultFromStyleSheet(s) : s;\n", "/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n\n/**\n * Use this module if you want to create your own base class extending\n * {@link ReactiveElement}.\n * @packageDocumentation\n */\n\nimport {\n  getCompatibleStyle,\n  adoptStyles,\n  CSSResultGroup,\n  CSSResultOrNative,\n} from './css-tag.js';\nimport type {\n  ReactiveController,\n  ReactiveControllerHost,\n} from './reactive-controller.js';\n\n// In the Node build, this import will be injected by Rollup:\n// import {HTMLElement, customElements} from '@lit-labs/ssr-dom-shim';\n\nexport * from './css-tag.js';\nexport type {\n  ReactiveController,\n  ReactiveControllerHost,\n} from './reactive-controller.js';\n\n/**\n * Removes the `readonly` modifier from properties in the union K.\n *\n * This is a safer way to cast a value to a type with a mutable version of a\n * readonly field, than casting to an interface with the field re-declared\n * because it preserves the type of all the fields and warns on typos.\n */\ntype Mutable<T, K extends keyof T> = Omit<T, K> & {\n  -readonly [P in keyof Pick<T, K>]: P extends K ? T[P] : never;\n};\n\n// TODO (justinfagnani): Add `hasOwn` here when we ship ES2022\nconst {\n  is,\n  defineProperty,\n  getOwnPropertyDescriptor,\n  getOwnPropertyNames,\n  getOwnPropertySymbols,\n  getPrototypeOf,\n} = Object;\n\nconst NODE_MODE = false;\n\n// Lets a minifier replace globalThis references with a minified name\nconst global = globalThis;\n\nif (NODE_MODE) {\n  global.customElements ??= customElements;\n}\n\nconst DEV_MODE = true;\n\nlet issueWarning: (code: string, warning: string) => void;\n\nconst trustedTypes = (global as unknown as {trustedTypes?: {emptyScript: ''}})\n  .trustedTypes;\n\n// Temporary workaround for https://crbug.com/993268\n// Currently, any attribute starting with \"on\" is considered to be a\n// TrustedScript source. Such boolean attributes must be set to the equivalent\n// trusted emptyScript value.\nconst emptyStringForBooleanAttribute = trustedTypes\n  ? (trustedTypes.emptyScript as unknown as '')\n  : '';\n\nconst polyfillSupport = DEV_MODE\n  ? global.reactiveElementPolyfillSupportDevMode\n  : global.reactiveElementPolyfillSupport;\n\nif (DEV_MODE) {\n  // Ensure warnings are issued only 1x, even if multiple versions of Lit\n  // are loaded.\n  const issuedWarnings: Set<string | undefined> = (global.litIssuedWarnings ??=\n    new Set());\n\n  // Issue a warning, if we haven't already.\n  issueWarning = (code: string, warning: string) => {\n    warning += ` See https://lit.dev/msg/${code} for more information.`;\n    if (!issuedWarnings.has(warning)) {\n      console.warn(warning);\n      issuedWarnings.add(warning);\n    }\n  };\n\n  issueWarning(\n    'dev-mode',\n    `Lit is in dev mode. Not recommended for production!`\n  );\n\n  // Issue polyfill support warning.\n  if (global.ShadyDOM?.inUse && polyfillSupport === undefined) {\n    issueWarning(\n      'polyfill-support-missing',\n      `Shadow DOM is being polyfilled via \\`ShadyDOM\\` but ` +\n        `the \\`polyfill-support\\` module has not been loaded.`\n    );\n  }\n}\n\n/**\n * Contains types that are part of the unstable debug API.\n *\n * Everything in this API is not stable and may change or be removed in the future,\n * even on patch releases.\n */\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace ReactiveUnstable {\n  /**\n   * When Lit is running in dev mode and `window.emitLitDebugLogEvents` is true,\n   * we will emit 'lit-debug' events to window, with live details about the update and render\n   * lifecycle. These can be useful for writing debug tooling and visualizations.\n   *\n   * Please be aware that running with window.emitLitDebugLogEvents has performance overhead,\n   * making certain operations that are normally very cheap (like a no-op render) much slower,\n   * because we must copy data and dispatch events.\n   */\n  // eslint-disable-next-line @typescript-eslint/no-namespace\n  export namespace DebugLog {\n    export type Entry = Update;\n    export interface Update {\n      kind: 'update';\n    }\n  }\n}\n\ninterface DebugLoggingWindow {\n  // Even in dev mode, we generally don't want to emit these events, as that's\n  // another level of cost, so only emit them when DEV_MODE is true _and_ when\n  // window.emitLitDebugEvents is true.\n  emitLitDebugLogEvents?: boolean;\n}\n\n/**\n * Useful for visualizing and logging insights into what the Lit template system is doing.\n *\n * Compiled out of prod mode builds.\n */\nconst debugLogEvent = DEV_MODE\n  ? (event: ReactiveUnstable.DebugLog.Entry) => {\n      const shouldEmit = (global as unknown as DebugLoggingWindow)\n        .emitLitDebugLogEvents;\n      if (!shouldEmit) {\n        return;\n      }\n      global.dispatchEvent(\n        new CustomEvent<ReactiveUnstable.DebugLog.Entry>('lit-debug', {\n          detail: event,\n        })\n      );\n    }\n  : undefined;\n\n/*\n * When using Closure Compiler, JSCompiler_renameProperty(property, object) is\n * replaced at compile time by the munged name for object[property]. We cannot\n * alias this function, so we have to use a small shim that has the same\n * behavior when not compiling.\n */\n/*@__INLINE__*/\nconst JSCompiler_renameProperty = <P extends PropertyKey>(\n  prop: P,\n  _obj: unknown\n): P => prop;\n\n/**\n * Converts property values to and from attribute values.\n */\nexport interface ComplexAttributeConverter<Type = unknown, TypeHint = unknown> {\n  /**\n   * Called to convert an attribute value to a property\n   * value.\n   */\n  fromAttribute?(value: string | null, type?: TypeHint): Type;\n\n  /**\n   * Called to convert a property value to an attribute\n   * value.\n   *\n   * It returns unknown instead of string, to be compatible with\n   * https://github.com/WICG/trusted-types (and similar efforts).\n   */\n  toAttribute?(value: Type, type?: TypeHint): unknown;\n}\n\ntype AttributeConverter<Type = unknown, TypeHint = unknown> =\n  | ComplexAttributeConverter<Type>\n  | ((value: string | null, type?: TypeHint) => Type);\n\n/**\n * Defines options for a property accessor.\n */\nexport interface PropertyDeclaration<Type = unknown, TypeHint = unknown> {\n  /**\n   * When set to `true`, indicates the property is internal private state. The\n   * property should not be set by users. When using TypeScript, this property\n   * should be marked as `private` or `protected`, and it is also a common\n   * practice to use a leading `_` in the name. The property is not added to\n   * `observedAttributes`.\n   */\n  readonly state?: boolean;\n\n  /**\n   * Indicates how and whether the property becomes an observed attribute.\n   * If the value is `false`, the property is not added to `observedAttributes`.\n   * If true or absent, the lowercased property name is observed (e.g. `fooBar`\n   * becomes `foobar`). If a string, the string value is observed (e.g\n   * `attribute: 'foo-bar'`).\n   */\n  readonly attribute?: boolean | string;\n\n  /**\n   * Indicates the type of the property. This is used only as a hint for the\n   * `converter` to determine how to convert the attribute\n   * to/from a property.\n   */\n  readonly type?: TypeHint;\n\n  /**\n   * Indicates how to convert the attribute to/from a property. If this value\n   * is a function, it is used to convert the attribute value a the property\n   * value. If it's an object, it can have keys for `fromAttribute` and\n   * `toAttribute`. If no `toAttribute` function is provided and\n   * `reflect` is set to `true`, the property value is set directly to the\n   * attribute. A default `converter` is used if none is provided; it supports\n   * `Boolean`, `String`, `Number`, `Object`, and `Array`. Note,\n   * when a property changes and the converter is used to update the attribute,\n   * the property is never updated again as a result of the attribute changing,\n   * and vice versa.\n   */\n  readonly converter?: AttributeConverter<Type, TypeHint>;\n\n  /**\n   * Indicates if the property should reflect to an attribute.\n   * If `true`, when the property is set, the attribute is set using the\n   * attribute name determined according to the rules for the `attribute`\n   * property option and the value of the property converted using the rules\n   * from the `converter` property option.\n   */\n  readonly reflect?: boolean;\n\n  /**\n   * A function that indicates if a property should be considered changed when\n   * it is set. The function should take the `newValue` and `oldValue` and\n   * return `true` if an update should be requested.\n   */\n  hasChanged?(value: Type, oldValue: Type): boolean;\n\n  /**\n   * Indicates whether an accessor will be created for this property. By\n   * default, an accessor will be generated for this property that requests an\n   * update when set. If this flag is `true`, no accessor will be created, and\n   * it will be the user's responsibility to call\n   * `this.requestUpdate(propertyName, oldValue)` to request an update when\n   * the property changes.\n   */\n  readonly noAccessor?: boolean;\n\n  /**\n   * Whether this property is wrapping accessors. This is set by `@property`\n   * to control the initial value change and reflection logic.\n   *\n   * @internal\n   */\n  wrapped?: boolean;\n}\n\n/**\n * Map of properties to PropertyDeclaration options. For each property an\n * accessor is made, and the property is processed according to the\n * PropertyDeclaration options.\n */\nexport interface PropertyDeclarations {\n  readonly [key: string]: PropertyDeclaration;\n}\n\ntype PropertyDeclarationMap = Map<PropertyKey, PropertyDeclaration>;\n\ntype AttributeMap = Map<string, PropertyKey>;\n\n/**\n * A Map of property keys to values.\n *\n * Takes an optional type parameter T, which when specified as a non-any,\n * non-unknown type, will make the Map more strongly-typed, associating the map\n * keys with their corresponding value type on T.\n *\n * Use `PropertyValues<this>` when overriding ReactiveElement.update() and\n * other lifecycle methods in order to get stronger type-checking on keys\n * and values.\n */\n// This type is conditional so that if the parameter T is not specified, or\n// is `any`, the type will include `Map<PropertyKey, unknown>`. Since T is not\n// given in the uses of PropertyValues in this file, all uses here fallback to\n// meaning `Map<PropertyKey, unknown>`, but if a developer uses\n// `PropertyValues<this>` (or any other value for T) they will get a\n// strongly-typed Map type.\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport type PropertyValues<T = any> = T extends object\n  ? PropertyValueMap<T>\n  : Map<PropertyKey, unknown>;\n\n/**\n * Do not use, instead prefer {@linkcode PropertyValues}.\n */\n// This type must be exported such that JavaScript generated by the Google\n// Closure Compiler can import a type reference.\nexport interface PropertyValueMap<T> extends Map<PropertyKey, unknown> {\n  get<K extends keyof T>(k: K): T[K] | undefined;\n  set<K extends keyof T>(key: K, value: T[K]): this;\n  has<K extends keyof T>(k: K): boolean;\n  delete<K extends keyof T>(k: K): boolean;\n}\n\nexport const defaultConverter: ComplexAttributeConverter = {\n  toAttribute(value: unknown, type?: unknown): unknown {\n    switch (type) {\n      case Boolean:\n        value = value ? emptyStringForBooleanAttribute : null;\n        break;\n      case Object:\n      case Array:\n        // if the value is `null` or `undefined` pass this through\n        // to allow removing/no change behavior.\n        value = value == null ? value : JSON.stringify(value);\n        break;\n    }\n    return value;\n  },\n\n  fromAttribute(value: string | null, type?: unknown) {\n    let fromValue: unknown = value;\n    switch (type) {\n      case Boolean:\n        fromValue = value !== null;\n        break;\n      case Number:\n        fromValue = value === null ? null : Number(value);\n        break;\n      case Object:\n      case Array:\n        // Do *not* generate exception when invalid JSON is set as elements\n        // don't normally complain on being mis-configured.\n        // TODO(sorvell): Do generate exception in *dev mode*.\n        try {\n          // Assert to adhere to Bazel's \"must type assert JSON parse\" rule.\n          fromValue = JSON.parse(value!) as unknown;\n        } catch (e) {\n          fromValue = null;\n        }\n        break;\n    }\n    return fromValue;\n  },\n};\n\nexport interface HasChanged {\n  (value: unknown, old: unknown): boolean;\n}\n\n/**\n * Change function that returns true if `value` is different from `oldValue`.\n * This method is used as the default for a property's `hasChanged` function.\n */\nexport const notEqual: HasChanged = (value: unknown, old: unknown): boolean =>\n  !is(value, old);\n\nconst defaultPropertyDeclaration: PropertyDeclaration = {\n  attribute: true,\n  type: String,\n  converter: defaultConverter,\n  reflect: false,\n  hasChanged: notEqual,\n};\n\n/**\n * A string representing one of the supported dev mode warning categories.\n */\nexport type WarningKind =\n  | 'change-in-update'\n  | 'migration'\n  | 'async-perform-update';\n\nexport type Initializer = (element: ReactiveElement) => void;\n\n// Temporary, until google3 is on TypeScript 5.2\ndeclare global {\n  interface SymbolConstructor {\n    readonly metadata: unique symbol;\n  }\n}\n\n// Ensure metadata is enabled. TypeScript does not polyfill\n// Symbol.metadata, so we must ensure that it exists.\n(Symbol as {metadata: symbol}).metadata ??= Symbol('metadata');\n\ndeclare global {\n  // This is public global API, do not change!\n  // eslint-disable-next-line no-var\n  var litPropertyMetadata: WeakMap<\n    object,\n    Map<PropertyKey, PropertyDeclaration>\n  >;\n}\n\n// Map from a class's metadata object to property options\n// Note that we must use nullish-coalescing assignment so that we only use one\n// map even if we load multiple version of this module.\nglobal.litPropertyMetadata ??= new WeakMap<\n  object,\n  Map<PropertyKey, PropertyDeclaration>\n>();\n\n/**\n * Base element class which manages element properties and attributes. When\n * properties change, the `update` method is asynchronously called. This method\n * should be supplied by subclasses to render updates as desired.\n * @noInheritDoc\n */\nexport abstract class ReactiveElement\n  // In the Node build, this `extends` clause will be substituted with\n  // `(globalThis.HTMLElement ?? HTMLElement)`.\n  //\n  // This way, we will first prefer any global `HTMLElement` polyfill that the\n  // user has assigned, and then fall back to the `HTMLElement` shim which has\n  // been imported (see note at the top of this file about how this import is\n  // generated by Rollup). Note that the `HTMLElement` variable has been\n  // shadowed by this import, so it no longer refers to the global.\n  extends HTMLElement\n  implements ReactiveControllerHost\n{\n  // Note: these are patched in only in DEV_MODE.\n  /**\n   * Read or set all the enabled warning categories for this class.\n   *\n   * This property is only used in development builds.\n   *\n   * @nocollapse\n   * @category dev-mode\n   */\n  static enabledWarnings?: WarningKind[];\n\n  /**\n   * Enable the given warning category for this class.\n   *\n   * This method only exists in development builds, so it should be accessed\n   * with a guard like:\n   *\n   * ```ts\n   * // Enable for all ReactiveElement subclasses\n   * ReactiveElement.enableWarning?.('migration');\n   *\n   * // Enable for only MyElement and subclasses\n   * MyElement.enableWarning?.('migration');\n   * ```\n   *\n   * @nocollapse\n   * @category dev-mode\n   */\n  static enableWarning?: (warningKind: WarningKind) => void;\n\n  /**\n   * Disable the given warning category for this class.\n   *\n   * This method only exists in development builds, so it should be accessed\n   * with a guard like:\n   *\n   * ```ts\n   * // Disable for all ReactiveElement subclasses\n   * ReactiveElement.disableWarning?.('migration');\n   *\n   * // Disable for only MyElement and subclasses\n   * MyElement.disableWarning?.('migration');\n   * ```\n   *\n   * @nocollapse\n   * @category dev-mode\n   */\n  static disableWarning?: (warningKind: WarningKind) => void;\n\n  /**\n   * Adds an initializer function to the class that is called during instance\n   * construction.\n   *\n   * This is useful for code that runs against a `ReactiveElement`\n   * subclass, such as a decorator, that needs to do work for each\n   * instance, such as setting up a `ReactiveController`.\n   *\n   * ```ts\n   * const myDecorator = (target: typeof ReactiveElement, key: string) => {\n   *   target.addInitializer((instance: ReactiveElement) => {\n   *     // This is run during construction of the element\n   *     new MyController(instance);\n   *   });\n   * }\n   * ```\n   *\n   * Decorating a field will then cause each instance to run an initializer\n   * that adds a controller:\n   *\n   * ```ts\n   * class MyElement extends LitElement {\n   *   @myDecorator foo;\n   * }\n   * ```\n   *\n   * Initializers are stored per-constructor. Adding an initializer to a\n   * subclass does not add it to a superclass. Since initializers are run in\n   * constructors, initializers will run in order of the class hierarchy,\n   * starting with superclasses and progressing to the instance's class.\n   *\n   * @nocollapse\n   */\n  static addInitializer(initializer: Initializer) {\n    this.__prepare();\n    (this._initializers ??= []).push(initializer);\n  }\n\n  static _initializers?: Initializer[];\n\n  /*\n   * Due to closure compiler ES6 compilation bugs, @nocollapse is required on\n   * all static methods and properties with initializers.  Reference:\n   * - https://github.com/google/closure-compiler/issues/1776\n   */\n\n  /**\n   * Maps attribute names to properties; for example `foobar` attribute to\n   * `fooBar` property. Created lazily on user subclasses when finalizing the\n   * class.\n   * @nocollapse\n   */\n  private static __attributeToPropertyMap: AttributeMap;\n\n  /**\n   * Marks class as having been finalized, which includes creating properties\n   * from `static properties`, but does *not* include all properties created\n   * from decorators.\n   * @nocollapse\n   */\n  protected static finalized: true | undefined;\n\n  /**\n   * Memoized list of all element properties, including any superclass\n   * properties. Created lazily on user subclasses when finalizing the class.\n   *\n   * @nocollapse\n   * @category properties\n   */\n  static elementProperties: PropertyDeclarationMap;\n\n  /**\n   * User-supplied object that maps property names to `PropertyDeclaration`\n   * objects containing options for configuring reactive properties. When\n   * a reactive property is set the element will update and render.\n   *\n   * By default properties are public fields, and as such, they should be\n   * considered as primarily settable by element users, either via attribute or\n   * the property itself.\n   *\n   * Generally, properties that are changed by the element should be private or\n   * protected fields and should use the `state: true` option. Properties\n   * marked as `state` do not reflect from the corresponding attribute\n   *\n   * However, sometimes element code does need to set a public property. This\n   * should typically only be done in response to user interaction, and an event\n   * should be fired informing the user; for example, a checkbox sets its\n   * `checked` property when clicked and fires a `changed` event. Mutating\n   * public properties should typically not be done for non-primitive (object or\n   * array) properties. In other cases when an element needs to manage state, a\n   * private property set with the `state: true` option should be used. When\n   * needed, state properties can be initialized via public properties to\n   * facilitate complex interactions.\n   * @nocollapse\n   * @category properties\n   */\n  static properties: PropertyDeclarations;\n\n  /**\n   * Memoized list of all element styles.\n   * Created lazily on user subclasses when finalizing the class.\n   * @nocollapse\n   * @category styles\n   */\n  static elementStyles: Array<CSSResultOrNative> = [];\n\n  /**\n   * Array of styles to apply to the element. The styles should be defined\n   * using the {@linkcode css} tag function, via constructible stylesheets, or\n   * imported from native CSS module scripts.\n   *\n   * Note on Content Security Policy:\n   *\n   * Element styles are implemented with `<style>` tags when the browser doesn't\n   * support adopted StyleSheets. To use such `<style>` tags with the style-src\n   * CSP directive, the style-src value must either include 'unsafe-inline' or\n   * `nonce-<base64-value>` with `<base64-value>` replaced be a server-generated\n   * nonce.\n   *\n   * To provide a nonce to use on generated `<style>` elements, set\n   * `window.litNonce` to a server-generated nonce in your page's HTML, before\n   * loading application code:\n   *\n   * ```html\n   * <script>\n   *   // Generated and unique per request:\n   *   window.litNonce = 'a1b2c3d4';\n   * </script>\n   * ```\n   * @nocollapse\n   * @category styles\n   */\n  static styles?: CSSResultGroup;\n\n  /**\n   * Returns a list of attributes corresponding to the registered properties.\n   * @nocollapse\n   * @category attributes\n   */\n  static get observedAttributes() {\n    // Ensure we've created all properties\n    this.finalize();\n    // this.__attributeToPropertyMap is only undefined after finalize() in\n    // ReactiveElement itself. ReactiveElement.observedAttributes is only\n    // accessed with ReactiveElement as the receiver when a subclass or mixin\n    // calls super.observedAttributes\n    return (\n      this.__attributeToPropertyMap && [...this.__attributeToPropertyMap.keys()]\n    );\n  }\n\n  private __instanceProperties?: PropertyValues = undefined;\n\n  /**\n   * Creates a property accessor on the element prototype if one does not exist\n   * and stores a {@linkcode PropertyDeclaration} for the property with the\n   * given options. The property setter calls the property's `hasChanged`\n   * property option or uses a strict identity check to determine whether or not\n   * to request an update.\n   *\n   * This method may be overridden to customize properties; however,\n   * when doing so, it's important to call `super.createProperty` to ensure\n   * the property is setup correctly. This method calls\n   * `getPropertyDescriptor` internally to get a descriptor to install.\n   * To customize what properties do when they are get or set, override\n   * `getPropertyDescriptor`. To customize the options for a property,\n   * implement `createProperty` like this:\n   *\n   * ```ts\n   * static createProperty(name, options) {\n   *   options = Object.assign(options, {myOption: true});\n   *   super.createProperty(name, options);\n   * }\n   * ```\n   *\n   * @nocollapse\n   * @category properties\n   */\n  static createProperty(\n    name: PropertyKey,\n    options: PropertyDeclaration = defaultPropertyDeclaration\n  ) {\n    // If this is a state property, force the attribute to false.\n    if (options.state) {\n      (options as Mutable<PropertyDeclaration, 'attribute'>).attribute = false;\n    }\n    this.__prepare();\n    this.elementProperties.set(name, options);\n    if (!options.noAccessor) {\n      const key = DEV_MODE\n        ? // Use Symbol.for in dev mode to make it easier to maintain state\n          // when doing HMR.\n          Symbol.for(`${String(name)} (@property() cache)`)\n        : Symbol();\n      const descriptor = this.getPropertyDescriptor(name, key, options);\n      if (descriptor !== undefined) {\n        defineProperty(this.prototype, name, descriptor);\n      }\n    }\n  }\n\n  /**\n   * Returns a property descriptor to be defined on the given named property.\n   * If no descriptor is returned, the property will not become an accessor.\n   * For example,\n   *\n   * ```ts\n   * class MyElement extends LitElement {\n   *   static getPropertyDescriptor(name, key, options) {\n   *     const defaultDescriptor =\n   *         super.getPropertyDescriptor(name, key, options);\n   *     const setter = defaultDescriptor.set;\n   *     return {\n   *       get: defaultDescriptor.get,\n   *       set(value) {\n   *         setter.call(this, value);\n   *         // custom action.\n   *       },\n   *       configurable: true,\n   *       enumerable: true\n   *     }\n   *   }\n   * }\n   * ```\n   *\n   * @nocollapse\n   * @category properties\n   */\n  protected static getPropertyDescriptor(\n    name: PropertyKey,\n    key: string | symbol,\n    options: PropertyDeclaration\n  ): PropertyDescriptor | undefined {\n    const {get, set} = getOwnPropertyDescriptor(this.prototype, name) ?? {\n      get(this: ReactiveElement) {\n        return this[key as keyof typeof this];\n      },\n      set(this: ReactiveElement, v: unknown) {\n        (this as unknown as Record<string | symbol, unknown>)[key] = v;\n      },\n    };\n    if (DEV_MODE && get == null) {\n      if ('value' in (getOwnPropertyDescriptor(this.prototype, name) ?? {})) {\n        throw new Error(\n          `Field ${JSON.stringify(String(name))} on ` +\n            `${this.name} was declared as a reactive property ` +\n            `but it's actually declared as a value on the prototype. ` +\n            `Usually this is due to using @property or @state on a method.`\n        );\n      }\n      issueWarning(\n        'reactive-property-without-getter',\n        `Field ${JSON.stringify(String(name))} on ` +\n          `${this.name} was declared as a reactive property ` +\n          `but it does not have a getter. This will be an error in a ` +\n          `future version of Lit.`\n      );\n    }\n    return {\n      get(this: ReactiveElement) {\n        return get?.call(this);\n      },\n      set(this: ReactiveElement, value: unknown) {\n        const oldValue = get?.call(this);\n        set!.call(this, value);\n        this.requestUpdate(name, oldValue, options);\n      },\n      configurable: true,\n      enumerable: true,\n    };\n  }\n\n  /**\n   * Returns the property options associated with the given property.\n   * These options are defined with a `PropertyDeclaration` via the `properties`\n   * object or the `@property` decorator and are registered in\n   * `createProperty(...)`.\n   *\n   * Note, this method should be considered \"final\" and not overridden. To\n   * customize the options for a given property, override\n   * {@linkcode createProperty}.\n   *\n   * @nocollapse\n   * @final\n   * @category properties\n   */\n  static getPropertyOptions(name: PropertyKey) {\n    return this.elementProperties.get(name) ?? defaultPropertyDeclaration;\n  }\n\n  // Temporary, until google3 is on TypeScript 5.2\n  declare static [Symbol.metadata]: object & Record<PropertyKey, unknown>;\n\n  /**\n   * Initializes static own properties of the class used in bookkeeping\n   * for element properties, initializers, etc.\n   *\n   * Can be called multiple times by code that needs to ensure these\n   * properties exist before using them.\n   *\n   * This method ensures the superclass is finalized so that inherited\n   * property metadata can be copied down.\n   * @nocollapse\n   */\n  private static __prepare() {\n    if (\n      this.hasOwnProperty(JSCompiler_renameProperty('elementProperties', this))\n    ) {\n      // Already prepared\n      return;\n    }\n    // Finalize any superclasses\n    const superCtor = getPrototypeOf(this) as typeof ReactiveElement;\n    superCtor.finalize();\n\n    // Create own set of initializers for this class if any exist on the\n    // superclass and copy them down. Note, for a small perf boost, avoid\n    // creating initializers unless needed.\n    if (superCtor._initializers !== undefined) {\n      this._initializers = [...superCtor._initializers];\n    }\n    // Initialize elementProperties from the superclass\n    this.elementProperties = new Map(superCtor.elementProperties);\n  }\n\n  /**\n   * Finishes setting up the class so that it's ready to be registered\n   * as a custom element and instantiated.\n   *\n   * This method is called by the ReactiveElement.observedAttributes getter.\n   * If you override the observedAttributes getter, you must either call\n   * super.observedAttributes to trigger finalization, or call finalize()\n   * yourself.\n   *\n   * @nocollapse\n   */\n  protected static finalize() {\n    if (this.hasOwnProperty(JSCompiler_renameProperty('finalized', this))) {\n      return;\n    }\n    this.finalized = true;\n    this.__prepare();\n\n    // Create properties from the static properties block:\n    if (this.hasOwnProperty(JSCompiler_renameProperty('properties', this))) {\n      const props = this.properties;\n      const propKeys = [\n        ...getOwnPropertyNames(props),\n        ...getOwnPropertySymbols(props),\n      ] as Array<keyof typeof props>;\n      for (const p of propKeys) {\n        this.createProperty(p, props[p]);\n      }\n    }\n\n    // Create properties from standard decorator metadata:\n    const metadata = this[Symbol.metadata];\n    if (metadata !== null) {\n      const properties = litPropertyMetadata.get(metadata);\n      if (properties !== undefined) {\n        for (const [p, options] of properties) {\n          this.elementProperties.set(p, options);\n        }\n      }\n    }\n\n    // Create the attribute-to-property map\n    this.__attributeToPropertyMap = new Map();\n    for (const [p, options] of this.elementProperties) {\n      const attr = this.__attributeNameForProperty(p, options);\n      if (attr !== undefined) {\n        this.__attributeToPropertyMap.set(attr, p);\n      }\n    }\n\n    this.elementStyles = this.finalizeStyles(this.styles);\n\n    if (DEV_MODE) {\n      if (this.hasOwnProperty('createProperty')) {\n        issueWarning(\n          'no-override-create-property',\n          'Overriding ReactiveElement.createProperty() is deprecated. ' +\n            'The override will not be called with standard decorators'\n        );\n      }\n      if (this.hasOwnProperty('getPropertyDescriptor')) {\n        issueWarning(\n          'no-override-get-property-descriptor',\n          'Overriding ReactiveElement.getPropertyDescriptor() is deprecated. ' +\n            'The override will not be called with standard decorators'\n        );\n      }\n    }\n  }\n\n  /**\n   * Options used when calling `attachShadow`. Set this property to customize\n   * the options for the shadowRoot; for example, to create a closed\n   * shadowRoot: `{mode: 'closed'}`.\n   *\n   * Note, these options are used in `createRenderRoot`. If this method\n   * is customized, options should be respected if possible.\n   * @nocollapse\n   * @category rendering\n   */\n  static shadowRootOptions: ShadowRootInit = {mode: 'open'};\n\n  /**\n   * Takes the styles the user supplied via the `static styles` property and\n   * returns the array of styles to apply to the element.\n   * Override this method to integrate into a style management system.\n   *\n   * Styles are deduplicated preserving the _last_ instance in the list. This\n   * is a performance optimization to avoid duplicated styles that can occur\n   * especially when composing via subclassing. The last item is kept to try\n   * to preserve the cascade order with the assumption that it's most important\n   * that last added styles override previous styles.\n   *\n   * @nocollapse\n   * @category styles\n   */\n  protected static finalizeStyles(\n    styles?: CSSResultGroup\n  ): Array<CSSResultOrNative> {\n    const elementStyles = [];\n    if (Array.isArray(styles)) {\n      // Dedupe the flattened array in reverse order to preserve the last items.\n      // Casting to Array<unknown> works around TS error that\n      // appears to come from trying to flatten a type CSSResultArray.\n      const set = new Set((styles as Array<unknown>).flat(Infinity).reverse());\n      // Then preserve original order by adding the set items in reverse order.\n      for (const s of set) {\n        elementStyles.unshift(getCompatibleStyle(s as CSSResultOrNative));\n      }\n    } else if (styles !== undefined) {\n      elementStyles.push(getCompatibleStyle(styles));\n    }\n    return elementStyles;\n  }\n\n  /**\n   * Node or ShadowRoot into which element DOM should be rendered. Defaults\n   * to an open shadowRoot.\n   * @category rendering\n   */\n  readonly renderRoot!: HTMLElement | DocumentFragment;\n\n  /**\n   * Returns the property name for the given attribute `name`.\n   * @nocollapse\n   */\n  private static __attributeNameForProperty(\n    name: PropertyKey,\n    options: PropertyDeclaration\n  ) {\n    const attribute = options.attribute;\n    return attribute === false\n      ? undefined\n      : typeof attribute === 'string'\n      ? attribute\n      : typeof name === 'string'\n      ? name.toLowerCase()\n      : undefined;\n  }\n\n  // Initialize to an unresolved Promise so we can make sure the element has\n  // connected before first update.\n  private __updatePromise!: Promise<boolean>;\n\n  /**\n   * True if there is a pending update as a result of calling `requestUpdate()`.\n   * Should only be read.\n   * @category updates\n   */\n  isUpdatePending = false;\n\n  /**\n   * Is set to `true` after the first update. The element code cannot assume\n   * that `renderRoot` exists before the element `hasUpdated`.\n   * @category updates\n   */\n  hasUpdated = false;\n\n  /**\n   * Map with keys for any properties that have changed since the last\n   * update cycle with previous values.\n   *\n   * @internal\n   */\n  _$changedProperties!: PropertyValues;\n\n  /**\n   * Properties that should be reflected when updated.\n   */\n  private __reflectingProperties?: Set<PropertyKey>;\n\n  /**\n   * Name of currently reflecting property\n   */\n  private __reflectingProperty: PropertyKey | null = null;\n\n  /**\n   * Set of controllers.\n   */\n  private __controllers?: Set<ReactiveController>;\n\n  constructor() {\n    super();\n    this.__initialize();\n  }\n\n  /**\n   * Internal only override point for customizing work done when elements\n   * are constructed.\n   */\n  private __initialize() {\n    this.__updatePromise = new Promise<boolean>(\n      (res) => (this.enableUpdating = res)\n    );\n    this._$changedProperties = new Map();\n    // This enqueues a microtask that ust run before the first update, so it\n    // must be called before requestUpdate()\n    this.__saveInstanceProperties();\n    // ensures first update will be caught by an early access of\n    // `updateComplete`\n    this.requestUpdate();\n    (this.constructor as typeof ReactiveElement)._initializers?.forEach((i) =>\n      i(this)\n    );\n  }\n\n  /**\n   * Registers a `ReactiveController` to participate in the element's reactive\n   * update cycle. The element automatically calls into any registered\n   * controllers during its lifecycle callbacks.\n   *\n   * If the element is connected when `addController()` is called, the\n   * controller's `hostConnected()` callback will be immediately called.\n   * @category controllers\n   */\n  addController(controller: ReactiveController) {\n    (this.__controllers ??= new Set()).add(controller);\n    // If a controller is added after the element has been connected,\n    // call hostConnected. Note, re-using existence of `renderRoot` here\n    // (which is set in connectedCallback) to avoid the need to track a\n    // first connected state.\n    if (this.renderRoot !== undefined && this.isConnected) {\n      controller.hostConnected?.();\n    }\n  }\n\n  /**\n   * Removes a `ReactiveController` from the element.\n   * @category controllers\n   */\n  removeController(controller: ReactiveController) {\n    this.__controllers?.delete(controller);\n  }\n\n  /**\n   * Fixes any properties set on the instance before upgrade time.\n   * Otherwise these would shadow the accessor and break these properties.\n   * The properties are stored in a Map which is played back after the\n   * constructor runs. Note, on very old versions of Safari (<=9) or Chrome\n   * (<=41), properties created for native platform properties like (`id` or\n   * `name`) may not have default values set in the element constructor. On\n   * these browsers native properties appear on instances and therefore their\n   * default value will overwrite any element default (e.g. if the element sets\n   * this.id = 'id' in the constructor, the 'id' will become '' since this is\n   * the native platform default).\n   */\n  private __saveInstanceProperties() {\n    const instanceProperties = new Map<PropertyKey, unknown>();\n    const elementProperties = (this.constructor as typeof ReactiveElement)\n      .elementProperties;\n    for (const p of elementProperties.keys() as IterableIterator<keyof this>) {\n      if (this.hasOwnProperty(p)) {\n        instanceProperties.set(p, this[p]);\n        delete this[p];\n      }\n    }\n    if (instanceProperties.size > 0) {\n      this.__instanceProperties = instanceProperties;\n    }\n  }\n\n  /**\n   * Returns the node into which the element should render and by default\n   * creates and returns an open shadowRoot. Implement to customize where the\n   * element's DOM is rendered. For example, to render into the element's\n   * childNodes, return `this`.\n   *\n   * @return Returns a node into which to render.\n   * @category rendering\n   */\n  protected createRenderRoot(): HTMLElement | DocumentFragment {\n    const renderRoot =\n      this.shadowRoot ??\n      this.attachShadow(\n        (this.constructor as typeof ReactiveElement).shadowRootOptions\n      );\n    adoptStyles(\n      renderRoot,\n      (this.constructor as typeof ReactiveElement).elementStyles\n    );\n    return renderRoot;\n  }\n\n  /**\n   * On first connection, creates the element's renderRoot, sets up\n   * element styling, and enables updating.\n   * @category lifecycle\n   */\n  connectedCallback() {\n    // Create renderRoot before controllers `hostConnected`\n    (this as Mutable<typeof this, 'renderRoot'>).renderRoot ??=\n      this.createRenderRoot();\n    this.enableUpdating(true);\n    this.__controllers?.forEach((c) => c.hostConnected?.());\n  }\n\n  /**\n   * Note, this method should be considered final and not overridden. It is\n   * overridden on the element instance with a function that triggers the first\n   * update.\n   * @category updates\n   */\n  protected enableUpdating(_requestedUpdate: boolean) {}\n\n  /**\n   * Allows for `super.disconnectedCallback()` in extensions while\n   * reserving the possibility of making non-breaking feature additions\n   * when disconnecting at some point in the future.\n   * @category lifecycle\n   */\n  disconnectedCallback() {\n    this.__controllers?.forEach((c) => c.hostDisconnected?.());\n  }\n\n  /**\n   * Synchronizes property values when attributes change.\n   *\n   * Specifically, when an attribute is set, the corresponding property is set.\n   * You should rarely need to implement this callback. If this method is\n   * overridden, `super.attributeChangedCallback(name, _old, value)` must be\n   * called.\n   *\n   * See [using the lifecycle callbacks](https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_custom_elements#using_the_lifecycle_callbacks)\n   * on MDN for more information about the `attributeChangedCallback`.\n   * @category attributes\n   */\n  attributeChangedCallback(\n    name: string,\n    _old: string | null,\n    value: string | null\n  ) {\n    this._$attributeToProperty(name, value);\n  }\n\n  private __propertyToAttribute(name: PropertyKey, value: unknown) {\n    const elemProperties: PropertyDeclarationMap = (\n      this.constructor as typeof ReactiveElement\n    ).elementProperties;\n    const options = elemProperties.get(name)!;\n    const attr = (\n      this.constructor as typeof ReactiveElement\n    ).__attributeNameForProperty(name, options);\n    if (attr !== undefined && options.reflect === true) {\n      const converter =\n        (options.converter as ComplexAttributeConverter)?.toAttribute !==\n        undefined\n          ? (options.converter as ComplexAttributeConverter)\n          : defaultConverter;\n      const attrValue = converter.toAttribute!(value, options.type);\n      if (\n        DEV_MODE &&\n        (this.constructor as typeof ReactiveElement).enabledWarnings!.includes(\n          'migration'\n        ) &&\n        attrValue === undefined\n      ) {\n        issueWarning(\n          'undefined-attribute-value',\n          `The attribute value for the ${name as string} property is ` +\n            `undefined on element ${this.localName}. The attribute will be ` +\n            `removed, but in the previous version of \\`ReactiveElement\\`, ` +\n            `the attribute would not have changed.`\n        );\n      }\n      // Track if the property is being reflected to avoid\n      // setting the property again via `attributeChangedCallback`. Note:\n      // 1. this takes advantage of the fact that the callback is synchronous.\n      // 2. will behave incorrectly if multiple attributes are in the reaction\n      // stack at time of calling. However, since we process attributes\n      // in `update` this should not be possible (or an extreme corner case\n      // that we'd like to discover).\n      // mark state reflecting\n      this.__reflectingProperty = name;\n      if (attrValue == null) {\n        this.removeAttribute(attr);\n      } else {\n        this.setAttribute(attr, attrValue as string);\n      }\n      // mark state not reflecting\n      this.__reflectingProperty = null;\n    }\n  }\n\n  /** @internal */\n  _$attributeToProperty(name: string, value: string | null) {\n    const ctor = this.constructor as typeof ReactiveElement;\n    // Note, hint this as an `AttributeMap` so closure clearly understands\n    // the type; it has issues with tracking types through statics\n    const propName = (ctor.__attributeToPropertyMap as AttributeMap).get(name);\n    // Use tracking info to avoid reflecting a property value to an attribute\n    // if it was just set because the attribute changed.\n    if (propName !== undefined && this.__reflectingProperty !== propName) {\n      const options = ctor.getPropertyOptions(propName);\n      const converter =\n        typeof options.converter === 'function'\n          ? {fromAttribute: options.converter}\n          : options.converter?.fromAttribute !== undefined\n          ? options.converter\n          : defaultConverter;\n      // mark state reflecting\n      this.__reflectingProperty = propName;\n      this[propName as keyof this] = converter.fromAttribute!(\n        value,\n        options.type\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      ) as any;\n      // mark state not reflecting\n      this.__reflectingProperty = null;\n    }\n  }\n\n  /**\n   * Requests an update which is processed asynchronously. This should be called\n   * when an element should update based on some state not triggered by setting\n   * a reactive property. In this case, pass no arguments. It should also be\n   * called when manually implementing a property setter. In this case, pass the\n   * property `name` and `oldValue` to ensure that any configured property\n   * options are honored.\n   *\n   * @param name name of requesting property\n   * @param oldValue old value of requesting property\n   * @param options property options to use instead of the previously\n   *     configured options\n   * @category updates\n   */\n  requestUpdate(\n    name?: PropertyKey,\n    oldValue?: unknown,\n    options?: PropertyDeclaration\n  ): void {\n    // If we have a property key, perform property update steps.\n    if (name !== undefined) {\n      if (DEV_MODE && (name as unknown) instanceof Event) {\n        issueWarning(\n          ``,\n          `The requestUpdate() method was called with an Event as the property name. This is probably a mistake caused by binding this.requestUpdate as an event listener. Instead bind a function that will call it with no arguments: () => this.requestUpdate()`\n        );\n      }\n      options ??= (\n        this.constructor as typeof ReactiveElement\n      ).getPropertyOptions(name);\n      const hasChanged = options.hasChanged ?? notEqual;\n      const newValue = this[name as keyof this];\n      if (hasChanged(newValue, oldValue)) {\n        this._$changeProperty(name, oldValue, options);\n      } else {\n        // Abort the request if the property should not be considered changed.\n        return;\n      }\n    }\n    if (this.isUpdatePending === false) {\n      this.__updatePromise = this.__enqueueUpdate();\n    }\n  }\n\n  /**\n   * @internal\n   */\n  _$changeProperty(\n    name: PropertyKey,\n    oldValue: unknown,\n    options: PropertyDeclaration\n  ) {\n    // TODO (justinfagnani): Create a benchmark of Map.has() + Map.set(\n    // vs just Map.set()\n    if (!this._$changedProperties.has(name)) {\n      this._$changedProperties.set(name, oldValue);\n    }\n    // Add to reflecting properties set.\n    // Note, it's important that every change has a chance to add the\n    // property to `__reflectingProperties`. This ensures setting\n    // attribute + property reflects correctly.\n    if (options.reflect === true && this.__reflectingProperty !== name) {\n      (this.__reflectingProperties ??= new Set<PropertyKey>()).add(name);\n    }\n  }\n\n  /**\n   * Sets up the element to asynchronously update.\n   */\n  private async __enqueueUpdate() {\n    this.isUpdatePending = true;\n    try {\n      // Ensure any previous update has resolved before updating.\n      // This `await` also ensures that property changes are batched.\n      await this.__updatePromise;\n    } catch (e) {\n      // Refire any previous errors async so they do not disrupt the update\n      // cycle. Errors are refired so developers have a chance to observe\n      // them, and this can be done by implementing\n      // `window.onunhandledrejection`.\n      Promise.reject(e);\n    }\n    const result = this.scheduleUpdate();\n    // If `scheduleUpdate` returns a Promise, we await it. This is done to\n    // enable coordinating updates with a scheduler. Note, the result is\n    // checked to avoid delaying an additional microtask unless we need to.\n    if (result != null) {\n      await result;\n    }\n    return !this.isUpdatePending;\n  }\n\n  /**\n   * Schedules an element update. You can override this method to change the\n   * timing of updates by returning a Promise. The update will await the\n   * returned Promise, and you should resolve the Promise to allow the update\n   * to proceed. If this method is overridden, `super.scheduleUpdate()`\n   * must be called.\n   *\n   * For instance, to schedule updates to occur just before the next frame:\n   *\n   * ```ts\n   * override protected async scheduleUpdate(): Promise<unknown> {\n   *   await new Promise((resolve) => requestAnimationFrame(() => resolve()));\n   *   super.scheduleUpdate();\n   * }\n   * ```\n   * @category updates\n   */\n  protected scheduleUpdate(): void | Promise<unknown> {\n    const result = this.performUpdate();\n    if (\n      DEV_MODE &&\n      (this.constructor as typeof ReactiveElement).enabledWarnings!.includes(\n        'async-perform-update'\n      ) &&\n      typeof (result as unknown as Promise<unknown> | undefined)?.then ===\n        'function'\n    ) {\n      issueWarning(\n        'async-perform-update',\n        `Element ${this.localName} returned a Promise from performUpdate(). ` +\n          `This behavior is deprecated and will be removed in a future ` +\n          `version of ReactiveElement.`\n      );\n    }\n    return result;\n  }\n\n  /**\n   * Performs an element update. Note, if an exception is thrown during the\n   * update, `firstUpdated` and `updated` will not be called.\n   *\n   * Call `performUpdate()` to immediately process a pending update. This should\n   * generally not be needed, but it can be done in rare cases when you need to\n   * update synchronously.\n   *\n   * @category updates\n   */\n  protected performUpdate(): void {\n    // Abort any update if one is not pending when this is called.\n    // This can happen if `performUpdate` is called early to \"flush\"\n    // the update.\n    if (!this.isUpdatePending) {\n      return;\n    }\n    debugLogEvent?.({kind: 'update'});\n    if (!this.hasUpdated) {\n      // Create renderRoot before first update. This occurs in `connectedCallback`\n      // but is done here to support out of tree calls to `enableUpdating`/`performUpdate`.\n      (this as Mutable<typeof this, 'renderRoot'>).renderRoot ??=\n        this.createRenderRoot();\n      if (DEV_MODE) {\n        // Produce warning if any reactive properties on the prototype are\n        // shadowed by class fields. Instance fields set before upgrade are\n        // deleted by this point, so any own property is caused by class field\n        // initialization in the constructor.\n        const ctor = this.constructor as typeof ReactiveElement;\n        const shadowedProperties = [...ctor.elementProperties.keys()].filter(\n          (p) => this.hasOwnProperty(p) && p in getPrototypeOf(this)\n        );\n        if (shadowedProperties.length) {\n          throw new Error(\n            `The following properties on element ${this.localName} will not ` +\n              `trigger updates as expected because they are set using class ` +\n              `fields: ${shadowedProperties.join(', ')}. ` +\n              `Native class fields and some compiled output will overwrite ` +\n              `accessors used for detecting changes. See ` +\n              `https://lit.dev/msg/class-field-shadowing ` +\n              `for more information.`\n          );\n        }\n      }\n      // Mixin instance properties once, if they exist.\n      if (this.__instanceProperties) {\n        // TODO (justinfagnani): should we use the stored value? Could a new value\n        // have been set since we stored the own property value?\n        for (const [p, value] of this.__instanceProperties) {\n          this[p as keyof this] = value as this[keyof this];\n        }\n        this.__instanceProperties = undefined;\n      }\n      // Trigger initial value reflection and populate the initial\n      // changedProperties map, but only for the case of experimental\n      // decorators on accessors, which will not have already populated the\n      // changedProperties map. We can't know if these accessors had\n      // initializers, so we just set them anyway - a difference from\n      // experimental decorators on fields and standard decorators on\n      // auto-accessors.\n      // For context why experimentalDecorators with auto accessors are handled\n      // specifically also see:\n      // https://github.com/lit/lit/pull/4183#issuecomment-1711959635\n      const elementProperties = (this.constructor as typeof ReactiveElement)\n        .elementProperties;\n      if (elementProperties.size > 0) {\n        for (const [p, options] of elementProperties) {\n          if (\n            options.wrapped === true &&\n            !this._$changedProperties.has(p) &&\n            this[p as keyof this] !== undefined\n          ) {\n            this._$changeProperty(p, this[p as keyof this], options);\n          }\n        }\n      }\n    }\n    let shouldUpdate = false;\n    const changedProperties = this._$changedProperties;\n    try {\n      shouldUpdate = this.shouldUpdate(changedProperties);\n      if (shouldUpdate) {\n        this.willUpdate(changedProperties);\n        this.__controllers?.forEach((c) => c.hostUpdate?.());\n        this.update(changedProperties);\n      } else {\n        this.__markUpdated();\n      }\n    } catch (e) {\n      // Prevent `firstUpdated` and `updated` from running when there's an\n      // update exception.\n      shouldUpdate = false;\n      // Ensure element can accept additional updates after an exception.\n      this.__markUpdated();\n      throw e;\n    }\n    // The update is no longer considered pending and further updates are now allowed.\n    if (shouldUpdate) {\n      this._$didUpdate(changedProperties);\n    }\n  }\n\n  /**\n   * Invoked before `update()` to compute values needed during the update.\n   *\n   * Implement `willUpdate` to compute property values that depend on other\n   * properties and are used in the rest of the update process.\n   *\n   * ```ts\n   * willUpdate(changedProperties) {\n   *   // only need to check changed properties for an expensive computation.\n   *   if (changedProperties.has('firstName') || changedProperties.has('lastName')) {\n   *     this.sha = computeSHA(`${this.firstName} ${this.lastName}`);\n   *   }\n   * }\n   *\n   * render() {\n   *   return html`SHA: ${this.sha}`;\n   * }\n   * ```\n   *\n   * @category updates\n   */\n  protected willUpdate(_changedProperties: PropertyValues): void {}\n\n  // Note, this is an override point for polyfill-support.\n  // @internal\n  _$didUpdate(changedProperties: PropertyValues) {\n    this.__controllers?.forEach((c) => c.hostUpdated?.());\n    if (!this.hasUpdated) {\n      this.hasUpdated = true;\n      this.firstUpdated(changedProperties);\n    }\n    this.updated(changedProperties);\n    if (\n      DEV_MODE &&\n      this.isUpdatePending &&\n      (this.constructor as typeof ReactiveElement).enabledWarnings!.includes(\n        'change-in-update'\n      )\n    ) {\n      issueWarning(\n        'change-in-update',\n        `Element ${this.localName} scheduled an update ` +\n          `(generally because a property was set) ` +\n          `after an update completed, causing a new update to be scheduled. ` +\n          `This is inefficient and should be avoided unless the next update ` +\n          `can only be scheduled as a side effect of the previous update.`\n      );\n    }\n  }\n\n  private __markUpdated() {\n    this._$changedProperties = new Map();\n    this.isUpdatePending = false;\n  }\n\n  /**\n   * Returns a Promise that resolves when the element has completed updating.\n   * The Promise value is a boolean that is `true` if the element completed the\n   * update without triggering another update. The Promise result is `false` if\n   * a property was set inside `updated()`. If the Promise is rejected, an\n   * exception was thrown during the update.\n   *\n   * To await additional asynchronous work, override the `getUpdateComplete`\n   * method. For example, it is sometimes useful to await a rendered element\n   * before fulfilling this Promise. To do this, first await\n   * `super.getUpdateComplete()`, then any subsequent state.\n   *\n   * @return A promise of a boolean that resolves to true if the update completed\n   *     without triggering another update.\n   * @category updates\n   */\n  get updateComplete(): Promise<boolean> {\n    return this.getUpdateComplete();\n  }\n\n  /**\n   * Override point for the `updateComplete` promise.\n   *\n   * It is not safe to override the `updateComplete` getter directly due to a\n   * limitation in TypeScript which means it is not possible to call a\n   * superclass getter (e.g. `super.updateComplete.then(...)`) when the target\n   * language is ES5 (https://github.com/microsoft/TypeScript/issues/338).\n   * This method should be overridden instead. For example:\n   *\n   * ```ts\n   * class MyElement extends LitElement {\n   *   override async getUpdateComplete() {\n   *     const result = await super.getUpdateComplete();\n   *     await this._myChild.updateComplete;\n   *     return result;\n   *   }\n   * }\n   * ```\n   *\n   * @return A promise of a boolean that resolves to true if the update completed\n   *     without triggering another update.\n   * @category updates\n   */\n  protected getUpdateComplete(): Promise<boolean> {\n    return this.__updatePromise;\n  }\n\n  /**\n   * Controls whether or not `update()` should be called when the element requests\n   * an update. By default, this method always returns `true`, but this can be\n   * customized to control when to update.\n   *\n   * @param _changedProperties Map of changed properties with old values\n   * @category updates\n   */\n  protected shouldUpdate(_changedProperties: PropertyValues): boolean {\n    return true;\n  }\n\n  /**\n   * Updates the element. This method reflects property values to attributes.\n   * It can be overridden to render and keep updated element DOM.\n   * Setting properties inside this method will *not* trigger\n   * another update.\n   *\n   * @param _changedProperties Map of changed properties with old values\n   * @category updates\n   */\n  protected update(_changedProperties: PropertyValues) {\n    // The forEach() expression will only run when when __reflectingProperties is\n    // defined, and it returns undefined, setting __reflectingProperties to\n    // undefined\n    this.__reflectingProperties &&= this.__reflectingProperties.forEach((p) =>\n      this.__propertyToAttribute(p, this[p as keyof this])\n    ) as undefined;\n    this.__markUpdated();\n  }\n\n  /**\n   * Invoked whenever the element is updated. Implement to perform\n   * post-updating tasks via DOM APIs, for example, focusing an element.\n   *\n   * Setting properties inside this method will trigger the element to update\n   * again after this update cycle completes.\n   *\n   * @param _changedProperties Map of changed properties with old values\n   * @category updates\n   */\n  protected updated(_changedProperties: PropertyValues) {}\n\n  /**\n   * Invoked when the element is first updated. Implement to perform one time\n   * work on the element after update.\n   *\n   * ```ts\n   * firstUpdated() {\n   *   this.renderRoot.getElementById('my-text-area').focus();\n   * }\n   * ```\n   *\n   * Setting properties inside this method will trigger the element to update\n   * again after this update cycle completes.\n   *\n   * @param _changedProperties Map of changed properties with old values\n   * @category updates\n   */\n  protected firstUpdated(_changedProperties: PropertyValues) {}\n}\n// Assigned here to work around a jscompiler bug with static fields\n// when compiling to ES5.\n// https://github.com/google/closure-compiler/issues/3177\n(ReactiveElement as unknown as Record<string, unknown>)[\n  JSCompiler_renameProperty('elementProperties', ReactiveElement)\n] = new Map();\n(ReactiveElement as unknown as Record<string, unknown>)[\n  JSCompiler_renameProperty('finalized', ReactiveElement)\n] = new Map();\n\n// Apply polyfills if available\npolyfillSupport?.({ReactiveElement});\n\n// Dev mode warnings...\nif (DEV_MODE) {\n  // Default warning set.\n  ReactiveElement.enabledWarnings = [\n    'change-in-update',\n    'async-perform-update',\n  ];\n  const ensureOwnWarnings = function (ctor: typeof ReactiveElement) {\n    if (\n      !ctor.hasOwnProperty(JSCompiler_renameProperty('enabledWarnings', ctor))\n    ) {\n      ctor.enabledWarnings = ctor.enabledWarnings!.slice();\n    }\n  };\n  ReactiveElement.enableWarning = function (\n    this: typeof ReactiveElement,\n    warning: WarningKind\n  ) {\n    ensureOwnWarnings(this);\n    if (!this.enabledWarnings!.includes(warning)) {\n      this.enabledWarnings!.push(warning);\n    }\n  };\n  ReactiveElement.disableWarning = function (\n    this: typeof ReactiveElement,\n    warning: WarningKind\n  ) {\n    ensureOwnWarnings(this);\n    const i = this.enabledWarnings!.indexOf(warning);\n    if (i >= 0) {\n      this.enabledWarnings!.splice(i, 1);\n    }\n  };\n}\n\n// IMPORTANT: do not change the property name or the assignment expression.\n// This line will be used in regexes to search for ReactiveElement usage.\n(global.reactiveElementVersions ??= []).push('2.0.4');\nif (DEV_MODE && global.reactiveElementVersions.length > 1) {\n  issueWarning!(\n    'multiple-versions',\n    `Multiple versions of Lit loaded. Loading multiple versions ` +\n      `is not recommended.`\n  );\n}\n", "/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n\n// IMPORTANT: these imports must be type-only\nimport type {Directive, DirectiveResult, PartInfo} from './directive.js';\nimport type {TrustedHTML, TrustedTypesWindow} from 'trusted-types/lib';\n\nconst DEV_MODE = true;\nconst ENABLE_EXTRA_SECURITY_HOOKS = true;\nconst ENABLE_SHADYDOM_NOPATCH = true;\nconst NODE_MODE = false;\n\n// Allows minifiers to rename references to globalThis\nconst global = globalThis;\n\n/**\n * Contains types that are part of the unstable debug API.\n *\n * Everything in this API is not stable and may change or be removed in the future,\n * even on patch releases.\n */\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace LitUnstable {\n  /**\n   * When Lit is running in dev mode and `window.emitLitDebugLogEvents` is true,\n   * we will emit 'lit-debug' events to window, with live details about the update and render\n   * lifecycle. These can be useful for writing debug tooling and visualizations.\n   *\n   * Please be aware that running with window.emitLitDebugLogEvents has performance overhead,\n   * making certain operations that are normally very cheap (like a no-op render) much slower,\n   * because we must copy data and dispatch events.\n   */\n  // eslint-disable-next-line @typescript-eslint/no-namespace\n  export namespace DebugLog {\n    export type Entry =\n      | TemplatePrep\n      | TemplateInstantiated\n      | TemplateInstantiatedAndUpdated\n      | TemplateUpdating\n      | BeginRender\n      | EndRender\n      | CommitPartEntry\n      | SetPartValue;\n    export interface TemplatePrep {\n      kind: 'template prep';\n      template: Template;\n      strings: TemplateStringsArray;\n      clonableTemplate: HTMLTemplateElement;\n      parts: TemplatePart[];\n    }\n    export interface BeginRender {\n      kind: 'begin render';\n      id: number;\n      value: unknown;\n      container: HTMLElement | DocumentFragment;\n      options: RenderOptions | undefined;\n      part: ChildPart | undefined;\n    }\n    export interface EndRender {\n      kind: 'end render';\n      id: number;\n      value: unknown;\n      container: HTMLElement | DocumentFragment;\n      options: RenderOptions | undefined;\n      part: ChildPart;\n    }\n    export interface TemplateInstantiated {\n      kind: 'template instantiated';\n      template: Template | CompiledTemplate;\n      instance: TemplateInstance;\n      options: RenderOptions | undefined;\n      fragment: Node;\n      parts: Array<Part | undefined>;\n      values: unknown[];\n    }\n    export interface TemplateInstantiatedAndUpdated {\n      kind: 'template instantiated and updated';\n      template: Template | CompiledTemplate;\n      instance: TemplateInstance;\n      options: RenderOptions | undefined;\n      fragment: Node;\n      parts: Array<Part | undefined>;\n      values: unknown[];\n    }\n    export interface TemplateUpdating {\n      kind: 'template updating';\n      template: Template | CompiledTemplate;\n      instance: TemplateInstance;\n      options: RenderOptions | undefined;\n      parts: Array<Part | undefined>;\n      values: unknown[];\n    }\n    export interface SetPartValue {\n      kind: 'set part';\n      part: Part;\n      value: unknown;\n      valueIndex: number;\n      values: unknown[];\n      templateInstance: TemplateInstance;\n    }\n\n    export type CommitPartEntry =\n      | CommitNothingToChildEntry\n      | CommitText\n      | CommitNode\n      | CommitAttribute\n      | CommitProperty\n      | CommitBooleanAttribute\n      | CommitEventListener\n      | CommitToElementBinding;\n\n    export interface CommitNothingToChildEntry {\n      kind: 'commit nothing to child';\n      start: ChildNode;\n      end: ChildNode | null;\n      parent: Disconnectable | undefined;\n      options: RenderOptions | undefined;\n    }\n\n    export interface CommitText {\n      kind: 'commit text';\n      node: Text;\n      value: unknown;\n      options: RenderOptions | undefined;\n    }\n\n    export interface CommitNode {\n      kind: 'commit node';\n      start: Node;\n      parent: Disconnectable | undefined;\n      value: Node;\n      options: RenderOptions | undefined;\n    }\n\n    export interface CommitAttribute {\n      kind: 'commit attribute';\n      element: Element;\n      name: string;\n      value: unknown;\n      options: RenderOptions | undefined;\n    }\n\n    export interface CommitProperty {\n      kind: 'commit property';\n      element: Element;\n      name: string;\n      value: unknown;\n      options: RenderOptions | undefined;\n    }\n\n    export interface CommitBooleanAttribute {\n      kind: 'commit boolean attribute';\n      element: Element;\n      name: string;\n      value: boolean;\n      options: RenderOptions | undefined;\n    }\n\n    export interface CommitEventListener {\n      kind: 'commit event listener';\n      element: Element;\n      name: string;\n      value: unknown;\n      oldListener: unknown;\n      options: RenderOptions | undefined;\n      // True if we're removing the old event listener (e.g. because settings changed, or value is nothing)\n      removeListener: boolean;\n      // True if we're adding a new event listener (e.g. because first render, or settings changed)\n      addListener: boolean;\n    }\n\n    export interface CommitToElementBinding {\n      kind: 'commit to element binding';\n      element: Element;\n      value: unknown;\n      options: RenderOptions | undefined;\n    }\n  }\n}\n\ninterface DebugLoggingWindow {\n  // Even in dev mode, we generally don't want to emit these events, as that's\n  // another level of cost, so only emit them when DEV_MODE is true _and_ when\n  // window.emitLitDebugEvents is true.\n  emitLitDebugLogEvents?: boolean;\n}\n\n/**\n * Useful for visualizing and logging insights into what the Lit template system is doing.\n *\n * Compiled out of prod mode builds.\n */\nconst debugLogEvent = DEV_MODE\n  ? (event: LitUnstable.DebugLog.Entry) => {\n      const shouldEmit = (global as unknown as DebugLoggingWindow)\n        .emitLitDebugLogEvents;\n      if (!shouldEmit) {\n        return;\n      }\n      global.dispatchEvent(\n        new CustomEvent<LitUnstable.DebugLog.Entry>('lit-debug', {\n          detail: event,\n        })\n      );\n    }\n  : undefined;\n// Used for connecting beginRender and endRender events when there are nested\n// renders when errors are thrown preventing an endRender event from being\n// called.\nlet debugLogRenderId = 0;\n\nlet issueWarning: (code: string, warning: string) => void;\n\nif (DEV_MODE) {\n  global.litIssuedWarnings ??= new Set();\n\n  // Issue a warning, if we haven't already.\n  issueWarning = (code: string, warning: string) => {\n    warning += code\n      ? ` See https://lit.dev/msg/${code} for more information.`\n      : '';\n    if (!global.litIssuedWarnings!.has(warning)) {\n      console.warn(warning);\n      global.litIssuedWarnings!.add(warning);\n    }\n  };\n\n  issueWarning(\n    'dev-mode',\n    `Lit is in dev mode. Not recommended for production!`\n  );\n}\n\nconst wrap =\n  ENABLE_SHADYDOM_NOPATCH &&\n  global.ShadyDOM?.inUse &&\n  global.ShadyDOM?.noPatch === true\n    ? (global.ShadyDOM!.wrap as <T extends Node>(node: T) => T)\n    : <T extends Node>(node: T) => node;\n\nconst trustedTypes = (global as unknown as TrustedTypesWindow).trustedTypes;\n\n/**\n * Our TrustedTypePolicy for HTML which is declared using the html template\n * tag function.\n *\n * That HTML is a developer-authored constant, and is parsed with innerHTML\n * before any untrusted expressions have been mixed in. Therefor it is\n * considered safe by construction.\n */\nconst policy = trustedTypes\n  ? trustedTypes.createPolicy('lit-html', {\n      createHTML: (s) => s,\n    })\n  : undefined;\n\n/**\n * Used to sanitize any value before it is written into the DOM. This can be\n * used to implement a security policy of allowed and disallowed values in\n * order to prevent XSS attacks.\n *\n * One way of using this callback would be to check attributes and properties\n * against a list of high risk fields, and require that values written to such\n * fields be instances of a class which is safe by construction. Closure's Safe\n * HTML Types is one implementation of this technique (\n * https://github.com/google/safe-html-types/blob/master/doc/safehtml-types.md).\n * The TrustedTypes polyfill in API-only mode could also be used as a basis\n * for this technique (https://github.com/WICG/trusted-types).\n *\n * @param node The HTML node (usually either a #text node or an Element) that\n *     is being written to. Note that this is just an exemplar node, the write\n *     may take place against another instance of the same class of node.\n * @param name The name of an attribute or property (for example, 'href').\n * @param type Indicates whether the write that's about to be performed will\n *     be to a property or a node.\n * @return A function that will sanitize this class of writes.\n */\nexport type SanitizerFactory = (\n  node: Node,\n  name: string,\n  type: 'property' | 'attribute'\n) => ValueSanitizer;\n\n/**\n * A function which can sanitize values that will be written to a specific kind\n * of DOM sink.\n *\n * See SanitizerFactory.\n *\n * @param value The value to sanitize. Will be the actual value passed into\n *     the lit-html template literal, so this could be of any type.\n * @return The value to write to the DOM. Usually the same as the input value,\n *     unless sanitization is needed.\n */\nexport type ValueSanitizer = (value: unknown) => unknown;\n\nconst identityFunction: ValueSanitizer = (value: unknown) => value;\nconst noopSanitizer: SanitizerFactory = (\n  _node: Node,\n  _name: string,\n  _type: 'property' | 'attribute'\n) => identityFunction;\n\n/** Sets the global sanitizer factory. */\nconst setSanitizer = (newSanitizer: SanitizerFactory) => {\n  if (!ENABLE_EXTRA_SECURITY_HOOKS) {\n    return;\n  }\n  if (sanitizerFactoryInternal !== noopSanitizer) {\n    throw new Error(\n      `Attempted to overwrite existing lit-html security policy.` +\n        ` setSanitizeDOMValueFactory should be called at most once.`\n    );\n  }\n  sanitizerFactoryInternal = newSanitizer;\n};\n\n/**\n * Only used in internal tests, not a part of the public API.\n */\nconst _testOnlyClearSanitizerFactoryDoNotCallOrElse = () => {\n  sanitizerFactoryInternal = noopSanitizer;\n};\n\nconst createSanitizer: SanitizerFactory = (node, name, type) => {\n  return sanitizerFactoryInternal(node, name, type);\n};\n\n// Added to an attribute name to mark the attribute as bound so we can find\n// it easily.\nconst boundAttributeSuffix = '$lit$';\n\n// This marker is used in many syntactic positions in HTML, so it must be\n// a valid element name and attribute name. We don't support dynamic names (yet)\n// but this at least ensures that the parse tree is closer to the template\n// intention.\nconst marker = `lit$${Math.random().toFixed(9).slice(2)}$`;\n\n// String used to tell if a comment is a marker comment\nconst markerMatch = '?' + marker;\n\n// Text used to insert a comment marker node. We use processing instruction\n// syntax because it's slightly smaller, but parses as a comment node.\nconst nodeMarker = `<${markerMatch}>`;\n\nconst d =\n  NODE_MODE && global.document === undefined\n    ? ({\n        createTreeWalker() {\n          return {};\n        },\n      } as unknown as Document)\n    : document;\n\n// Creates a dynamic marker. We never have to search for these in the DOM.\nconst createMarker = () => d.createComment('');\n\n// https://tc39.github.io/ecma262/#sec-typeof-operator\ntype Primitive = null | undefined | boolean | number | string | symbol | bigint;\nconst isPrimitive = (value: unknown): value is Primitive =>\n  value === null || (typeof value != 'object' && typeof value != 'function');\nconst isArray = Array.isArray;\nconst isIterable = (value: unknown): value is Iterable<unknown> =>\n  isArray(value) ||\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  typeof (value as any)?.[Symbol.iterator] === 'function';\n\nconst SPACE_CHAR = `[ \\t\\n\\f\\r]`;\nconst ATTR_VALUE_CHAR = `[^ \\t\\n\\f\\r\"'\\`<>=]`;\nconst NAME_CHAR = `[^\\\\s\"'>=/]`;\n\n// These regexes represent the five parsing states that we care about in the\n// Template's HTML scanner. They match the *end* of the state they're named\n// after.\n// Depending on the match, we transition to a new state. If there's no match,\n// we stay in the same state.\n// Note that the regexes are stateful. We utilize lastIndex and sync it\n// across the multiple regexes used. In addition to the five regexes below\n// we also dynamically create a regex to find the matching end tags for raw\n// text elements.\n\n/**\n * End of text is: `<` followed by:\n *   (comment start) or (tag) or (dynamic tag binding)\n */\nconst textEndRegex = /<(?:(!--|\\/[^a-zA-Z])|(\\/?[a-zA-Z][^>\\s]*)|(\\/?$))/g;\nconst COMMENT_START = 1;\nconst TAG_NAME = 2;\nconst DYNAMIC_TAG_NAME = 3;\n\nconst commentEndRegex = /-->/g;\n/**\n * Comments not started with <!--, like </{, can be ended by a single `>`\n */\nconst comment2EndRegex = />/g;\n\n/**\n * The tagEnd regex matches the end of the \"inside an opening\" tag syntax\n * position. It either matches a `>`, an attribute-like sequence, or the end\n * of the string after a space (attribute-name position ending).\n *\n * See attributes in the HTML spec:\n * https://www.w3.org/TR/html5/syntax.html#elements-attributes\n *\n * \" \\t\\n\\f\\r\" are HTML space characters:\n * https://infra.spec.whatwg.org/#ascii-whitespace\n *\n * So an attribute is:\n *  * The name: any character except a whitespace character, (\"), ('), \">\",\n *    \"=\", or \"/\". Note: this is different from the HTML spec which also excludes control characters.\n *  * Followed by zero or more space characters\n *  * Followed by \"=\"\n *  * Followed by zero or more space characters\n *  * Followed by:\n *    * Any character except space, ('), (\"), \"<\", \">\", \"=\", (`), or\n *    * (\") then any non-(\"), or\n *    * (') then any non-(')\n */\nconst tagEndRegex = new RegExp(\n  `>|${SPACE_CHAR}(?:(${NAME_CHAR}+)(${SPACE_CHAR}*=${SPACE_CHAR}*(?:${ATTR_VALUE_CHAR}|(\"|')|))|$)`,\n  'g'\n);\nconst ENTIRE_MATCH = 0;\nconst ATTRIBUTE_NAME = 1;\nconst SPACES_AND_EQUALS = 2;\nconst QUOTE_CHAR = 3;\n\nconst singleQuoteAttrEndRegex = /'/g;\nconst doubleQuoteAttrEndRegex = /\"/g;\n/**\n * Matches the raw text elements.\n *\n * Comments are not parsed within raw text elements, so we need to search their\n * text content for marker strings.\n */\nconst rawTextElement = /^(?:script|style|textarea|title)$/i;\n\n/** TemplateResult types */\nconst HTML_RESULT = 1;\nconst SVG_RESULT = 2;\nconst MATHML_RESULT = 3;\n\ntype ResultType = typeof HTML_RESULT | typeof SVG_RESULT | typeof MATHML_RESULT;\n\n// TemplatePart types\n// IMPORTANT: these must match the values in PartType\nconst ATTRIBUTE_PART = 1;\nconst CHILD_PART = 2;\nconst PROPERTY_PART = 3;\nconst BOOLEAN_ATTRIBUTE_PART = 4;\nconst EVENT_PART = 5;\nconst ELEMENT_PART = 6;\nconst COMMENT_PART = 7;\n\n/**\n * The return type of the template tag functions, {@linkcode html} and\n * {@linkcode svg} when it hasn't been compiled by @lit-labs/compiler.\n *\n * A `TemplateResult` object holds all the information about a template\n * expression required to render it: the template strings, expression values,\n * and type of template (html or svg).\n *\n * `TemplateResult` objects do not create any DOM on their own. To create or\n * update DOM you need to render the `TemplateResult`. See\n * [Rendering](https://lit.dev/docs/components/rendering) for more information.\n *\n */\nexport type UncompiledTemplateResult<T extends ResultType = ResultType> = {\n  // This property needs to remain unminified.\n  ['_$litType$']: T;\n  strings: TemplateStringsArray;\n  values: unknown[];\n};\n\n/**\n * This is a template result that may be either uncompiled or compiled.\n *\n * In the future, TemplateResult will be this type. If you want to explicitly\n * note that a template result is potentially compiled, you can reference this\n * type and it will continue to behave the same through the next major version\n * of Lit. This can be useful for code that wants to prepare for the next\n * major version of Lit.\n */\nexport type MaybeCompiledTemplateResult<T extends ResultType = ResultType> =\n  | UncompiledTemplateResult<T>\n  | CompiledTemplateResult;\n\n/**\n * The return type of the template tag functions, {@linkcode html} and\n * {@linkcode svg}.\n *\n * A `TemplateResult` object holds all the information about a template\n * expression required to render it: the template strings, expression values,\n * and type of template (html or svg).\n *\n * `TemplateResult` objects do not create any DOM on their own. To create or\n * update DOM you need to render the `TemplateResult`. See\n * [Rendering](https://lit.dev/docs/components/rendering) for more information.\n *\n * In Lit 4, this type will be an alias of\n * MaybeCompiledTemplateResult, so that code will get type errors if it assumes\n * that Lit templates are not compiled. When deliberately working with only\n * one, use either {@linkcode CompiledTemplateResult} or\n * {@linkcode UncompiledTemplateResult} explicitly.\n */\nexport type TemplateResult<T extends ResultType = ResultType> =\n  UncompiledTemplateResult<T>;\n\nexport type HTMLTemplateResult = TemplateResult<typeof HTML_RESULT>;\n\nexport type SVGTemplateResult = TemplateResult<typeof SVG_RESULT>;\n\nexport type MathMLTemplateResult = TemplateResult<typeof MATHML_RESULT>;\n\n/**\n * A TemplateResult that has been compiled by @lit-labs/compiler, skipping the\n * prepare step.\n */\nexport interface CompiledTemplateResult {\n  // This is a factory in order to make template initialization lazy\n  // and allow ShadyRenderOptions scope to be passed in.\n  // This property needs to remain unminified.\n  ['_$litType$']: CompiledTemplate;\n  values: unknown[];\n}\n\nexport interface CompiledTemplate extends Omit<Template, 'el'> {\n  // el is overridden to be optional. We initialize it on first render\n  el?: HTMLTemplateElement;\n\n  // The prepared HTML string to create a template element from.\n  // The type is a TemplateStringsArray to guarantee that the value came from\n  // source code, preventing a JSON injection attack.\n  h: TemplateStringsArray;\n}\n\n/**\n * Generates a template literal tag function that returns a TemplateResult with\n * the given result type.\n */\nconst tag =\n  <T extends ResultType>(type: T) =>\n  (strings: TemplateStringsArray, ...values: unknown[]): TemplateResult<T> => {\n    // Warn against templates octal escape sequences\n    // We do this here rather than in render so that the warning is closer to the\n    // template definition.\n    if (DEV_MODE && strings.some((s) => s === undefined)) {\n      console.warn(\n        'Some template strings are undefined.\\n' +\n          'This is probably caused by illegal octal escape sequences.'\n      );\n    }\n    if (DEV_MODE) {\n      // Import static-html.js results in a circular dependency which g3 doesn't\n      // handle. Instead we know that static values must have the field\n      // `_$litStatic$`.\n      if (\n        values.some((val) => (val as {_$litStatic$: unknown})?.['_$litStatic$'])\n      ) {\n        issueWarning(\n          '',\n          `Static values 'literal' or 'unsafeStatic' cannot be used as values to non-static templates.\\n` +\n            `Please use the static 'html' tag function. See https://lit.dev/docs/templates/expressions/#static-expressions`\n        );\n      }\n    }\n    return {\n      // This property needs to remain unminified.\n      ['_$litType$']: type,\n      strings,\n      values,\n    };\n  };\n\n/**\n * Interprets a template literal as an HTML template that can efficiently\n * render to and update a container.\n *\n * ```ts\n * const header = (title: string) => html`<h1>${title}</h1>`;\n * ```\n *\n * The `html` tag returns a description of the DOM to render as a value. It is\n * lazy, meaning no work is done until the template is rendered. When rendering,\n * if a template comes from the same expression as a previously rendered result,\n * it's efficiently updated instead of replaced.\n */\nexport const html = tag(HTML_RESULT);\n\n/**\n * Interprets a template literal as an SVG fragment that can efficiently render\n * to and update a container.\n *\n * ```ts\n * const rect = svg`<rect width=\"10\" height=\"10\"></rect>`;\n *\n * const myImage = html`\n *   <svg viewBox=\"0 0 10 10\" xmlns=\"http://www.w3.org/2000/svg\">\n *     ${rect}\n *   </svg>`;\n * ```\n *\n * The `svg` *tag function* should only be used for SVG fragments, or elements\n * that would be contained **inside** an `<svg>` HTML element. A common error is\n * placing an `<svg>` *element* in a template tagged with the `svg` tag\n * function. The `<svg>` element is an HTML element and should be used within a\n * template tagged with the {@linkcode html} tag function.\n *\n * In LitElement usage, it's invalid to return an SVG fragment from the\n * `render()` method, as the SVG fragment will be contained within the element's\n * shadow root and thus not be properly contained within an `<svg>` HTML\n * element.\n */\nexport const svg = tag(SVG_RESULT);\n\n/**\n * Interprets a template literal as MathML fragment that can efficiently render\n * to and update a container.\n *\n * ```ts\n * const num = mathml`<mn>1</mn>`;\n *\n * const eq = html`\n *   <math>\n *     ${num}\n *   </math>`;\n * ```\n *\n * The `mathml` *tag function* should only be used for MathML fragments, or\n * elements that would be contained **inside** a `<math>` HTML element. A common\n * error is placing a `<math>` *element* in a template tagged with the `mathml`\n * tag function. The `<math>` element is an HTML element and should be used\n * within a template tagged with the {@linkcode html} tag function.\n *\n * In LitElement usage, it's invalid to return an MathML fragment from the\n * `render()` method, as the MathML fragment will be contained within the\n * element's shadow root and thus not be properly contained within a `<math>`\n * HTML element.\n */\nexport const mathml = tag(MATHML_RESULT);\n\n/**\n * A sentinel value that signals that a value was handled by a directive and\n * should not be written to the DOM.\n */\nexport const noChange = Symbol.for('lit-noChange');\n\n/**\n * A sentinel value that signals a ChildPart to fully clear its content.\n *\n * ```ts\n * const button = html`${\n *  user.isAdmin\n *    ? html`<button>DELETE</button>`\n *    : nothing\n * }`;\n * ```\n *\n * Prefer using `nothing` over other falsy values as it provides a consistent\n * behavior between various expression binding contexts.\n *\n * In child expressions, `undefined`, `null`, `''`, and `nothing` all behave the\n * same and render no nodes. In attribute expressions, `nothing` _removes_ the\n * attribute, while `undefined` and `null` will render an empty string. In\n * property expressions `nothing` becomes `undefined`.\n */\nexport const nothing = Symbol.for('lit-nothing');\n\n/**\n * The cache of prepared templates, keyed by the tagged TemplateStringsArray\n * and _not_ accounting for the specific template tag used. This means that\n * template tags cannot be dynamic - they must statically be one of html, svg,\n * or attr. This restriction simplifies the cache lookup, which is on the hot\n * path for rendering.\n */\nconst templateCache = new WeakMap<TemplateStringsArray, Template>();\n\n/**\n * Object specifying options for controlling lit-html rendering. Note that\n * while `render` may be called multiple times on the same `container` (and\n * `renderBefore` reference node) to efficiently update the rendered content,\n * only the options passed in during the first render are respected during\n * the lifetime of renders to that unique `container` + `renderBefore`\n * combination.\n */\nexport interface RenderOptions {\n  /**\n   * An object to use as the `this` value for event listeners. It's often\n   * useful to set this to the host component rendering a template.\n   */\n  host?: object;\n  /**\n   * A DOM node before which to render content in the container.\n   */\n  renderBefore?: ChildNode | null;\n  /**\n   * Node used for cloning the template (`importNode` will be called on this\n   * node). This controls the `ownerDocument` of the rendered DOM, along with\n   * any inherited context. Defaults to the global `document`.\n   */\n  creationScope?: {importNode(node: Node, deep?: boolean): Node};\n  /**\n   * The initial connected state for the top-level part being rendered. If no\n   * `isConnected` option is set, `AsyncDirective`s will be connected by\n   * default. Set to `false` if the initial render occurs in a disconnected tree\n   * and `AsyncDirective`s should see `isConnected === false` for their initial\n   * render. The `part.setConnected()` method must be used subsequent to initial\n   * render to change the connected state of the part.\n   */\n  isConnected?: boolean;\n}\n\nconst walker = d.createTreeWalker(\n  d,\n  129 /* NodeFilter.SHOW_{ELEMENT|COMMENT} */\n);\n\nlet sanitizerFactoryInternal: SanitizerFactory = noopSanitizer;\n\n//\n// Classes only below here, const variable declarations only above here...\n//\n// Keeping variable declarations and classes together improves minification.\n// Interfaces and type aliases can be interleaved freely.\n//\n\n// Type for classes that have a `_directive` or `_directives[]` field, used by\n// `resolveDirective`\nexport interface DirectiveParent {\n  _$parent?: DirectiveParent;\n  _$isConnected: boolean;\n  __directive?: Directive;\n  __directives?: Array<Directive | undefined>;\n}\n\nfunction trustFromTemplateString(\n  tsa: TemplateStringsArray,\n  stringFromTSA: string\n): TrustedHTML {\n  // A security check to prevent spoofing of Lit template results.\n  // In the future, we may be able to replace this with Array.isTemplateObject,\n  // though we might need to make that check inside of the html and svg\n  // functions, because precompiled templates don't come in as\n  // TemplateStringArray objects.\n  if (!isArray(tsa) || !tsa.hasOwnProperty('raw')) {\n    let message = 'invalid template strings array';\n    if (DEV_MODE) {\n      message = `\n          Internal Error: expected template strings to be an array\n          with a 'raw' field. Faking a template strings array by\n          calling html or svg like an ordinary function is effectively\n          the same as calling unsafeHtml and can lead to major security\n          issues, e.g. opening your code up to XSS attacks.\n          If you're using the html or svg tagged template functions normally\n          and still seeing this error, please file a bug at\n          https://github.com/lit/lit/issues/new?template=bug_report.md\n          and include information about your build tooling, if any.\n        `\n        .trim()\n        .replace(/\\n */g, '\\n');\n    }\n    throw new Error(message);\n  }\n  return policy !== undefined\n    ? policy.createHTML(stringFromTSA)\n    : (stringFromTSA as unknown as TrustedHTML);\n}\n\n/**\n * Returns an HTML string for the given TemplateStringsArray and result type\n * (HTML or SVG), along with the case-sensitive bound attribute names in\n * template order. The HTML contains comment markers denoting the `ChildPart`s\n * and suffixes on bound attributes denoting the `AttributeParts`.\n *\n * @param strings template strings array\n * @param type HTML or SVG\n * @return Array containing `[html, attrNames]` (array returned for terseness,\n *     to avoid object fields since this code is shared with non-minified SSR\n *     code)\n */\nconst getTemplateHtml = (\n  strings: TemplateStringsArray,\n  type: ResultType\n): [TrustedHTML, Array<string>] => {\n  // Insert makers into the template HTML to represent the position of\n  // bindings. The following code scans the template strings to determine the\n  // syntactic position of the bindings. They can be in text position, where\n  // we insert an HTML comment, attribute value position, where we insert a\n  // sentinel string and re-write the attribute name, or inside a tag where\n  // we insert the sentinel string.\n  const l = strings.length - 1;\n  // Stores the case-sensitive bound attribute names in the order of their\n  // parts. ElementParts are also reflected in this array as undefined\n  // rather than a string, to disambiguate from attribute bindings.\n  const attrNames: Array<string> = [];\n  let html =\n    type === SVG_RESULT ? '<svg>' : type === MATHML_RESULT ? '<math>' : '';\n\n  // When we're inside a raw text tag (not it's text content), the regex\n  // will still be tagRegex so we can find attributes, but will switch to\n  // this regex when the tag ends.\n  let rawTextEndRegex: RegExp | undefined;\n\n  // The current parsing state, represented as a reference to one of the\n  // regexes\n  let regex = textEndRegex;\n\n  for (let i = 0; i < l; i++) {\n    const s = strings[i];\n    // The index of the end of the last attribute name. When this is\n    // positive at end of a string, it means we're in an attribute value\n    // position and need to rewrite the attribute name.\n    // We also use a special value of -2 to indicate that we encountered\n    // the end of a string in attribute name position.\n    let attrNameEndIndex = -1;\n    let attrName: string | undefined;\n    let lastIndex = 0;\n    let match!: RegExpExecArray | null;\n\n    // The conditions in this loop handle the current parse state, and the\n    // assignments to the `regex` variable are the state transitions.\n    while (lastIndex < s.length) {\n      // Make sure we start searching from where we previously left off\n      regex.lastIndex = lastIndex;\n      match = regex.exec(s);\n      if (match === null) {\n        break;\n      }\n      lastIndex = regex.lastIndex;\n      if (regex === textEndRegex) {\n        if (match[COMMENT_START] === '!--') {\n          regex = commentEndRegex;\n        } else if (match[COMMENT_START] !== undefined) {\n          // We started a weird comment, like </{\n          regex = comment2EndRegex;\n        } else if (match[TAG_NAME] !== undefined) {\n          if (rawTextElement.test(match[TAG_NAME])) {\n            // Record if we encounter a raw-text element. We'll switch to\n            // this regex at the end of the tag.\n            rawTextEndRegex = new RegExp(`</${match[TAG_NAME]}`, 'g');\n          }\n          regex = tagEndRegex;\n        } else if (match[DYNAMIC_TAG_NAME] !== undefined) {\n          if (DEV_MODE) {\n            throw new Error(\n              'Bindings in tag names are not supported. Please use static templates instead. ' +\n                'See https://lit.dev/docs/templates/expressions/#static-expressions'\n            );\n          }\n          regex = tagEndRegex;\n        }\n      } else if (regex === tagEndRegex) {\n        if (match[ENTIRE_MATCH] === '>') {\n          // End of a tag. If we had started a raw-text element, use that\n          // regex\n          regex = rawTextEndRegex ?? textEndRegex;\n          // We may be ending an unquoted attribute value, so make sure we\n          // clear any pending attrNameEndIndex\n          attrNameEndIndex = -1;\n        } else if (match[ATTRIBUTE_NAME] === undefined) {\n          // Attribute name position\n          attrNameEndIndex = -2;\n        } else {\n          attrNameEndIndex = regex.lastIndex - match[SPACES_AND_EQUALS].length;\n          attrName = match[ATTRIBUTE_NAME];\n          regex =\n            match[QUOTE_CHAR] === undefined\n              ? tagEndRegex\n              : match[QUOTE_CHAR] === '\"'\n                ? doubleQuoteAttrEndRegex\n                : singleQuoteAttrEndRegex;\n        }\n      } else if (\n        regex === doubleQuoteAttrEndRegex ||\n        regex === singleQuoteAttrEndRegex\n      ) {\n        regex = tagEndRegex;\n      } else if (regex === commentEndRegex || regex === comment2EndRegex) {\n        regex = textEndRegex;\n      } else {\n        // Not one of the five state regexes, so it must be the dynamically\n        // created raw text regex and we're at the close of that element.\n        regex = tagEndRegex;\n        rawTextEndRegex = undefined;\n      }\n    }\n\n    if (DEV_MODE) {\n      // If we have a attrNameEndIndex, which indicates that we should\n      // rewrite the attribute name, assert that we're in a valid attribute\n      // position - either in a tag, or a quoted attribute value.\n      console.assert(\n        attrNameEndIndex === -1 ||\n          regex === tagEndRegex ||\n          regex === singleQuoteAttrEndRegex ||\n          regex === doubleQuoteAttrEndRegex,\n        'unexpected parse state B'\n      );\n    }\n\n    // We have four cases:\n    //  1. We're in text position, and not in a raw text element\n    //     (regex === textEndRegex): insert a comment marker.\n    //  2. We have a non-negative attrNameEndIndex which means we need to\n    //     rewrite the attribute name to add a bound attribute suffix.\n    //  3. We're at the non-first binding in a multi-binding attribute, use a\n    //     plain marker.\n    //  4. We're somewhere else inside the tag. If we're in attribute name\n    //     position (attrNameEndIndex === -2), add a sequential suffix to\n    //     generate a unique attribute name.\n\n    // Detect a binding next to self-closing tag end and insert a space to\n    // separate the marker from the tag end:\n    const end =\n      regex === tagEndRegex && strings[i + 1].startsWith('/>') ? ' ' : '';\n    html +=\n      regex === textEndRegex\n        ? s + nodeMarker\n        : attrNameEndIndex >= 0\n          ? (attrNames.push(attrName!),\n            s.slice(0, attrNameEndIndex) +\n              boundAttributeSuffix +\n              s.slice(attrNameEndIndex)) +\n            marker +\n            end\n          : s + marker + (attrNameEndIndex === -2 ? i : end);\n  }\n\n  const htmlResult: string | TrustedHTML =\n    html +\n    (strings[l] || '<?>') +\n    (type === SVG_RESULT ? '</svg>' : type === MATHML_RESULT ? '</math>' : '');\n\n  // Returned as an array for terseness\n  return [trustFromTemplateString(strings, htmlResult), attrNames];\n};\n\n/** @internal */\nexport type {Template};\nclass Template {\n  /** @internal */\n  el!: HTMLTemplateElement;\n\n  parts: Array<TemplatePart> = [];\n\n  constructor(\n    // This property needs to remain unminified.\n    {strings, ['_$litType$']: type}: UncompiledTemplateResult,\n    options?: RenderOptions\n  ) {\n    let node: Node | null;\n    let nodeIndex = 0;\n    let attrNameIndex = 0;\n    const partCount = strings.length - 1;\n    const parts = this.parts;\n\n    // Create template element\n    const [html, attrNames] = getTemplateHtml(strings, type);\n    this.el = Template.createElement(html, options);\n    walker.currentNode = this.el.content;\n\n    // Re-parent SVG or MathML nodes into template root\n    if (type === SVG_RESULT || type === MATHML_RESULT) {\n      const wrapper = this.el.content.firstChild!;\n      wrapper.replaceWith(...wrapper.childNodes);\n    }\n\n    // Walk the template to find binding markers and create TemplateParts\n    while ((node = walker.nextNode()) !== null && parts.length < partCount) {\n      if (node.nodeType === 1) {\n        if (DEV_MODE) {\n          const tag = (node as Element).localName;\n          // Warn if `textarea` includes an expression and throw if `template`\n          // does since these are not supported. We do this by checking\n          // innerHTML for anything that looks like a marker. This catches\n          // cases like bindings in textarea there markers turn into text nodes.\n          if (\n            /^(?:textarea|template)$/i!.test(tag) &&\n            (node as Element).innerHTML.includes(marker)\n          ) {\n            const m =\n              `Expressions are not supported inside \\`${tag}\\` ` +\n              `elements. See https://lit.dev/msg/expression-in-${tag} for more ` +\n              `information.`;\n            if (tag === 'template') {\n              throw new Error(m);\n            } else issueWarning('', m);\n          }\n        }\n        // TODO (justinfagnani): for attempted dynamic tag names, we don't\n        // increment the bindingIndex, and it'll be off by 1 in the element\n        // and off by two after it.\n        if ((node as Element).hasAttributes()) {\n          for (const name of (node as Element).getAttributeNames()) {\n            if (name.endsWith(boundAttributeSuffix)) {\n              const realName = attrNames[attrNameIndex++];\n              const value = (node as Element).getAttribute(name)!;\n              const statics = value.split(marker);\n              const m = /([.?@])?(.*)/.exec(realName)!;\n              parts.push({\n                type: ATTRIBUTE_PART,\n                index: nodeIndex,\n                name: m[2],\n                strings: statics,\n                ctor:\n                  m[1] === '.'\n                    ? PropertyPart\n                    : m[1] === '?'\n                      ? BooleanAttributePart\n                      : m[1] === '@'\n                        ? EventPart\n                        : AttributePart,\n              });\n              (node as Element).removeAttribute(name);\n            } else if (name.startsWith(marker)) {\n              parts.push({\n                type: ELEMENT_PART,\n                index: nodeIndex,\n              });\n              (node as Element).removeAttribute(name);\n            }\n          }\n        }\n        // TODO (justinfagnani): benchmark the regex against testing for each\n        // of the 3 raw text element names.\n        if (rawTextElement.test((node as Element).tagName)) {\n          // For raw text elements we need to split the text content on\n          // markers, create a Text node for each segment, and create\n          // a TemplatePart for each marker.\n          const strings = (node as Element).textContent!.split(marker);\n          const lastIndex = strings.length - 1;\n          if (lastIndex > 0) {\n            (node as Element).textContent = trustedTypes\n              ? (trustedTypes.emptyScript as unknown as '')\n              : '';\n            // Generate a new text node for each literal section\n            // These nodes are also used as the markers for node parts\n            // We can't use empty text nodes as markers because they're\n            // normalized when cloning in IE (could simplify when\n            // IE is no longer supported)\n            for (let i = 0; i < lastIndex; i++) {\n              (node as Element).append(strings[i], createMarker());\n              // Walk past the marker node we just added\n              walker.nextNode();\n              parts.push({type: CHILD_PART, index: ++nodeIndex});\n            }\n            // Note because this marker is added after the walker's current\n            // node, it will be walked to in the outer loop (and ignored), so\n            // we don't need to adjust nodeIndex here\n            (node as Element).append(strings[lastIndex], createMarker());\n          }\n        }\n      } else if (node.nodeType === 8) {\n        const data = (node as Comment).data;\n        if (data === markerMatch) {\n          parts.push({type: CHILD_PART, index: nodeIndex});\n        } else {\n          let i = -1;\n          while ((i = (node as Comment).data.indexOf(marker, i + 1)) !== -1) {\n            // Comment node has a binding marker inside, make an inactive part\n            // The binding won't work, but subsequent bindings will\n            parts.push({type: COMMENT_PART, index: nodeIndex});\n            // Move to the end of the match\n            i += marker.length - 1;\n          }\n        }\n      }\n      nodeIndex++;\n    }\n\n    if (DEV_MODE) {\n      // If there was a duplicate attribute on a tag, then when the tag is\n      // parsed into an element the attribute gets de-duplicated. We can detect\n      // this mismatch if we haven't precisely consumed every attribute name\n      // when preparing the template. This works because `attrNames` is built\n      // from the template string and `attrNameIndex` comes from processing the\n      // resulting DOM.\n      if (attrNames.length !== attrNameIndex) {\n        throw new Error(\n          `Detected duplicate attribute bindings. This occurs if your template ` +\n            `has duplicate attributes on an element tag. For example ` +\n            `\"<input ?disabled=\\${true} ?disabled=\\${false}>\" contains a ` +\n            `duplicate \"disabled\" attribute. The error was detected in ` +\n            `the following template: \\n` +\n            '`' +\n            strings.join('${...}') +\n            '`'\n        );\n      }\n    }\n\n    // We could set walker.currentNode to another node here to prevent a memory\n    // leak, but every time we prepare a template, we immediately render it\n    // and re-use the walker in new TemplateInstance._clone().\n    debugLogEvent &&\n      debugLogEvent({\n        kind: 'template prep',\n        template: this,\n        clonableTemplate: this.el,\n        parts: this.parts,\n        strings,\n      });\n  }\n\n  // Overridden via `litHtmlPolyfillSupport` to provide platform support.\n  /** @nocollapse */\n  static createElement(html: TrustedHTML, _options?: RenderOptions) {\n    const el = d.createElement('template');\n    el.innerHTML = html as unknown as string;\n    return el;\n  }\n}\n\nexport interface Disconnectable {\n  _$parent?: Disconnectable;\n  _$disconnectableChildren?: Set<Disconnectable>;\n  // Rather than hold connection state on instances, Disconnectables recursively\n  // fetch the connection state from the RootPart they are connected in via\n  // getters up the Disconnectable tree via _$parent references. This pushes the\n  // cost of tracking the isConnected state to `AsyncDirectives`, and avoids\n  // needing to pass all Disconnectables (parts, template instances, and\n  // directives) their connection state each time it changes, which would be\n  // costly for trees that have no AsyncDirectives.\n  _$isConnected: boolean;\n}\n\nfunction resolveDirective(\n  part: ChildPart | AttributePart | ElementPart,\n  value: unknown,\n  parent: DirectiveParent = part,\n  attributeIndex?: number\n): unknown {\n  // Bail early if the value is explicitly noChange. Note, this means any\n  // nested directive is still attached and is not run.\n  if (value === noChange) {\n    return value;\n  }\n  let currentDirective =\n    attributeIndex !== undefined\n      ? (parent as AttributePart).__directives?.[attributeIndex]\n      : (parent as ChildPart | ElementPart | Directive).__directive;\n  const nextDirectiveConstructor = isPrimitive(value)\n    ? undefined\n    : // This property needs to remain unminified.\n      (value as DirectiveResult)['_$litDirective$'];\n  if (currentDirective?.constructor !== nextDirectiveConstructor) {\n    // This property needs to remain unminified.\n    currentDirective?.['_$notifyDirectiveConnectionChanged']?.(false);\n    if (nextDirectiveConstructor === undefined) {\n      currentDirective = undefined;\n    } else {\n      currentDirective = new nextDirectiveConstructor(part as PartInfo);\n      currentDirective._$initialize(part, parent, attributeIndex);\n    }\n    if (attributeIndex !== undefined) {\n      ((parent as AttributePart).__directives ??= [])[attributeIndex] =\n        currentDirective;\n    } else {\n      (parent as ChildPart | Directive).__directive = currentDirective;\n    }\n  }\n  if (currentDirective !== undefined) {\n    value = resolveDirective(\n      part,\n      currentDirective._$resolve(part, (value as DirectiveResult).values),\n      currentDirective,\n      attributeIndex\n    );\n  }\n  return value;\n}\n\nexport type {TemplateInstance};\n/**\n * An updateable instance of a Template. Holds references to the Parts used to\n * update the template instance.\n */\nclass TemplateInstance implements Disconnectable {\n  _$template: Template;\n  _$parts: Array<Part | undefined> = [];\n\n  /** @internal */\n  _$parent: ChildPart;\n  /** @internal */\n  _$disconnectableChildren?: Set<Disconnectable> = undefined;\n\n  constructor(template: Template, parent: ChildPart) {\n    this._$template = template;\n    this._$parent = parent;\n  }\n\n  // Called by ChildPart parentNode getter\n  get parentNode() {\n    return this._$parent.parentNode;\n  }\n\n  // See comment in Disconnectable interface for why this is a getter\n  get _$isConnected() {\n    return this._$parent._$isConnected;\n  }\n\n  // This method is separate from the constructor because we need to return a\n  // DocumentFragment and we don't want to hold onto it with an instance field.\n  _clone(options: RenderOptions | undefined) {\n    const {\n      el: {content},\n      parts: parts,\n    } = this._$template;\n    const fragment = (options?.creationScope ?? d).importNode(content, true);\n    walker.currentNode = fragment;\n\n    let node = walker.nextNode()!;\n    let nodeIndex = 0;\n    let partIndex = 0;\n    let templatePart = parts[0];\n\n    while (templatePart !== undefined) {\n      if (nodeIndex === templatePart.index) {\n        let part: Part | undefined;\n        if (templatePart.type === CHILD_PART) {\n          part = new ChildPart(\n            node as HTMLElement,\n            node.nextSibling,\n            this,\n            options\n          );\n        } else if (templatePart.type === ATTRIBUTE_PART) {\n          part = new templatePart.ctor(\n            node as HTMLElement,\n            templatePart.name,\n            templatePart.strings,\n            this,\n            options\n          );\n        } else if (templatePart.type === ELEMENT_PART) {\n          part = new ElementPart(node as HTMLElement, this, options);\n        }\n        this._$parts.push(part);\n        templatePart = parts[++partIndex];\n      }\n      if (nodeIndex !== templatePart?.index) {\n        node = walker.nextNode()!;\n        nodeIndex++;\n      }\n    }\n    // We need to set the currentNode away from the cloned tree so that we\n    // don't hold onto the tree even if the tree is detached and should be\n    // freed.\n    walker.currentNode = d;\n    return fragment;\n  }\n\n  _update(values: Array<unknown>) {\n    let i = 0;\n    for (const part of this._$parts) {\n      if (part !== undefined) {\n        debugLogEvent &&\n          debugLogEvent({\n            kind: 'set part',\n            part,\n            value: values[i],\n            valueIndex: i,\n            values,\n            templateInstance: this,\n          });\n        if ((part as AttributePart).strings !== undefined) {\n          (part as AttributePart)._$setValue(values, part as AttributePart, i);\n          // The number of values the part consumes is part.strings.length - 1\n          // since values are in between template spans. We increment i by 1\n          // later in the loop, so increment it by part.strings.length - 2 here\n          i += (part as AttributePart).strings!.length - 2;\n        } else {\n          part._$setValue(values[i]);\n        }\n      }\n      i++;\n    }\n  }\n}\n\n/*\n * Parts\n */\ntype AttributeTemplatePart = {\n  readonly type: typeof ATTRIBUTE_PART;\n  readonly index: number;\n  readonly name: string;\n  readonly ctor: typeof AttributePart;\n  readonly strings: ReadonlyArray<string>;\n};\ntype ChildTemplatePart = {\n  readonly type: typeof CHILD_PART;\n  readonly index: number;\n};\ntype ElementTemplatePart = {\n  readonly type: typeof ELEMENT_PART;\n  readonly index: number;\n};\ntype CommentTemplatePart = {\n  readonly type: typeof COMMENT_PART;\n  readonly index: number;\n};\n\n/**\n * A TemplatePart represents a dynamic part in a template, before the template\n * is instantiated. When a template is instantiated Parts are created from\n * TemplateParts.\n */\ntype TemplatePart =\n  | ChildTemplatePart\n  | AttributeTemplatePart\n  | ElementTemplatePart\n  | CommentTemplatePart;\n\nexport type Part =\n  | ChildPart\n  | AttributePart\n  | PropertyPart\n  | BooleanAttributePart\n  | ElementPart\n  | EventPart;\n\nexport type {ChildPart};\nclass ChildPart implements Disconnectable {\n  readonly type = CHILD_PART;\n  readonly options: RenderOptions | undefined;\n  _$committedValue: unknown = nothing;\n  /** @internal */\n  __directive?: Directive;\n  /** @internal */\n  _$startNode: ChildNode;\n  /** @internal */\n  _$endNode: ChildNode | null;\n  private _textSanitizer: ValueSanitizer | undefined;\n  /** @internal */\n  _$parent: Disconnectable | undefined;\n  /**\n   * Connection state for RootParts only (i.e. ChildPart without _$parent\n   * returned from top-level `render`). This field is unused otherwise. The\n   * intention would be clearer if we made `RootPart` a subclass of `ChildPart`\n   * with this field (and a different _$isConnected getter), but the subclass\n   * caused a perf regression, possibly due to making call sites polymorphic.\n   * @internal\n   */\n  __isConnected: boolean;\n\n  // See comment in Disconnectable interface for why this is a getter\n  get _$isConnected() {\n    // ChildParts that are not at the root should always be created with a\n    // parent; only RootChildNode's won't, so they return the local isConnected\n    // state\n    return this._$parent?._$isConnected ?? this.__isConnected;\n  }\n\n  // The following fields will be patched onto ChildParts when required by\n  // AsyncDirective\n  /** @internal */\n  _$disconnectableChildren?: Set<Disconnectable> = undefined;\n  /** @internal */\n  _$notifyConnectionChanged?(\n    isConnected: boolean,\n    removeFromParent?: boolean,\n    from?: number\n  ): void;\n  /** @internal */\n  _$reparentDisconnectables?(parent: Disconnectable): void;\n\n  constructor(\n    startNode: ChildNode,\n    endNode: ChildNode | null,\n    parent: TemplateInstance | ChildPart | undefined,\n    options: RenderOptions | undefined\n  ) {\n    this._$startNode = startNode;\n    this._$endNode = endNode;\n    this._$parent = parent;\n    this.options = options;\n    // Note __isConnected is only ever accessed on RootParts (i.e. when there is\n    // no _$parent); the value on a non-root-part is \"don't care\", but checking\n    // for parent would be more code\n    this.__isConnected = options?.isConnected ?? true;\n    if (ENABLE_EXTRA_SECURITY_HOOKS) {\n      // Explicitly initialize for consistent class shape.\n      this._textSanitizer = undefined;\n    }\n  }\n\n  /**\n   * The parent node into which the part renders its content.\n   *\n   * A ChildPart's content consists of a range of adjacent child nodes of\n   * `.parentNode`, possibly bordered by 'marker nodes' (`.startNode` and\n   * `.endNode`).\n   *\n   * - If both `.startNode` and `.endNode` are non-null, then the part's content\n   * consists of all siblings between `.startNode` and `.endNode`, exclusively.\n   *\n   * - If `.startNode` is non-null but `.endNode` is null, then the part's\n   * content consists of all siblings following `.startNode`, up to and\n   * including the last child of `.parentNode`. If `.endNode` is non-null, then\n   * `.startNode` will always be non-null.\n   *\n   * - If both `.endNode` and `.startNode` are null, then the part's content\n   * consists of all child nodes of `.parentNode`.\n   */\n  get parentNode(): Node {\n    let parentNode: Node = wrap(this._$startNode).parentNode!;\n    const parent = this._$parent;\n    if (\n      parent !== undefined &&\n      parentNode?.nodeType === 11 /* Node.DOCUMENT_FRAGMENT */\n    ) {\n      // If the parentNode is a DocumentFragment, it may be because the DOM is\n      // still in the cloned fragment during initial render; if so, get the real\n      // parentNode the part will be committed into by asking the parent.\n      parentNode = (parent as ChildPart | TemplateInstance).parentNode;\n    }\n    return parentNode;\n  }\n\n  /**\n   * The part's leading marker node, if any. See `.parentNode` for more\n   * information.\n   */\n  get startNode(): Node | null {\n    return this._$startNode;\n  }\n\n  /**\n   * The part's trailing marker node, if any. See `.parentNode` for more\n   * information.\n   */\n  get endNode(): Node | null {\n    return this._$endNode;\n  }\n\n  _$setValue(value: unknown, directiveParent: DirectiveParent = this): void {\n    if (DEV_MODE && this.parentNode === null) {\n      throw new Error(\n        `This \\`ChildPart\\` has no \\`parentNode\\` and therefore cannot accept a value. This likely means the element containing the part was manipulated in an unsupported way outside of Lit's control such that the part's marker nodes were ejected from DOM. For example, setting the element's \\`innerHTML\\` or \\`textContent\\` can do this.`\n      );\n    }\n    value = resolveDirective(this, value, directiveParent);\n    if (isPrimitive(value)) {\n      // Non-rendering child values. It's important that these do not render\n      // empty text nodes to avoid issues with preventing default <slot>\n      // fallback content.\n      if (value === nothing || value == null || value === '') {\n        if (this._$committedValue !== nothing) {\n          debugLogEvent &&\n            debugLogEvent({\n              kind: 'commit nothing to child',\n              start: this._$startNode,\n              end: this._$endNode,\n              parent: this._$parent,\n              options: this.options,\n            });\n          this._$clear();\n        }\n        this._$committedValue = nothing;\n      } else if (value !== this._$committedValue && value !== noChange) {\n        this._commitText(value);\n      }\n      // This property needs to remain unminified.\n    } else if ((value as TemplateResult)['_$litType$'] !== undefined) {\n      this._commitTemplateResult(value as TemplateResult);\n    } else if ((value as Node).nodeType !== undefined) {\n      if (DEV_MODE && this.options?.host === value) {\n        this._commitText(\n          `[probable mistake: rendered a template's host in itself ` +\n            `(commonly caused by writing \\${this} in a template]`\n        );\n        console.warn(\n          `Attempted to render the template host`,\n          value,\n          `inside itself. This is almost always a mistake, and in dev mode `,\n          `we render some warning text. In production however, we'll `,\n          `render it, which will usually result in an error, and sometimes `,\n          `in the element disappearing from the DOM.`\n        );\n        return;\n      }\n      this._commitNode(value as Node);\n    } else if (isIterable(value)) {\n      this._commitIterable(value);\n    } else {\n      // Fallback, will render the string representation\n      this._commitText(value);\n    }\n  }\n\n  private _insert<T extends Node>(node: T) {\n    return wrap(wrap(this._$startNode).parentNode!).insertBefore(\n      node,\n      this._$endNode\n    );\n  }\n\n  private _commitNode(value: Node): void {\n    if (this._$committedValue !== value) {\n      this._$clear();\n      if (\n        ENABLE_EXTRA_SECURITY_HOOKS &&\n        sanitizerFactoryInternal !== noopSanitizer\n      ) {\n        const parentNodeName = this._$startNode.parentNode?.nodeName;\n        if (parentNodeName === 'STYLE' || parentNodeName === 'SCRIPT') {\n          let message = 'Forbidden';\n          if (DEV_MODE) {\n            if (parentNodeName === 'STYLE') {\n              message =\n                `Lit does not support binding inside style nodes. ` +\n                `This is a security risk, as style injection attacks can ` +\n                `exfiltrate data and spoof UIs. ` +\n                `Consider instead using css\\`...\\` literals ` +\n                `to compose styles, and do dynamic styling with ` +\n                `css custom properties, ::parts, <slot>s, ` +\n                `and by mutating the DOM rather than stylesheets.`;\n            } else {\n              message =\n                `Lit does not support binding inside script nodes. ` +\n                `This is a security risk, as it could allow arbitrary ` +\n                `code execution.`;\n            }\n          }\n          throw new Error(message);\n        }\n      }\n      debugLogEvent &&\n        debugLogEvent({\n          kind: 'commit node',\n          start: this._$startNode,\n          parent: this._$parent,\n          value: value,\n          options: this.options,\n        });\n      this._$committedValue = this._insert(value);\n    }\n  }\n\n  private _commitText(value: unknown): void {\n    // If the committed value is a primitive it means we called _commitText on\n    // the previous render, and we know that this._$startNode.nextSibling is a\n    // Text node. We can now just replace the text content (.data) of the node.\n    if (\n      this._$committedValue !== nothing &&\n      isPrimitive(this._$committedValue)\n    ) {\n      const node = wrap(this._$startNode).nextSibling as Text;\n      if (ENABLE_EXTRA_SECURITY_HOOKS) {\n        if (this._textSanitizer === undefined) {\n          this._textSanitizer = createSanitizer(node, 'data', 'property');\n        }\n        value = this._textSanitizer(value);\n      }\n      debugLogEvent &&\n        debugLogEvent({\n          kind: 'commit text',\n          node,\n          value,\n          options: this.options,\n        });\n      (node as Text).data = value as string;\n    } else {\n      if (ENABLE_EXTRA_SECURITY_HOOKS) {\n        const textNode = d.createTextNode('');\n        this._commitNode(textNode);\n        // When setting text content, for security purposes it matters a lot\n        // what the parent is. For example, <style> and <script> need to be\n        // handled with care, while <span> does not. So first we need to put a\n        // text node into the document, then we can sanitize its content.\n        if (this._textSanitizer === undefined) {\n          this._textSanitizer = createSanitizer(textNode, 'data', 'property');\n        }\n        value = this._textSanitizer(value);\n        debugLogEvent &&\n          debugLogEvent({\n            kind: 'commit text',\n            node: textNode,\n            value,\n            options: this.options,\n          });\n        textNode.data = value as string;\n      } else {\n        this._commitNode(d.createTextNode(value as string));\n        debugLogEvent &&\n          debugLogEvent({\n            kind: 'commit text',\n            node: wrap(this._$startNode).nextSibling as Text,\n            value,\n            options: this.options,\n          });\n      }\n    }\n    this._$committedValue = value;\n  }\n\n  private _commitTemplateResult(\n    result: TemplateResult | CompiledTemplateResult\n  ): void {\n    // This property needs to remain unminified.\n    const {values, ['_$litType$']: type} = result;\n    // If $litType$ is a number, result is a plain TemplateResult and we get\n    // the template from the template cache. If not, result is a\n    // CompiledTemplateResult and _$litType$ is a CompiledTemplate and we need\n    // to create the <template> element the first time we see it.\n    const template: Template | CompiledTemplate =\n      typeof type === 'number'\n        ? this._$getTemplate(result as UncompiledTemplateResult)\n        : (type.el === undefined &&\n            (type.el = Template.createElement(\n              trustFromTemplateString(type.h, type.h[0]),\n              this.options\n            )),\n          type);\n\n    if ((this._$committedValue as TemplateInstance)?._$template === template) {\n      debugLogEvent &&\n        debugLogEvent({\n          kind: 'template updating',\n          template,\n          instance: this._$committedValue as TemplateInstance,\n          parts: (this._$committedValue as TemplateInstance)._$parts,\n          options: this.options,\n          values,\n        });\n      (this._$committedValue as TemplateInstance)._update(values);\n    } else {\n      const instance = new TemplateInstance(template as Template, this);\n      const fragment = instance._clone(this.options);\n      debugLogEvent &&\n        debugLogEvent({\n          kind: 'template instantiated',\n          template,\n          instance,\n          parts: instance._$parts,\n          options: this.options,\n          fragment,\n          values,\n        });\n      instance._update(values);\n      debugLogEvent &&\n        debugLogEvent({\n          kind: 'template instantiated and updated',\n          template,\n          instance,\n          parts: instance._$parts,\n          options: this.options,\n          fragment,\n          values,\n        });\n      this._commitNode(fragment);\n      this._$committedValue = instance;\n    }\n  }\n\n  // Overridden via `litHtmlPolyfillSupport` to provide platform support.\n  /** @internal */\n  _$getTemplate(result: UncompiledTemplateResult) {\n    let template = templateCache.get(result.strings);\n    if (template === undefined) {\n      templateCache.set(result.strings, (template = new Template(result)));\n    }\n    return template;\n  }\n\n  private _commitIterable(value: Iterable<unknown>): void {\n    // For an Iterable, we create a new InstancePart per item, then set its\n    // value to the item. This is a little bit of overhead for every item in\n    // an Iterable, but it lets us recurse easily and efficiently update Arrays\n    // of TemplateResults that will be commonly returned from expressions like:\n    // array.map((i) => html`${i}`), by reusing existing TemplateInstances.\n\n    // If value is an array, then the previous render was of an\n    // iterable and value will contain the ChildParts from the previous\n    // render. If value is not an array, clear this part and make a new\n    // array for ChildParts.\n    if (!isArray(this._$committedValue)) {\n      this._$committedValue = [];\n      this._$clear();\n    }\n\n    // Lets us keep track of how many items we stamped so we can clear leftover\n    // items from a previous render\n    const itemParts = this._$committedValue as ChildPart[];\n    let partIndex = 0;\n    let itemPart: ChildPart | undefined;\n\n    for (const item of value) {\n      if (partIndex === itemParts.length) {\n        // If no existing part, create a new one\n        // TODO (justinfagnani): test perf impact of always creating two parts\n        // instead of sharing parts between nodes\n        // https://github.com/lit/lit/issues/1266\n        itemParts.push(\n          (itemPart = new ChildPart(\n            this._insert(createMarker()),\n            this._insert(createMarker()),\n            this,\n            this.options\n          ))\n        );\n      } else {\n        // Reuse an existing part\n        itemPart = itemParts[partIndex];\n      }\n      itemPart._$setValue(item);\n      partIndex++;\n    }\n\n    if (partIndex < itemParts.length) {\n      // itemParts always have end nodes\n      this._$clear(\n        itemPart && wrap(itemPart._$endNode!).nextSibling,\n        partIndex\n      );\n      // Truncate the parts array so _value reflects the current state\n      itemParts.length = partIndex;\n    }\n  }\n\n  /**\n   * Removes the nodes contained within this Part from the DOM.\n   *\n   * @param start Start node to clear from, for clearing a subset of the part's\n   *     DOM (used when truncating iterables)\n   * @param from  When `start` is specified, the index within the iterable from\n   *     which ChildParts are being removed, used for disconnecting directives in\n   *     those Parts.\n   *\n   * @internal\n   */\n  _$clear(\n    start: ChildNode | null = wrap(this._$startNode).nextSibling,\n    from?: number\n  ) {\n    this._$notifyConnectionChanged?.(false, true, from);\n    while (start && start !== this._$endNode) {\n      const n = wrap(start!).nextSibling;\n      (wrap(start!) as Element).remove();\n      start = n;\n    }\n  }\n  /**\n   * Implementation of RootPart's `isConnected`. Note that this method\n   * should only be called on `RootPart`s (the `ChildPart` returned from a\n   * top-level `render()` call). It has no effect on non-root ChildParts.\n   * @param isConnected Whether to set\n   * @internal\n   */\n  setConnected(isConnected: boolean) {\n    if (this._$parent === undefined) {\n      this.__isConnected = isConnected;\n      this._$notifyConnectionChanged?.(isConnected);\n    } else if (DEV_MODE) {\n      throw new Error(\n        'part.setConnected() may only be called on a ' +\n          'RootPart returned from render().'\n      );\n    }\n  }\n}\n\n/**\n * A top-level `ChildPart` returned from `render` that manages the connected\n * state of `AsyncDirective`s created throughout the tree below it.\n */\nexport interface RootPart extends ChildPart {\n  /**\n   * Sets the connection state for `AsyncDirective`s contained within this root\n   * ChildPart.\n   *\n   * lit-html does not automatically monitor the connectedness of DOM rendered;\n   * as such, it is the responsibility of the caller to `render` to ensure that\n   * `part.setConnected(false)` is called before the part object is potentially\n   * discarded, to ensure that `AsyncDirective`s have a chance to dispose of\n   * any resources being held. If a `RootPart` that was previously\n   * disconnected is subsequently re-connected (and its `AsyncDirective`s should\n   * re-connect), `setConnected(true)` should be called.\n   *\n   * @param isConnected Whether directives within this tree should be connected\n   * or not\n   */\n  setConnected(isConnected: boolean): void;\n}\n\nexport type {AttributePart};\nclass AttributePart implements Disconnectable {\n  readonly type:\n    | typeof ATTRIBUTE_PART\n    | typeof PROPERTY_PART\n    | typeof BOOLEAN_ATTRIBUTE_PART\n    | typeof EVENT_PART = ATTRIBUTE_PART;\n  readonly element: HTMLElement;\n  readonly name: string;\n  readonly options: RenderOptions | undefined;\n\n  /**\n   * If this attribute part represents an interpolation, this contains the\n   * static strings of the interpolation. For single-value, complete bindings,\n   * this is undefined.\n   */\n  readonly strings?: ReadonlyArray<string>;\n  /** @internal */\n  _$committedValue: unknown | Array<unknown> = nothing;\n  /** @internal */\n  __directives?: Array<Directive | undefined>;\n  /** @internal */\n  _$parent: Disconnectable;\n  /** @internal */\n  _$disconnectableChildren?: Set<Disconnectable> = undefined;\n\n  protected _sanitizer: ValueSanitizer | undefined;\n\n  get tagName() {\n    return this.element.tagName;\n  }\n\n  // See comment in Disconnectable interface for why this is a getter\n  get _$isConnected() {\n    return this._$parent._$isConnected;\n  }\n\n  constructor(\n    element: HTMLElement,\n    name: string,\n    strings: ReadonlyArray<string>,\n    parent: Disconnectable,\n    options: RenderOptions | undefined\n  ) {\n    this.element = element;\n    this.name = name;\n    this._$parent = parent;\n    this.options = options;\n    if (strings.length > 2 || strings[0] !== '' || strings[1] !== '') {\n      this._$committedValue = new Array(strings.length - 1).fill(new String());\n      this.strings = strings;\n    } else {\n      this._$committedValue = nothing;\n    }\n    if (ENABLE_EXTRA_SECURITY_HOOKS) {\n      this._sanitizer = undefined;\n    }\n  }\n\n  /**\n   * Sets the value of this part by resolving the value from possibly multiple\n   * values and static strings and committing it to the DOM.\n   * If this part is single-valued, `this._strings` will be undefined, and the\n   * method will be called with a single value argument. If this part is\n   * multi-value, `this._strings` will be defined, and the method is called\n   * with the value array of the part's owning TemplateInstance, and an offset\n   * into the value array from which the values should be read.\n   * This method is overloaded this way to eliminate short-lived array slices\n   * of the template instance values, and allow a fast-path for single-valued\n   * parts.\n   *\n   * @param value The part value, or an array of values for multi-valued parts\n   * @param valueIndex the index to start reading values from. `undefined` for\n   *   single-valued parts\n   * @param noCommit causes the part to not commit its value to the DOM. Used\n   *   in hydration to prime attribute parts with their first-rendered value,\n   *   but not set the attribute, and in SSR to no-op the DOM operation and\n   *   capture the value for serialization.\n   *\n   * @internal\n   */\n  _$setValue(\n    value: unknown | Array<unknown>,\n    directiveParent: DirectiveParent = this,\n    valueIndex?: number,\n    noCommit?: boolean\n  ) {\n    const strings = this.strings;\n\n    // Whether any of the values has changed, for dirty-checking\n    let change = false;\n\n    if (strings === undefined) {\n      // Single-value binding case\n      value = resolveDirective(this, value, directiveParent, 0);\n      change =\n        !isPrimitive(value) ||\n        (value !== this._$committedValue && value !== noChange);\n      if (change) {\n        this._$committedValue = value;\n      }\n    } else {\n      // Interpolation case\n      const values = value as Array<unknown>;\n      value = strings[0];\n\n      let i, v;\n      for (i = 0; i < strings.length - 1; i++) {\n        v = resolveDirective(this, values[valueIndex! + i], directiveParent, i);\n\n        if (v === noChange) {\n          // If the user-provided value is `noChange`, use the previous value\n          v = (this._$committedValue as Array<unknown>)[i];\n        }\n        change ||=\n          !isPrimitive(v) || v !== (this._$committedValue as Array<unknown>)[i];\n        if (v === nothing) {\n          value = nothing;\n        } else if (value !== nothing) {\n          value += (v ?? '') + strings[i + 1];\n        }\n        // We always record each value, even if one is `nothing`, for future\n        // change detection.\n        (this._$committedValue as Array<unknown>)[i] = v;\n      }\n    }\n    if (change && !noCommit) {\n      this._commitValue(value);\n    }\n  }\n\n  /** @internal */\n  _commitValue(value: unknown) {\n    if (value === nothing) {\n      (wrap(this.element) as Element).removeAttribute(this.name);\n    } else {\n      if (ENABLE_EXTRA_SECURITY_HOOKS) {\n        if (this._sanitizer === undefined) {\n          this._sanitizer = sanitizerFactoryInternal(\n            this.element,\n            this.name,\n            'attribute'\n          );\n        }\n        value = this._sanitizer(value ?? '');\n      }\n      debugLogEvent &&\n        debugLogEvent({\n          kind: 'commit attribute',\n          element: this.element,\n          name: this.name,\n          value,\n          options: this.options,\n        });\n      (wrap(this.element) as Element).setAttribute(\n        this.name,\n        (value ?? '') as string\n      );\n    }\n  }\n}\n\nexport type {PropertyPart};\nclass PropertyPart extends AttributePart {\n  override readonly type = PROPERTY_PART;\n\n  /** @internal */\n  override _commitValue(value: unknown) {\n    if (ENABLE_EXTRA_SECURITY_HOOKS) {\n      if (this._sanitizer === undefined) {\n        this._sanitizer = sanitizerFactoryInternal(\n          this.element,\n          this.name,\n          'property'\n        );\n      }\n      value = this._sanitizer(value);\n    }\n    debugLogEvent &&\n      debugLogEvent({\n        kind: 'commit property',\n        element: this.element,\n        name: this.name,\n        value,\n        options: this.options,\n      });\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    (this.element as any)[this.name] = value === nothing ? undefined : value;\n  }\n}\n\nexport type {BooleanAttributePart};\nclass BooleanAttributePart extends AttributePart {\n  override readonly type = BOOLEAN_ATTRIBUTE_PART;\n\n  /** @internal */\n  override _commitValue(value: unknown) {\n    debugLogEvent &&\n      debugLogEvent({\n        kind: 'commit boolean attribute',\n        element: this.element,\n        name: this.name,\n        value: !!(value && value !== nothing),\n        options: this.options,\n      });\n    (wrap(this.element) as Element).toggleAttribute(\n      this.name,\n      !!value && value !== nothing\n    );\n  }\n}\n\ntype EventListenerWithOptions = EventListenerOrEventListenerObject &\n  Partial<AddEventListenerOptions>;\n\n/**\n * An AttributePart that manages an event listener via add/removeEventListener.\n *\n * This part works by adding itself as the event listener on an element, then\n * delegating to the value passed to it. This reduces the number of calls to\n * add/removeEventListener if the listener changes frequently, such as when an\n * inline function is used as a listener.\n *\n * Because event options are passed when adding listeners, we must take case\n * to add and remove the part as a listener when the event options change.\n */\nexport type {EventPart};\nclass EventPart extends AttributePart {\n  override readonly type = EVENT_PART;\n\n  constructor(\n    element: HTMLElement,\n    name: string,\n    strings: ReadonlyArray<string>,\n    parent: Disconnectable,\n    options: RenderOptions | undefined\n  ) {\n    super(element, name, strings, parent, options);\n\n    if (DEV_MODE && this.strings !== undefined) {\n      throw new Error(\n        `A \\`<${element.localName}>\\` has a \\`@${name}=...\\` listener with ` +\n          'invalid content. Event listeners in templates must have exactly ' +\n          'one expression and no surrounding text.'\n      );\n    }\n  }\n\n  // EventPart does not use the base _$setValue/_resolveValue implementation\n  // since the dirty checking is more complex\n  /** @internal */\n  override _$setValue(\n    newListener: unknown,\n    directiveParent: DirectiveParent = this\n  ) {\n    newListener =\n      resolveDirective(this, newListener, directiveParent, 0) ?? nothing;\n    if (newListener === noChange) {\n      return;\n    }\n    const oldListener = this._$committedValue;\n\n    // If the new value is nothing or any options change we have to remove the\n    // part as a listener.\n    const shouldRemoveListener =\n      (newListener === nothing && oldListener !== nothing) ||\n      (newListener as EventListenerWithOptions).capture !==\n        (oldListener as EventListenerWithOptions).capture ||\n      (newListener as EventListenerWithOptions).once !==\n        (oldListener as EventListenerWithOptions).once ||\n      (newListener as EventListenerWithOptions).passive !==\n        (oldListener as EventListenerWithOptions).passive;\n\n    // If the new value is not nothing and we removed the listener, we have\n    // to add the part as a listener.\n    const shouldAddListener =\n      newListener !== nothing &&\n      (oldListener === nothing || shouldRemoveListener);\n\n    debugLogEvent &&\n      debugLogEvent({\n        kind: 'commit event listener',\n        element: this.element,\n        name: this.name,\n        value: newListener,\n        options: this.options,\n        removeListener: shouldRemoveListener,\n        addListener: shouldAddListener,\n        oldListener,\n      });\n    if (shouldRemoveListener) {\n      this.element.removeEventListener(\n        this.name,\n        this,\n        oldListener as EventListenerWithOptions\n      );\n    }\n    if (shouldAddListener) {\n      // Beware: IE11 and Chrome 41 don't like using the listener as the\n      // options object. Figure out how to deal w/ this in IE11 - maybe\n      // patch addEventListener?\n      this.element.addEventListener(\n        this.name,\n        this,\n        newListener as EventListenerWithOptions\n      );\n    }\n    this._$committedValue = newListener;\n  }\n\n  handleEvent(event: Event) {\n    if (typeof this._$committedValue === 'function') {\n      this._$committedValue.call(this.options?.host ?? this.element, event);\n    } else {\n      (this._$committedValue as EventListenerObject).handleEvent(event);\n    }\n  }\n}\n\nexport type {ElementPart};\nclass ElementPart implements Disconnectable {\n  readonly type = ELEMENT_PART;\n\n  /** @internal */\n  __directive?: Directive;\n\n  // This is to ensure that every Part has a _$committedValue\n  _$committedValue: undefined;\n\n  /** @internal */\n  _$parent!: Disconnectable;\n\n  /** @internal */\n  _$disconnectableChildren?: Set<Disconnectable> = undefined;\n\n  options: RenderOptions | undefined;\n\n  constructor(\n    public element: Element,\n    parent: Disconnectable,\n    options: RenderOptions | undefined\n  ) {\n    this._$parent = parent;\n    this.options = options;\n  }\n\n  // See comment in Disconnectable interface for why this is a getter\n  get _$isConnected() {\n    return this._$parent._$isConnected;\n  }\n\n  _$setValue(value: unknown): void {\n    debugLogEvent &&\n      debugLogEvent({\n        kind: 'commit to element binding',\n        element: this.element,\n        value,\n        options: this.options,\n      });\n    resolveDirective(this, value);\n  }\n}\n\n/**\n * END USERS SHOULD NOT RELY ON THIS OBJECT.\n *\n * Private exports for use by other Lit packages, not intended for use by\n * external users.\n *\n * We currently do not make a mangled rollup build of the lit-ssr code. In order\n * to keep a number of (otherwise private) top-level exports mangled in the\n * client side code, we export a _$LH object containing those members (or\n * helper methods for accessing private fields of those members), and then\n * re-export them for use in lit-ssr. This keeps lit-ssr agnostic to whether the\n * client-side code is being used in `dev` mode or `prod` mode.\n *\n * This has a unique name, to disambiguate it from private exports in\n * lit-element, which re-exports all of lit-html.\n *\n * @private\n */\nexport const _$LH = {\n  // Used in lit-ssr\n  _boundAttributeSuffix: boundAttributeSuffix,\n  _marker: marker,\n  _markerMatch: markerMatch,\n  _HTML_RESULT: HTML_RESULT,\n  _getTemplateHtml: getTemplateHtml,\n  // Used in tests and private-ssr-support\n  _TemplateInstance: TemplateInstance,\n  _isIterable: isIterable,\n  _resolveDirective: resolveDirective,\n  _ChildPart: ChildPart,\n  _AttributePart: AttributePart,\n  _BooleanAttributePart: BooleanAttributePart,\n  _EventPart: EventPart,\n  _PropertyPart: PropertyPart,\n  _ElementPart: ElementPart,\n};\n\n// Apply polyfills if available\nconst polyfillSupport = DEV_MODE\n  ? global.litHtmlPolyfillSupportDevMode\n  : global.litHtmlPolyfillSupport;\npolyfillSupport?.(Template, ChildPart);\n\n// IMPORTANT: do not change the property name or the assignment expression.\n// This line will be used in regexes to search for lit-html usage.\n(global.litHtmlVersions ??= []).push('3.2.1');\nif (DEV_MODE && global.litHtmlVersions.length > 1) {\n  issueWarning!(\n    'multiple-versions',\n    `Multiple versions of Lit loaded. ` +\n      `Loading multiple versions is not recommended.`\n  );\n}\n\n/**\n * Renders a value, usually a lit-html TemplateResult, to the container.\n *\n * This example renders the text \"Hello, Zoe!\" inside a paragraph tag, appending\n * it to the container `document.body`.\n *\n * ```js\n * import {html, render} from 'lit';\n *\n * const name = \"Zoe\";\n * render(html`<p>Hello, ${name}!</p>`, document.body);\n * ```\n *\n * @param value Any [renderable\n *   value](https://lit.dev/docs/templates/expressions/#child-expressions),\n *   typically a {@linkcode TemplateResult} created by evaluating a template tag\n *   like {@linkcode html} or {@linkcode svg}.\n * @param container A DOM container to render to. The first render will append\n *   the rendered value to the container, and subsequent renders will\n *   efficiently update the rendered value if the same result type was\n *   previously rendered there.\n * @param options See {@linkcode RenderOptions} for options documentation.\n * @see\n * {@link https://lit.dev/docs/libraries/standalone-templates/#rendering-lit-html-templates| Rendering Lit HTML Templates}\n */\nexport const render = (\n  value: unknown,\n  container: HTMLElement | DocumentFragment,\n  options?: RenderOptions\n): RootPart => {\n  if (DEV_MODE && container == null) {\n    // Give a clearer error message than\n    //     Uncaught TypeError: Cannot read properties of null (reading\n    //     '_$litPart$')\n    // which reads like an internal Lit error.\n    throw new TypeError(`The container to render into may not be ${container}`);\n  }\n  const renderId = DEV_MODE ? debugLogRenderId++ : 0;\n  const partOwnerNode = options?.renderBefore ?? container;\n  // This property needs to remain unminified.\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  let part: ChildPart = (partOwnerNode as any)['_$litPart$'];\n  debugLogEvent &&\n    debugLogEvent({\n      kind: 'begin render',\n      id: renderId,\n      value,\n      container,\n      options,\n      part,\n    });\n  if (part === undefined) {\n    const endNode = options?.renderBefore ?? null;\n    // This property needs to remain unminified.\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    (partOwnerNode as any)['_$litPart$'] = part = new ChildPart(\n      container.insertBefore(createMarker(), endNode),\n      endNode,\n      undefined,\n      options ?? {}\n    );\n  }\n  part._$setValue(value);\n  debugLogEvent &&\n    debugLogEvent({\n      kind: 'end render',\n      id: renderId,\n      value,\n      container,\n      options,\n      part,\n    });\n  return part as RootPart;\n};\n\nif (ENABLE_EXTRA_SECURITY_HOOKS) {\n  render.setSanitizer = setSanitizer;\n  render.createSanitizer = createSanitizer;\n  if (DEV_MODE) {\n    render._testOnlyClearSanitizerFactoryDoNotCallOrElse =\n      _testOnlyClearSanitizerFactoryDoNotCallOrElse;\n  }\n}\n", "/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n\n/**\n * The main LitElement module, which defines the {@linkcode LitElement} base\n * class and related APIs.\n *\n * LitElement components can define a template and a set of observed\n * properties. Changing an observed property triggers a re-render of the\n * element.\n *\n * Import {@linkcode LitElement} and {@linkcode html} from this module to\n * create a component:\n *\n *  ```js\n * import {LitElement, html} from 'lit-element';\n *\n * class MyElement extends LitElement {\n *\n *   // Declare observed properties\n *   static get properties() {\n *     return {\n *       adjective: {}\n *     }\n *   }\n *\n *   constructor() {\n *     this.adjective = 'awesome';\n *   }\n *\n *   // Define the element's template\n *   render() {\n *     return html`<p>your ${adjective} template here</p>`;\n *   }\n * }\n *\n * customElements.define('my-element', MyElement);\n * ```\n *\n * `LitElement` extends {@linkcode ReactiveElement} and adds lit-html\n * templating. The `ReactiveElement` class is provided for users that want to\n * build their own custom element base classes that don't use lit-html.\n *\n * @packageDocumentation\n */\nimport {PropertyValues, ReactiveElement} from '@lit/reactive-element';\nimport {render, RenderOptions, noChange, RootPart} from 'lit-html';\nexport * from '@lit/reactive-element';\nexport * from 'lit-html';\n\nimport {LitUnstable} from 'lit-html';\nimport {ReactiveUnstable} from '@lit/reactive-element';\n\n/**\n * Contains types that are part of the unstable debug API.\n *\n * Everything in this API is not stable and may change or be removed in the future,\n * even on patch releases.\n */\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace Unstable {\n  /**\n   * When Lit is running in dev mode and `window.emitLitDebugLogEvents` is true,\n   * we will emit 'lit-debug' events to window, with live details about the update and render\n   * lifecycle. These can be useful for writing debug tooling and visualizations.\n   *\n   * Please be aware that running with window.emitLitDebugLogEvents has performance overhead,\n   * making certain operations that are normally very cheap (like a no-op render) much slower,\n   * because we must copy data and dispatch events.\n   */\n  // eslint-disable-next-line @typescript-eslint/no-namespace\n  export namespace DebugLog {\n    export type Entry =\n      | LitUnstable.DebugLog.Entry\n      | ReactiveUnstable.DebugLog.Entry;\n  }\n}\n/*\n * When using Closure Compiler, JSCompiler_renameProperty(property, object) is\n * replaced at compile time by the munged name for object[property]. We cannot\n * alias this function, so we have to use a small shim that has the same\n * behavior when not compiling.\n */\n/*@__INLINE__*/\nconst JSCompiler_renameProperty = <P extends PropertyKey>(\n  prop: P,\n  _obj: unknown\n): P => prop;\n\nconst DEV_MODE = true;\n\nlet issueWarning: (code: string, warning: string) => void;\n\nif (DEV_MODE) {\n  // Ensure warnings are issued only 1x, even if multiple versions of Lit\n  // are loaded.\n  const issuedWarnings: Set<string | undefined> =\n    (globalThis.litIssuedWarnings ??= new Set());\n\n  // Issue a warning, if we haven't already.\n  issueWarning = (code: string, warning: string) => {\n    warning += ` See https://lit.dev/msg/${code} for more information.`;\n    if (!issuedWarnings.has(warning)) {\n      console.warn(warning);\n      issuedWarnings.add(warning);\n    }\n  };\n}\n\n/**\n * Base element class that manages element properties and attributes, and\n * renders a lit-html template.\n *\n * To define a component, subclass `LitElement` and implement a\n * `render` method to provide the component's template. Define properties\n * using the {@linkcode LitElement.properties properties} property or the\n * {@linkcode property} decorator.\n */\nexport class LitElement extends ReactiveElement {\n  // This property needs to remain unminified.\n  static ['_$litElement$'] = true;\n\n  /**\n   * @category rendering\n   */\n  readonly renderOptions: RenderOptions = {host: this};\n\n  private __childPart: RootPart | undefined = undefined;\n\n  /**\n   * @category rendering\n   */\n  protected override createRenderRoot() {\n    const renderRoot = super.createRenderRoot();\n    // When adoptedStyleSheets are shimmed, they are inserted into the\n    // shadowRoot by createRenderRoot. Adjust the renderBefore node so that\n    // any styles in Lit content render before adoptedStyleSheets. This is\n    // important so that adoptedStyleSheets have precedence over styles in\n    // the shadowRoot.\n    this.renderOptions.renderBefore ??= renderRoot!.firstChild as ChildNode;\n    return renderRoot;\n  }\n\n  /**\n   * Updates the element. This method reflects property values to attributes\n   * and calls `render` to render DOM via lit-html. Setting properties inside\n   * this method will *not* trigger another update.\n   * @param changedProperties Map of changed properties with old values\n   * @category updates\n   */\n  protected override update(changedProperties: PropertyValues) {\n    // Setting properties in `render` should not trigger an update. Since\n    // updates are allowed after super.update, it's important to call `render`\n    // before that.\n    const value = this.render();\n    if (!this.hasUpdated) {\n      this.renderOptions.isConnected = this.isConnected;\n    }\n    super.update(changedProperties);\n    this.__childPart = render(value, this.renderRoot, this.renderOptions);\n  }\n\n  /**\n   * Invoked when the component is added to the document's DOM.\n   *\n   * In `connectedCallback()` you should setup tasks that should only occur when\n   * the element is connected to the document. The most common of these is\n   * adding event listeners to nodes external to the element, like a keydown\n   * event handler added to the window.\n   *\n   * ```ts\n   * connectedCallback() {\n   *   super.connectedCallback();\n   *   addEventListener('keydown', this._handleKeydown);\n   * }\n   * ```\n   *\n   * Typically, anything done in `connectedCallback()` should be undone when the\n   * element is disconnected, in `disconnectedCallback()`.\n   *\n   * @category lifecycle\n   */\n  override connectedCallback() {\n    super.connectedCallback();\n    this.__childPart?.setConnected(true);\n  }\n\n  /**\n   * Invoked when the component is removed from the document's DOM.\n   *\n   * This callback is the main signal to the element that it may no longer be\n   * used. `disconnectedCallback()` should ensure that nothing is holding a\n   * reference to the element (such as event listeners added to nodes external\n   * to the element), so that it is free to be garbage collected.\n   *\n   * ```ts\n   * disconnectedCallback() {\n   *   super.disconnectedCallback();\n   *   window.removeEventListener('keydown', this._handleKeydown);\n   * }\n   * ```\n   *\n   * An element may be re-connected after being disconnected.\n   *\n   * @category lifecycle\n   */\n  override disconnectedCallback() {\n    super.disconnectedCallback();\n    this.__childPart?.setConnected(false);\n  }\n\n  /**\n   * Invoked on each update to perform rendering tasks. This method may return\n   * any value renderable by lit-html's `ChildPart` - typically a\n   * `TemplateResult`. Setting properties inside this method will *not* trigger\n   * the element to update.\n   * @category rendering\n   */\n  protected render(): unknown {\n    return noChange;\n  }\n}\n\n/**\n * Ensure this class is marked as `finalized` as an optimization ensuring\n * it will not needlessly try to `finalize`.\n *\n * Note this property name is a string to prevent breaking Closure JS Compiler\n * optimizations. See @lit/reactive-element for more information.\n */\n(LitElement as unknown as Record<string, unknown>)[\n  JSCompiler_renameProperty('finalized', LitElement)\n] = true;\n\n// Install hydration if available\nglobalThis.litElementHydrateSupport?.({LitElement});\n\n// Apply polyfills if available\nconst polyfillSupport = DEV_MODE\n  ? globalThis.litElementPolyfillSupportDevMode\n  : globalThis.litElementPolyfillSupport;\npolyfillSupport?.({LitElement});\n\n/**\n * END USERS SHOULD NOT RELY ON THIS OBJECT.\n *\n * Private exports for use by other Lit packages, not intended for use by\n * external users.\n *\n * We currently do not make a mangled rollup build of the lit-ssr code. In order\n * to keep a number of (otherwise private) top-level exports  mangled in the\n * client side code, we export a _$LE object containing those members (or\n * helper methods for accessing private fields of those members), and then\n * re-export them for use in lit-ssr. This keeps lit-ssr agnostic to whether the\n * client-side code is being used in `dev` mode or `prod` mode.\n *\n * This has a unique name, to disambiguate it from private exports in\n * lit-html, since this module re-exports all of lit-html.\n *\n * @private\n */\nexport const _$LE = {\n  _$attributeToProperty: (\n    el: LitElement,\n    name: string,\n    value: string | null\n  ) => {\n    // eslint-disable-next-line\n    (el as any)._$attributeToProperty(name, value);\n  },\n  // eslint-disable-next-line\n  _$changedProperties: (el: LitElement) => (el as any)._$changedProperties,\n};\n\n// IMPORTANT: do not change the property name or the assignment expression.\n// This line will be used in regexes to search for LitElement usage.\n(globalThis.litElementVersions ??= []).push('4.1.1');\nif (DEV_MODE && globalThis.litElementVersions.length > 1) {\n  issueWarning!(\n    'multiple-versions',\n    `Multiple versions of Lit loaded. Loading multiple versions ` +\n      `is not recommended.`\n  );\n}\n", "/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n\nimport {Disconnectable, Part} from './lit-html.js';\n\nexport {\n  AttributePart,\n  BooleanAttributePart,\n  ChildPart,\n  ElementPart,\n  EventPart,\n  Part,\n  PropertyPart,\n} from './lit-html.js';\n\nexport interface DirectiveClass {\n  new (part: PartInfo): Directive;\n}\n\n/**\n * This utility type extracts the signature of a directive class's render()\n * method so we can use it for the type of the generated directive function.\n */\nexport type DirectiveParameters<C extends Directive> = Parameters<C['render']>;\n\n/**\n * A generated directive function doesn't evaluate the directive, but just\n * returns a DirectiveResult object that captures the arguments.\n */\nexport interface DirectiveResult<C extends DirectiveClass = DirectiveClass> {\n  /**\n   * This property needs to remain unminified.\n   * @internal\n   */\n  ['_$litDirective$']: C;\n  /** @internal */\n  values: DirectiveParameters<InstanceType<C>>;\n}\n\nexport const PartType = {\n  ATTRIBUTE: 1,\n  CHILD: 2,\n  PROPERTY: 3,\n  BOOLEAN_ATTRIBUTE: 4,\n  EVENT: 5,\n  ELEMENT: 6,\n} as const;\n\nexport type PartType = (typeof PartType)[keyof typeof PartType];\n\nexport interface ChildPartInfo {\n  readonly type: typeof PartType.CHILD;\n}\n\nexport interface AttributePartInfo {\n  readonly type:\n    | typeof PartType.ATTRIBUTE\n    | typeof PartType.PROPERTY\n    | typeof PartType.BOOLEAN_ATTRIBUTE\n    | typeof PartType.EVENT;\n  readonly strings?: ReadonlyArray<string>;\n  readonly name: string;\n  readonly tagName: string;\n}\n\nexport interface ElementPartInfo {\n  readonly type: typeof PartType.ELEMENT;\n}\n\n/**\n * Information about the part a directive is bound to.\n *\n * This is useful for checking that a directive is attached to a valid part,\n * such as with directive that can only be used on attribute bindings.\n */\nexport type PartInfo = ChildPartInfo | AttributePartInfo | ElementPartInfo;\n\n/**\n * Creates a user-facing directive function from a Directive class. This\n * function has the same parameters as the directive's render() method.\n */\nexport const directive =\n  <C extends DirectiveClass>(c: C) =>\n  (...values: DirectiveParameters<InstanceType<C>>): DirectiveResult<C> => ({\n    // This property needs to remain unminified.\n    ['_$litDirective$']: c,\n    values,\n  });\n\n/**\n * Base class for creating custom directives. Users should extend this class,\n * implement `render` and/or `update`, and then pass their subclass to\n * `directive`.\n */\nexport abstract class Directive implements Disconnectable {\n  //@internal\n  __part!: Part;\n  //@internal\n  __attributeIndex: number | undefined;\n  //@internal\n  __directive?: Directive;\n\n  //@internal\n  _$parent!: Disconnectable;\n\n  // These will only exist on the AsyncDirective subclass\n  //@internal\n  _$disconnectableChildren?: Set<Disconnectable>;\n  // This property needs to remain unminified.\n  //@internal\n  ['_$notifyDirectiveConnectionChanged']?(isConnected: boolean): void;\n\n  constructor(_partInfo: PartInfo) {}\n\n  // See comment in Disconnectable interface for why this is a getter\n  get _$isConnected() {\n    return this._$parent._$isConnected;\n  }\n\n  /** @internal */\n  _$initialize(\n    part: Part,\n    parent: Disconnectable,\n    attributeIndex: number | undefined\n  ) {\n    this.__part = part;\n    this._$parent = parent;\n    this.__attributeIndex = attributeIndex;\n  }\n  /** @internal */\n  _$resolve(part: Part, props: Array<unknown>): unknown {\n    return this.update(part, props);\n  }\n\n  abstract render(...props: Array<unknown>): unknown;\n\n  update(_part: Part, props: Array<unknown>): unknown {\n    return this.render(...props);\n  }\n}\n", "/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n\nimport {AttributePart, noChange} from '../lit-html.js';\nimport {\n  directive,\n  Directive,\n  DirectiveParameters,\n  PartInfo,\n  PartType,\n} from '../directive.js';\n\n/**\n * A key-value set of CSS properties and values.\n *\n * The key should be either a valid CSS property name string, like\n * `'background-color'`, or a valid JavaScript camel case property name\n * for CSSStyleDeclaration like `backgroundColor`.\n */\nexport interface StyleInfo {\n  [name: string]: string | number | undefined | null;\n}\n\nconst important = 'important';\n// The leading space is important\nconst importantFlag = ' !' + important;\n// How many characters to remove from a value, as a negative number\nconst flagTrim = 0 - importantFlag.length;\n\nclass StyleMapDirective extends Directive {\n  private _previousStyleProperties?: Set<string>;\n\n  constructor(partInfo: PartInfo) {\n    super(partInfo);\n    if (\n      partInfo.type !== PartType.ATTRIBUTE ||\n      partInfo.name !== 'style' ||\n      (partInfo.strings?.length as number) > 2\n    ) {\n      throw new Error(\n        'The `styleMap` directive must be used in the `style` attribute ' +\n          'and must be the only part in the attribute.'\n      );\n    }\n  }\n\n  render(styleInfo: Readonly<StyleInfo>) {\n    return Object.keys(styleInfo).reduce((style, prop) => {\n      const value = styleInfo[prop];\n      if (value == null) {\n        return style;\n      }\n      // Convert property names from camel-case to dash-case, i.e.:\n      //  `backgroundColor` -> `background-color`\n      // Vendor-prefixed names need an extra `-` appended to front:\n      //  `webkitAppearance` -> `-webkit-appearance`\n      // Exception is any property name containing a dash, including\n      // custom properties; we assume these are already dash-cased i.e.:\n      //  `--my-button-color` --> `--my-button-color`\n      prop = prop.includes('-')\n        ? prop\n        : prop\n            .replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g, '-$&')\n            .toLowerCase();\n      return style + `${prop}:${value};`;\n    }, '');\n  }\n\n  override update(part: AttributePart, [styleInfo]: DirectiveParameters<this>) {\n    const {style} = part.element as HTMLElement;\n\n    if (this._previousStyleProperties === undefined) {\n      this._previousStyleProperties = new Set(Object.keys(styleInfo));\n      return this.render(styleInfo);\n    }\n\n    // Remove old properties that no longer exist in styleInfo\n    for (const name of this._previousStyleProperties) {\n      // If the name isn't in styleInfo or it's null/undefined\n      if (styleInfo[name] == null) {\n        this._previousStyleProperties!.delete(name);\n        if (name.includes('-')) {\n          style.removeProperty(name);\n        } else {\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          (style as any)[name] = null;\n        }\n      }\n    }\n\n    // Add or update properties\n    for (const name in styleInfo) {\n      const value = styleInfo[name];\n      if (value != null) {\n        this._previousStyleProperties.add(name);\n        const isImportant =\n          typeof value === 'string' && value.endsWith(importantFlag);\n        if (name.includes('-') || isImportant) {\n          style.setProperty(\n            name,\n            isImportant\n              ? (value as string).slice(0, flagTrim)\n              : (value as string),\n            isImportant ? important : ''\n          );\n        } else {\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          (style as any)[name] = value;\n        }\n      }\n    }\n    return noChange;\n  }\n}\n\n/**\n * A directive that applies CSS properties to an element.\n *\n * `styleMap` can only be used in the `style` attribute and must be the only\n * expression in the attribute. It takes the property names in the\n * {@link StyleInfo styleInfo} object and adds the properties to the inline\n * style of the element.\n *\n * Property names with dashes (`-`) are assumed to be valid CSS\n * property names and set on the element's style object using `setProperty()`.\n * Names without dashes are assumed to be camelCased JavaScript property names\n * and set on the element's style object using property assignment, allowing the\n * style object to translate JavaScript-style names to CSS property names.\n *\n * For example `styleMap({backgroundColor: 'red', 'border-top': '5px', '--size':\n * '0'})` sets the `background-color`, `border-top` and `--size` properties.\n *\n * @param styleInfo\n * @see {@link https://lit.dev/docs/templates/directives/#stylemap styleMap code samples on Lit.dev}\n */\nexport const styleMap = directive(StyleMapDirective);\n\n/**\n * The type of the class that powers this directive. Necessary for naming the\n * directive's return type.\n */\nexport type {StyleMapDirective};\n", "/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n\n/*\n * IMPORTANT: For compatibility with tsickle and the Closure JS compiler, all\n * property decorators (but not class decorators) in this file that have\n * an @ExportDecoratedItems annotation must be defined as a regular function,\n * not an arrow function.\n */\n\nimport type {Constructor} from './base.js';\n\n/**\n * Allow for custom element classes with private constructors\n */\ntype CustomElementClass = Omit<typeof HTMLElement, 'new'>;\n\nexport type CustomElementDecorator = {\n  // legacy\n  (cls: CustomElementClass): void;\n\n  // standard\n  (\n    target: CustomElementClass,\n    context: ClassDecoratorContext<Constructor<HTMLElement>>\n  ): void;\n};\n\n/**\n * Class decorator factory that defines the decorated class as a custom element.\n *\n * ```js\n * @customElement('my-element')\n * class MyElement extends LitElement {\n *   render() {\n *     return html``;\n *   }\n * }\n * ```\n * @category Decorator\n * @param tagName The tag name of the custom element to define.\n */\nexport const customElement =\n  (tagName: string): CustomElementDecorator =>\n  (\n    classOrTarget: CustomElementClass | Constructor<HTMLElement>,\n    context?: ClassDecoratorContext<Constructor<HTMLElement>>\n  ) => {\n    if (context !== undefined) {\n      context.addInitializer(() => {\n        customElements.define(\n          tagName,\n          classOrTarget as CustomElementConstructor\n        );\n      });\n    } else {\n      customElements.define(tagName, classOrTarget as CustomElementConstructor);\n    }\n  };\n", "/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n\n/*\n * IMPORTANT: For compatibility with tsickle and the Closure JS compiler, all\n * property decorators (but not class decorators) in this file that have\n * an @ExportDecoratedItems annotation must be defined as a regular function,\n * not an arrow function.\n */\n\nimport {\n  type PropertyDeclaration,\n  type ReactiveElement,\n  defaultConverter,\n  notEqual,\n} from '../reactive-element.js';\nimport type {Interface} from './base.js';\n\nconst DEV_MODE = true;\n\nlet issueWarning: (code: string, warning: string) => void;\n\nif (DEV_MODE) {\n  // Ensure warnings are issued only 1x, even if multiple versions of Lit\n  // are loaded.\n  const issuedWarnings: Set<string | undefined> =\n    (globalThis.litIssuedWarnings ??= new Set());\n\n  // Issue a warning, if we haven't already.\n  issueWarning = (code: string, warning: string) => {\n    warning += ` See https://lit.dev/msg/${code} for more information.`;\n    if (!issuedWarnings.has(warning)) {\n      console.warn(warning);\n      issuedWarnings.add(warning);\n    }\n  };\n}\n\n// Overloads for property decorator so that TypeScript can infer the correct\n// return type when a decorator is used as an accessor decorator or a setter\n// decorator.\nexport type PropertyDecorator = {\n  // accessor decorator signature\n  <C extends Interface<ReactiveElement>, V>(\n    target: ClassAccessorDecoratorTarget<C, V>,\n    context: ClassAccessorDecoratorContext<C, V>\n  ): ClassAccessorDecoratorResult<C, V>;\n\n  // setter decorator signature\n  <C extends Interface<ReactiveElement>, V>(\n    target: (value: V) => void,\n    context: ClassSetterDecoratorContext<C, V>\n  ): (this: C, value: V) => void;\n\n  // legacy decorator signature\n  (\n    protoOrDescriptor: Object,\n    name: PropertyKey,\n    descriptor?: PropertyDescriptor\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  ): any;\n};\n\nconst legacyProperty = (\n  options: PropertyDeclaration | undefined,\n  proto: Object,\n  name: PropertyKey\n) => {\n  const hasOwnProperty = proto.hasOwnProperty(name);\n  (proto.constructor as typeof ReactiveElement).createProperty(\n    name,\n    hasOwnProperty ? {...options, wrapped: true} : options\n  );\n  // For accessors (which have a descriptor on the prototype) we need to\n  // return a descriptor, otherwise TypeScript overwrites the descriptor we\n  // define in createProperty() with the original descriptor. We don't do this\n  // for fields, which don't have a descriptor, because this could overwrite\n  // descriptor defined by other decorators.\n  return hasOwnProperty\n    ? Object.getOwnPropertyDescriptor(proto, name)\n    : undefined;\n};\n\n// This is duplicated from a similar variable in reactive-element.ts, but\n// actually makes sense to have this default defined with the decorator, so\n// that different decorators could have different defaults.\nconst defaultPropertyDeclaration: PropertyDeclaration = {\n  attribute: true,\n  type: String,\n  converter: defaultConverter,\n  reflect: false,\n  hasChanged: notEqual,\n};\n\n// Temporary type, until google3 is on TypeScript 5.2\ntype StandardPropertyContext<C, V> = (\n  | ClassAccessorDecoratorContext<C, V>\n  | ClassSetterDecoratorContext<C, V>\n) & {metadata: object};\n\n/**\n * Wraps a class accessor or setter so that `requestUpdate()` is called with the\n * property name and old value when the accessor is set.\n */\nexport const standardProperty = <C extends Interface<ReactiveElement>, V>(\n  options: PropertyDeclaration = defaultPropertyDeclaration,\n  target: ClassAccessorDecoratorTarget<C, V> | ((value: V) => void),\n  context: StandardPropertyContext<C, V>\n): ClassAccessorDecoratorResult<C, V> | ((this: C, value: V) => void) => {\n  const {kind, metadata} = context;\n\n  if (DEV_MODE && metadata == null) {\n    issueWarning(\n      'missing-class-metadata',\n      `The class ${target} is missing decorator metadata. This ` +\n        `could mean that you're using a compiler that supports decorators ` +\n        `but doesn't support decorator metadata, such as TypeScript 5.1. ` +\n        `Please update your compiler.`\n    );\n  }\n\n  // Store the property options\n  let properties = globalThis.litPropertyMetadata.get(metadata);\n  if (properties === undefined) {\n    globalThis.litPropertyMetadata.set(metadata, (properties = new Map()));\n  }\n  properties.set(context.name, options);\n\n  if (kind === 'accessor') {\n    // Standard decorators cannot dynamically modify the class, so we can't\n    // replace a field with accessors. The user must use the new `accessor`\n    // keyword instead.\n    const {name} = context;\n    return {\n      set(this: ReactiveElement, v: V) {\n        const oldValue = (\n          target as ClassAccessorDecoratorTarget<C, V>\n        ).get.call(this as unknown as C);\n        (target as ClassAccessorDecoratorTarget<C, V>).set.call(\n          this as unknown as C,\n          v\n        );\n        this.requestUpdate(name, oldValue, options);\n      },\n      init(this: ReactiveElement, v: V): V {\n        if (v !== undefined) {\n          this._$changeProperty(name, undefined, options);\n        }\n        return v;\n      },\n    } as unknown as ClassAccessorDecoratorResult<C, V>;\n  } else if (kind === 'setter') {\n    const {name} = context;\n    return function (this: ReactiveElement, value: V) {\n      const oldValue = this[name as keyof ReactiveElement];\n      (target as (value: V) => void).call(this, value);\n      this.requestUpdate(name, oldValue, options);\n    } as unknown as (this: C, value: V) => void;\n  }\n  throw new Error(`Unsupported decorator location: ${kind}`);\n};\n\n/**\n * A class field or accessor decorator which creates a reactive property that\n * reflects a corresponding attribute value. When a decorated property is set\n * the element will update and render. A {@linkcode PropertyDeclaration} may\n * optionally be supplied to configure property features.\n *\n * This decorator should only be used for public fields. As public fields,\n * properties should be considered as primarily settable by element users,\n * either via attribute or the property itself.\n *\n * Generally, properties that are changed by the element should be private or\n * protected fields and should use the {@linkcode state} decorator.\n *\n * However, sometimes element code does need to set a public property. This\n * should typically only be done in response to user interaction, and an event\n * should be fired informing the user; for example, a checkbox sets its\n * `checked` property when clicked and fires a `changed` event. Mutating public\n * properties should typically not be done for non-primitive (object or array)\n * properties. In other cases when an element needs to manage state, a private\n * property decorated via the {@linkcode state} decorator should be used. When\n * needed, state properties can be initialized via public properties to\n * facilitate complex interactions.\n *\n * ```ts\n * class MyElement {\n *   @property({ type: Boolean })\n *   clicked = false;\n * }\n * ```\n * @category Decorator\n * @ExportDecoratedItems\n */\nexport function property(options?: PropertyDeclaration): PropertyDecorator {\n  return <C extends Interface<ReactiveElement>, V>(\n    protoOrTarget:\n      | object\n      | ClassAccessorDecoratorTarget<C, V>\n      | ((value: V) => void),\n    nameOrContext:\n      | PropertyKey\n      | ClassAccessorDecoratorContext<C, V>\n      | ClassSetterDecoratorContext<C, V>\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  ): any => {\n    return (\n      typeof nameOrContext === 'object'\n        ? standardProperty<C, V>(\n            options,\n            protoOrTarget as\n              | ClassAccessorDecoratorTarget<C, V>\n              | ((value: V) => void),\n            nameOrContext as StandardPropertyContext<C, V>\n          )\n        : legacyProperty(\n            options,\n            protoOrTarget as Object,\n            nameOrContext as PropertyKey\n          )\n    ) as PropertyDecorator;\n  };\n}\n", "/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n\n/*\n * IMPORTANT: For compatibility with tsickle and the Closure JS compiler, all\n * property decorators (but not class decorators) in this file that have\n * an @ExportDecoratedItems annotation must be defined as a regular function,\n * not an arrow function.\n */\n\nimport {property} from './property.js';\n\nexport interface StateDeclaration<Type = unknown> {\n  /**\n   * A function that indicates if a property should be considered changed when\n   * it is set. The function should take the `newValue` and `oldValue` and\n   * return `true` if an update should be requested.\n   */\n  hasChanged?(value: Type, oldValue: Type): boolean;\n}\n\n/**\n * @deprecated use StateDeclaration\n */\nexport type InternalPropertyDeclaration<Type = unknown> =\n  StateDeclaration<Type>;\n\n/**\n * Declares a private or protected reactive property that still triggers\n * updates to the element when it changes. It does not reflect from the\n * corresponding attribute.\n *\n * Properties declared this way must not be used from HTML or HTML templating\n * systems, they're solely for properties internal to the element. These\n * properties may be renamed by optimization tools like closure compiler.\n * @category Decorator\n */\nexport function state(options?: StateDeclaration) {\n  return property({\n    ...options,\n    // Add both `state` and `attribute` because we found a third party\n    // controller that is keying off of PropertyOptions.state to determine\n    // whether a field is a private internal property or not.\n    state: true,\n    attribute: false,\n  });\n}\n", "/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n\n/*\n * IMPORTANT: For compatibility with tsickle and the Closure JS compiler, all\n * property decorators (but not class decorators) in this file that have\n * an @ExportDecoratedItems annotation must be defined as a regular function,\n * not an arrow function.\n */\nimport type {ReactiveElement} from '../reactive-element.js';\nimport {desc, type Interface} from './base.js';\n\nconst DEV_MODE = true;\n\nlet issueWarning: (code: string, warning: string) => void;\n\nif (DEV_MODE) {\n  // Ensure warnings are issued only 1x, even if multiple versions of Lit\n  // are loaded.\n  const issuedWarnings: Set<string | undefined> =\n    (globalThis.litIssuedWarnings ??= new Set());\n\n  // Issue a warning, if we haven't already.\n  issueWarning = (code: string, warning: string) => {\n    warning += code\n      ? ` See https://lit.dev/msg/${code} for more information.`\n      : '';\n    if (!issuedWarnings.has(warning)) {\n      console.warn(warning);\n      issuedWarnings.add(warning);\n    }\n  };\n}\n\nexport type QueryDecorator = {\n  // legacy\n  (\n    proto: Interface<ReactiveElement>,\n    name: PropertyKey,\n    descriptor?: PropertyDescriptor\n    // Note TypeScript requires the return type to be `void|any`\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  ): void | any;\n\n  // standard\n  <C extends Interface<ReactiveElement>, V extends Element | null>(\n    value: ClassAccessorDecoratorTarget<C, V>,\n    context: ClassAccessorDecoratorContext<C, V>\n  ): ClassAccessorDecoratorResult<C, V>;\n};\n\n/**\n * A property decorator that converts a class property into a getter that\n * executes a querySelector on the element's renderRoot.\n *\n * @param selector A DOMString containing one or more selectors to match.\n * @param cache An optional boolean which when true performs the DOM query only\n *     once and caches the result.\n *\n * See: https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelector\n *\n * ```ts\n * class MyElement {\n *   @query('#first')\n *   first: HTMLDivElement;\n *\n *   render() {\n *     return html`\n *       <div id=\"first\"></div>\n *       <div id=\"second\"></div>\n *     `;\n *   }\n * }\n * ```\n * @category Decorator\n */\nexport function query(selector: string, cache?: boolean): QueryDecorator {\n  return (<C extends Interface<ReactiveElement>, V extends Element | null>(\n    protoOrTarget: ClassAccessorDecoratorTarget<C, V>,\n    nameOrContext: PropertyKey | ClassAccessorDecoratorContext<C, V>,\n    descriptor?: PropertyDescriptor\n  ) => {\n    const doQuery = (el: Interface<ReactiveElement>): V => {\n      const result = (el.renderRoot?.querySelector(selector) ?? null) as V;\n      if (DEV_MODE && result === null && cache && !el.hasUpdated) {\n        const name =\n          typeof nameOrContext === 'object'\n            ? nameOrContext.name\n            : nameOrContext;\n        issueWarning(\n          '',\n          `@query'd field ${JSON.stringify(String(name))} with the 'cache' ` +\n            `flag set for selector '${selector}' has been accessed before ` +\n            `the first update and returned null. This is expected if the ` +\n            `renderRoot tree has not been provided beforehand (e.g. via ` +\n            `Declarative Shadow DOM). Therefore the value hasn't been cached.`\n        );\n      }\n      // TODO: if we want to allow users to assert that the query will never\n      // return null, we need a new option and to throw here if the result\n      // is null.\n      return result;\n    };\n    if (cache) {\n      // Accessors to wrap from either:\n      //   1. The decorator target, in the case of standard decorators\n      //   2. The property descriptor, in the case of experimental decorators\n      //      on auto-accessors.\n      //   3. Functions that access our own cache-key property on the instance,\n      //      in the case of experimental decorators on fields.\n      const {get, set} =\n        typeof nameOrContext === 'object'\n          ? protoOrTarget\n          : descriptor ??\n            (() => {\n              const key = DEV_MODE\n                ? Symbol(`${String(nameOrContext)} (@query() cache)`)\n                : Symbol();\n              type WithCache = ReactiveElement & {\n                [key: symbol]: Element | null;\n              };\n              return {\n                get() {\n                  return (this as WithCache)[key];\n                },\n                set(v) {\n                  (this as WithCache)[key] = v;\n                },\n              };\n            })();\n      return desc(protoOrTarget, nameOrContext, {\n        get(this: ReactiveElement): V {\n          let result: V = get!.call(this);\n          if (result === undefined) {\n            result = doQuery(this);\n            if (result !== null || this.hasUpdated) {\n              set!.call(this, result);\n            }\n          }\n          return result;\n        },\n      });\n    } else {\n      // This object works as the return type for both standard and\n      // experimental decorators.\n      return desc(protoOrTarget, nameOrContext, {\n        get(this: ReactiveElement) {\n          return doQuery(this);\n        },\n      });\n    }\n  }) as QueryDecorator;\n}\n", "import { ReactiveController, ReactiveControllerHost } from 'lit';\nimport { BehaviorSubject, Observable, Subscription } from 'rxjs';\n\nexport class ReactiveState<T> implements ReactiveController {\n  sub: Subscription | null = null;\n  value$: BehaviorSubject<T | undefined> = new BehaviorSubject<T | undefined>(undefined);\n\n  constructor(private host: ReactiveControllerHost, private source: Observable<T>, public value?: T) {\n    this.host.addController(this);\n  }\n\n  hostConnected() {\n    this.sub = this.source.subscribe(value => {\n      this.value = value;\n      this.value$.next(value);\n      this.host.requestUpdate();\n    });\n  }\n\n  hostDisconnected() {\n    this.sub?.unsubscribe();\n  }\n}\n", "import { css } from 'lit';\n\nexport const modalDialogStyles = css`\n  .dialog-modal {\n    position: fixed;\n    z-index: 990;\n    font-family: 'Open Sans', arial, sans-serif;\n    margin: 0 auto;\n    padding: 0;\n    width: 100%;\n    border-radius: 1rem 1rem 0 0;\n    border-width: 0;\n    box-shadow: 0 0.125rem 0.75rem rgba(0, 0, 0, 0.25);\n    bottom: 0;\n    overflow: hidden;\n  }\n\n  @media screen and (min-width: 768px) {\n    .dialog-modal {\n      z-index: 990;\n      bottom: auto;\n      top: 5rem;\n      max-width: 45rem;\n      border-radius: 1rem;\n    }\n  }\n`;\n\nexport const modalDialogBodyStyles = css`\n  .dialog-modal-body {\n    display: flex;\n    flex-direction: column-reverse;\n  }\n\n  .dialog-modal-body__help,\n  .dialog-modal-body__wallets {\n    width: 100%;\n    flex-basis: 100%;\n  }\n\n  .dialog-modal-body__help {\n    padding: 1.5rem;\n  }\n\n  .dialog-modal-body__wallets {\n    padding: 1.5rem;\n  }\n\n  .dialog-text-solid {\n    font-size: 1rem;\n    line-height: 1.25rem;\n  }\n\n  .dialog-text {\n    font-size: 0.875rem;\n    line-height: 1.125rem;\n  }\n\n  @media (prefers-color-scheme: light) {\n    .dialog-modal-body__help {\n      background-color: var(--modal-help-bg-color, #f8f8f8);\n      border-top: 1px solid var(--modal-divider-color, rgba(0, 0, 0, 0.15));\n    }\n\n    @media screen and (min-width: 768px) {\n      .dialog-modal-body__help {\n        border-top: none;\n        border-right: 1px solid var(--modal-divider-color, rgba(0, 0, 0, 0.15));\n      }\n    }\n\n    .dialog-modal-body__wallets,\n    .dialog-modal-body {\n      background-color: var(--modal-bg-color, #fcfcfc);\n    }\n\n    .dialog-text-solid {\n      color: var(--modal-solid-text-color, #000000);\n    }\n\n    .dialog-text {\n      color: var(--modal-text-color, #181818);\n    }\n  }\n\n  @media (prefers-color-scheme: dark) {\n    .dialog-modal-body__help {\n      background-color: var(--modal-help-bg-color, #1c1c1c);\n      border-top: 1px solid var(--modal-divider-color, rgba(255, 255, 255, 0.15));\n    }\n\n    @media screen and (min-width: 768px) {\n      .dialog-modal-body__help {\n        border-top: none;\n        border-right: 1px solid var(--modal-divider-color, rgba(255, 255, 255, 0.15));\n      }\n    }\n\n    .dialog-modal-body__wallets,\n    .dialog-modal-body {\n      background-color: var(--modal-bg-color, #161616);\n    }\n\n    .dialog-text-solid {\n      color: var(--modal-solid-text-color, #ededed);\n    }\n\n    .dialog-text {\n      color: var(--modal-text-color, #a0a0a0);\n    }\n  }\n\n  @media screen and (min-width: 768px) {\n    .dialog-modal-body {\n      flex-direction: row;\n    }\n\n    .dialog-modal-body__help,\n    .dialog-modal-body__wallets {\n      padding: 2rem;\n    }\n  }\n`;\n\nexport const modalHelpSection = css`\n  .help-container {\n    width: 100%;\n  }\n\n  .help-header {\n    display: none;\n    margin: 0 0 2rem 0;\n  }\n\n  .help-header__modal-title {\n    font-size: 1.25rem;\n    padding: 0;\n    margin: 0;\n  }\n\n  .help__title,\n  .help__text {\n    text-align: center;\n  }\n\n  .help__title {\n    font-weight: 400;\n    margin-top: 0;\n    margin-bottom: 0.5rem;\n  }\n\n  .help__text {\n    max-width: 21rem;\n    margin-left: auto;\n    margin-right: auto;\n    font-weight: 300;\n    margin-top: 0;\n  }\n\n  .help__whats_stellar {\n    display: none;\n  }\n\n  @media screen and (min-width: 768px) {\n    .help-header {\n      display: block;\n    }\n\n    .help__title,\n    .help__text {\n      text-align: left;\n      margin-left: 0;\n    }\n\n    .help__whats_a_wallet {\n      margin-bottom: 2rem;\n    }\n\n    .help__whats_stellar {\n      display: block;\n    }\n  }\n`;\n\nexport const modalWalletsSection = css`\n  .wallets-container {\n    width: 100%;\n    height: 100%;\n    min-height: fit-content;\n    display: flex;\n    flex-direction: column;\n  }\n\n  .wallets-header {\n    width: 100%;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 1.5rem;\n  }\n\n  .wallets-header__modal-title {\n    font-size: 1.25rem;\n    padding: 0;\n    margin: 0;\n  }\n\n  .wallets-header__button {\n    background: none;\n    border: none;\n    cursor: pointer;\n  }\n\n  @media (prefers-color-scheme: light) {\n    .wallets-header__button svg {\n      fill: var(--modal-header-button-color, #8f8f8f);\n    }\n  }\n\n  @media (prefers-color-scheme: dark) {\n    .wallets-header__button svg {\n      fill: var(--modal-header-button-color, #707070);\n    }\n  }\n\n  .wallets-body {\n    margin: 0;\n    width: 100%;\n    list-style: none;\n    padding: 0 !important;\n  }\n\n  .wallets-body__item {\n    display: flex;\n    align-items: center;\n    font-weight: 600;\n    margin-bottom: 2rem;\n    cursor: pointer;\n  }\n\n  .wallets-body__item img {\n    margin-right: 1rem;\n    width: 2rem;\n    border-radius: 100%;\n    overflow: hidden;\n  }\n\n  .wallets-body__item.not-available {\n    cursor: alias;\n  }\n\n  .wallets-body__item .not-available {\n    margin-left: auto;\n    font-size: 10px;\n    padding: 0.25rem 0.5rem;\n    border-radius: 1rem;\n  }\n\n  @media (prefers-color-scheme: light) {\n    .wallets-body__item .not-available {\n      border: solid var(--modal-not-available-border-color, #e2e2e2) 1px;\n      background-color: var(--modal-not-available-bg-color, #f3f3f3);\n      color: var(--modal-not-available-text-color, #6f6f6f);\n    }\n  }\n\n  @media (prefers-color-scheme: dark) {\n    .wallets-body__item .not-available {\n      border: solid var(--modal-not-available-border-color, #343434) 1px;\n      background-color: var(--modal-not-available-bg-color, #232323);\n      color: var(--modal-not-available-text-color, #a0a0a0);\n    }\n  }\n\n  @media screen and (min-width: 768px) {\n  }\n`;\n\nexport const backdropStyles = css`\n  .dialog-modal[open] + .backdrop {\n    background: rgba(0, 0, 0, 0.5);\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n  }\n`;\n\nexport const modalAnimations = css`\n  .dialog-modal[open] {\n    -webkit-animation: showModal 0.3s ease normal;\n  }\n  @-webkit-keyframes showModal {\n    from {\n      transform: translateY(25%);\n      opacity: 0;\n    }\n    to {\n      transform: translateY(0%);\n      opacity: 1;\n    }\n  }\n\n  .dialog-modal.closing {\n    -webkit-animation: hideModal 0.3s ease normal !important;\n  }\n  @-webkit-keyframes hideModal {\n    from {\n      transform: translateY(0%);\n      opacity: 1;\n    }\n    to {\n      transform: translateY(25%);\n      opacity: 0;\n    }\n  }\n\n  .backdrop.closing {\n    -webkit-animation: hideBackdrop 0.3s ease normal !important;\n  }\n  @-webkit-keyframes hideBackdrop {\n    from {\n      opacity: 1;\n    }\n    to {\n      opacity: 0;\n    }\n  }\n`;\n", "import { LitElement, html, css } from 'lit';\nimport { styleMap } from 'lit/directives/style-map.js';\nimport { customElement, property, state } from 'lit/decorators.js';\nimport { ReactiveState } from '../../state/reactive-state';\nimport { allowedWallets$, modalTheme$ } from '../../state/store';\n\nimport { ISupportedWallet, IModalTheme } from '../../types';\nimport {\n  backdropStyles,\n  modalWalletsSection,\n  modalDialogBodyStyles,\n  modalDialogStyles,\n  modalHelpSection,\n  modalAnimations,\n} from './styles';\n\nexport enum ModalThemeType {\n  DARK = 'DARK',\n  LIGHT = 'LIGHT',\n}\n\nexport const ModalThemes: { [key in ModalThemeType]: IModalTheme } = {\n  DARK: {\n    bgColor: '#161616',\n    textColor: '#a0a0a0',\n    solidTextColor: '#ededed',\n    headerButtonColor: '#707070',\n    dividerColor: 'rgba(255, 255, 255, 0.15)',\n    helpBgColor: '#1c1c1c',\n    notAvailableTextColor: '#a0a0a0',\n    notAvailableBgColor: '#232323',\n    notAvailableBorderColor: '#343434',\n  },\n  LIGHT: {\n    bgColor: '#fcfcfc',\n    textColor: '#181818',\n    solidTextColor: '#000000',\n    headerButtonColor: '#8f8f8f',\n    dividerColor: 'rgba(0, 0, 0, 0.15)',\n    helpBgColor: '#f8f8f8',\n    notAvailableTextColor: '#6f6f6f',\n    notAvailableBgColor: '#f3f3f3',\n    notAvailableBorderColor: '#e2e2e2',\n  },\n};\n\n@customElement('stellar-wallets-modal')\nexport class StellarWalletsModal extends LitElement {\n  static override styles = [\n    css`\n      :host * {\n        box-sizing: border-box;\n      }\n\n      .mb-0 {\n        margin-bottom: 0 !important;\n      }\n    `,\n    modalDialogStyles,\n    modalDialogBodyStyles,\n    modalHelpSection,\n    backdropStyles,\n    modalAnimations,\n    modalWalletsSection,\n  ];\n\n  /**\n   * This value is used to tell the modal that it should not update the value\n   * `showModal` at any moment, this comes handy when the state wants to be handled by another source\n   */\n  @property({ type: Boolean, reflect: true })\n  ignoreShowStatus: boolean = false;\n\n  @property({ type: Boolean, reflect: true })\n  showModal: boolean = false;\n\n  @state()\n  closingModal: boolean = false;\n\n  @property({ type: String, reflect: true })\n  modalTitle: string = 'Connect a Wallet';\n\n  @property({ type: String, reflect: true })\n  notAvailableText: string = 'Not available';\n\n  allowedWallets: ReactiveState<ISupportedWallet[]> = new ReactiveState(this, allowedWallets$);\n\n  theme: ReactiveState<IModalTheme | undefined> = new ReactiveState(this, modalTheme$);\n\n  override connectedCallback() {\n    super.connectedCallback();\n  }\n\n  async closeModal(): Promise<void> {\n    this.closingModal = true;\n\n    await new Promise(r => setTimeout(r, 280));\n\n    if (!this.ignoreShowStatus) {\n      this.showModal = false;\n    }\n\n    this.dispatchEvent(\n      new CustomEvent('modal-closed', {\n        detail: new Error('Modal closed'),\n        bubbles: true,\n        composed: true,\n      })\n    );\n\n    this.closingModal = false;\n  }\n\n  async pickWalletOption(option: ISupportedWallet): Promise<void> {\n    if (!option.isAvailable) {\n      window.open(option.url, '_blank');\n      return;\n    }\n\n    this.closingModal = true;\n\n    await new Promise(r => setTimeout(r, 280));\n\n    try {\n      const record: string | null = window.localStorage.getItem('@StellarWalletsKit/usedWalletsIds');\n      let usedWalletsIds: Array<ISupportedWallet['id']> = record ? JSON.parse(record) : [];\n      usedWalletsIds = [option.id, ...usedWalletsIds.filter((id: string): boolean => id !== option.id)];\n      window.localStorage.setItem('@StellarWalletsKit/usedWalletsIds', JSON.stringify(usedWalletsIds));\n    } catch (e) {\n      console.error(e);\n    }\n\n    this.dispatchEvent(\n      new CustomEvent('wallet-selected', {\n        detail: option,\n        bubbles: true,\n        composed: true,\n      })\n    );\n\n    this.closingModal = false;\n  }\n\n  /**\n   * This function gets the list of the wallets following the logic from this task https://github.com/Creit-Tech/Stellar-Wallets-Kit/issues/28\n   * It follows this order:\n   * 1- Wallet last used by wallet selector\n   * 2- If not wallet last use, wallets detected in the browser\n   * 3- Wallet ordering as defined by the developer\n   *\n   */\n  private getSortedList(): ISupportedWallet[] {\n    const sortedWallets: { available: ISupportedWallet[]; unavailable: ISupportedWallet[] } =\n      this.allowedWallets.value!.reduce(\n        (all: { available: ISupportedWallet[]; unavailable: ISupportedWallet[] }, current: ISupportedWallet) => {\n          return {\n            available: current.isAvailable ? [...all.available, current] : all.available,\n            unavailable: !current.isAvailable ? [...all.unavailable, current] : all.unavailable,\n          };\n        },\n        { available: [], unavailable: [] }\n      );\n\n    let usedWalletsIds: Array<ISupportedWallet['id']>;\n    try {\n      const record: string | null = window.localStorage.getItem('@StellarWalletsKit/usedWalletsIds');\n      usedWalletsIds = record ? JSON.parse(record) : [];\n    } catch (e) {\n      console.error(e);\n      usedWalletsIds = [];\n    }\n\n    if (usedWalletsIds.length === 0) {\n      return [...sortedWallets.available, ...sortedWallets.unavailable];\n    }\n\n    const usedWallets: ISupportedWallet[] = [];\n    const nonUsedWallets: ISupportedWallet[] = [];\n    for (const availableWallet of sortedWallets.available) {\n      if (usedWalletsIds.find((id: string): boolean => id === availableWallet.id)) {\n        usedWallets.push(availableWallet);\n      } else {\n        nonUsedWallets.push(availableWallet);\n      }\n    }\n\n    return [\n      ...usedWallets.sort((a: ISupportedWallet, b: ISupportedWallet) => {\n        return usedWalletsIds.indexOf(a.id) - usedWalletsIds.indexOf(b.id);\n      }),\n      ...nonUsedWallets,\n      ...sortedWallets.unavailable,\n    ];\n  }\n\n  private getThemeStyles() {\n    if (!this.theme.value) return {};\n\n    return {\n      '--modal-bg-color': this.theme.value.bgColor,\n      '--modal-text-color': this.theme.value.textColor,\n      '--modal-solid-text-color': this.theme.value.solidTextColor,\n      '--modal-header-button-color': this.theme.value.headerButtonColor,\n      '--modal-divider-color': this.theme.value.dividerColor,\n      '--modal-help-bg-color': this.theme.value.helpBgColor,\n      '--modal-not-available-text-color': this.theme.value.notAvailableTextColor,\n      '--modal-not-available-bg-color': this.theme.value.notAvailableBgColor,\n      '--modal-not-available-border-color': this.theme.value.notAvailableBorderColor,\n    };\n  }\n\n  override render() {\n    const helpSection = html`\n      <section class=\"help-container\">\n        <header class=\"help-header\">\n          <h2 class=\"help-header__modal-title dialog-text-solid\">Learn more</h2>\n        </header>\n\n        <div class=\"help__whats_a_wallet\">\n          <h2 class=\"dialog-text-solid help__title\">What is a wallet?</h2>\n          <p class=\"dialog-text help__text\">\n            Wallets are used to send, receive, and store the keys you use to sign blockchain transactions.\n          </p>\n        </div>\n\n        <div class=\"help__whats_stellar\">\n          <h2 class=\"dialog-text-solid help__title\">What is Stellar?</h2>\n          <p class=\"dialog-text help__text\">\n            Stellar is a decentralized, public blockchain that gives developers the tools to create experiences that are\n            more like cash than crypto\n          </p>\n        </div>\n      </section>\n    `;\n\n    const walletsSection = html`\n      <section class=\"wallets-container\">\n        <header class=\"wallets-header\">\n          <h2 class=\"wallets-header__modal-title dialog-text-solid\">${this.modalTitle}</h2>\n\n          <button @click=${() => this.closeModal()} class=\"wallets-header__button\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"#000000\" height=\"20px\" width=\"20px\" viewBox=\"0 0 490 490\">\n              <polygon\n                points=\"456.851,0 245,212.564 33.149,0 0.708,32.337 212.669,245.004 0.708,457.678 33.149,490 245,277.443 456.851,490   489.292,457.678 277.331,245.004 489.292,32.337 \" />\n            </svg>\n          </button>\n        </header>\n\n        <ul class=\"wallets-body\">\n          ${this.getSortedList().map(\n            (item: ISupportedWallet, i: number) =>\n              html`\n                <li\n                  @click=${() => this.pickWalletOption(item)}\n                  class=\" wallets-body__item ${!item.isAvailable ? 'not-available' : ''} ${i ===\n                  this.allowedWallets.value!.length - 1\n                    ? 'mb-0'\n                    : ''}\">\n                  <img src=${item.icon} alt=${item.name} />\n                  <span class=\"dialog-text-solid\">${item.name}</span>\n                  ${!item.isAvailable ? html`<small class=\"not-available\">${this.notAvailableText}</small>` : ''}\n                </li>\n              `\n          )}\n        </ul>\n      </section>\n    `;\n\n    return html`\n      <dialog\n        style=${styleMap(this.getThemeStyles())}\n        class=\"dialog-modal ${this.closingModal ? 'closing' : ''}\"\n        .open=${this.showModal}>\n        <section class=\"dialog-modal-body\">\n          <div class=\"dialog-modal-body__help\">${helpSection}</div>\n          <div class=\"dialog-modal-body__wallets\">${walletsSection}</div>\n        </section>\n      </dialog>\n\n      <div\n        style=\"position: fixed; z-index: 950\"\n        class=\"backdrop ${this.closingModal ? 'closing' : ''}\"\n        @click=${() => this.closeModal()}></div>\n    `;\n  }\n}\n", "import { firstValueFrom } from 'rxjs';\nimport { horizonUrl$ } from '../state/store';\n\nexport async function fetchAccountBalance(pk: string): Promise<string> {\n  const horizonUrl: string | undefined = await firstValueFrom(horizonUrl$);\n  if (!horizonUrl) {\n    throw new Error('There is no Horizon URL set');\n  }\n  const url: URL = new URL(horizonUrl);\n  url.pathname = `/accounts/${pk}`;\n  const response: Response = await fetch(url);\n  const data = await response.json();\n  const nativeBalance = data.balances.find((b: { asset_type: string }): boolean => b.asset_type === 'native');\n  return nativeBalance.balance;\n}\n", "export async function copyToClipboard(textToCopy: string): Promise<void> {\n  if (!textToCopy) {\n    throw new Error(`Text to copy to the clipboard can't be undefined`);\n  }\n\n  await navigator.clipboard.writeText(textToCopy);\n}\n", "import { css } from 'lit';\n\nexport const buttonContainer = css`\n  .btn-container {\n    position: relative;\n  }\n`;\n\nexport const buttonStyles = css`\n  .btn {\n    background: none;\n    border: none;\n    border-radius: var(--button-border-radius, 0.5rem);\n    cursor: pointer;\n    padding: var(--button-padding, 0.5rem 1.25rem);\n    display: flex;\n    justify-content: center;\n    justify-items: center;\n    align-content: center;\n    align-items: center;\n    line-height: 100%;\n    margin: 0;\n    font-family: 'Open Sans', arial, sans-serif;\n  }\n\n  .btn svg {\n    width: 1rem;\n    height: auto;\n    margin-left: 0.5rem;\n  }\n\n  @media (prefers-color-scheme: light) {\n    .btn {\n      background-color: var(--button-bg-color, #fcfcfc);\n      color: var(--button-text-color, #181818);\n      border: solid var(--button-text-color, #181818) 1px;\n    }\n\n    .btn svg circle,\n    .btn svg path {\n      stroke: var(--button-text-color, #181818);\n    }\n  }\n\n  @media (prefers-color-scheme: dark) {\n    .btn {\n      background-color: var(--button-bg-color, #161616);\n      color: var(--button-text-color, #fcfcfc);\n      border: solid var(--button-text-color, #fcfcfc) 1px;\n    }\n\n    .btn svg circle,\n    .btn svg path {\n      stroke: var(--button-text-color, #fcfcfc);\n    }\n  }\n`;\n\nexport const dropdownWrapper = css`\n  .dropdown-wrapper {\n    position: absolute;\n    top: 110%;\n    right: 0;\n    box-shadow: 0 0.125rem 0.75rem rgba(0, 0, 0, 0.25);\n    z-index: 900;\n    border-radius: 0.75rem;\n    padding: 2rem;\n    width: 18rem;\n    display: flex;\n    flex-direction: column;\n    font-family: 'Open Sans', arial, sans-serif;\n  }\n\n  .dropdown-profile {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    margin-bottom: 2rem;\n  }\n\n  .dropdown-text-solid {\n    font-size: 1rem;\n    line-height: 1.25rem;\n  }\n\n  .dropdown-text {\n    font-size: 0.875rem;\n    line-height: 1.125rem;\n  }\n\n  .dropdown-action-wrapper {\n    display: flex;\n    flex-direction: column;\n    gap: 0.75rem;\n  }\n\n  .dropdown-action-button {\n    padding: 0.4rem;\n    border-radius: 0.25rem;\n    border: none;\n    background: none;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    gap: 0.5rem;\n    cursor: pointer;\n  }\n\n  .dropdown-close {\n    position: absolute;\n    right: 1rem;\n    top: 1rem;\n    border-radius: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    background: none;\n    border: none;\n    font-size: 1.25rem;\n    cursor: pointer;\n  }\n\n  @media (prefers-color-scheme: light) {\n    .dropdown-wrapper {\n      background-color: var(--button-bg-color, #fcfcfc);\n      border: solid 1px var(--button-solid-text-color, #000000);\n    }\n\n    .dropdown-text-solid,\n    .dropdown-action-button,\n    .dropdown-close {\n      color: var(--button-solid-text-color, #000000);\n    }\n\n    .dropdown-text {\n      color: var(--button-text-color, #181818);\n    }\n\n    svg circle,\n    svg path {\n      stroke: var(--button-text-color, #181818);\n    }\n\n    .dropdown-action-button {\n      border: 1px solid var(--button-text-color, #181818);\n    }\n  }\n\n  @media (prefers-color-scheme: dark) {\n    .dropdown-wrapper {\n      background-color: var(--button-bg-color, #161616);\n      border: solid 1px var(--button-solid-text-color, #ededed);\n    }\n\n    .dropdown-text-solid,\n    .dropdown-action-button,\n    .dropdown-close {\n      color: var(--button-solid-text-color, #ededed);\n    }\n\n    .dropdown-text {\n      color: var(--button-text-color, #a0a0a0);\n    }\n\n    svg circle,\n    svg path {\n      stroke: var(--button-text-color, #fcfcfc);\n    }\n\n    .dropdown-action-button {\n      border: 1px solid var(--button-text-color, #a0a0a0);\n    }\n  }\n`;\n", "import { css, html, LitElement } from 'lit';\nimport { customElement, property, state } from 'lit/decorators.js';\nimport { styleMap } from 'lit/directives/style-map.js';\nimport { firstValueFrom, Subscription, switchMap } from 'rxjs';\nimport { fetchAccountBalance } from '../../services/account.service';\nimport { copyToClipboard } from '../../services/clipboard.service';\nimport { ReactiveState } from '../../state/reactive-state';\nimport { activeAddress$, buttonTheme$, horizonUrl$, removeAddress } from '../../state/store';\nimport { IButtonTheme } from '../../types';\nimport { dropdownWrapper, buttonContainer, buttonStyles } from './styles';\n\nexport enum ButtonThemeType {\n  DARK = 'DARK',\n  LIGHT = 'LIGHT',\n}\n\nexport const ButtonThemes: { [key in ButtonThemeType]: IButtonTheme } = {\n  DARK: {\n    bgColor: '#161616',\n    textColor: '#a0a0a0',\n    solidTextColor: '#ededed',\n    dividerColor: 'rgba(255, 255, 255, 0.15)',\n    buttonPadding: '0.5rem 1.25rem',\n    buttonBorderRadius: '0.5rem',\n  },\n  LIGHT: {\n    bgColor: '#fcfcfc',\n    textColor: '#181818',\n    solidTextColor: '#000000',\n    dividerColor: 'rgba(0, 0, 0, 0.15)',\n    buttonPadding: '0.5rem 1.25rem',\n    buttonBorderRadius: '0.5rem',\n  },\n};\n\n@customElement('stellar-wallets-button')\nexport class StellarWalletsButton extends LitElement {\n  static override styles = [\n    css`\n      :host * {\n        box-sizing: border-box;\n      }\n    `,\n    buttonStyles,\n    buttonContainer,\n    dropdownWrapper,\n  ];\n\n  @property({ type: String, reflect: true })\n  buttonText: string = 'Connect';\n\n  @state()\n  showDropdown: boolean = false;\n\n  @state()\n  accountBalance?: string;\n\n  @state()\n  showCopiedMessage: boolean = false;\n\n  activeAddress: ReactiveState<string | undefined> = new ReactiveState(this, activeAddress$);\n  theme: ReactiveState<IButtonTheme | undefined> = new ReactiveState(this, buttonTheme$);\n  fetchAddressSubscription: Subscription | undefined;\n\n  private get getThemeStyles() {\n    if (!this.theme.value) return {};\n\n    return {\n      '--button-bg-color': this.theme.value.bgColor,\n      '--button-text-color': this.theme.value.textColor,\n      '--button-solid-text-color': this.theme.value.solidTextColor,\n      '--button-divider-color': this.theme.value.dividerColor,\n      '--button-padding': this.theme.value.buttonPadding,\n      '--button-border-radius': this.theme.value.buttonBorderRadius,\n    };\n  }\n\n  onButtonClicked() {\n    if (this.activeAddress.value) {\n      this.showDropdown = !this.showDropdown;\n    } else {\n      this.dispatchEvent(\n        new CustomEvent('button-clicked', {\n          bubbles: true,\n          composed: true,\n        })\n      );\n    }\n  }\n\n  closeDropdown(): void {\n    this.showDropdown = false;\n  }\n\n  disconnect(): void {\n    removeAddress();\n    this.closeDropdown();\n\n    this.dispatchEvent(\n      new CustomEvent('disconnect-wallet', {\n        bubbles: true,\n        composed: true,\n      })\n    );\n  }\n\n  async copyPublicKey(): Promise<void> {\n    await copyToClipboard(this.activeAddress.value!);\n    this.showCopiedMessage = true;\n    await new Promise(r => setTimeout(r, 3000));\n    this.showCopiedMessage = false;\n  }\n\n  async startBalanceFetcher(): Promise<void> {\n    const horizonUrl: string | undefined = await firstValueFrom(horizonUrl$);\n\n    if (horizonUrl) {\n      this.fetchAddressSubscription = this.activeAddress.value$\n        .pipe(\n          switchMap(async (value: string | undefined): Promise<string> => {\n            return value ? fetchAccountBalance(value).catch((): string => '0') : '0';\n          })\n        )\n        .subscribe((balance: string): void => {\n          this.accountBalance = balance;\n        });\n    }\n  }\n\n  override connectedCallback() {\n    super.connectedCallback();\n    this.startBalanceFetcher().then();\n  }\n\n  override disconnectedCallback() {\n    super.disconnectedCallback();\n\n    this.fetchAddressSubscription?.unsubscribe();\n  }\n\n  override render() {\n    const button = html`\n      <button @click=${this.onButtonClicked} class=\"btn\">\n        ${this.activeAddress.value\n          ? this.activeAddress.value.slice(0, 4) + '....' + this.activeAddress.value.slice(-6)\n          : this.buttonText}\n\n        <svg viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n          <path d=\"M6 8H10\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\" />\n          <path\n            d=\"M20.8333 9H18.2308C16.4465 9 15 10.3431 15 12C15 13.6569 16.4465 15 18.2308 15H20.8333C20.9167 15 20.9583 15 20.9935 14.9979C21.5328 14.965 21.9623 14.5662 21.9977 14.0654C22 14.0327 22 13.994 22 13.9167V10.0833C22 10.006 22 9.96726 21.9977 9.9346C21.9623 9.43384 21.5328 9.03496 20.9935 9.00214C20.9583 9 20.9167 9 20.8333 9Z\"\n            stroke-width=\"1.5\" />\n          <path\n            d=\"M20.965 9C20.8873 7.1277 20.6366 5.97975 19.8284 5.17157C18.6569 4 16.7712 4 13 4L10 4C6.22876 4 4.34315 4 3.17157 5.17157C2 6.34315 2 8.22876 2 12C2 15.7712 2 17.6569 3.17157 18.8284C4.34315 20 6.22876 20 10 20H13C16.7712 20 18.6569 20 19.8284 18.8284C20.6366 18.0203 20.8873 16.8723 20.965 15\"\n            stroke-width=\"1.5\" />\n          <path d=\"M17.9912 12H18.0002\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" />\n        </svg>\n      </button>\n    `;\n\n    const dropdown = this.showDropdown\n      ? html`\n          <section class=\"dropdown-wrapper\">\n            <button @click=${this.closeDropdown} class=\"dropdown-close\">x</button>\n\n            <div class=\"dropdown-profile\">\n              <svg\n                style=\"margin-bottom: 1rem\"\n                width=\"36px\"\n                height=\"36px\"\n                viewBox=\"0 0 24 24\"\n                fill=\"none\"\n                xmlns=\"http://www.w3.org/2000/svg\">\n                <circle cx=\"12\" cy=\"6\" r=\"4\" stroke=\"#1C274C\" stroke-width=\"1.5\" />\n                <path\n                  d=\"M19.9975 18C20 17.8358 20 17.669 20 17.5C20 15.0147 16.4183 13 12 13C7.58172 13 4 15.0147 4 17.5C4 19.9853 4 22 12 22C14.231 22 15.8398 21.8433 17 21.5634\"\n                  stroke=\"#1C274C\"\n                  stroke-width=\"1.5\"\n                  stroke-linecap=\"round\" />\n              </svg>\n\n              <h2 style=\"margin: 0 0 0.25rem\" class=\"dropdown-text-solid\">\n                ${this.activeAddress.value?.slice(0, 4)}....${this.activeAddress.value?.slice(-6)}\n              </h2>\n\n              ${this.accountBalance\n                ? html`<h3 style=\"margin: 0\" class=\"dropdown-text\">${this.accountBalance} XLM</h3>`\n                : ''}\n            </div>\n\n            <div class=\"dropdown-action-wrapper\">\n              <button @click=${this.copyPublicKey} class=\"dropdown-action-button\">\n                ${!this.showCopiedMessage\n                  ? html`Copy address\n\n                      <svg\n                        width=\"0.75rem\"\n                        height=\"0.75rem\"\n                        viewBox=\"0 0 24 24\"\n                        fill=\"none\"\n                        xmlns=\"http://www.w3.org/2000/svg\">\n                        <path\n                          fill-rule=\"evenodd\"\n                          clip-rule=\"evenodd\"\n                          d=\"M15 1.25H10.9436C9.10583 1.24998 7.65019 1.24997 6.51098 1.40314C5.33856 1.56076 4.38961 1.89288 3.64124 2.64124C2.89288 3.38961 2.56076 4.33856 2.40314 5.51098C2.24997 6.65019 2.24998 8.10582 2.25 9.94357V16C2.25 17.8722 3.62205 19.424 5.41551 19.7047C5.55348 20.4687 5.81753 21.1208 6.34835 21.6517C6.95027 22.2536 7.70814 22.5125 8.60825 22.6335C9.47522 22.75 10.5775 22.75 11.9451 22.75H15.0549C16.4225 22.75 17.5248 22.75 18.3918 22.6335C19.2919 22.5125 20.0497 22.2536 20.6517 21.6517C21.2536 21.0497 21.5125 20.2919 21.6335 19.3918C21.75 18.5248 21.75 17.4225 21.75 16.0549V10.9451C21.75 9.57754 21.75 8.47522 21.6335 7.60825C21.5125 6.70814 21.2536 5.95027 20.6517 5.34835C20.1208 4.81753 19.4687 4.55348 18.7047 4.41551C18.424 2.62205 16.8722 1.25 15 1.25ZM17.1293 4.27117C16.8265 3.38623 15.9876 2.75 15 2.75H11C9.09318 2.75 7.73851 2.75159 6.71085 2.88976C5.70476 3.02502 5.12511 3.27869 4.7019 3.7019C4.27869 4.12511 4.02502 4.70476 3.88976 5.71085C3.75159 6.73851 3.75 8.09318 3.75 10V16C3.75 16.9876 4.38624 17.8265 5.27117 18.1293C5.24998 17.5194 5.24999 16.8297 5.25 16.0549V10.9451C5.24998 9.57754 5.24996 8.47522 5.36652 7.60825C5.48754 6.70814 5.74643 5.95027 6.34835 5.34835C6.95027 4.74643 7.70814 4.48754 8.60825 4.36652C9.47522 4.24996 10.5775 4.24998 11.9451 4.25H15.0549C15.8297 4.24999 16.5194 4.24998 17.1293 4.27117ZM7.40901 6.40901C7.68577 6.13225 8.07435 5.9518 8.80812 5.85315C9.56347 5.75159 10.5646 5.75 12 5.75H15C16.4354 5.75 17.4365 5.75159 18.1919 5.85315C18.9257 5.9518 19.3142 6.13225 19.591 6.40901C19.8678 6.68577 20.0482 7.07435 20.1469 7.80812C20.2484 8.56347 20.25 9.56458 20.25 11V16C20.25 17.4354 20.2484 18.4365 20.1469 19.1919C20.0482 19.9257 19.8678 20.3142 19.591 20.591C19.3142 20.8678 18.9257 21.0482 18.1919 21.1469C17.4365 21.2484 16.4354 21.25 15 21.25H12C10.5646 21.25 9.56347 21.2484 8.80812 21.1469C8.07435 21.0482 7.68577 20.8678 7.40901 20.591C7.13225 20.3142 6.9518 19.9257 6.85315 19.1919C6.75159 18.4365 6.75 17.4354 6.75 16V11C6.75 9.56458 6.75159 8.56347 6.85315 7.80812C6.9518 7.07435 7.13225 6.68577 7.40901 6.40901Z\" />\n                      </svg>`\n                  : 'Copied!!'}\n              </button>\n\n              <button @click=${this.disconnect} class=\"dropdown-action-button\">\n                Disconnect\n\n                <svg\n                  width=\"0.75rem\"\n                  height=\"0.75rem\"\n                  viewBox=\"0 0 24 24\"\n                  fill=\"none\"\n                  xmlns=\"http://www.w3.org/2000/svg\">\n                  <path\n                    d=\"M18 8L22 12M22 12L18 16M22 12H9M15 4.20404C13.7252 3.43827 12.2452 3 10.6667 3C5.8802 3 2 7.02944 2 12C2 16.9706 5.8802 21 10.6667 21C12.2452 21 13.7252 20.5617 15 19.796\"\n                    stroke-width=\"2\"\n                    stroke-linecap=\"round\"\n                    stroke-linejoin=\"round\" />\n                </svg>\n              </button>\n            </div>\n          </section>\n        `\n      : '';\n\n    return html`\n      <section style=${styleMap(this.getThemeStyles)} class=\"btn-container\">${button} ${dropdown}</section>\n    `;\n  }\n}\n", "export function generateRandomToken() {\r\n    const rn = new Uint32Array(4)\r\n    if (typeof crypto !== 'undefined' && crypto.getRandomValues) {\r\n        crypto.getRandomValues(rn)\r\n    } else {\r\n        for (let i = 0; i < rn.length; i++) {\r\n            rn[i] = Math.floor(Math.random() * 4294967295)\r\n        }\r\n    }\r\n    return Array.from(rn).map(n => n.toString(36)).join('')\r\n}", "const intentInterface = {\r\n    public_key: {\r\n        title: 'View public key',\r\n        description: 'Requests account public key. It\\'s a simple way of authentication for Stellar-based applications. The response ensures that a user owns the corresponding secret key.',\r\n        implicitFlow: false,\r\n        params: {\r\n            token: {\r\n                description: 'Verification token generated by the application (should be unique or random).',\r\n                type: 'string',\r\n                required: false\r\n            },\r\n            callback: {\r\n                description: 'Optional URL callback where Albedo will POST a signed token and public key.',\r\n                type: 'string',\r\n                required: false\r\n            },\r\n            require_existing: {\r\n                description: 'Allow existing Albedo accounts only.',\r\n                type: 'boolean',\r\n                required: false\r\n            }\r\n        },\r\n        returns: {\r\n            pubkey: {\r\n                description: 'User-selected public key.',\r\n                type: 'string'\r\n            },\r\n            signed_message: {\r\n                description: 'HEX-encoded authentication message derived from the public key and verification token.',\r\n                type: 'string'\r\n            },\r\n            signature: {\r\n                description: 'HEX-encoded ED25519 signature of the authentication message that can be further used to verify user\\'s keypair ownership.',\r\n                type: 'string'\r\n            }\r\n        }\r\n    },\r\n    sign_message: {\r\n        title: 'Sign text message',\r\n        description: 'Requests arbitrary message signing. Can be used to implement identity/ownership verification.',\r\n        implicitFlow: true,\r\n        params: {\r\n            message: {\r\n                description: 'Text message to sign.',\r\n                type: 'string',\r\n                required: true\r\n            },\r\n            pubkey: {\r\n                description: 'Specific public key requested by the application.',\r\n                type: 'string',\r\n                required: false\r\n            },\r\n            callback: {\r\n                description: 'Optional URL callback where Albedo will POST a signed message.',\r\n                type: 'string',\r\n                required: false\r\n            }\r\n        },\r\n        returns: {\r\n            pubkey: {\r\n                description: 'User-selected public key.',\r\n                type: 'string'\r\n            },\r\n            original_message: {\r\n                description: 'Text message to sign from request.',\r\n                type: 'string'\r\n            },\r\n            signed_message: {\r\n                description: 'HEX-encoded message derived from the public key and original message.',\r\n                type: 'string'\r\n            },\r\n            message_signature: {\r\n                description: 'HEX-encoded ED25519 signature of the signed message.',\r\n                type: 'string'\r\n            }\r\n        }\r\n    },\r\n    tx: {\r\n        title: 'Sign transaction',\r\n        description: 'Requests a signature for the transaction. Returns the signed transaction envelope that can be submitted to the network or used for multi-sig coordination.',\r\n        implicitFlow: true,\r\n        params: {\r\n            xdr: {\r\n                description: 'XDR-encoded transaction envelope to sign.',\r\n                type: 'string',\r\n                required: true\r\n            },\r\n            pubkey: {\r\n                description: 'Specific public key requested by the application.',\r\n                type: 'string',\r\n                required: false\r\n            },\r\n            network: {\r\n                description: 'Stellar network identifier.',\r\n                type: 'string',\r\n                required: false\r\n            },\r\n            callback: {\r\n                description: 'Optional URL callback where Albedo will POST the signed transaction XDR instead of submitting it to Horizon.',\r\n                type: 'string',\r\n                required: false\r\n            },\r\n            description: {\r\n                description: 'Optional human-friendly short transaction description provided by developers.',\r\n                type: 'string',\r\n                required: false\r\n            },\r\n            submit: {\r\n                description: 'If set, the signed transaction will be submitted to the Horizon server instead of returning it to the application.',\r\n                type: 'boolean',\r\n                required: false\r\n            }\r\n        },\r\n        returns: {\r\n            xdr: {\r\n                description: 'XDR-encoded transaction envelope from request.',\r\n                type: 'string'\r\n            },\r\n            tx_hash: {\r\n                description: 'HEX-encoded transaction hash.',\r\n                type: 'string'\r\n            },\r\n            signed_envelope_xdr: {\r\n                description: 'XDR-encoded transaction envelope with new signatures.',\r\n                type: 'string'\r\n            },\r\n            network: {\r\n                description: 'Stellar network identifier.',\r\n                type: 'string'\r\n            },\r\n            result: {\r\n                description: 'Optional response from Horizon if the transaction has been submitted automatically.',\r\n                type: 'object'\r\n            }\r\n        }\r\n    },\r\n    pay: {\r\n        title: 'Make payment',\r\n        description: 'Requests a payment from a user. Works with any Stellar asset, supports transaction memo.',\r\n        implicitFlow: true,\r\n        params: {\r\n            amount: {\r\n                description: 'Requested payment amount.',\r\n                type: 'string',\r\n                required: true\r\n            },\r\n            destination: {\r\n                description: 'Payment destination address.',\r\n                type: 'string',\r\n                required: true\r\n            },\r\n            asset_code: {\r\n                description: 'Asset code (skip for XLM).',\r\n                type: 'string',\r\n                required: false\r\n            },\r\n            asset_issuer: {\r\n                description: 'Asset issuer (skip for XLM).',\r\n                type: 'string',\r\n                required: false\r\n            },\r\n            memo: {\r\n                description: 'Transaction memo (required for exchanges and some anchors).',\r\n                type: 'string',\r\n                required: false\r\n            },\r\n            memo_type: {\r\n                description: 'Transaction memo type.',\r\n                type: 'string',\r\n                required: false\r\n            },\r\n            pubkey: {\r\n                description: 'Specific public key requested by the application.',\r\n                type: 'string',\r\n                required: false\r\n            },\r\n            network: {\r\n                description: 'Stellar network identifier or private network passphrase.',\r\n                type: 'string',\r\n                required: false\r\n            },\r\n            callback: {\r\n                description: 'Optional URL callback where Albedo will POST the signed transaction XDR instead of submitting it to Horizon. ',\r\n                type: 'string',\r\n                required: false\r\n            },\r\n            submit: {\r\n                description: 'If set, the signed transaction will be submitted to the Horizon server instead of returning it to the application.',\r\n                type: 'boolean',\r\n                required: false\r\n            }\r\n        },\r\n        returns: {\r\n            amount: {\r\n                description: 'Payment amount from request.',\r\n                type: 'string'\r\n            },\r\n            destination: {\r\n                description: 'Payment destination address from request.',\r\n                type: 'string'\r\n            },\r\n            asset_code: {\r\n                description: 'Asset code from request.',\r\n                type: 'string'\r\n            },\r\n            asset_issuer: {\r\n                description: 'Asset issuer from request.',\r\n                type: 'string'\r\n            },\r\n            memo: {\r\n                description: 'Transaction memo from request.',\r\n                type: 'string'\r\n            },\r\n            memo_type: {\r\n                description: 'Transaction memo type from request.',\r\n                type: 'string'\r\n            },\r\n            tx_hash: {\r\n                description: 'HEX-encoded transaction hash.',\r\n                type: 'string'\r\n            },\r\n            signed_envelope_xdr: {\r\n                description: 'XDR-encoded transaction envelope with new signatures.',\r\n                type: 'string'\r\n            },\r\n            pubkey: {\r\n                description: 'User-selected public key.',\r\n                type: 'string'\r\n            },\r\n            network: {\r\n                description: 'Stellar network identifier.',\r\n                type: 'string'\r\n            },\r\n            result: {\r\n                description: 'Optional response from Horizon if the transaction has been submitted automatically.',\r\n                type: 'object'\r\n            }\r\n        }\r\n    },\r\n    trust: {\r\n        title: 'Establish trustline',\r\n        description: 'Requests permission to create a trustline to a given Stellar asset. Gradually simplifies the process of creating trustlines for anchors, ICOs, and airdrops.',\r\n        implicitFlow: true,\r\n        params: {\r\n            asset_code: {\r\n                description: 'Trustline asset code.',\r\n                type: 'string',\r\n                required: true\r\n            },\r\n            asset_issuer: {\r\n                description: 'Trustline asset issuer address.',\r\n                type: 'string',\r\n                required: true\r\n            },\r\n            limit: {\r\n                description: 'Trust limit.',\r\n                type: 'string',\r\n                required: false\r\n            },\r\n            memo: {\r\n                description: 'Transaction memo (required for exchanges and some anchors).',\r\n                type: 'string',\r\n                required: false\r\n            },\r\n            memo_type: {\r\n                description: 'Transaction memo type.',\r\n                type: 'string',\r\n                required: false\r\n            },\r\n            pubkey: {\r\n                description: 'Specific public key requested by the application.',\r\n                type: 'string',\r\n                required: false\r\n            },\r\n            network: {\r\n                description: 'Stellar network identifier or private network passphrase.',\r\n                type: 'string',\r\n                required: false\r\n            },\r\n            callback: {\r\n                description: 'Optional URL callback where Albedo will POST the signed transaction XDR instead of submitting it to Horizon. ',\r\n                type: 'string',\r\n                required: false\r\n            },\r\n            submit: {\r\n                description: 'If set, the signed transaction will be submitted to the Horizon server instead of returning it to the application.',\r\n                type: 'boolean',\r\n                required: false\r\n            }\r\n        },\r\n        returns: {\r\n            asset_code: {\r\n                description: 'Trustline asset code from request.',\r\n                type: 'string'\r\n            },\r\n            asset_issuer: {\r\n                description: 'Trustline asset issuer address from request.',\r\n                type: 'string'\r\n            },\r\n            limit: {\r\n                description: 'Trust limit from request.',\r\n                type: 'string'\r\n            },\r\n            tx_hash: {\r\n                description: 'HEX-encoded transaction hash.',\r\n                type: 'string'\r\n            },\r\n            signed_envelope_xdr: {\r\n                description: 'XDR-encoded transaction envelope with new signatures.',\r\n                type: 'string'\r\n            },\r\n            pubkey: {\r\n                description: 'User-selected public key.',\r\n                type: 'string'\r\n            },\r\n            network: {\r\n                description: 'Stellar network identifier.',\r\n                type: 'string'\r\n            },\r\n            result: {\r\n                description: 'Optional response from Horizon if the transaction has been submitted automatically.',\r\n                type: 'object'\r\n            }\r\n        }\r\n    },\r\n    exchange: {\r\n        title: 'Swap tokens',\r\n        description: 'Requests permission to buy tokens on Stellar DEX at market price.',\r\n        implicitFlow: false,\r\n        params: {\r\n            amount: {\r\n                description: 'The amount of asset to buy.',\r\n                type: 'string',\r\n                required: true\r\n            },\r\n            max_price: {\r\n                description: 'Maximum price the user willing to pay.',\r\n                type: 'string',\r\n                required: true\r\n            },\r\n            sell_asset_code: {\r\n                description: 'Asset code of the asset to sell.',\r\n                type: 'string',\r\n                required: false\r\n            },\r\n            sell_asset_issuer: {\r\n                description: 'Issuer account of the asset to sell.',\r\n                type: 'string',\r\n                required: false\r\n            },\r\n            buy_asset_code: {\r\n                description: 'Asset code of the asset to buy.',\r\n                type: 'string',\r\n                required: false\r\n            },\r\n            buy_asset_issuer: {\r\n                description: 'Issuer account of the asset to buy.',\r\n                type: 'string',\r\n                required: false\r\n            },\r\n            memo: {\r\n                description: 'Transaction memo (required for exchanges and some anchors).',\r\n                type: 'string',\r\n                required: false\r\n            },\r\n            memo_type: {\r\n                description: 'Transaction memo type.',\r\n                type: 'string',\r\n                required: false\r\n            },\r\n            pubkey: {\r\n                description: 'Specific public key requested by the application.',\r\n                type: 'string',\r\n                required: false\r\n            },\r\n            network: {\r\n                description: 'Stellar network identifier or private network passphrase.',\r\n                type: 'string',\r\n                required: false\r\n            },\r\n            callback: {\r\n                description: 'Optional URL callback where Albedo will POST the signed transaction XDR instead of submitting it to Horizon.',\r\n                type: 'string',\r\n                required: false\r\n            },\r\n            submit: {\r\n                description: 'If set, the signed transaction will be submitted to the Horizon server instead of returning it to the application.',\r\n                type: 'boolean',\r\n                required: false\r\n            }\r\n        },\r\n        returns: {\r\n            amount: {\r\n                description: 'The amount of asset to buy from request.',\r\n                type: 'string'\r\n            },\r\n            max_price: {\r\n                description: 'Maximum price the user willing to pay from request.',\r\n                type: 'string'\r\n            },\r\n            sell_asset_code: {\r\n                description: 'Asset code of the asset to sell from request.',\r\n                type: 'string'\r\n            },\r\n            sell_asset_issuer: {\r\n                description: 'Issuer account of the asset to sell from request.',\r\n                type: 'string'\r\n            },\r\n            buy_asset_code: {\r\n                description: 'Asset code of the asset to buy from request.',\r\n                type: 'string'\r\n            },\r\n            buy_asset_issuer: {\r\n                description: 'Issuer account of the asset to buy from request.',\r\n                type: 'string'\r\n            },\r\n            tx_hash: {\r\n                description: 'HEX-encoded transaction hash.',\r\n                type: 'string'\r\n            },\r\n            signed_envelope_xdr: {\r\n                description: 'XDR-encoded transaction envelope with new signatures.',\r\n                type: 'string'\r\n            },\r\n            pubkey: {\r\n                description: 'User-selected public key.',\r\n                type: 'string'\r\n            },\r\n            network: {\r\n                description: 'Stellar network identifier.',\r\n                type: 'string'\r\n            },\r\n            result: {\r\n                description: 'Optional response from Horizon if the transaction has been submitted automatically.',\r\n                type: 'object'\r\n            }\r\n        }\r\n    },\r\n    implicit_flow: {\r\n        title: 'Implicit permissions',\r\n        description: 'Requests temporary access token for one or more intents that can be used to execute actions without explicit confirmation from the user. In order to be executed implicitly, an implicit flow permissions for a given intent should be granted and \"pubkey\" parameter set.',\r\n        implicitFlow: false,\r\n        params: {\r\n            intents: {\r\n                description: 'Requested implicit flow intents.',\r\n                type: 'string|string[]',\r\n                required: true\r\n            },\r\n            network: {\r\n                description: 'Stellar network identifier or private network passphrase.',\r\n                type: 'string',\r\n                required: false\r\n            }\r\n        },\r\n        returns: {\r\n            granted: {\r\n                description: 'Whether a user granted permissions or not.',\r\n                type: 'boolean'\r\n            },\r\n            intents: {\r\n                description: 'Requested implicit flow intents.',\r\n                type: 'string[]'\r\n            },\r\n            grants: {\r\n                description: 'Implicit flow intents that have been granted.',\r\n                type: 'string[]'\r\n            },\r\n            session: {\r\n                description: 'Unique implicit session id.',\r\n                type: 'string'\r\n            },\r\n            valid_until: {\r\n                description: 'Session expiration timestamp.',\r\n                type: 'number'\r\n            },\r\n            pubkey: {\r\n                description: 'User-selected public key.',\r\n                type: 'string'\r\n            },\r\n            network: {\r\n                description: 'Stellar network identifier.',\r\n                type: 'string'\r\n            }\r\n        }\r\n    },\r\n    manage_account: {\r\n        title: 'Open account settings',\r\n        description: 'Opens account settings window for a given account.',\r\n        implicitFlow: false,\r\n        params: {\r\n            pubkey: {\r\n                description: 'Specific public key requested by the application.',\r\n                type: 'string',\r\n                required: true\r\n            },\r\n            network: {\r\n                description: 'Stellar network identifier or private network passphrase.',\r\n                type: 'string',\r\n                required: false\r\n            }\r\n        },\r\n        returns: {\r\n            pubkey: {\r\n                description: 'Public key from intent request.',\r\n                type: 'string'\r\n            }\r\n        }\r\n    },\r\n    batch: {\r\n        title: 'Intents batch',\r\n        description: 'Requests execution of several tx intents bundled together. This intent is atomic – a user confirms or rejects all bundled requests at once, with the same account and the same Stellar network.',\r\n        implicitFlow: true,\r\n        params: {\r\n            intents: {\r\n                description: 'Requested tx intents that should be executed together.',\r\n                type: 'object[]',\r\n                required: true\r\n            },\r\n            pubkey: {\r\n                description: 'Specific public key requested by the application.',\r\n                type: 'string',\r\n                required: false\r\n            },\r\n            network: {\r\n                description: 'Stellar network identifier or private network passphrase.',\r\n                type: 'string',\r\n                required: false\r\n            }\r\n        },\r\n        returns: {\r\n            intents: {\r\n                description: 'Requested tx intents.',\r\n                type: 'object[]'\r\n            },\r\n            results: {\r\n                description: 'Array of results for each requested intent.',\r\n                type: 'object[]'\r\n            },\r\n            pubkey: {\r\n                description: 'User-selected public key.',\r\n                type: 'string'\r\n            },\r\n            network: {\r\n                description: 'Stellar network identifier.',\r\n                type: 'string'\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport default intentInterface\r\n", "const intentErrors = {\r\n    unhandledError: {\r\n        message: 'Unhandled error occurred. If this error persists, please contact Albedo support.',\r\n        code: -1\r\n    },\r\n    externalError: {\r\n        message: 'External error occurred.',\r\n        code: -2\r\n    },\r\n    invalidIntentRequest: {\r\n        message: 'Intent request is invalid.',\r\n        code: -3\r\n    },\r\n    actionRejectedByUser: {\r\n        message: 'Action request was rejected by the user.',\r\n        code: -4\r\n    },\r\n    horizonError: {\r\n        message: 'Transaction failed when submitted to Stellar network.',\r\n        code: -5\r\n    },\r\n    callbackError: {\r\n        message: 'Callback redirect failed.',\r\n        code: -6\r\n    }\r\n}\r\n\r\nexport default intentErrors", "import {generateRandomToken} from './random-token-generator'\r\nimport intentErrors from './intent-errors'\r\n\r\n/**\r\n * Create transport handler for a given window|iframe and establish communication channel.\r\n * @param {Window} targetWindow - Transport window|iframe reference.\r\n * @param {Boolean} ephemeral - If set to true, automatically closes the window opened after receiving the response.\r\n */\r\nfunction TransportHandler(targetWindow, ephemeral = false) {\r\n    this.windowHandler = targetWindow\r\n    this.ephemeral = !!ephemeral\r\n    this.isLoaded = false\r\n    this.pendingRequests = {}\r\n    this.preprocessRequestParams = null\r\n    this.onLoaded = new Promise((resolve, reject) => this.onLoadedCallback = resolve).then(() => this)\r\n    this.messageHandler = this.messageHandler.bind(this)\r\n    window.addEventListener('message', this.messageHandler, false)\r\n}\r\n\r\nTransportHandler.prototype = {\r\n\r\n    isLoaded: false,\r\n\r\n    protocolVersion: 3,\r\n\r\n    markLoaded() {\r\n        const {onLoadedCallback} = this\r\n        if (onLoadedCallback) {\r\n            this.onLoadedCallback = null\r\n            this.isLoaded = true\r\n            onLoadedCallback()\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Handler for incoming communication messages processing.\r\n     * @param {Object} data - Received data.\r\n     */\r\n    messageHandler({data}) {\r\n        if (data.albedo) {\r\n            this.matchProtocolVersion(data.albedo.protocol)\r\n            return this.markLoaded()\r\n        }\r\n        if (data.albedoIntentResult) {\r\n            const {__reqid, ...result} = data.albedoIntentResult,\r\n                pending = this.pendingRequests[__reqid]\r\n            if (pending) {\r\n                delete this.pendingRequests[__reqid]\r\n                pending(result)\r\n                if (this.ephemeral) {\r\n                    window.removeEventListener('message', this.messageHandler, false)\r\n                    this.windowHandler.close()\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Handler for the transport window close event.\r\n     */\r\n    transportCloseHandler() {\r\n        for (let key in this.pendingRequests)\r\n            if (this.pendingRequests.hasOwnProperty(key)) {\r\n                const pending = this.pendingRequests[key]\r\n                delete this.pendingRequests[key]\r\n                pending(intentErrors.actionRejectedByUser)\r\n            }\r\n    },\r\n\r\n    /**\r\n     * Request intent confirmation using current transport.\r\n     * @param {Object} params - Intent request params.\r\n     * @return {Promise}\r\n     */\r\n    postMessage(params) {\r\n        const nonce = generateRandomToken()\r\n        return new Promise((resolve, reject) => {\r\n            this.onLoaded.then(() => {\r\n                this.pendingRequests[nonce] = handleIntentResponsePromise.bind(this, resolve, reject)\r\n                params = Object.assign({__reqid: nonce, __albedo_intent_version: this.protocolVersion}, params)\r\n                if (this.preprocessRequestParams) {\r\n                    params = this.preprocessRequestParams(params)\r\n                }\r\n                this.windowHandler.postMessage(params, '*')\r\n            })\r\n        })\r\n    },\r\n\r\n    /**\r\n     * Check protocol version compatibility.\r\n     * @param {Number} albedoProtocolVersion\r\n     */\r\n    matchProtocolVersion(albedoProtocolVersion) {\r\n        const versionDif = albedoProtocolVersion - this.protocolVersion\r\n        if (versionDif === 0) return //everything is good\r\n        const error = `@albedo-link/intent module protocol version (${this.protocolVersion}) is incompatible with current Albedo protocol version ${albedoProtocolVersion}.`\r\n        if (versionDif > 0) {\r\n            console.warn(error + ' Please update @albedo-link/intent module to avoid possible connection problems.')\r\n        } else if (versionDif < 0) {\r\n            this.windowHandler.close()\r\n            throw new Error(error)\r\n        }\r\n    }\r\n}\r\n\r\nfunction handleIntentResponsePromise(resolve, reject, res) {\r\n    if (res.error) {\r\n        reject(res)\r\n    } else {\r\n        resolve(res)\r\n    }\r\n}\r\n\r\nexport default TransportHandler\r\n", "import TransportHandler from './transport-handler'\r\n\r\n/**\r\n * Create explicit dialog window transport.\r\n * @param {String} frontendUrl - URL of the Albedo frontend.\r\n * @return {TransportHandler}\r\n */\r\nfunction createDialogTransport(frontendUrl) {\r\n    const url = `${frontendUrl}/confirm`,\r\n        w = 480,\r\n        h = 600,\r\n        // Fixes dual-screen position                         Most browsers      Firefox\r\n        dualScreenLeft = window.screenLeft !== undefined ? window.screenLeft : window.screenX,\r\n        dualScreenTop = window.screenTop !== undefined ? window.screenTop : window.screenY,\r\n        currentWindowWidth = window.innerWidth ? window.innerWidth : document.documentElement.clientWidth ? document.documentElement.clientWidth : screen.width,\r\n        currentWindowHeight = window.innerHeight ? window.innerHeight : document.documentElement.clientHeight ? document.documentElement.clientHeight : screen.height,\r\n        left = ((currentWindowWidth / 2) - (w / 2)) + dualScreenLeft,\r\n        top = ((currentWindowHeight / 2) - (h / 2)) + dualScreenTop\r\n\r\n    const dialogWindow = window.open(url, 'auth.albedo.link', `height=${h},width=${w},top=${top},left=${left},menubar=0,toolbar=0,location=0,status=0,personalbar=0,scrollbars=0,dependent=1`)\r\n    return new TransportHandler(dialogWindow, true).onLoaded\r\n}\r\n\r\nlet sharedIframeTransport = null\r\n\r\n/**\r\n * Create implicit transport based on hidden iframe.\r\n * @param {String} frontendUrl - URL of the Albedo frontend.\r\n * @return {TransportHandler}\r\n */\r\nfunction createIframeTransport(frontendUrl) {\r\n    //check if already initialized\r\n    if (!sharedIframeTransport) {\r\n        const iframe = document.createElement('iframe')\r\n        iframe.style.border = 'none'\r\n        Object.assign(iframe, {\r\n            width: '0',\r\n            height: '0',\r\n            frameBorder: '0',\r\n            referrerPolicy: 'origin',\r\n            src: `${frontendUrl}`\r\n        })\r\n        document.body.appendChild(iframe)\r\n        sharedIframeTransport = new TransportHandler(iframe.contentWindow)\r\n    }\r\n    return sharedIframeTransport.onLoaded\r\n}\r\n\r\nexport {createDialogTransport, createIframeTransport}", "function ImplicitSession({session, pubkey, grants, valid_until}) {\r\n    this.key = session\r\n    this.pubkey = pubkey\r\n    this.grants = grants.slice()\r\n    this.validUntil = valid_until\r\n    //prevent accidental changes\r\n    Object.freeze(this)\r\n    Object.freeze(this.grants)\r\n}\r\n\r\nImplicitSession.prototype = {\r\n    /**\r\n     * Unique session key.\r\n     * @type {String}\r\n     */\r\n    key: '',\r\n\r\n    /**\r\n     * Public key of the key pair used to authorize the session.\r\n     * @type {String}\r\n     */\r\n    pubkey: '',\r\n\r\n    /**\r\n     * Granted permissions.\r\n     * @type {Array<String>}\r\n     */\r\n    grants: [],\r\n\r\n    /**\r\n     * Time-to-live.\r\n     * @type {Number}\r\n     */\r\n    validUntil: 0,\r\n\r\n    /**\r\n     * Check whether the session is expired or not.\r\n     * @return {boolean}\r\n     */\r\n    get isExpired() {\r\n        //2 seconds reserve\r\n        return this.validUntil - 2000 < new Date().getTime()\r\n    },\r\n\r\n    toJSON() {\r\n        return {\r\n            session: this.key,\r\n            pubkey: this.pubkey,\r\n            grants: this.grants.slice(),\r\n            valid_until: this.validUntil\r\n        }\r\n    }\r\n}\r\n\r\nexport default ImplicitSession", "import ImplicitSession from './implicit-session'\r\n\r\nconst storagePrefix = 'albedo_session_',\r\n    implicitSessions = {}\r\n\r\nfunction getStorage() {\r\n    return window.sessionStorage\r\n}\r\n\r\n/**\r\n * Whether to save the session to the browser internal session storage - allows sharing of session data\r\n * between multiple browser tabs but potentially is less secure than the local variable storage.\r\n * @type {boolean}\r\n */\r\nconst saveToBrowserStorage = true\r\n\r\nexport function saveImplicitSession(intentResult) {\r\n    const session = new ImplicitSession(intentResult)\r\n    if (!saveToBrowserStorage) {\r\n        implicitSessions[session.pubkey] = session\r\n    } else {\r\n        getStorage().setItem(storagePrefix + session.pubkey, JSON.stringify(session))\r\n    }\r\n}\r\n\r\nfunction retrieveSessionFromStorage(pubkey) {\r\n    let session\r\n    if (!saveToBrowserStorage) {\r\n        session = implicitSessions[pubkey]\r\n    } else {\r\n        const restored = getStorage().getItem(storagePrefix + pubkey)\r\n        if (restored) {\r\n            session = new ImplicitSession(JSON.parse(restored))\r\n        }\r\n    }\r\n    if (!session) return null\r\n    if (session.isExpired) {\r\n        forgetSession(pubkey)\r\n        return null\r\n    }\r\n    return session\r\n}\r\n\r\n/**\r\n * Find active implicit session by intent and pubkey.\r\n * @param {String} intent - Intent code.\r\n * @param {String} pubkey - Public key associated with the session.\r\n * @return {ImplicitSession|null}\r\n */\r\nexport function getImplicitSession(intent, pubkey) {\r\n    const session = retrieveSessionFromStorage(pubkey)\r\n    if (!session || !session.grants.includes(intent)) return null\r\n    return session\r\n}\r\n\r\n/**\r\n * Retrieve all active sessions.\r\n * @return {Array<ImplicitSession>}\r\n */\r\nexport function getAllImplicitSessions() {\r\n    const storage = getStorage()\r\n    return Object.keys(storage)\r\n        .filter(key => key.indexOf(storagePrefix) === 0)\r\n        .map(key => retrieveSessionFromStorage(key.substr(storagePrefix.length)))\r\n        .filter(session => !!session)\r\n}\r\n\r\n/**\r\n * Remove an explicit session handler from the storage.\r\n * @param {String} pubkey - Public key associated with the session.\r\n */\r\nexport function forgetSession(pubkey) {\r\n    if (!saveToBrowserStorage) {\r\n        delete implicitSessions[pubkey]\r\n    } else {\r\n        getStorage().removeItem(storagePrefix + pubkey)\r\n    }\r\n}", "import intentInterface from './intent-interface'\r\nimport intentErrors from './intent-errors'\r\nimport {createDialogTransport, createIframeTransport} from './transport-builder'\r\nimport {getImplicitSession, saveImplicitSession} from './implicit-session-storage'\r\n\r\nfunction intentError(msg) {\r\n    return Object.assign(new Error(), intentErrors.invalidIntentRequest, {ext: msg})\r\n}\r\n\r\n/**\r\n * Request user's confirmation for the specified action.\r\n * @param {Object} params - Intent parameters.\r\n * @param {String} frontendUrl - URL of the Albedo frontend.\r\n * @return {Promise}\r\n */\r\nexport function requestIntentConfirmation(params, frontendUrl) {\r\n    try {\r\n        const {intent} = params\r\n        //intent should be present\r\n        if (!intent)\r\n            throw intentError('Parameter \"intent\" is required.')\r\n        const intentDescriptor = intentInterface[intent]\r\n        //check interface compliance\r\n        if (!intentDescriptor)\r\n            throw intentError(`Unknown intent: \"${intent}\".`)\r\n        //build request data\r\n        const requestParams = prepareRequestParams(intentDescriptor, params)\r\n        //create transport and dispatch request\r\n        return prepareTransport(requestParams, frontendUrl)\r\n            //dispatch intent request\r\n            .then(transport => sendRequest(requestParams, transport))\r\n    } catch (e) {\r\n        const {code = -1, message, ext} = e,\r\n            res = {message, code}\r\n        if (ext) {\r\n            res.ext = ext\r\n        }\r\n        return Promise.reject(res)\r\n    }\r\n}\r\n\r\n/**\r\n * Create/retrieve an appropriate window transport for given intent params.\r\n * @param {Object} params - Intent params provided by the third-party app.\r\n * @param {String} frontendUrl - URL of the Albedo website.\r\n * @return {TransportHandler}\r\n */\r\nfunction prepareTransport(params, frontendUrl) {\r\n    //check if intent supports implicit flow and the permission was granted to the app\r\n    if (params.pubkey) {\r\n        const session = getImplicitSession(params.intent, params.pubkey)\r\n        if (session) {\r\n            params.session = session.key\r\n            //implicit session can be executed without a dialog window\r\n            return createIframeTransport(frontendUrl)\r\n        }\r\n    }\r\n    //create iframe transport in advance if the implicit flow has been requested\r\n    setTimeout(() => {\r\n        if (params.intent === 'implicit_flow') {\r\n            createIframeTransport(frontendUrl)\r\n        }\r\n    }, 200)\r\n    //create dialog window transport if only interactive authorization flow is available\r\n    return createDialogTransport(frontendUrl)\r\n}\r\n\r\n/**\r\n * Send confirmation request for a specific intent using a suitable transport.\r\n * @param {Object} params - Intent params provided by the third-party app.\r\n * @param {TransportHandler} transport - PostMessage transport window handler.\r\n * @return {Promise<Object>}\r\n */\r\nfunction sendRequest(params, transport) {\r\n    return transport.postMessage(params)\r\n        .then(result => {\r\n            //handle implicit session grant response if any\r\n            if (result.intent === 'implicit_flow' && result.granted) {\r\n                //save implicit session to the internal session storage\r\n                saveImplicitSession(result)\r\n            }\r\n            return result\r\n        })\r\n}\r\n\r\n/**\r\n * Pre-process request params provided by the third-party app.\r\n * @param {Object} intentDescriptor - Requested intent descriptor - contains the list of available params.\r\n * @param {Object} params - Intent params provided by the third-party app.\r\n * @return {Object}\r\n */\r\nfunction prepareRequestParams(intentDescriptor, params) {\r\n    //validate parameters\r\n    if (typeof params !== 'object')\r\n        throw intentError('Intent parameters expected.')\r\n    const {intent, pubkey} = params,\r\n        requestParams = {intent}\r\n    //basic account public key validation\r\n    if (pubkey && !/^G[0-9A-Z]{55}$/.test(pubkey))\r\n        throw intentError('Invalid \"pubkey\" parameter. Stellar account public key expected.')\r\n    //check required params\r\n    for (const key in intentDescriptor.params) {\r\n        const props = intentDescriptor.params[key],\r\n            value = params[key]\r\n        if (value) {\r\n            requestParams[key] = value\r\n        } else if (props.required) {\r\n            throw intentError(`Parameter \"${key}\" is required for intent \"${intent}\".`)\r\n        }\r\n    }\r\n    return requestParams\r\n}", "function parseQuery(query = null) {\r\n    if (query === null) {\r\n        query = window.location.search\r\n    }\r\n    if (query[0] === '?') query = query.substr(1)\r\n    const dest = {}\r\n    for (let kv of query.split('&')) {\r\n        const [key, value] = kv.split('=').map(v => decodeURIComponent(v))\r\n        dest[key] = value\r\n    }\r\n    return dest\r\n}\r\n\r\nexport function bindWebStellarLinkHandler(albedoIntent) {\r\n    if (typeof (document) === 'undefined' || !document.addEventListener) return\r\n    document.addEventListener('click', function sep0007Handler(e) {\r\n        //we are only interested in links with \"web+stellar\" protocol\r\n        if (e.target.tagName !== 'A' || (e.target.href || '').indexOf('web+stellar:') !== 0) return\r\n        e.preventDefault()\r\n        e.stopImmediatePropagation()\r\n        const {pathname: intentName, search} = new URL(e.target.href)\r\n        if (!['tx', 'pay'].includes(intentName)) {\r\n            alert(`Invalid operation requested: ${intentName}. It's likely an external application error. Please contact support team of ${window.location.origin}.`)\r\n            return\r\n        }\r\n\r\n        const params = parseQuery(search)\r\n        albedoIntent.request(intentName, params)\r\n    }, false)\r\n}\r\n", "import {generateRandomToken} from './random-token-generator'\r\nimport intentInterface from './intent-interface'\r\nimport intentErrors from './intent-errors'\r\nimport {requestIntentConfirmation} from './intent-dispatcher'\r\nimport {forgetSession, getAllImplicitSessions, getImplicitSession} from './implicit-session-storage'\r\nimport {bindWebStellarLinkHandler} from './web+stellar-handler'\r\n\r\nif (typeof window === 'object' && typeof window.fetch !== 'function') {\r\n    throw new Error('Browser FetchAPI is not available. For legacy browsers support use polyfills such as whatwg-fetch.')\r\n}\r\n\r\n/**\r\n * Albedo API external interface implementation.\r\n */\r\nfunction AlbedoIntent() {\r\n}\r\n\r\nAlbedoIntent.prototype = {\r\n    frontendUrl: 'https://albedo.link',\r\n    intentInterface,\r\n    intentErrors,\r\n    /**\r\n     * Initiate external intent request.\r\n     * @param {String} intent - Intent name.\r\n     * @param {Object} [params] - Request parameters.\r\n     * @returns {Promise<Object>}\r\n     */\r\n    request(intent, params) {\r\n        return requestIntentConfirmation(Object.assign(params || {}, {intent}), this.frontendUrl)\r\n    },\r\n\r\n    /**\r\n     * Requests temporary permissions to execute the specific intents without calling confirmation dialog.\r\n     * @param {Object} params - Intent parameters.\r\n     * @param {Array<String>} params.intents - Requested intents.\r\n     * @returns {Promise<ImplicitFlowIntentResult>}\r\n     */\r\n    implicitFlow(params) {\r\n        return this.request('implicit_flow', params)\r\n    },\r\n\r\n    /**\r\n     * Request secure third-party application authentication.\r\n     * @param {Object} params - Intent parameters.\r\n     * @param {String} [params.token] - Verification token generated by the application (should be unique or random).\r\n     * @param {String} [params.require_existing] - Allow existing Albedo accounts only.\r\n     * @returns {Promise<PublicKeyIntentResult>}\r\n     */\r\n    publicKey(params) {\r\n        params = Object.assign({}, params)\r\n        if (!params.token) {\r\n            params.token = generateRandomToken()\r\n        }\r\n        return this.request('public_key', params)\r\n    },\r\n\r\n    /**\r\n     * Request transaction signing, returns the signed transaction envelope.\r\n     * @param {Object} params - Intent parameters.\r\n     * @param {String} params.xdr - A Stellar transaction in XDR format encoded in base64.\r\n     * @param {String} [params.pubkey] - Specific public key requested by the application.\r\n     * @param {String} [params.network] - Stellar network identifier or private network passphrase.\r\n     * @param {Boolean} [params.submit] - If set, the signed transaction will be submitted to the Horizon server instead of returning it to the application.\r\n     * @returns {Promise<TxIntentResult>}\r\n     */\r\n    tx(params) {\r\n        //TODO: check if txXdr is a Transaction instance and serialize it\r\n        return this.request('tx', params)\r\n    },\r\n\r\n    /**\r\n     * Requests execution of several tx intents bundled together. This intent is atomic – a user confirms or rejects all bundled requests at once, with the same account and the same Stellar network.\r\n     * @param {Object} params - Intent parameters.\r\n     * @param {String} params.intents - Requested tx intents.\r\n     * @param {String} [params.pubkey] - Specific public key requested by the application.\r\n     * @param {String} [params.network] - Stellar network identifier or private network passphrase.\r\n     * @returns {Promise<BatchIntentResult>}\r\n     */\r\n    batch(params) {\r\n        return this.request('batch', params)\r\n    },\r\n\r\n    /**\r\n     * Request an asset trustline creation.\r\n     * @param {Object} params - Intent parameters.\r\n     * @param {String} params.destination - Payment destination address.\r\n     * @param {String} params.amount - Amount to pay.\r\n     * @param {String} [params.asset_code] - [Optional] Asset code (if not set XLM is implied).\r\n     * @param {String} [params.asset_issuer] - [Optional] Asset issuer (if not set XLM is implied).\r\n     * @param {String} [params.memo] - [Optional] Memo to be included in the payment.\r\n     * @param {('MEMO_TEXT' | 'MEMO_ID' | 'MEMO_HASH' | 'MEMO_RETURN')} [params.memo_type] - [Optional] Memo type to be included in the payment.\r\n     * @param {String} [params.pubkey] - Specific public key requested by the application.\r\n     * @param {String} [params.network] - Stellar network identifier or private network passphrase.\r\n     * @param {Boolean} [params.submit] - If set, the signed transaction will be submitted to the Horizon server instead of returning it to the application.\r\n     * @returns {Promise<PayIntentResult>}\r\n     */\r\n    pay(params) {\r\n        return this.request('pay', params)\r\n    },\r\n\r\n    /**\r\n     * Request an asset trustline creation.\r\n     * @param {Object} params - Intent parameters.\r\n     * @param {String} params.asset_code - Asset code.\r\n     * @param {String} params.asset_issuer - Asset account issuer.\r\n     * @param {String} [params.limit] - [Optional] Trustline limit.\r\n     * @param {String} [params.pubkey] - Specific public key requested by the application.\r\n     * @param {String} [params.network] - Stellar network identifier or private network passphrase.\r\n     * @param {Boolean} [params.submit] - If set, the signed transaction will be submitted to the Horizon server instead of returning it to the application.\r\n     * @returns {Promise<TrustIntentResult>}\r\n     */\r\n    trust(params) {\r\n        return this.request('trust', params)\r\n    },\r\n\r\n    /**\r\n     * Request token exchange on Stellar DEX.\r\n     * @param {Object} params - Intent parameters.\r\n     * @param {String} params.destination - Payment destination address.\r\n     * @param {String} params.amount - Amount to pay.\r\n     * @param {String} params.max_price - Maximum price to pay.\r\n     * @param {String} [params.sell_asset_code] - [Optional] Selling asset code (if not set XLM is implied).\r\n     * @param {String} [params.sell_asset_issuer] - [Optional] Selling asset issuer (if not set XLM is implied).\r\n     * @param {String} [params.buy_asset_code] - [Optional] Selling asset code (if not set XLM is implied).\r\n     * @param {String} [params.buy_asset_issuer] - [Optional] Selling asset issuer (if not set XLM is implied).\r\n     * @return {Promise<ExchangeIntentResult>}\r\n     */\r\n    exchange(params) {\r\n        return this.request('exchange', params)\r\n    },\r\n\r\n    /**\r\n     * Request arbitrary data signing.\r\n     * @param {Object} params - Intent parameters.\r\n     * @param {String} params.message - Text message to sign.\r\n     * @param {String} [params.pubkey] - Specific public key requested by the application.\r\n     * @returns {Promise<SignMessageIntentResult>}\r\n     */\r\n    signMessage(params) {\r\n        params = Object.assign({}, params, {message: normalizeMessageToSign(params.message)})\r\n        return this.request('sign_message', params)\r\n    },\r\n\r\n    /**\r\n     * Open account settings window for a given account.\r\n     * @param {Object} params - Intent parameters.\r\n     * @param {String} params.pubkey - Specific public key requested by the application.\r\n     * @param {String} [params.network] - Stellar network identifier or private network passphrase.\r\n     * @returns {Promise<ManageAccountIntentResult>}\r\n     */\r\n    manageAccount(params) {\r\n        return this.request('manage_account', params)\r\n    },\r\n\r\n    /**\r\n     * Generate random token that can be used for authentication or encryption\r\n     * @return {String}\r\n     */\r\n    generateRandomToken() {\r\n        return generateRandomToken()\r\n    },\r\n\r\n    /**\r\n     * Check whether an implicit session exists for a given intent and pubkey.\r\n     * @param {String} intent\r\n     * @param {String} pubkey\r\n     * @return {boolean}\r\n     */\r\n    isImplicitSessionAllowed(intent, pubkey) {\r\n        return !!getImplicitSession(intent, pubkey)\r\n    },\r\n\r\n    /**\r\n     * Enumerate all currently active implicit sessions.\r\n     * @returns {Array<{pubkey: String, session: String, valid_until: Number, grants: Array<String>}>}\r\n     */\r\n    listImplicitSessions() {\r\n        return getAllImplicitSessions()\r\n    },\r\n\r\n    /**\r\n     * Revoke session permission granted for an account.\r\n     * @param {String} pubkey\r\n     */\r\n    forgetImplicitSession(pubkey) {\r\n        forgetSession(pubkey)\r\n    }\r\n}\r\n\r\n/**\r\n * Normalize a message before sending it to the signing endpoint.\r\n * @param {String} message - Message to normalize.\r\n * @returns {String}\r\n */\r\nfunction normalizeMessageToSign(message) {\r\n    switch (typeof message) {\r\n        case 'string':\r\n            return message\r\n        case 'undefined':\r\n            return ''\r\n    }\r\n    return JSON.stringify(message)\r\n}\r\n\r\nconst albedo = new AlbedoIntent()\r\nalbedo.default = albedo\r\n\r\nbindWebStellarLinkHandler(albedo)\r\n\r\nexport {intentInterface, intentErrors}\r\n\r\nexport default albedo", "import albedo from '@albedo-link/intent';\n\nimport { ModuleInterface, ModuleType, WalletNetwork } from '../types';\nimport { parseError } from '../utils';\n\nexport const ALBEDO_ID = 'albedo';\n\nexport class AlbedoModule implements ModuleInterface {\n  moduleType: ModuleType = ModuleType.HOT_WALLET;\n\n  productId: string = ALBEDO_ID;\n  productName: string = 'Albedo';\n  productUrl: string = 'https://albedo.link/';\n  productIcon: string = 'https://stellar.creit.tech/wallet-icons/albedo.png';\n\n  async isAvailable(): Promise<boolean> {\n    return true;\n  }\n\n  async getAddress(): Promise<{ address: string }> {\n    return albedo\n      .publicKey({})\n      .then(result => ({ address: result.pubkey }))\n      .catch(e => {\n        throw parseError(e);\n      });\n  }\n\n  async signTransaction(\n    xdr: string,\n    opts?: {\n      networkPassphrase?: string;\n      address?: string;\n      path?: string;\n      submit?: boolean;\n      submitUrl?: string;\n    }\n  ): Promise<{ signedTxXdr: string; signerAddress?: string }> {\n    return albedo\n      .tx({\n        xdr,\n        pubkey: opts?.address,\n        network: opts?.networkPassphrase\n          ? opts.networkPassphrase === WalletNetwork.PUBLIC\n            ? AlbedoNetwork.PUBLIC\n            : AlbedoNetwork.TESTNET\n          : undefined,\n      })\n      .then(({ signed_envelope_xdr }) => ({\n        signedTxXdr: signed_envelope_xdr,\n        signerAddress: opts?.address,\n      }))\n      .catch(e => {\n        throw parseError(e);\n      });\n  }\n\n  async signAuthEntry(): Promise<{ signedAuthEntry: string; signerAddress?: string }> {\n    throw {\n      code: -3,\n      message: 'Albedo does not support the \"signAuthEntry\" function',\n    };\n  }\n\n  /**\n   * We understand that Albedo has a method to sign a message, but that method is not compatible with SEP-0043\n   */\n  async signMessage(): Promise<{ signedMessage: string; signerAddress?: string }> {\n    throw {\n      code: -3,\n      message: 'Albedo does not support the \"signMessage\" function',\n    };\n  }\n\n  async getNetwork(): Promise<{ network: string; networkPassphrase: string }> {\n    throw {\n      code: -3,\n      message: 'Albedo does not support the \"getNetwork\" function',\n    };\n  }\n}\n\nexport enum AlbedoNetwork {\n  PUBLIC = 'public',\n  TESTNET = 'testnet',\n}\n", "import {\n  isConnected,\n  signTransaction,\n  signAuthEntry,\n  requestAccess,\n  signMessage,\n  getNetwork,\n} from '@stellar/freighter-api';\nimport { ModuleInterface, ModuleType } from '../types';\nimport { parseError } from '../utils';\n\nexport const FREIGHTER_ID = 'freighter';\n\nexport class FreighterModule implements ModuleInterface {\n  moduleType: ModuleType = ModuleType.HOT_WALLET;\n\n  productId: string = FREIGHTER_ID;\n  productName: string = 'Freighter';\n  productUrl: string = 'https://freighter.app';\n  productIcon: string = 'https://stellar.creit.tech/wallet-icons/freighter.png';\n\n  async runChecks(): Promise<void> {\n    if (!(await this.isAvailable())) {\n      throw new Error('Freighter is not connected');\n    }\n  }\n\n  async isAvailable(): Promise<boolean> {\n    return isConnected()\n      .then(({ isConnected, error }) => !error && isConnected)\n      .catch((): boolean => false);\n  }\n\n  async getAddress(): Promise<{ address: string }> {\n    return this.runChecks()\n      .then(() => requestAccess())\n      .then(({ address, error }) => {\n        if (error) throw error;\n\n        return { address };\n      })\n      .catch(e => {\n        throw parseError(e);\n      });\n  }\n\n  async signTransaction(\n    xdr: string,\n    opts?: {\n      networkPassphrase?: string;\n      address?: string;\n      path?: string;\n      submit?: boolean;\n      submitUrl?: string;\n    }\n  ): Promise<{ signedTxXdr: string; signerAddress?: string }> {\n    return this.runChecks()\n      .then(async () => {\n        const { signedTxXdr, signerAddress, error } = await signTransaction(xdr, {\n          address: opts?.address,\n          networkPassphrase: opts?.networkPassphrase,\n        });\n\n        if (error) throw error;\n\n        return { signedTxXdr, signerAddress: signerAddress };\n      })\n      .catch(e => {\n        throw parseError(e);\n      });\n  }\n\n  async signAuthEntry(\n    authEntry: string,\n    opts?: {\n      networkPassphrase?: string;\n      address?: string;\n      path?: string;\n    }\n  ): Promise<{ signedAuthEntry: string; signerAddress?: string }> {\n    return this.runChecks()\n      .then(async () => {\n        const { signedAuthEntry, signerAddress, error } = await signAuthEntry(authEntry, {\n          address: opts?.address,\n          networkPassphrase: opts?.networkPassphrase,\n        });\n\n        if (error || !signedAuthEntry) throw error;\n\n        return { signedAuthEntry: signedAuthEntry.toString('base64'), signerAddress: signerAddress };\n      })\n      .catch(e => {\n        throw parseError(e);\n      });\n  }\n\n  async signMessage(\n    message: string,\n    opts?: {\n      networkPassphrase?: string;\n      address?: string;\n      path?: string;\n    }\n  ): Promise<{ signedMessage: string; signerAddress?: string }> {\n    return this.runChecks()\n      .then(async () => {\n        const { signedMessage, signerAddress, error } = await signMessage(message, {\n          address: opts?.address,\n          networkPassphrase: opts?.networkPassphrase,\n        });\n\n        if (error || !signedMessage) throw error;\n\n        return { signedMessage: signedMessage.toString('base64'), signerAddress: signerAddress };\n      })\n      .catch(e => {\n        throw parseError(e);\n      });\n  }\n\n  async getNetwork(): Promise<{ network: string; networkPassphrase: string }> {\n    return this.runChecks()\n      .then(async () => {\n        const { network, networkPassphrase, error } = await getNetwork();\n\n        if (error) throw error;\n\n        return { network, networkPassphrase };\n      })\n      .catch(e => {\n        throw parseError(e);\n      });\n  }\n}\n", "import { isConnected, getPublicKey, signTransaction } from '@lobstrco/signer-extension-api';\nimport { ModuleInterface, ModuleType } from '../types';\nimport { parseError } from '../utils';\n\nexport const LOBSTR_ID = 'lobstr';\n\nexport class LobstrModule implements ModuleInterface {\n  moduleType: ModuleType = ModuleType.HOT_WALLET;\n\n  productId: string = LOBSTR_ID;\n  productName: string = 'LOBSTR';\n  productUrl: string = 'https://lobstr.co';\n  productIcon: string = 'https://stellar.creit.tech/wallet-icons/lobstr.png';\n\n  async isAvailable(): Promise<boolean> {\n    return isConnected();\n  }\n\n  async getAddress(): Promise<{ address: string }> {\n    const runChecks = async () => {\n      if (!(await isConnected())) {\n        throw new Error(`Lobstr is not connected`);\n      }\n    };\n\n    return runChecks()\n      .then(() => getPublicKey())\n      .then(address => ({ address }))\n      .catch(e => {\n        throw parseError(e);\n      });\n  }\n\n  async signTransaction(\n    xdr: string,\n    opts?: {\n      networkPassphrase?: string;\n      address?: string;\n      path?: string;\n      submit?: boolean;\n      submitUrl?: string;\n    }\n  ): Promise<{ signedTxXdr: string; signerAddress?: string }> {\n    const runChecks = async () => {\n      if (!(await isConnected())) {\n        throw new Error(`Lobstr is not connected`);\n      }\n\n      if (opts?.address) {\n        console.warn(`Lobstr doesn't allow specifying what public key should sign the transaction, we skip the value`);\n      }\n\n      if (opts?.networkPassphrase) {\n        console.warn(`Lobstr doesn't allow specifying the network that should be used, we skip the value`);\n      }\n    };\n\n    return runChecks()\n      .then(() => signTransaction(xdr))\n      .then(signedTxXdr => ({ signedTxXdr }))\n      .catch(e => {\n        throw parseError(e);\n      });\n  }\n\n  async signAuthEntry(): Promise<{ signedAuthEntry: string; signerAddress?: string }> {\n    throw {\n      code: -3,\n      message: 'Lobstr does not support the \"signAuthEntry\" function',\n    };\n  }\n\n  async signMessage(): Promise<{ signedMessage: string; signerAddress?: string }> {\n    throw {\n      code: -3,\n      message: 'Lobstr does not support the \"signMessage\" function',\n    };\n  }\n\n  async getNetwork(): Promise<{ network: string; networkPassphrase: string }> {\n    throw {\n      code: -3,\n      message: 'Lobstr does not support the \"getNetwork\" function',\n    };\n  }\n}\n", "import { ModuleInterface, ModuleType, WalletNetwork } from '../types';\nimport { parseError } from '../utils';\n\ndeclare const window: Window &\n  typeof globalThis & {\n    rabet?: {\n      connect: () => Promise<{ publicKey: string }>;\n      sign: (xdr: string, network: RabetNetwork) => Promise<{ xdr: string }>;\n    };\n  };\n\nexport const RABET_ID = 'rabet';\n\nexport class RabetModule implements ModuleInterface {\n  moduleType: ModuleType = ModuleType.HOT_WALLET;\n\n  productId: string = RABET_ID;\n  productName: string = 'Rabet';\n  productUrl: string = 'https://rabet.io/';\n  productIcon: string = 'https://stellar.creit.tech/wallet-icons/rabet.png';\n\n  async isAvailable(): Promise<boolean> {\n    return !!window.rabet;\n  }\n\n  async getAddress(): Promise<{ address: string }> {\n    const runChecks = async () => {\n      if (!window.rabet) {\n        throw new Error('Rabet is not installed');\n      }\n    };\n\n    return runChecks()\n      .then(() => window.rabet!.connect())\n      .then(({ publicKey }) => ({ address: publicKey }))\n      .catch(e => {\n        throw parseError(e);\n      });\n  }\n\n  async signTransaction(\n    xdr: string,\n    opts?: {\n      networkPassphrase?: string;\n      address?: string;\n      path?: string;\n      submit?: boolean;\n      submitUrl?: string;\n    }\n  ): Promise<{ signedTxXdr: string; signerAddress?: string }> {\n    const runChecks = async () => {\n      if (!window.rabet) {\n        throw new Error('Rabet is not installed');\n      }\n\n      if (\n        opts?.address &&\n        opts.networkPassphrase !== WalletNetwork.PUBLIC &&\n        opts.networkPassphrase !== WalletNetwork.TESTNET\n      ) {\n        throw new Error(`Rabet doesn't support the network: ${opts.networkPassphrase}`);\n      }\n\n      if (opts?.address) {\n        console.warn(`Rabet doesn't allow specifying the network that should be used, we skip the value`);\n      }\n    };\n\n    const sign = async () =>\n      window.rabet!.sign(\n        xdr,\n        opts?.networkPassphrase === WalletNetwork.PUBLIC ? RabetNetwork.PUBLIC : RabetNetwork.TESTNET\n      );\n\n    return runChecks()\n      .then(sign)\n      .then(result => ({ signedTxXdr: result?.xdr }))\n      .catch(e => {\n        throw parseError(e);\n      });\n  }\n\n  async signAuthEntry(): Promise<{ signedAuthEntry: string; signerAddress?: string }> {\n    throw {\n      code: -3,\n      message: 'Rabet does not support the \"signAuthEntry\" function',\n    };\n  }\n\n  async signMessage(): Promise<{ signedMessage: string; signerAddress?: string }> {\n    throw {\n      code: -3,\n      message: 'Rabet does not support the \"signMessage\" function',\n    };\n  }\n\n  async getNetwork(): Promise<{ network: string; networkPassphrase: string }> {\n    throw {\n      code: -3,\n      message: 'Rabet does not support the \"getNetwork\" function',\n    };\n  }\n}\n\nexport enum RabetNetwork {\n  PUBLIC = 'mainnet',\n  TESTNET = 'testnet',\n}\n", "export enum EventType {\n  XBULL_CONNECT = 'XBULL_CONNECT',\n  XBULL_GET_PUBLIC_KEY = 'XBULL_GET_PUBLIC_KEY',\n  XBULL_SIGN_XDR = 'XBULL_SIGN_XDR',\n  XBULL_GET_NETWORK = 'XBULL_GET_NETWORK',\n\n\n  XBULL_INITIAL_RESPONSE = 'XBULL_INITIAL_RESPONSE',\n  XBULL_CONNECT_RESPONSE = 'XBULL_CONNECT_RESPONSE',\n  XBULL_SIGN = 'XBULL_SIGN',\n  XBULL_SIGN_RESPONSE = 'XBULL_SIGN_RESPONSE',\n}\n\nexport interface ISDKConstructor {\n  url?: string;\n  preferredTarget?: 'extension' | 'website'; // Default is extension\n}\n\nexport interface IConnectParams {\n  canRequestPublicKey: boolean;\n  canRequestSign: boolean;\n}\n\nexport interface IConnectResult {\n  success: true;\n  publicKey: string;\n}\n\nexport interface ISignParams {\n  xdr: string;\n  publicKey?: string;\n  network?: string;\n}\n\nexport interface ISignResult {\n  success: true;\n  xdr: string;\n}\n\nexport interface IRejectResult {\n  success: false;\n  message?: string;\n}\n\n// REQUESTS TO WALLET\nexport interface IConnectRequestData {\n  type: EventType.XBULL_CONNECT;\n  message: string; // IConnectParams JSON version\n  oneTimeCode: string;\n}\n\nexport interface ISignRequestData {\n  type: EventType.XBULL_SIGN;\n  message: string; // IConnectParams JSON version\n  oneTimeCode: string;\n}\n\n// RESPONSES FROM WALLET\ninterface BaseResponse {\n  type: EventType;\n  message?: string; // base64 encrypted string response\n  oneTimeCode?: string; // base64 string\n}\n\n// All values are base64 encrypted values\nexport interface InitialResponseListenerData extends Required<BaseResponse> {\n  type: EventType.XBULL_INITIAL_RESPONSE;\n  publicKey: string;\n}\n\nexport interface IConnectResponseData extends Required<BaseResponse> {\n  type: EventType.XBULL_CONNECT_RESPONSE;\n  success: true;\n}\n\nexport interface ISignResponseData extends Required<BaseResponse> {\n  type: EventType.XBULL_SIGN_RESPONSE;\n  success: true;\n}\n\nexport interface IRejectResponse extends Pick<BaseResponse, 'type'> {\n  success: false;\n}\n\nexport type SdkResponse<T> = T | { error: SdkError };\n\nexport function isResponseError<T>(response: SdkResponse<T>): response is { error: SdkError } {\n  return !!(response as any).error;\n}\n\ninterface SdkError {\n  message: string;    // general description message returned to the client app\n  code: number;       // unique error code\n  ext?: Array<string>;  // optional extended details\n}\n\n/**\n * @deprecated\n */\nexport interface ISitePermissions {\n  canRequestPublicKey: boolean;\n  canRequestSign: boolean;\n}\n\nexport interface IConnectRequestPayload {\n  origin: string;\n  host: string;\n  permissions: ISitePermissions;\n}\n\nexport interface IGetPublicKeyRequestPayload {\n  origin: string;\n  host: string;\n}\n\nexport interface IGetNetworkRequestPayload {\n  origin: string;\n  host: string;\n}\n\nexport interface ISignXDRRequestPayload {\n  origin: string;\n  host: string;\n  xdr: string;\n  xdrType: 'Transaction' | 'AuthEntry';\n  publicKey?: string;\n  network?: string;\n}\n// ----- SDK and Content script types END\n\n// ----- Background and Content script types\nexport interface IRuntimeConnectResponse {\n  error: false;\n  payload: ISitePermissions;\n}\n\nexport interface IRuntimeGetPublicKeyResponse {\n  error: false;\n  payload: string;\n}\n\nexport interface IRuntimeSignXDRResponse {\n  error: false;\n  payload: {\n    signedXdr: string;\n    signerAddress: string;\n  };\n}\n\nexport interface IRuntimeGetNetworkResponse {\n  error: false;\n  payload: {\n    network: string,\n    networkPassphrase: string\n  };\n}\n\nexport interface IRuntimeErrorResponse {\n  error: true;\n  errorMessage: string;\n  code?: number;\n}\n\nexport type RuntimeResponse = IRuntimeConnectResponse\n  | IRuntimeGetPublicKeyResponse\n  | IRuntimeSignXDRResponse\n  | IRuntimeErrorResponse\n  | IRuntimeGetNetworkResponse;\n// ----- Background and Content script types END\n", "import {\n  EventType,\n  IConnectRequestPayload,\n  IGetNetworkRequestPayload,\n  IGetPublicKeyRequestPayload,\n  IRuntimeConnectResponse,\n  IRuntimeErrorResponse, IRuntimeGetNetworkResponse,\n  IRuntimeGetPublicKeyResponse,\n  IRuntimeSignXDRResponse,\n  ISignXDRRequestPayload,\n  SdkResponse,\n} from './interfaces';\n\nexport class xBullSDK {\n  isConnected = false;\n\n  constructor() {}\n\n  private sendEventToContentScript<T, R>(eventName: EventType, payload: T, nonce: string): Promise<{ data: { detail: R; eventId: string; returnFromCS?: boolean } }> {\n    return new Promise<{ data: { detail: R; eventId: string; returnFromCS?: boolean } }>(resolve => {\n      const eventListener = (event: any) => {\n        if (event.source !== window || !event.data || event.origin !== window.origin) {\n          return;\n        }\n\n        const response = event.data as { detail: R; eventId: string; returnFromCS?: boolean };\n\n        if (response.eventId === nonce) {\n          resolve(event);\n          window.removeEventListener('message', eventListener, false);\n        }\n      };\n\n      window.addEventListener('message', eventListener, false);\n\n      (window as any).webkit.messageHandlers.cordova_iab.postMessage(JSON.stringify({\n        type: eventName,\n        eventId: nonce,\n        detail: payload,\n      }));\n    });\n  }\n\n  /**\n   * This function ask the user to confirm they want to accept request from this website,\n   * this function is automatically called when using other functions.\n   */\n  async enableConnection(): Promise<void> {\n    const dispatchEventParams: IConnectRequestPayload = {\n      origin: window.origin,\n      host: window.location.host,\n      permissions: { canRequestPublicKey: true, canRequestSign: true },\n    };\n\n    const response = await this.sendEventToContentScript<\n      IConnectRequestPayload,\n      IRuntimeConnectResponse | IRuntimeErrorResponse\n    >(EventType.XBULL_CONNECT, dispatchEventParams, crypto.randomUUID());\n    const { detail } = response.data;\n\n    if (!detail || detail.error) {\n      throw {\n        code: detail?.code || -1,\n        message: detail?.errorMessage || 'Unexpected error',\n      };\n    }\n\n    this.isConnected = true;\n  }\n\n  /**\n   * https://github.com/stellar/stellar-protocol/blob/master/ecosystem/sep-0043.md#signtransaction\n   */\n  async getAddress(): Promise<SdkResponse<{ address: string }>> {\n    try {\n      await this.enableConnection();\n    } catch (e: any) {\n      return {\n        error: {\n          code: e?.code || -1,\n          message: e?.message || 'Unexpected error',\n        }\n      };\n    }\n\n    const dispatchEventParams: IGetPublicKeyRequestPayload = {\n      origin: window.origin,\n      host: window.location.host,\n    };\n\n    const response = await this.sendEventToContentScript<\n      IGetPublicKeyRequestPayload,\n      IRuntimeGetPublicKeyResponse | IRuntimeErrorResponse\n    >(EventType.XBULL_GET_PUBLIC_KEY, dispatchEventParams, crypto.randomUUID());\n\n    const { detail } = response.data;\n\n    if (!detail || detail.error) {\n      return {\n        error: {\n          code: detail?.code || -1,\n          message: detail?.errorMessage || 'Unexpected error',\n        }\n      };\n    }\n\n    return { address: detail.payload };\n  }\n\n  /**\n   * https://github.com/stellar/stellar-protocol/blob/master/ecosystem/sep-0043.md#signtransaction\n   */\n  async signTransaction(params: {\n    xdr: string,\n    opts?: {\n      networkPassphrase?: string,\n      address?: string;\n      submit?: boolean;\n      submitUrl?: string;\n    };\n  }): Promise<SdkResponse<{ signedTxXdr: string; signerAddress: string; }>> {\n    if (params.opts?.submit || params.opts?.submitUrl) {\n      return {\n        error: {\n          code: -1,\n          message: 'Parameters `submit` and `submitUrl` are not supported',\n        },\n      };\n    }\n\n    try {\n      await this.enableConnection();\n    } catch (e: any) {\n      return {\n        error: {\n          code: e?.code || -1,\n          message: e?.message || 'Unexpected error',\n        }\n      };\n    }\n\n    const dispatchEventParams: ISignXDRRequestPayload = {\n      origin: window.origin,\n      host: window.location.host,\n      network: params.opts?.networkPassphrase,\n      publicKey: params.opts?.address,\n      xdr: params.xdr,\n      xdrType: 'Transaction',\n    };\n\n    const response = await this.sendEventToContentScript<\n      ISignXDRRequestPayload,\n      IRuntimeSignXDRResponse | IRuntimeErrorResponse\n    >(EventType.XBULL_SIGN_XDR, dispatchEventParams, crypto.randomUUID());\n\n    const { detail } = response.data;\n\n    if (!detail || detail.error) {\n      return {\n        error: {\n          code: detail?.code || -1,\n          message: detail?.errorMessage || 'Unexpected error',\n        }\n      };\n    }\n\n    return {\n      signedTxXdr: detail.payload.signedXdr,\n      signerAddress: detail.payload.signerAddress,\n    };\n  }\n\n  /**\n   * This method returns the information of the currently selected network\n   */\n  async getNetwork(): Promise<SdkResponse<{ network: string; networkPassphrase: string; }>> {\n    try {\n      await this.enableConnection();\n    } catch (e: any) {\n      return {\n        error: {\n          code: e?.code || -1,\n          message: e?.message || 'Unexpected error',\n        }\n      };\n    }\n\n    const dispatchEventParams: IGetNetworkRequestPayload = {\n      origin: window.origin,\n      host: window.location.host,\n    };\n\n    const response = await this.sendEventToContentScript<\n      IGetNetworkRequestPayload,\n      IRuntimeGetNetworkResponse | IRuntimeErrorResponse\n    >(EventType.XBULL_GET_NETWORK, dispatchEventParams, crypto.randomUUID());\n\n    const { detail } = response.data;\n\n    if (!detail || detail.error) {\n      return {\n        error: {\n          code: detail?.code || -1,\n          message: detail?.errorMessage || 'Unexpected error',\n        }\n      };\n    }\n\n    return {\n      network: detail.payload.network,\n      networkPassphrase: detail.payload.networkPassphrase,\n    };\n  }\n}\n", "import { box, randomBytes } from 'tweetnacl';\nimport { decodeBase64, decodeUTF8, encodeBase64, encodeUTF8 } from 'tweetnacl-util';\nimport {\n  EventType,\n  IConnectParams,\n  IConnectRequestData,\n  IConnectResponseData,\n  IConnectResult,\n  InitialResponseListenerData,\n  IRejectResponse,\n  IRejectResult,\n  ISDKConstructor,\n  ISignParams, ISignRequestData,\n  ISignResponseData,\n  ISignResult,\n  isResponseError,\n  SdkResponse,\n} from './interfaces';\nimport {\n  firstValueFrom,\n  of,\n  Subject,\n  Subscription,\n  switchMap,\n  take,\n  takeUntil,\n  throwError,\n  timer\n} from 'rxjs';\nimport { xBullSDK } from './mobile-sdk';\n\nexport class xBullWalletConnect {\n  closeCurrentPromises$: Subject<void> = new Subject<void>();\n  closeObservables$: Subject<void> = new Subject<void>();\n\n  preferredTarget: Required<ISDKConstructor['preferredTarget']>;\n\n  target?: Window | null;\n  targetPublicKey?: string; // this value is encrypted\n  readonly walletUrl: string;\n\n  encryptForReceiver: (params: { data: string, receiverPublicKey: Uint8Array }) => { message: string, oneTimeCode: string };\n  decryptFromReceiver: (params: { payload: string; oneTimeCode: string; senderPublicKey: string }) => string;\n  publicKey: () => Uint8Array;\n  session: () => string;\n\n  initialResponse$: Subject<MessageEvent<InitialResponseListenerData>> = new Subject<MessageEvent<InitialResponseListenerData>>();\n  initialResponseCompleted$: Subject<void> = new Subject<void>();\n\n  connectResponse$: Subject<MessageEvent<IConnectResponseData | IRejectResponse>> = new Subject<MessageEvent<IConnectResponseData | IRejectResponse>>();\n  connectResult$: Subject<IConnectResult | IRejectResult> = new Subject<IConnectResult | IRejectResult>(); // the value is the public key returned from the wallet\n\n  signResponse$: Subject<MessageEvent<ISignResponseData | IRejectResponse>> = new Subject<MessageEvent<ISignResponseData | IRejectResponse>>();\n  signResult$: Subject<ISignResult | IRejectResult> = new Subject<ISignResult | IRejectResult>();\n\n  constructor(params?: ISDKConstructor) {\n    this.preferredTarget = params?.preferredTarget || 'extension';\n    this.walletUrl = params?.url || 'https://wallet.xbull.app/connect';\n    const sessionKeypair = box.keyPair();\n    const session = encodeBase64(randomBytes(24));\n\n    this.encryptForReceiver = (params: { data: string, receiverPublicKey: Uint8Array }) => {\n      const oneTimeCode = randomBytes(24);\n      const cipherText = box(\n        decodeUTF8(params.data),\n        oneTimeCode,\n        params.receiverPublicKey,\n        sessionKeypair.secretKey\n      );\n\n      return {\n        message: encodeBase64(cipherText),\n        oneTimeCode: encodeBase64(oneTimeCode),\n      };\n    };\n\n    this.decryptFromReceiver = (params: { payload: string; oneTimeCode: string; senderPublicKey: string }) => {\n      const decryptedMessage = box.open(\n        decodeBase64(params.payload),\n        decodeBase64(params.oneTimeCode),\n        decodeBase64(params.senderPublicKey),\n        sessionKeypair.secretKey,\n      );\n\n      if (!decryptedMessage) {\n        throw new Error('Decrypted message is null');\n      }\n\n      return encodeUTF8(decryptedMessage);\n    }\n\n    this.publicKey = () => sessionKeypair.publicKey;\n\n    this.session = () => session.slice();\n\n    const listener = (ev: any) => {\n      switch (ev.data.type as EventType) {\n        case EventType.XBULL_INITIAL_RESPONSE:\n          this.initialResponse$.next(ev);\n          break;\n\n        case EventType.XBULL_CONNECT_RESPONSE:\n          this.connectResponse$.next(ev);\n          break;\n\n        case EventType.XBULL_SIGN_RESPONSE:\n          this.signResponse$.next(ev);\n          break;\n      }\n    };\n\n    window.addEventListener('message', listener);\n\n    this.closeObservables$.asObservable()\n      .pipe(take(1))\n      .subscribe(() => {\n        window.removeEventListener('message', listener);\n      });\n  }\n\n  closeCurrentPromisesSubscription: Subscription = timer(1000, 1000)\n    .pipe(takeUntil(this.closeObservables$))\n    .subscribe(() => {\n      if (this.target?.closed) {\n        this.closeCurrentPromises$.next();\n      }\n    })\n\n  onInititalResponseSubscription: Subscription = this.initialResponse$\n    .pipe(takeUntil(this.closeObservables$))\n    .subscribe((ev: MessageEvent<InitialResponseListenerData>) => {\n      const decryptedMessage = this.decryptFromReceiver({\n        oneTimeCode: ev.data.oneTimeCode,\n        payload: ev.data.message,\n        senderPublicKey: ev.data.publicKey\n      });\n\n      const data = JSON.parse(decryptedMessage);\n\n      if (data.providedSession === this.session()) {\n        this.targetPublicKey = ev.data.publicKey;\n        this.initialResponseCompleted$.next();\n      }\n    });\n\n  onConnectResponseSubscription: Subscription = this.connectResponse$\n    .pipe(takeUntil(this.closeObservables$))\n    .subscribe((ev: MessageEvent<IConnectResponseData | IRejectResponse>) => {\n      if (!this.targetPublicKey) {\n        this.connectResult$.next({ success: false, message: 'Wallet encryption public key is not provided, request rejected.' })\n        return;\n      }\n\n      if (!ev.data.success) {\n        this.connectResult$.next({ success: false, message: 'Request rejected from the wallet' });\n        return;\n      }\n\n      const decryptedMessage = this.decryptFromReceiver({\n        oneTimeCode: ev.data.oneTimeCode,\n        payload: ev.data.message,\n        senderPublicKey: this.targetPublicKey,\n      });\n\n      const data: { publicKey: string } = JSON.parse(decryptedMessage);\n\n      this.connectResult$.next({ success: true, publicKey: data.publicKey });\n    });\n\n  onSignResponseSubscription: Subscription = this.signResponse$\n    .pipe(takeUntil(this.closeObservables$))\n    .subscribe((ev: MessageEvent<ISignResponseData | IRejectResponse>) => {\n      if (!this.targetPublicKey) {\n        this.signResult$.next({ success: false, message: 'Wallet encryption public key is not provided, request rejected.' })\n        return;\n      }\n\n      if (!ev.data.success) {\n        this.signResult$.next({ success: false, message: 'Request rejected from the wallet' });\n        return;\n      }\n\n      const decryptedMessage = this.decryptFromReceiver({\n        oneTimeCode: ev.data.oneTimeCode,\n        payload: ev.data.message,\n        senderPublicKey: this.targetPublicKey,\n      });\n\n      const data: { xdr: string } = JSON.parse(decryptedMessage);\n\n      this.signResult$.next({ success: true, xdr: data.xdr });\n    });\n\n  openWallet() {\n    if (!!this.target && !this.target.closed) {\n      this.target.close();\n      this.target = null;\n      this.closeCurrentPromises$.next();\n    }\n\n    this.target = window.open(\n      `${this.walletUrl}?public=${encodeURIComponent(encodeBase64(this.publicKey()))}&session=${encodeURIComponent(this.session())}`,\n      'xBull_Wallet_app',\n      'width=380,height=640,left=100,top=100'\n    );\n\n    return firstValueFrom(\n      this.initialResponseCompleted$\n        .pipe(takeUntil(this.closeCurrentPromises$))\n        .pipe(takeUntil(this.closeObservables$))\n    );\n  }\n\n  closeWallet() {\n    if (!!this.target) {\n      this.target?.close();\n      this.target = null;\n    }\n  }\n\n  async connect(params: IConnectParams = { canRequestPublicKey: true, canRequestSign: true }): Promise<string> {\n    const extensionSdk: xBullSDK = !!(window as any)?.webkit?.messageHandlers?.cordova_iab ? new xBullSDK() : (window as any).xBullSDK;\n    if (!!extensionSdk && this.preferredTarget === 'extension') {\n      const response: SdkResponse<{ address: string }> = await extensionSdk.getAddress();\n\n      if (isResponseError(response)) {\n        throw response.error;\n      } else {\n        return response.address;\n      }\n    } else {\n\n      await this.openWallet();\n\n      if (!this.target || !this.targetPublicKey) {\n        throw new Error(`xBull Wallet is not open, we can't connect with it`);\n      }\n\n      const { message, oneTimeCode } = this.encryptForReceiver({\n        data: JSON.stringify(params),\n        receiverPublicKey: decodeBase64(this.targetPublicKey),\n      })\n\n      const payload: IConnectRequestData = {\n        type: EventType.XBULL_CONNECT,\n        message,\n        oneTimeCode,\n      };\n\n      this.target.postMessage(payload, '*');\n\n      const result = this.connectResult$\n        .asObservable()\n        .pipe(switchMap(result => {\n          if (!result.success) {\n            this.closeWallet();\n            return throwError(() => new Error(result.message));\n          } else {\n            this.closeWallet();\n            return of(result.publicKey);\n          }\n        }))\n        .pipe(take(1))\n        .pipe(takeUntil(this.closeCurrentPromises$))\n        .pipe(takeUntil(this.closeObservables$));\n\n      return firstValueFrom(result);\n\n    }\n  }\n\n  async sign(params: ISignParams): Promise<string> {\n    const extensionSdk: xBullSDK = !!(window as any)?.webkit?.messageHandlers?.cordova_iab ? new xBullSDK() : (window as any).xBullSDK;\n    if (!!extensionSdk && this.preferredTarget === 'extension') {\n      const response = await extensionSdk.signTransaction({\n        xdr: params.xdr,\n        opts: {\n          networkPassphrase: params.network,\n          address: params.publicKey,\n        }\n      });\n\n      if (isResponseError(response)) {\n        throw response.error;\n      } else {\n        return response.signedTxXdr;\n      }\n    } else {\n      await this.openWallet();\n\n      if (!this.target || !this.targetPublicKey) {\n        throw new Error(`xBull Wallet is not open, we can't connect with it`);\n      }\n\n      if (typeof params.xdr !== 'string') {\n        throw new Error('XDR provided needs to be a string value');\n      }\n\n      const { message, oneTimeCode } = this.encryptForReceiver({\n        data: JSON.stringify(params),\n        receiverPublicKey: decodeBase64(this.targetPublicKey),\n      });\n\n      const payload: ISignRequestData = {\n        type: EventType.XBULL_SIGN,\n        message,\n        oneTimeCode,\n      };\n\n      this.target.postMessage(payload, '*');\n\n      const result = this.signResult$\n        .asObservable()\n        .pipe(switchMap(result => {\n          if (!result.success) {\n            this.closeWallet();\n            return throwError(() => new Error(result.message));\n          } else {\n            this.closeWallet();\n            return of(result.xdr);\n          }\n        }))\n        .pipe(take(1))\n        .pipe(takeUntil(this.closeCurrentPromises$))\n        .pipe(takeUntil(this.closeObservables$));\n\n      return firstValueFrom(result);\n    }\n  }\n\n  closeConnections() {\n    this.closeObservables$.next();\n    this.closeCurrentPromises$.next();\n    this.closeObservables$.complete();\n    this.closeCurrentPromises$.complete();\n  }\n}\n", "import { xBullWalletConnect } from '@creit.tech/xbull-wallet-connect';\nimport { ModuleInterface, ModuleType } from '../types';\nimport { parseError } from '../utils';\n\nexport const XBULL_ID = 'xbull';\n\nexport class xBullModule implements ModuleInterface {\n  moduleType: ModuleType = ModuleType.HOT_WALLET;\n\n  productId: string = XBULL_ID;\n  productName: string = 'xBull';\n  productUrl: string = 'https://xbull.app';\n  productIcon: string = 'https://stellar.creit.tech/wallet-icons/xbull.png';\n\n  async isAvailable(): Promise<boolean> {\n    return true;\n  }\n\n  async getAddress(): Promise<{ address: string }> {\n    try {\n      const bridge: xBullWalletConnect = new xBullWalletConnect();\n      const publicKey: string = await bridge.connect();\n      bridge.closeConnections();\n      return { address: publicKey };\n    } catch (e: any) {\n      throw parseError(e);\n    }\n  }\n\n  async signTransaction(\n    xdr: string,\n    opts?: {\n      networkPassphrase?: string;\n      address?: string;\n      path?: string;\n      submit?: boolean;\n      submitUrl?: string;\n    }\n  ): Promise<{ signedTxXdr: string; signerAddress?: string }> {\n    try {\n      const bridge: xBullWalletConnect = new xBullWalletConnect();\n\n      const signedXdr: string = await bridge.sign({\n        xdr,\n        publicKey: opts?.address,\n        network: opts?.networkPassphrase,\n      });\n\n      bridge.closeConnections();\n      return { signedTxXdr: signedXdr, signerAddress: opts?.address };\n    } catch (e: any) {\n      throw parseError(e);\n    }\n  }\n\n  async signAuthEntry(): Promise<{ signedAuthEntry: string; signerAddress?: string }> {\n    throw {\n      code: -3,\n      message: 'xBull does not support the \"signAuthEntry\" function',\n    };\n  }\n\n  async signMessage(): Promise<{ signedMessage: string; signerAddress?: string }> {\n    throw {\n      code: -3,\n      message: 'xBull does not support the \"signMessage\" function',\n    };\n  }\n\n  async getNetwork(): Promise<{ network: string; networkPassphrase: string }> {\n    throw {\n      code: -3,\n      message: 'xBull does not support the \"getNetwork\" function',\n    };\n  }\n}\n", "import { ModuleInterface, ModuleType } from '../types';\nimport { parseError } from '../utils';\n\ninterface SignTransactionProps {\n  xdr: string;\n  accountToSign?: string;\n  networkPassphrase?: string;\n}\n\ninterface SignBlobProps {\n  blob: string;\n  accountToSign: string;\n}\n\ninterface SignAuthEntryProps {\n  xdr: string;\n  accountToSign?: string;\n}\n\ndeclare const window: Window & {\n  hanaWallet?: {\n    stellar?: {\n      getPublicKey(): Promise<string>;\n      signTransaction({ xdr, accountToSign, networkPassphrase }: SignTransactionProps): Promise<string>;\n      signBlob({ blob, accountToSign }: SignBlobProps): Promise<string>;\n      signAuthEntry({ xdr, accountToSign }: SignAuthEntryProps): Promise<string>;\n    };\n  };\n};\n\nexport const HANA_ID = 'hana';\n\nexport class HanaModule implements ModuleInterface {\n  moduleType: ModuleType = ModuleType.HOT_WALLET;\n\n  productId: string = HANA_ID;\n  productName: string = 'Hana Wallet';\n  productUrl: string = 'https://hanawallet.io/';\n  productIcon: string = 'https://stellar.creit.tech/wallet-icons/hana.png';\n\n  async isAvailable(): Promise<boolean> {\n    return !!window.hanaWallet?.stellar;\n  }\n\n  async getAddress(): Promise<{ address: string }> {\n    const runChecks = async () => {\n      if (!window.hanaWallet?.stellar) {\n        throw new Error('Hana Wallet is not installed');\n      }\n    };\n\n    return runChecks()\n      .then(() => window.hanaWallet!.stellar!.getPublicKey())\n      .then(address => ({ address }))\n      .catch(e => {\n        throw parseError(e);\n      });\n  }\n\n  async signTransaction(\n    xdr: string,\n    opts?: {\n      networkPassphrase?: string;\n      address?: string;\n      path?: string;\n      submit?: boolean;\n      submitUrl?: string;\n    }\n  ): Promise<{ signedTxXdr: string; signerAddress?: string }> {\n    const runChecks = async () => {\n      if (!window.hanaWallet?.stellar) {\n        throw new Error('Hana Wallet is not installed');\n      }\n    };\n\n    const sign = async () =>\n      window.hanaWallet!.stellar!.signTransaction({\n        xdr,\n        accountToSign: opts?.address,\n        networkPassphrase: opts?.networkPassphrase,\n      });\n\n    return runChecks()\n      .then(sign)\n      .then(signedTxXdr => ({ signedTxXdr, signerAddress: opts?.address }))\n      .catch(e => {\n        throw parseError(e);\n      });\n  }\n\n  async signAuthEntry(\n    authEntry: string,\n    opts?: {\n      networkPassphrase?: string;\n      address?: string;\n      path?: string;\n    }\n  ): Promise<{ signedAuthEntry: string; signerAddress?: string }> {\n    const runChecks = async () => {\n      if (!window.hanaWallet?.stellar) {\n        throw new Error('Hana Wallet is not installed');\n      }\n    };\n\n    const sign = async () =>\n      window.hanaWallet!.stellar!.signAuthEntry({\n        xdr: authEntry,\n        accountToSign: opts?.address,\n      });\n\n    return runChecks()\n      .then(sign)\n      .then(signedAuthEntry => ({ signedAuthEntry, signerAddress: opts?.address }))\n      .catch(e => {\n        throw parseError(e);\n      });\n  }\n\n  async signMessage(): Promise<{ signedMessage: string; signerAddress?: string }> {\n    throw {\n      code: -3,\n      message: 'Hana does not support the \"signMessage\" function',\n    };\n  }\n\n  async getNetwork(): Promise<{ network: string; networkPassphrase: string }> {\n    throw {\n      code: -3,\n      message: 'Hana does not support the \"getNetwork\" function',\n    };\n  }\n}\n", "import { AlbedoModule } from './modules/albedo.module';\nimport { FreighterModule } from './modules/freighter.module';\nimport { LobstrModule } from './modules/lobstr.module';\nimport { RabetModule } from './modules/rabet.module';\nimport { xBullModule } from './modules/xbull.module';\nimport { HanaModule } from './modules/hana.module';\nimport { ModuleInterface } from './types';\n\nexport function allowAllModules(): ModuleInterface[] {\n  return [\n    new AlbedoModule(),\n    new FreighterModule(),\n    new RabetModule(),\n    new xBullModule(),\n    new LobstrModule(),\n    new HanaModule(),\n  ];\n}\n\nexport function parseError(e: any) {\n  return {\n    code: e?.error?.code || e?.code || -1,\n    message: e?.error?.message || e?.message || (typeof e === 'string' && e) || 'Unhandled error from the wallet',\n    ext: e?.error?.ext || e?.ext,\n  };\n}\n"],
  "mappings": "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",
  "names": ["root", "factory", "exports", "module", "define", "amd", "this", "SERVICE_TYPES", "EXTERNAL_SERVICE_TYPES", "__webpack_require__", "definition", "key", "o", "Object", "defineProperty", "enumerable", "get", "obj", "prop", "prototype", "hasOwnProperty", "call", "Symbol", "toStringTag", "value", "t", "s", "u", "i", "l", "c", "w", "d", "a", "_", "r", "sendMessageToContentScript", "msg", "MESSAGE_ID", "Date", "now", "Math", "random", "window", "postMessage", "source", "messageId", "location", "origin", "Promise", "resolve", "requestTimeout", "type", "REQUEST_CONNECTION_STATUS", "REQUEST_PUBLIC_KEY", "setTimeout", "isConnected", "publicKey", "removeEventListener", "messageListener", "event", "e", "data", "E", "messagedId", "clearTimeout", "addEventListener", "FreighterApiNodeError", "code", "message", "FreighterApiInternalError", "requestPublicKey", "async", "response", "console", "error", "apiError", "requestNetworkDetails", "REQUEST_NETWORK_DETAILS", "networkDetails", "network", "networkName", "networkUrl", "networkPassphrase", "sorobanRpcUrl", "getAddress", "address", "isBrowser", "req", "signTransaction", "transactionXdr", "opts", "accountToSign", "_accountToSign", "SUBMIT_TRANSACTION", "signedTransaction", "signerAddress", "signedTxXdr", "signMessage", "blob", "SUBMIT_BLOB", "signedMessage", "signedBlob", "signAuthEntry", "entryXdr", "SUBMIT_AUTH_ENTRY", "signedAuthEntry", "freighter", "requestConnectionStatus", "getNetwork", "requestNetwork", "getNetworkDetails", "isAllowed", "REQUEST_ALLOWED_STATUS", "requestAllowedStatus", "setAllowed", "SET_ALLOWED_STATUS", "setAllowedStatus", "REQUEST_ACCESS", "requestAccess", "WatchWalletChanges", "timeout", "fetchInfo", "cb", "isRunning", "publicKeyReq", "networkDetailsReq", "currentAddress", "currentNetwork", "currentNetworkPassphrase", "stop", "root", "factory", "exports", "module", "define", "amd", "this", "SERVICE_TYPES", "EXTERNAL_SERVICE_TYPES", "TX_STATUS", "__webpack_require__", "definition", "key", "o", "Object", "defineProperty", "enumerable", "get", "obj", "prop", "prototype", "hasOwnProperty", "call", "Symbol", "toStringTag", "value", "i", "t", "c", "T", "a", "d", "e", "CONNECTION_KEY", "sendMessageToContentScript", "msg", "MESSAGE_ID", "Date", "now", "Math", "random", "window", "postMessage", "source", "messageId", "location", "origin", "Promise", "resolve", "requestTimeout", "type", "REQUEST_CONNECTION_STATUS", "setTimeout", "isConnected", "removeEventListener", "messageListener", "event", "n", "data", "s", "messagedId", "clearTimeout", "addEventListener", "getPublicKey", "async", "isBrowser", "publicKey", "connectionKey", "response", "error", "REQUEST_ACCESS", "console", "requestPublicKey", "sessionStorage", "setItem", "transactionXdr", "getItem", "signedTransaction", "SIGN_TRANSACTION", "lobstrSignerExtension", "requestConnectionStatus", "signTransaction", "_", "i", "r", "x", "h", "l", "y", "n", "d", "o", "p", "k", "c", "x2", "u", "m", "s", "t2", "t3", "t4", "t5", "t6", "t7", "d2", "d3", "d4", "r2", "r3", "r4", "r5", "r6", "r7", "r8", "g", "f", "a", "v", "t", "t22", "e", "L", "reduce", "crypto", "f", "s", "i", "d", "d", "b", "p", "e", "_", "t", "f", "y", "g", "n", "v", "o", "s", "m", "i", "n", "r", "e", "from", "i", "l", "v", "g", "f", "n", "a", "e", "r", "o", "m", "i", "n", "v", "d", "i", "Subscription", "e", "_a", "empty", "timeout", "_a", "Subscriber", "ConsumerObserver", "SafeSubscriber", "x", "Observable", "observable", "_a", "x", "_a", "OperatorSubscriber", "err", "_a", "ConnectableObservable", "timestamp", "timestamp", "Subject", "_b", "_a", "observable", "AnonymousSubject", "_b", "_a", "BehaviorSubject", "_a", "ReplaySubject", "_a", "i", "last", "AsyncSubject", "_a", "Action", "state", "delay", "timeout", "AsyncAction", "state", "delay", "_a", "e", "AsapAction", "delay", "_a", "Scheduler", "delay", "state", "AsyncScheduler", "AsapScheduler", "QueueAction", "state", "delay", "QueueScheduler", "AnimationFrameAction", "delay", "_a", "AnimationFrameScheduler", "VirtualTimeScheduler", "_a", "VirtualAction", "state", "delay", "a", "x", "_a", "_b", "i", "delay", "repeat", "delay", "delay", "i", "iterator", "_a", "iterator", "NotificationKind", "Notification", "_a", "_a", "_b", "config", "isArray", "n", "isArray", "count", "first", "a", "config", "e", "state", "buffer", "config", "isFunction", "state", "isFunction", "WalletNetwork", "ModuleType", "store", "createStore", "name", "withProps", "allowedWallets", "allowedWallets$", "pipe", "select", "state", "modalTheme$", "modalTheme", "buttonTheme$", "buttonTheme", "activeAddress$", "activeAddress", "horizonUrl$", "horizonUrl", "setSelectedModuleId", "moduleId", "update", "setProp", "setNetwork", "network", "Object", "values", "WalletNetwork", "includes", "Error", "setModalTheme", "theme", "seButtonTheme", "setAllowedWallets", "data", "setAddress", "address", "removeAddress", "setHorizonUrl", "url", "StellarWalletsKit", "selectedModule", "target", "this", "modules", "find", "mod", "productId", "store", "getValue", "selectedModuleId", "code", "message", "params", "setWallet", "selectedWalletId", "setNetwork", "network", "modalTheme", "theme", "setModalTheme", "buttonTheme", "seButtonTheme", "getSupportedWallets", "then", "value", "setAllowedWallets", "Promise", "all", "map", "async", "timer", "r", "setTimeout", "id", "name", "productName", "type", "moduleType", "icon", "productIcon", "isAvailable", "race", "url", "productUrl", "Error", "setSelectedModuleId", "address", "getAddress", "setAddress", "xdr", "opts", "signTransaction", "networkPassphrase", "selectedNetwork", "authEntry", "signAuthEntry", "signMessage", "getNetwork", "disconnect", "removeAddress", "isButtonCreated", "buttonElement", "document", "createElement", "buttonText", "setAttribute", "horizonUrl", "setHorizonUrl", "container", "appendChild", "addEventListener", "openModal", "onWalletSelected", "option", "onConnect", "onDisconnect", "skipDisconnect", "remove", "modalElement", "modalTitle", "notAvailableText", "body", "listener", "event", "detail", "removeEventListener", "removeChild", "errorListener", "onClosed", "v", "s", "NODE_MODE", "global", "e", "v", "p", "s", "_a", "i", "c", "DEV_MODE", "NODE_MODE", "global", "debugLogEvent", "issueWarning", "_a", "trustedTypes", "s", "isArray", "isIterable", "l", "html", "i", "tag", "m", "strings", "_b", "from", "n", "v", "polyfillSupport", "DEV_MODE", "global", "issueWarning", "debugLogEvent", "JSCompiler_renameProperty", "DEV_MODE", "issueWarning", "_a", "polyfillSupport", "DEV_MODE", "issueWarning", "c", "_a", "context", "DEV_MODE", "issueWarning", "defaultPropertyDeclaration", "context", "v", "DEV_MODE", "issueWarning", "ReactiveState", "host", "source", "value", "this", "sub", "value$", "BehaviorSubject", "addController", "hostConnected", "subscribe", "next", "requestUpdate", "hostDisconnected", "unsubscribe", "modalDialogStyles", "css", "modalDialogBodyStyles", "modalHelpSection", "modalWalletsSection", "backdropStyles", "modalAnimations", "ModalThemes", "DARK", "bgColor", "textColor", "solidTextColor", "headerButtonColor", "dividerColor", "helpBgColor", "notAvailableTextColor", "notAvailableBgColor", "notAvailableBorderColor", "LIGHT", "StellarWalletsModal", "LitElement", "constructor", "super", "arguments", "this", "ignoreShowStatus", "showModal", "closingModal", "modalTitle", "notAvailableText", "allowedWallets", "ReactiveState", "allowedWallets$", "theme", "modalTheme$", "connectedCallback", "closeModal", "Promise", "r", "setTimeout", "dispatchEvent", "CustomEvent", "detail", "Error", "bubbles", "composed", "option", "isAvailable", "record", "window", "localStorage", "getItem", "usedWalletsIds", "JSON", "parse", "id", "filter", "setItem", "stringify", "e", "console", "error", "open", "url", "getSortedList", "sortedWallets", "value", "reduce", "all", "current", "available", "unavailable", "length", "usedWallets", "nonUsedWallets", "availableWallet", "find", "push", "sort", "a", "b", "indexOf", "getThemeStyles", "render", "helpSection", "html", "walletsSection", "map", "item", "i", "pickWalletOption", "icon", "name", "styleMap", "styles", "css", "modalDialogStyles", "modalDialogBodyStyles", "modalHelpSection", "backdropStyles", "modalAnimations", "modalWalletsSection", "__decorateClass", "property", "type", "Boolean", "reflect", "prototype", "state", "String", "customElement", "async", "fetchAccountBalance", "pk", "horizonUrl", "firstValueFrom", "horizonUrl$", "Error", "url", "URL", "pathname", "response", "fetch", "json", "balances", "find", "b", "asset_type", "balance", "async", "copyToClipboard", "textToCopy", "Error", "navigator", "clipboard", "writeText", "buttonContainer", "css", "buttonStyles", "dropdownWrapper", "ButtonThemes", "DARK", "bgColor", "textColor", "solidTextColor", "dividerColor", "buttonPadding", "buttonBorderRadius", "LIGHT", "StellarWalletsButton", "LitElement", "constructor", "super", "arguments", "this", "buttonText", "showDropdown", "showCopiedMessage", "activeAddress", "ReactiveState", "activeAddress$", "theme", "buttonTheme$", "getThemeStyles", "value", "onButtonClicked", "dispatchEvent", "CustomEvent", "bubbles", "composed", "closeDropdown", "disconnect", "removeAddress", "copyPublicKey", "copyToClipboard", "Promise", "r", "setTimeout", "startBalanceFetcher", "firstValueFrom", "horizonUrl$", "fetchAddressSubscription", "value$", "pipe", "switchMap", "async", "fetchAccountBalance", "catch", "subscribe", "balance", "accountBalance", "connectedCallback", "then", "disconnectedCallback", "unsubscribe", "render", "button", "html", "slice", "dropdown", "styleMap", "styles", "css", "buttonStyles", "buttonContainer", "dropdownWrapper", "__decorateClass", "property", "type", "String", "reflect", "prototype", "state", "customElement", "i", "n", "w", "h", "e", "v", "e", "ALBEDO_ID", "AlbedoModule", "constructor", "this", "moduleType", "ModuleType", "HOT_WALLET", "productId", "productName", "productUrl", "productIcon", "isAvailable", "getAddress", "albedo", "publicKey", "then", "result", "address", "pubkey", "catch", "e", "parseError", "xdr", "opts", "tx", "network", "networkPassphrase", "WalletNetwork", "PUBLIC", "signed_envelope_xdr", "signedTxXdr", "signerAddress", "signAuthEntry", "code", "message", "signMessage", "getNetwork", "AlbedoNetwork", "FREIGHTER_ID", "FreighterModule", "constructor", "this", "moduleType", "ModuleType", "HOT_WALLET", "productId", "productName", "productUrl", "productIcon", "runChecks", "isAvailable", "Error", "isConnected", "then", "error", "catch", "getAddress", "requestAccess", "address", "e", "parseError", "xdr", "opts", "async", "signedTxXdr", "signerAddress", "signTransaction", "networkPassphrase", "authEntry", "signedAuthEntry", "signAuthEntry", "toString", "message", "signedMessage", "signMessage", "getNetwork", "network", "LOBSTR_ID", "LobstrModule", "constructor", "this", "moduleType", "ModuleType", "HOT_WALLET", "productId", "productName", "productUrl", "productIcon", "isAvailable", "isConnected", "getAddress", "async", "Error", "runChecks", "then", "getPublicKey", "address", "catch", "e", "parseError", "xdr", "opts", "console", "warn", "networkPassphrase", "signTransaction", "signedTxXdr", "signAuthEntry", "code", "message", "signMessage", "getNetwork", "RABET_ID", "RabetModule", "constructor", "this", "moduleType", "ModuleType", "HOT_WALLET", "productId", "productName", "productUrl", "productIcon", "isAvailable", "window", "rabet", "getAddress", "async", "Error", "runChecks", "then", "connect", "publicKey", "address", "catch", "e", "parseError", "xdr", "opts", "networkPassphrase", "WalletNetwork", "PUBLIC", "TESTNET", "console", "warn", "sign", "result", "signedTxXdr", "signAuthEntry", "code", "message", "signMessage", "getNetwork", "RabetNetwork", "EventType", "isResponseError", "response", "error", "xBullSDK", "constructor", "this", "isConnected", "eventName", "payload", "nonce", "Promise", "resolve", "eventListener", "event", "source", "window", "data", "origin", "eventId", "removeEventListener", "addEventListener", "webkit", "messageHandlers", "cordova_iab", "postMessage", "JSON", "stringify", "type", "detail", "enableConnection", "dispatchEventParams", "host", "location", "permissions", "canRequestPublicKey", "canRequestSign", "response", "sendEventToContentScript", "EventType", "XBULL_CONNECT", "crypto", "randomUUID", "error", "code", "message", "errorMessage", "getAddress", "e", "XBULL_GET_PUBLIC_KEY", "address", "params", "opts", "submit", "submitUrl", "network", "networkPassphrase", "publicKey", "xdr", "xdrType", "XBULL_SIGN_XDR", "signedTxXdr", "signedXdr", "signerAddress", "getNetwork", "XBULL_GET_NETWORK", "xBullWalletConnect", "params", "this", "closeCurrentPromises$", "Subject", "closeObservables$", "initialResponse$", "initialResponseCompleted$", "connectResponse$", "connectResult$", "signResponse$", "signResult$", "closeCurrentPromisesSubscription", "timer", "pipe", "takeUntil", "subscribe", "target", "closed", "next", "onInititalResponseSubscription", "ev", "decryptedMessage", "decryptFromReceiver", "oneTimeCode", "data", "payload", "message", "senderPublicKey", "publicKey", "JSON", "parse", "providedSession", "session", "targetPublicKey", "onConnectResponseSubscription", "success", "onSignResponseSubscription", "xdr", "preferredTarget", "walletUrl", "url", "sessionKeypair", "box", "keyPair", "encodeBase64", "randomBytes", "encryptForReceiver", "cipherText", "decodeUTF8", "receiverPublicKey", "secretKey", "open", "decodeBase64", "Error", "encodeUTF8", "slice", "listener", "type", "EventType", "XBULL_INITIAL_RESPONSE", "XBULL_CONNECT_RESPONSE", "XBULL_SIGN_RESPONSE", "window", "addEventListener", "asObservable", "take", "removeEventListener", "openWallet", "close", "encodeURIComponent", "firstValueFrom", "closeWallet", "canRequestPublicKey", "canRequestSign", "extensionSdk", "webkit", "messageHandlers", "cordova_iab", "xBullSDK", "response", "getAddress", "isResponseError", "error", "address", "stringify", "XBULL_CONNECT", "postMessage", "result", "switchMap", "of", "throwError", "signTransaction", "opts", "networkPassphrase", "network", "signedTxXdr", "XBULL_SIGN", "closeConnections", "complete", "XBULL_ID", "xBullModule", "constructor", "this", "moduleType", "ModuleType", "HOT_WALLET", "productId", "productName", "productUrl", "productIcon", "isAvailable", "getAddress", "bridge", "xBullWalletConnect", "publicKey", "connect", "closeConnections", "address", "e", "parseError", "xdr", "opts", "signedXdr", "sign", "network", "networkPassphrase", "signedTxXdr", "signerAddress", "signAuthEntry", "code", "message", "signMessage", "getNetwork", "HANA_ID", "HanaModule", "constructor", "this", "moduleType", "ModuleType", "HOT_WALLET", "productId", "productName", "productUrl", "productIcon", "isAvailable", "window", "hanaWallet", "stellar", "getAddress", "async", "Error", "runChecks", "then", "getPublicKey", "address", "catch", "e", "parseError", "xdr", "opts", "signTransaction", "accountToSign", "networkPassphrase", "signedTxXdr", "signerAddress", "authEntry", "signAuthEntry", "signedAuthEntry", "signMessage", "code", "message", "getNetwork", "allowAllModules", "AlbedoModule", "FreighterModule", "RabetModule", "xBullModule", "LobstrModule", "HanaModule", "parseError", "e", "code", "error", "message", "ext"]
}
